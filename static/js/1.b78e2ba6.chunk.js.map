{"version":3,"sources":["components/Layout/StatusComponent/StatusComponent.module.css","components/MainComponent/GraphicsComponent/LabelsLayerComponent/labelsLayer.module.css","components/AboutPopup/AboutPopup.module.css","components/UI/ModalPopup/ModalPopup.module.css","containers/MainComponent/MainComponent.module.css","components/LayersList/LayerListToolbar/LayerListToolbar.module.css","components/LayersList/LayerEditForm/LayerEditForm.module.css","components/LayersList/LayerListElement/LayerListElement.module.css","containers/LayerList/LayersList.module.css","components/Layout/AsideComponent/AsideComponent.module.css","components/MainComponent/DocumentName/DocumentName.module.css","components/Layout/HeaderComponent/HeaderComponent.module.css","assets/images/debug-viewer-logo3.png","components/Layout/HeaderComponent/Logo/Logo.module.css","components/Layout/HeaderComponent/Navigation/Navigation.module.css","components/UI/Spinner/Spinner.module.css","containers/DocumentsComponent/DocumentsComponent.module.css","components/Documents/DocumentComponentCell.module.css","axios-database.js","store/actions/cloudStorageActions.js","components/UI/Button/Button.js","components/UI/ButtonSeparator/ButtonSeparator.js","components/MainComponent/ToolbarComponent/ToolbarComponent.js","models/stage.js","store/actions/stageActions.js","store/actionTypes.js","components/MainComponent/CanvasComponent/CanvasComponent.js","components/Layout/StatusComponent/StatusComponent.js","components/MainComponent/GraphicsComponent/stageComponent.js","models/graphics.js","models/utils.js","components/MainComponent/GraphicsComponent/graphics/shapeComponent.js","components/MainComponent/GraphicsComponent/graphics/imageComponent.js","components/MainComponent/GraphicsComponent/layerComponent.js","components/MainComponent/GraphicsComponent/domelements/labelComponent.js","components/MainComponent/GraphicsComponent/LabelsLayerComponent/labelsLayerComponent.js","models/model.js","models/layer.js","models/layers.js","components/MainComponent/GraphicsComponent/layersComponent.js","store/actions/appActions.js","store/actions/layersActions.js","tools/measurePointsTool.js","tools/measureShapesTool.js","tools/displayCoordsTool.js","components/UI/Modal.js","components/UI/ModalPopup/ModalPopup.js","components/AboutPopup/AboutPopup.js","dataParsers/parseJSON.js","components/Constructions/CloudDocument.js","containers/MainComponent/MainComponent.js","components/LayersList/LayerListToolbar/LayerListToolbar.js","components/LayersList/LayerEditForm/LayerEditForm.js","components/LayersList/LayerListElement/LayerListElement.js","containers/LayerList/LayersList.js","components/Layout/AsideComponent/AsideComponent.js","components/MainComponent/DocumentName/DocumentName.js","AppBody.js","components/Layout/HeaderComponent/Logo/Logo.js","components/Layout/HeaderComponent/Navigation/Navigation.js","components/Layout/HeaderComponent/HeaderComponent.js","models/job.js","dataParsers/parserODB.js","components/Constructions/Demo.js","components/Constructions/BooleanTest.js","components/Constructions/SkeletonRecognition.js","models/collisionDistance.js","components/Constructions/CollisionDemo.js","components/UI/Spinner/Spinner.js","components/Documents/DocumentComponentCell.js","containers/DocumentsComponent/DocumentsComponent.js","App.js","dataParsers/parser.js","store/reducers/app.js","store/reducers/layers.js","store/reducers/mouse.js","store/reducers/measureShapesTool.js","store/reducers/cloudStorage.js","store/reducer.js","middleware/log.js","dataParsers/parserXML.js","dataParsers/parsePGM.js","dataParsers/parseCSV.js","middleware/readFiles.js","dataParsers/parseTXT.js","middleware/pasteData.js","middleware/stageController.js","middleware/skeleton_recognition.js","Preloader.js","components/UI/Button/Button.module.css","components/UI/ButtonSeparator/ButtonSeparator.module.css","components/MainComponent/ToolbarComponent/ToolbarComponent.module.css","components/MainComponent/CanvasComponent/CanvasComponent.module.css"],"names":["module","exports","App-status-bar","LabelsLayer","LabelComponent","AboutPopup","BackDrop","ModalPopup","fadeIn","Main-content","Layer-list-toolbar","Layer-edit-form","Layer","LayerSelectionBox","LayerSelectionMark","LayerNameBox","Layer-displayed","Layer-undisplayed","App-layers","App-aside","DocumentName","App-header","App-header-documents-page","Logo","App-logo-spin","Navigation","active","Loader","load2","DocumentComponent","DocumentComponentGrid","DocumentComponentCell","DocumentComponentCellBottom","instance","axios","create","baseURL","getNewName","documents","name","inc","comparator","document","Object","values","find","updateDocumentInDatabase","id","payload","put","concat","addDocumentToDatabase","post","deleteDocumentFromDatabase","delete","fetchDocumentsFromDatabase","get","button","props","iconStyle","type","classes","IconTrigger","IconModeActive","IconModeNotActive","react_default","a","createElement","title","onClick","className","Button","lib_default","iconName","size","buttonSeparator","ButtonSeparator","IconSeparator","ToolbarComponent","openJobButtonClicked","_this","refs","browseFiles","click","this","style","fontSize","marginTop","marginBottom","display","ref","multiple","onChange","onFileSelected","onSaveDocumentButtonClicked","onClearAllButtonClicked","onHomeButtonPressed","measurePointsActive","onPanByDragPressed","onMeasurePointsButtonPressed","onMeasureBetweenShapesButtonPressed","onToggleWidthModePressed","onToggleVerticesPressed","onToggleLabelsPressed","showSkeletonRecognitionButton","onSkeletonRecognitionButtonPressed","onUnitClicked","units","onShowAboutPopupPressed","Component","createjs","window","Stage","canvas","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Touch","enable","assertThisInitialized","mouseMoveOutside","enableMouseOver","clientWidth","clientHeight","width","height","origin","x","y","oldOrigin","undefined","resolution","zoomFactor","stage","assign","shape","addChild","scalar","scalingFactor","canvasX","canvasY","worldX","worldY","point","W2C_X","W2C_Y","newOrigin","deltaX","deltaY","ratio","curRatio","Math","min","max","focusX","focusY","bIn","C2W_X","C2W_Y","zoomIn","zoomOut","newFocusX","newFocusY","panBy","zoom","dx","dy","tx","ty","minX","minY","maxX","maxY","Flatten","Box","handleMouseWheelMove","delta","CanvasComponent","canvasElement","React","createRef","handleMouseMove","event","focus","stageX","stageY","mouse","startX","startY","handleMouseDown","handleMouseUp","stopPropagation","preventDefault","panByMouseStop","handleMouseLeave","blur","body","handleMouseWheel","detail","wheelDelta","offsetX","offsetY","handleMouseWheelFox","layerX","layerY","current","on","addEventListener","passive","registerStage","tabIndex","styles","connect","state","app","dispatch","actions","StatusComponent","StageComponent","getContext","setTransform","update","onStageUnmounted","Fragment","children","Point","Segment","Circle","Arc","Polygon","graphics","arguments","length","radius","fill","Graphics","beginFill","command","circle","drawCircle","graphics_point","segment","strokeStyle","ignoreScale","stroke","setStrokeStyle","beginStroke","moveTo","ps","lineTo","pe","endStroke","graphics_segment","arc","pc","r","startAngle","endAngle","counterClockwise","graphics_arc","graphics_circle","box","drawRect","xmin","ymin","xmax","ymax","graphics_box","polygon","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","faces","Symbol","iterator","next","done","face","value","setGraphicsFace","err","return","graphics_polygon","setGraphicsEdge","edge","setGraphicsEdgeSegment","setGraphicsEdgeArc","first","start","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Utils","is_equal","obj1","obj2","equal","_arr","keys","_i","key","ShapeComponent","_Component","params","handleMouseOver","onMouseOver","model","handleMouseOut","onMouseOut","handleClick","layer","Shape","vertexShapes","geom","vertices","vertex","vertexShape","mouseEnabled","push","inherits","createClass","alpha","isEmpty","color","hovered","selected","widthOn","aperture","displayVertices","displayed","redrawVertices","redraw","nextProps","nextState","off","removeChild","clear","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","ImageComponent","bitmap","Bitmap","uri","image","naturalWidth","naturalHeight","scaleX","scaleY","center","regX","regY","LayerComponent","apply","shapes","map","index","imageComponent_ImageComponent","hoveredShape","firstMeasuredShape","secondMeasuredShape","displayLabels","shapeComponent_ShapeComponent","labelComponent","_ref","left","offsetLeft","top","offsetTop","position","label","labelsLayerComponent","trim","domelements_labelComponent","defaultStyle","Model","edited","affected","newShape","add","clone","JSON","stringify","merge","colors","Layers","layers","defaultName","lay","currentAffectedLayer","getAffected","_loop","col","findIndex","l","newLayers","filter","getNextColor","slice","sort","l1","l2","name1","toUpperCase","name2","toJSON","LayersComponent","affectedLayer","setHomeView","layerComponent_LayerComponent","LabelsLayerComponent_labelsLayerComponent","toggleDisplayLayer","MeasurePointsTool","endX","endY","measureStarted","measureCanvas","clearRect","coordX","originalEvent","coordY","cursor","draw","context","textX","textY","textWidth","backX","backY","pllX","pllY","abs","W2C_Scalar","beginPath","rect","lineWidth","text","measurement","font","measureText","textAlign","fillStyle","globalAlpha","fillRect","textHeight","fillText","dist","sqrt","format","num","divisor","toFixed","decimals","mainCanvas","MeasureShapesTool","labelShape","Text","shortestSegment","unscale","redrawLabel","firstMeasuredLayer","secondMeasuredLayer","DisplayCoordsTool","margin","padding","modalRoot","getElementById","Modal","el","appendChild","ReactDOM","createPortal","onBackDropClicked","ev","target","closePopup","handleKeyDown","code","elementDrag","dragX","clientX","dragY","clientY","element","closeDragElement","onmouseup","onmousemove","dragMouseDown","removeEventListener","showPopup","UI_Modal","onMouseDown","UI_ModalPopup_ModalPopup","showAboutPopup","toggleAboutPopup","version","href","parseJSON","models","parse","Array","faceArray","addFace","CloudDocument","_this2","match","then","response","firstLayer","data","layerData","addNewLayer","asyncOperationEnded","updateDocument","lastUpdated","panAndZoomToShape","toggleLayer","catch","console","log","setState","clearAll","asyncOperationStarted","cloudStorage","layerActions","owner","cloudActions","MainComponent","handleFileSelect","File","FileReader","FileList","files","forceUpdate","documentsList","dataURL","toDataURL","Date","toLocaleDateString","toLocaleTimeString","updateDocumentState","now","error","registerDocumentAddedToDatabase","history","clearCurrentDocument","clearAllLayers","e","toggleWidthMode","toggleDisplayVertices","onresize","resizeStage","handleKeyUp","displayCoordsTool","tools_displayCoordsTool","measurePointsTool","tools_measurePointsTool","measuredLayersDisplayed","measureShapesTool","distance","tools_measureShapesTool","MainComponent_ToolbarComponent_ToolbarComponent","togglePanByDrag","toggleMeasureBetweenPoints","toggleMeasureBetweenShapes","toggleDisplayLabels","applySkeletonRecognition","toggleUnits","MainComponent_CanvasComponent_CanvasComponent","stageComponent","destroyStage","layersComponent","handleMouseRollOverShape","handleMouseRollOutShape","handleClickOnShape","Layout_StatusComponent_StatusComponent","components_AboutPopup_AboutPopup","build","Route","path","component","ownProps","timestamp","LayerListToolbar","onAddLayerButtonClicked","onEditLayerButtonClicked","onDeleteLayerButtonClicked","onSortLayersButtonClicked","LayerEditForm","onSubmitLayerEditForm","form","parentElement","newLayer","layerName","layerTitle","setFocus","onSubmit","defaultValue","cols","rows","onEscapeLayerEditForm","LayerListElement","activeElement","nodeName","elem","hex","opacity","g","b","percent","replace","parseInt","substring","rgba","bgcolor","layerNameOpacity","onLayerClicked","onDoubleClick","onLayerDoubleClicked","onAffectedBoxClicked","backgroundColor","LayersList_LayerEditForm_LayerEditForm","LayersList","setAffectedNextLayer","setAffectedPrevLayer","onLayerListClicked","LayersList_LayerListToolbar_LayerListToolbar","maxHeight","LayersList_LayerListElement_LayerListElement","AsideComponent","handleChange","updateDocumentName","placeholder","prevState","pasteDataFromBuffer","clipboardData","MainComponent_DocumentName_DocumentName","onPaste","containers_MainComponent_MainComponent","onManageCloudStorageButtonClicked","LayerList_LayersList","Layout_AsideComponent_AsideComponent","logo","src","logoImg","alt","navigation","NavLink","to","exact","withRouter","location","pathname","Job","filename","profiles","materials","vector","inch2pixels","mils2pixels","InchToPixels","str","round","Number","MilsToPixels","parsePolygon","lines","i","line","terms","split","end_of_face","CW","CCW","slope","EQ","PI","parseLine","apertures","ap_value","parseArc","parseODB","job","arrayOfLines","substr","polarity","odbLine","odbArc","ap_key","Demo","resp","subtract","BooleanOp","intersect","BooleanTest","myPoly","myCircle","SkeletonRecognition","Vector","Line","CollisionDistance","polygon1","polygon2","collision_distance","POSITIVE_INFINITY","toConsumableArray","edges","edge2polygon","edge2","shapeBox","NEGATIVE_INFINITY","resp_edges","search","edge1","segment2segment","segment2arc","arc2arc","intersections","ip","_point$distanceTo","distanceTo","_point$distanceTo2","slicedToArray","segment1","segment2","point2shape","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","v_s","end","v_n","normalize","rotate90CCW","multiply","rotate90CW","_i2","v","tangent_point","translate","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","arc1","arc2","arc_enlarged","_arc1$distanceTo","translateArc","_arc1$distanceTo2","dist_tmp","EQ_0","GE","arc_reduced","_arc1$distanceTo3","_arc1$distanceTo4","LT","_arc1$distanceTo5","_arc1$distanceTo6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","vec","arc_tmp","newPolygon","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","arc_trans","CollisionDemo","parser","parseToPolygon","collision","polygon3","applyCollisionDemo","spinner","documentComponentCell","documentSelectedFromList","Link","DocumentsComponent","deleteDocumentFromDatabaseSucceed","componentDidMount","requestFetchDocumentsFromDatabaseSucceed","App","Layout_HeaderComponent_HeaderComponent","Switch","AppBody","showSpinner","Spinner","Parser","watchArray","indexOf","termArr","psArr","peArr","pcArr","nedgesStr","nedges","j","parseToSegment","parseToArc","points","pointArr","parseToPoints","parseToSegmentsArcs","unitsList","defaultAppState","process","originX","originY","importDataToNewLayer","action","curUnitsId","newUnits","measureShapesFirstClick","affectedLayerId","setAffected","toggleDisplayed","setEdited","setNameAndTitle","nextLayer","newCurLayer","newNextLayer","defaultMouseState","defaultMeasureShapesTool","measureShapesActive","shape1","shape2","_Flatten$Distance$dis","Distance","_Flatten$Distance$dis2","documentDefaultState","cloudStorageDefaultState","objectSpread","_state$documentsList","newList","objectWithoutProperties","stateDocumentsList","actionDocumentsList","hasOwnProperty","isUpToDate","reducer","combineReducers","getState","parseEdges","edgesXML","from","getAttribute","polygonsXML","islands","getElementsByTagName","_arr2","holes","_arr3","_i3","parseSegment","segmentXML","parseCurve","curveXML","parsePoint","pointXML","pgmResolution","microns2pixels","sizeX","toPixels","micron2pixels","micronToPixels","readAsText","reader","file","onload","theFile","string","result","namesplitted","extension","xmlDoc","DOMParser","parseFromString","titles","firstChild","nodeValue","profilesXML","_arr4","_i4","materialXML","_arr5","_i5","segmentsXML","_arr6","_i6","curvesXML","_arr7","_i7","curve","pointsXML","_arr8","_i8","parseXML","px","py","nx","ny","parseCSV","shapesArray","parseTXT","readAsImage","yStr","xStr","isNaN","parseImage","readAsDataURL","readFile","readFiles","pasteData","items","getAsString","stageController","resize","panByMouseStart","panByMouseMove","panToCoordinate","zoomToLimits","zoomByMouse","removeAllChildren","removeAllListeners","Algorithmia","skeleton_recognition","currentLayer","input","client","algo","pipe","output","row","store","createStore","applyMiddleware","Preloader","es","BrowserRouter","basename","src_App_0","App-toolbar","App-toolbar-units","App-canvas"],"mappings":"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","file":"static/js/1.b78e2ba6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-status-bar\":\"StatusComponent_App-status-bar__3yjbw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LabelsLayer\":\"labelsLayer_LabelsLayer__13jtP\",\"LabelComponent\":\"labelsLayer_LabelComponent__1n-i4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AboutPopup\":\"AboutPopup_AboutPopup__3A-Ey\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BackDrop\":\"ModalPopup_BackDrop__38gqK\",\"ModalPopup\":\"ModalPopup_ModalPopup__tiHI3\",\"fadeIn\":\"ModalPopup_fadeIn__1kcV2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Main-content\":\"MainComponent_Main-content__1huDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer-list-toolbar\":\"LayerListToolbar_Layer-list-toolbar__3h7SF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer-edit-form\":\"LayerEditForm_Layer-edit-form__3PKfb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer\":\"LayerListElement_Layer__TTm6c\",\"LayerSelectionBox\":\"LayerListElement_LayerSelectionBox__2y2BJ\",\"LayerSelectionMark\":\"LayerListElement_LayerSelectionMark__1YNk5\",\"LayerNameBox\":\"LayerListElement_LayerNameBox__rdxbt\",\"Layer-displayed\":\"LayerListElement_Layer-displayed__2ITp_\",\"Layer-undisplayed\":\"LayerListElement_Layer-undisplayed__v_ey_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-layers\":\"LayersList_App-layers__W6LER\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-aside\":\"AsideComponent_App-aside__3lf4P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DocumentName\":\"DocumentName_DocumentName__TjC-O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-header\":\"HeaderComponent_App-header__3BtxE\",\"App-header-documents-page\":\"HeaderComponent_App-header-documents-page__cbwKd\"};","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Logo\":\"Logo_Logo__LcHr-\",\"App-logo-spin\":\"Logo_App-logo-spin__1AT9j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Navigation\":\"Navigation_Navigation__IIHc3\",\"active\":\"Navigation_active__31kaL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BackDrop\":\"Spinner_BackDrop__aToxg\",\"Loader\":\"Spinner_Loader__1wKrs\",\"load2\":\"Spinner_load2__o7gmt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DocumentComponent\":\"DocumentsComponent_DocumentComponent__1LIYc\",\"DocumentComponentGrid\":\"DocumentsComponent_DocumentComponentGrid__1e_M-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DocumentComponentCell\":\"DocumentComponentCell_DocumentComponentCell__1t_jz\",\"DocumentComponentCellBottom\":\"DocumentComponentCell_DocumentComponentCellBottom__2vO6R\"};","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: \"https://debug-viewer.firebaseio.com/\"\r\n});\r\n\r\nexport default instance;\r\n","import * as ActionTypes from \"../actionTypes\";\r\nimport axios from \"../../axios-database\";\r\n\r\nconst defaultName = \"document\";\r\n\r\nexport const getNewName = (documents) => {\r\n    let name = defaultName;\r\n    let inc = 1;\r\n    let comparator = (document) => document.name === name;\r\n    while ( Object.values(documents).find(comparator) ) {\r\n        name = defaultName + inc;\r\n        inc++;\r\n    }\r\n    return name;\r\n};\r\n\r\n// export const updateDocumentsList = (documents) => {\r\n//     return {\r\n//         type: ActionTypes.DOCUMENTS_LIST_LOADED,\r\n//         documents: documents\r\n//     }\r\n// };\r\n\r\nexport const updateDocumentInDatabase = ( id, payload) => {\r\n    return axios.put(`/documents/${id}.json`, payload);\r\n};\r\n\r\nexport const addDocumentToDatabase = ( payload) => {\r\n    return axios.post('/documents.json', payload);\r\n};\r\n\r\nexport const fetchDocumentFromDatabase = (id) => {\r\n    return axios.get('/documents/' + id + '.json');\r\n};\r\n\r\nexport const deleteDocumentFromDatabase = (id) => {\r\n    return axios.delete('/documents/' + id + '.json');\r\n};\r\n\r\nexport const fetchDocumentsFromDatabase = () => {\r\n    return axios.get('/documents.json');\r\n};\r\n\r\nexport const registerDocumentAddedToDatabase = (id, lastUpdated) => {\r\n    return {\r\n        type: ActionTypes.REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED,\r\n        id: id,\r\n        lastUpdated: lastUpdated\r\n    }\r\n};\r\n\r\nexport const updateDocumentState = (lastUpdated) => {\r\n    return {\r\n        type: ActionTypes.REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED,\r\n        lastUpdated: lastUpdated\r\n    }\r\n};\r\n\r\nexport const updateDocumentName = (name) => {\r\n    return {\r\n        type: ActionTypes.DOCUMENT_NAME_UPDATED,\r\n        name\r\n    }\r\n};\r\n\r\nexport const clearCurrentDocument = () => {\r\n    return {\r\n        type: ActionTypes.CLEAR_ALL_BUTTON_CLICKED,\r\n    }\r\n};\r\n\r\nexport const requestFetchDocumentFromDatabaseSucceed = (id, name, owner, lastUpdated) => {\r\n    return {\r\n        type: ActionTypes.REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED,\r\n        id,\r\n        name,\r\n        owner,\r\n        lastUpdated\r\n    }\r\n};\r\n\r\nexport const deleteDocumentFromDatabaseSucceed = (id) => {\r\n    return {\r\n        type: ActionTypes.DELETE_DOCUMENT_FROM_DATABASE_SUCCEED,\r\n        id\r\n    }\r\n};\r\n\r\nexport const updateCurrentDocument = (document) => {\r\n    return {\r\n        type: ActionTypes.DOCUMENT_SELECTED_FROM_LIST,\r\n        document\r\n    }\r\n};\r\n\r\nexport const requestFetchDocumentsFromDatabaseSucceed = (documentsList) => {\r\n    return {\r\n        type: ActionTypes.REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED,\r\n        documentsList\r\n    }\r\n};\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport FontAwesome from \"react-fontawesome\";\r\nimport classes from \"./Button.module.css\";\r\n\r\nconst button = (props) => {\r\n    let iconStyle;\r\n    switch (props.type) {\r\n        case \"trigger\":\r\n            iconStyle = classes.IconTrigger;\r\n            break;\r\n        case \"mode\":\r\n            iconStyle = props.active ? classes.IconModeActive : classes.IconModeNotActive;\r\n            break;\r\n        default:\r\n            iconStyle = classes.IconTrigger;\r\n            break;\r\n    }\r\n    return (\r\n        <button title={props.title} onClick={props.onClick} className={classes.Button}>\r\n            <FontAwesome\r\n                name={props.iconName}\r\n                size='2x'\r\n                className={iconStyle}\r\n            />\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default button;","import React from 'react';\r\nimport FontAwesome from \"react-fontawesome\";\r\nimport classes from \"./ButtonSeparator.module.css\";\r\n\r\nconst buttonSeparator = () => {\r\n    return (\r\n        <div className={classes.ButtonSeparator}>\r\n            <FontAwesome\r\n                name='ellipsis-v'\r\n                size='2x'\r\n                className={classes.IconSeparator}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default buttonSeparator;","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport Button from '../../../components/UI/Button/Button';\r\nimport Separator from '../../../components/UI/ButtonSeparator/ButtonSeparator';\r\n\r\nimport classes from './ToolbarComponent.module.css';\r\nimport '@fortawesome/fontawesome-free/css/all.css';\r\n\r\nclass ToolbarComponent extends Component {\r\n    openJobButtonClicked = () => this.refs.browseFiles.click();\r\n\r\n    render() {\r\n        return (\r\n            <div className={classes[\"App-toolbar\"]}>\r\n                {/*<h4>Toolbar</h4>*/}\r\n                <Button type=\"trigger\" title=\"Open files\" iconName='folder-open'\r\n                        onClick={this.openJobButtonClicked}\r\n                />\r\n\r\n                {/*<button title=\"Open file\" onClick={this.openJobButtonClicked}>*/}\r\n                {/*/!*<img src={open} alt=\"open\" />*!/*/}\r\n                {/*<FontAwesome*/}\r\n                {/*name='folder-open'*/}\r\n                {/*size='2x'*/}\r\n                {/*style={{color:\"grey\"}}*/}\r\n                {/*/>*/}\r\n                {/*</button>*/}\r\n\r\n                <input style={{fontSize: 16, marginTop: 5, marginBottom: 5, display: \"none\"}}\r\n                       type=\"file\" id=\"browseFiles\" ref=\"browseFiles\" name=\"files[]\" multiple\r\n                       onChange={this.props.onFileSelected}\r\n                />\r\n\r\n                <Button type=\"trigger\" title=\"Save document on cloud\" iconName='save'\r\n                        onClick={this.props.onSaveDocumentButtonClicked}\r\n                />\r\n\r\n                <Button type=\"trigger\" title=\"Clean current document\" iconName='broom'\r\n                        onClick={this.props.onClearAllButtonClicked}\r\n                />\r\n\r\n                <Separator/>\r\n\r\n                <Button type=\"trigger\" title=\"Zoom and pan to home view\" iconName='home'\r\n                        onClick={this.props.onHomeButtonPressed}\r\n                />\r\n\r\n                <Separator/>\r\n\r\n                <Button type=\"mode\" title=\"Pan by drag\" iconName='hand-paper'\r\n                        active={!this.props.measurePointsActive}\r\n                        onClick={this.props.onPanByDragPressed}\r\n                />\r\n\r\n                <Button type=\"mode\" title=\"Measure distance\" iconName='hand-lizard'\r\n                        active={this.props.measurePointsActive}\r\n                        onClick={this.props.onMeasurePointsButtonPressed}\r\n                />\r\n\r\n                <Separator/>\r\n\r\n                <Button type=\"trigger\" title=\"Measure distance between shapes\" iconName='ruler'\r\n                        onClick={this.props.onMeasureBetweenShapesButtonPressed}\r\n                />\r\n\r\n                <Button type=\"trigger\" title=\"Display solid or wire\" iconName='fill-drip'\r\n                        onClick={this.props.onToggleWidthModePressed}\r\n                />\r\n\r\n                <Button type=\"trigger\" title=\"Display vertices on/off\" iconName='draw-polygon'\r\n                        onClick={this.props.onToggleVerticesPressed}\r\n                />\r\n\r\n                <Button type=\"trigger\" title=\"Display labels on/off\" iconName='tag'\r\n                        onClick={this.props.onToggleLabelsPressed}\r\n                />\r\n\r\n                {this.props.showSkeletonRecognitionButton ? (\r\n                    <Button type=\"trigger\" title=\"Skeleton Recognition Demo\" iconName='tree'\r\n                            onClick={this.props.onSkeletonRecognitionButtonPressed}\r\n                    />\r\n                ) : null}\r\n\r\n                <Separator/>\r\n\r\n                <button className={classes[\"App-toolbar-units\"]}\r\n                        onClick={this.props.onUnitClicked}\r\n                >\r\n                    {this.props.units}\r\n                </button>\r\n\r\n                <Separator/>\r\n\r\n                <Button type=\"trigger\" title=\"About\" iconName='info'\r\n                        onClick={this.props.onShowAboutPopupPressed}\r\n                />\r\n\r\n                <Separator/>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ToolbarComponent;","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\nimport Flatten from 'flatten-js';\r\nlet createjs = window.createjs;\r\n\r\nclass Stage extends createjs.Stage {\r\n    constructor(canvas) {\r\n        super(canvas);\r\n\r\n        createjs.Touch.enable(this);\r\n        this.mouseMoveOutside = false;   // true;\r\n        // this.enableDOMEvents(false);\r\n        this.enableMouseOver(20);\r\n\r\n        if (this.canvas.clientWidth > 0 && this.canvas.clientHeight > 0) {\r\n            this.canvas.width = this.canvas.clientWidth;\r\n            this.canvas.height = this.canvas.clientHeight;\r\n            // this.updateViewport(this.canvas.width, this.canvas.height);\r\n        }\r\n        this.origin = {x: this.canvas.width / 2, y: this.canvas.height / 2};\r\n        this.oldOrigin = {x: undefined, y: undefined};   // used by pan\r\n        this.resolution = 0.00001;          // MM 2 Pixels when zoomFactor = 1;\r\n        this.zoomFactor = 1.0;\r\n    }\r\n\r\n    get box() {\r\n        let minX = this.C2W_X(0);\r\n        let minY = this.C2W_Y(this.canvas.height);\r\n        let maxX = this.C2W_X(this.canvas.width);\r\n        let maxY = this.C2W_Y(0);\r\n\r\n        return ( new Flatten.Box(minX, minY, maxX, maxY) );\r\n    }\r\n\r\n    clone() {\r\n        let stage = new Stage(this.canvas);\r\n        return Object.assign(stage, this);\r\n    }\r\n\r\n    add(shape) {\r\n        this.addChild(shape);\r\n        return this;\r\n    }\r\n\r\n    scalingFactor() {\r\n        return this.resolution * this.zoomFactor;\r\n    }\r\n\r\n    C2W_Scalar(scalar) {\r\n        return (scalar / this.scalingFactor());\r\n    }\r\n\r\n    W2C_Scalar(scalar) {\r\n        return (this.scalingFactor() * scalar);\r\n    }\r\n\r\n    C2W_X(canvasX) {\r\n        return ((canvasX - this.origin.x) / this.scalingFactor());\r\n    }\r\n\r\n    C2W_Y(canvasY) {\r\n        return ((this.origin.y - canvasY) / this.scalingFactor());\r\n    }\r\n\r\n    W2C_X(worldX) {\r\n        return (this.scalingFactor() * worldX + this.origin.x);\r\n    }\r\n\r\n    W2C_Y(worldY) {\r\n        return (this.origin.y - this.scalingFactor() * worldY);\r\n    }\r\n\r\n    W2C(point) {\r\n        return {x: this.W2C_X(point.x), y: this.W2C_Y(point.y)}\r\n    }\r\n\r\n    panTo(newOrigin) {\r\n        this.origin = {x: newOrigin.x, y: newOrigin.y}\r\n    }\r\n\r\n    panBy(deltaX, deltaY) {\r\n        this.origin = {\r\n            x: this.origin.x + deltaX,\r\n            y: this.origin.y + deltaY\r\n        }\r\n    }\r\n\r\n    // zoom by 10% each time\r\n    zoomIn(ratio) {\r\n        let curRatio = ratio || 1.1;\r\n        this.zoomFactor = Math.min(10000000, curRatio * this.zoomFactor);\r\n    }\r\n\r\n    zoomOut(ratio) {\r\n        let curRatio = ratio || 1.1;\r\n        this.zoomFactor = Math.max(0.001, this.zoomFactor / curRatio);\r\n    }\r\n\r\n    // ZoomIn/Out + \"Focus follows mouse\"\r\n    zoom(focusX, focusY, bIn, ratio) {\r\n        let worldX = this.C2W_X(focusX);    // world coordinate of mouse focus before zoom\r\n        let worldY = this.C2W_Y(focusY);\r\n\r\n        bIn ? this.zoomIn(ratio) : this.zoomOut(ratio);\r\n\r\n        let newFocusX = this.W2C_X(worldX); // canvas coordinate after zoom\r\n        let newFocusY = this.W2C_Y(worldY);\r\n\r\n        this.panBy(focusX - newFocusX, focusY - newFocusY);\r\n\r\n        return [newFocusX, newFocusY];\r\n    }\r\n\r\n    zoomByMouse(focusX, focusY, bIn, ratio) {\r\n        this.zoom(focusX, focusY, bIn, ratio);\r\n    }\r\n\r\n    zoomToLimits(width, height) {\r\n        // prevent zero division in case of single point box\r\n        if (width === 0) width = 400000;\r\n        if (height === 0) height = 400000;\r\n        let resolution = Math.min(this.canvas.width / (1.1*width), this.canvas.height / (1.1*height));\r\n        let zoomFactor = resolution / this.resolution;\r\n        let ratio = zoomFactor / this.zoomFactor;\r\n        let bIn = true; //ratio > 1;\r\n\r\n        let focusX = this.canvas.width/2;\r\n        let focusY = this.canvas.height/2;\r\n        this.zoom(focusX, focusY, bIn, ratio);\r\n    }\r\n\r\n    resize() {\r\n        // this.origin.x = this.canvas.width / 2;\r\n        // this.origin.y = this.canvas.height / 2;\r\n        if (this.canvas.clientWidth > 0 && this.canvas.clientHeight > 0) {\r\n            this.canvas.width = this.canvas.clientWidth;\r\n            this.canvas.height = this.canvas.clientHeight;\r\n        }\r\n    }\r\n\r\n    // drawSomething() {\r\n    //     let shape = new Shape();\r\n    //     shape.graphics.beginFill('red').drawRect(0, 0, 20, 20);\r\n    //     this.addChild(shape);\r\n    //     this.update();\r\n    // }\r\n\r\n    panByMouseStart() {\r\n        this.oldOrigin.x = this.origin.x;\r\n        this.oldOrigin.y = this.origin.y;\r\n    }\r\n\r\n    panByMouseMove(dx, dy) {\r\n        if (dx !== undefined && dy !== undefined &&\r\n            this.oldOrigin.x !== undefined && this.oldOrigin.y !== undefined) {\r\n            this.origin = {\r\n                    x: this.oldOrigin.x + dx,\r\n                    y: this.oldOrigin.y + dy\r\n                };\r\n        }\r\n    }\r\n\r\n    panByMouseStop() {\r\n        this.oldOrigin.x = undefined;\r\n        this.oldOrigin.y = undefined;\r\n        this.tx = undefined;\r\n        this.ty = undefined;\r\n    }\r\n\r\n    panToCoordinate(x, y) {\r\n        let canvasX = this.W2C_X(x);\r\n        let canvasY = this.W2C_Y(y);\r\n\r\n        let dx = this.canvas.width / 2 - canvasX;\r\n        let dy = this.canvas.height / 2 - canvasY;\r\n        this.panBy(dx, dy);\r\n    }\r\n}\r\n\r\nexport default Stage;\r\n","import * as ActionTypes from '../actionTypes';\r\n\r\nexport const registerStage = (stage) => {\r\n    return {\r\n        type: ActionTypes.NEW_STAGE_CREATED,\r\n        stage: stage\r\n    }\r\n};\r\n\r\nexport const handleMouseDown = (stage, x, y) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_DOWN_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y\r\n    }\r\n};\r\n\r\nexport const handleMouseUp = (stage, x, y) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_UP_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y\r\n    }\r\n};\r\n\r\nexport const handleMouseMove = (stage, x, y, dx, dy) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_MOVED_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y,\r\n        dx: dx,\r\n        dy: dy\r\n    }\r\n};\r\n\r\nexport const handleMouseWheelMove = (stage, x, y, delta) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y,\r\n        delta: delta\r\n    }\r\n};\r\n","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\nexport const NEW_STAGE_CREATED = \"NEW_STAGE_CREATED\";\r\nexport const STAGE_RESIZED = \"STAGE_RESIZED\";\r\nexport const NEW_SHAPE_PASTED = \"NEW_SHAPE_PASTED\";\r\nexport const CLEAR_ALL = \"CLEAR_ALL\";\r\nexport const STAGE_UNMOUNTED = \"STAGE_UNMOUNTED\";\r\n\r\n/** Toolbar buttons **/\r\nexport const PAN_BY_DRAG_BUTTON_CLICKED = \"PAN_BY_DRAG_BUTTON_CLICKED\";\r\n// export const SAVE_DOCUMENT_BUTTON_CLICKED = \"SAVE_DOCUMENT_BUTTON_CLICKED\";\r\nexport const MANAGE_CLOUD_STORAGE_BUTTON_CLICKED = \"MANAGE_CLOUD_STORAGE_BUTTON_CLICKED\";\r\n\r\nexport const MEASURE_POINTS_BUTTON_PRESSED = \"MEASURE_POINTS_BUTTON_PRESSED\";\r\nexport const MEASURE_SHAPES_BUTTON_PRESSED = \"MEASURE_SHAPES_BUTTON_PRESSED\";\r\nexport const TOGGLE_ABOUT_POPUP_CLICKED = \"TOGGLE_ABOUT_POPUP_CLICKED\";\r\n// export const CLOSE_ABOUT_POPUP_BUTTON_PRESSED = \"CLOSE_ABOUT_POPUP_BUTTON_PRESSED\";\r\nexport const TOGGLE_UNITS_CLICKED = \"TOGGLE_UNITS_CLICKED\";\r\nexport const TOGGLE_WIDTH_MODE_CLICKED = \"TOGGLE_WIDTH_MODE_CLICKED\";\r\nexport const TOGGLE_DISPLAY_VERTICES_CLICKED = \"TOGGLE_DISPLAY_VERTICES_CLICKED\";\r\nexport const TOGGLE_DISPLAY_LABELS_CLICKED = \"TOGGLE_DISPLAY_LABELS_CLICKED\";\r\n\r\nexport const MOUSE_MOVED_ON_STAGE = \"MOUSE_MOVED_ON_STAGE\";\r\nexport const MOUSE_DOWN_ON_STAGE = \"MOUSE_DOWN_ON_STAGE\";\r\nexport const MOUSE_UP_ON_STAGE = \"MOUSE_UP_ON_STAGE\";\r\nexport const MOUSE_WHEEL_MOVE_ON_STAGE = \"MOUSE_WHEEL_MOVE_ON_STAGE\";\r\n\r\nexport const MOUSE_ROLL_OVER_SHAPE = \"MOUSE_ROLL_OVER_SHAPE\";\r\nexport const MOUSE_ROLL_OUT_SHAPE = \"MOUSE_ROLL_OUT_SHAPE\";\r\nexport const MOUSE_CLICKED_ON_SHAPE = \"MOUSE_CLICKED_ON_SHAPE\";\r\n\r\n// export const HOME_BUTTON_CLICKED = \"HOME_BUTTON_CLICKED\";\r\nexport const PAN_TO_COORDINATE = \"PAN_TO_COORDINATE\";\r\nexport const PAN_AND_ZOOM_TO_SHAPE = \"PAN_AND_ZOOM_TO_SHAPE\";\r\n\r\nexport const LAYER_LIST_PANEL_PRESSED = \"LAYER_LIST_PANEL_PRESSED\";\r\nexport const ADD_LAYER_BUTTON_PRESSED = \"ADD_LAYER_BUTTON_PRESSED\";\r\nexport const ADD_NEW_LAYER = \"ADD_NEW_LAYER\";\r\nexport const DELETE_LAYER_BUTTON_PRESSED = \"DELETE_LAYER_BUTTON_PRESSED\";\r\nexport const SORT_LAYERS_BUTTON_PRESSED = \"SORT_LAYERS_BUTTON_PRESSED\";\r\nexport const CLEAN_AND_UPDATE_LAYERS = \"CLEAN_AND_UPDATE_LAYERS\";\r\n\r\nexport const TOGGLE_DISPLAY_LAYER_PRESSED = \"TOGGLE_DISPLAY_LAYER_PRESSED\";\r\nexport const TOGGLE_AFFECTED_LAYER_PRESSED=\"TOGGLE_AFFECTED_LAYER_PRESSED\";\r\nexport const OPEN_LAYER_EDIT_FORM_PRESSED = \"OPEN_LAYER_EDIT_FORM_PRESSED\";\r\nexport const SUBMIT_LAYER_EDIT_FORM_PRESSED = \"SUBMIT_LAYER_EDIT_FORM_PRESSED\";\r\nexport const ESCAPE_LAYER_EDIT_FORM_PRESSED = \"ESCAPE_LAYER_EDIT_FORM_PRESSED\";\r\n\r\nexport const LAYERS_LIST_ARROW_DOWN_PRESSED = \"LAYERS_LIST_ARROW_DOWN_PRESSED\";\r\nexport const LAYERS_LIST_ARROW_UP_PRESSED = \"LAYERS_LIST_ARROW_UP_PRESSED\";\r\n\r\n// export const TOGGLE_WATCH_EXPAND_CLICKED = \"TOGGLE_WATCH_EXPAND_CLICKED\";\r\n\r\nexport const FILENAME_LIST_SELECTED = \"FILENAME_LIST_SELECTED\";\r\nexport const INPUT_FILE_LOADED = \"INPUT_FILE_LOADED\";\r\nexport const DATA_FROM_BUFFER_PASTED = \"DATA_FROM_BUFFER_PASTED\";\r\n\r\n/** AABB Distance Measurement Demo **/\r\nexport const AABB_DEMO_URI = \"AABB_DEMO_URI\";\r\nexport const AABB_DEMO_NEXT_DIST_STEP = \"AABB_DEMO_NEXT_DIST_STEP\";\r\nexport const AABB_TREE_NEXT_LEVEL = \"AABB_TREE_NEXT_LEVEL\";\r\n\r\n/** Collision demo **/\r\nexport const COLLISION_DEMO_URI = \"COLLISION_DEMO_URI\";\r\nexport const COLLISION_DEMO_BUTTON_PRESSED = \"COLLISION_DEMO_BUTTON_PRESSED\";\r\n\r\n/** Skeleton recognition demo **/\r\nexport const SKELETON_RECOGNITION_URI = \"SKELETON_RECOGNITION_URI\";\r\nexport const SKELETON_RECOGNITION_BUTTON_PRESSED=\"SKELETON_RECOGNITION_BUTTON_PRESSED\";\r\n\r\nexport const ASYNC_OPERATION_STARTED = \"ASYNC_OPERATION_STARTED\";\r\nexport const ASYNC_OPERATION_ENDED = \"ASYNC_OPERATION_ENDED\";\r\n\r\n/** Documents list **/\r\nexport const REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED = \"REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED\";\r\nexport const REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED = \"REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED\";\r\nexport const REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED = \"REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED\";\r\nexport const REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED = \"REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED\";\r\nexport const DELETE_DOCUMENT_FROM_DATABASE_SUCCEED = \"DELETE_DOCUMENT_FROM_DATABASE_SUCCEED\";\r\nexport const DOCUMENT_SELECTED_FROM_LIST = \"DOCUMENT_SELECTED_FROM_LIST\";\r\nexport const DOCUMENT_NAME_UPDATED = \"DOCUMENT_NAME_UPDATED\";\r\nexport const CLEAR_ALL_BUTTON_CLICKED = \"CLEAR_ALL_BUTTON_CLICKED\";","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport styles from \"./CanvasComponent.module.css\";\r\nimport Stage from '../../../models/stage';\r\nimport { connect } from \"react-redux\";\r\n// import * as ActionTypes from \"../../../store/actionTypes\";\r\nimport * as actions from '../../../store/actions/stageActions';\r\n\r\nclass CanvasComponent extends Component {\r\n    canvasElement = React.createRef();\r\n\r\n    handleMouseMove = (event) => {\r\n        this.props.stage.canvas.focus();\r\n        this.props.handleMouseMove(\r\n            this.props.stage,\r\n            event.stageX,\r\n            event.stageY,\r\n            this.props.mouse.startX ? event.stageX - this.props.mouse.startX : undefined,\r\n            this.props.mouse.startY ? event.stageY - this.props.mouse.startY : undefined\r\n        );\r\n    };\r\n\r\n    handleMouseDown = (event) => {\r\n        this.props.handleMouseDown(this.props.stage, event.stageX, event.stageY);\r\n    };\r\n\r\n    handleMouseUp = (event) => {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        this.props.stage.panByMouseStop();\r\n        this.props.handleMouseUp(this.props.stage, event.stageX, event.stageY);\r\n    };\r\n\r\n    handleMouseLeave = (event) => {   // nothing works except click\r\n        this.props.stage.canvas.blur();\r\n        document.body.focus();\r\n    };\r\n\r\n    handleMouseWheel = (event) => {\r\n        /*event.preventDefault();*/\r\n\r\n        let delta = event.detail || event.wheelDelta;\r\n        if (delta !== 0) {\r\n            this.props.handleMouseWheelMove(this.props.stage, event.offsetX, event.offsetY, delta);\r\n        }\r\n    };\r\n\r\n    handleMouseWheelFox = (event) => {\r\n        /*event.preventDefault();*/\r\n        if (event.detail !== 0) {\r\n            this.props.handleMouseWheelMove(this.props.stage, event.layerX, event.layerY, -event.detail);\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        let stage = new Stage(this.canvasElement.current);\r\n\r\n        // stage.setClearColor(\"#FFFFFF\");\r\n        // stage.update();\r\n\r\n        stage.on(\"stagemousemove\", this.handleMouseMove);\r\n        stage.on(\"stagemousedown\", this.handleMouseDown);\r\n        stage.on(\"stagemouseup\", this.handleMouseUp);\r\n        stage.on(\"mouseleave\", this.handleMouseLeave);\r\n        stage.canvas.addEventListener(\"mousewheel\", this.handleMouseWheel, {passive: true});\r\n        stage.canvas.addEventListener(\"DOMMouseScroll\", this.handleMouseWheelFox, {passive: true});\r\n\r\n        this.props.registerStage(stage);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <canvas\r\n                tabIndex=\"1\"\r\n                ref={this.canvasElement}\r\n                id=\"mainCanvas\"\r\n                className={styles[\"App-canvas\"]}\r\n                width=\"100\"\r\n                height=\"100\"\r\n            >\r\n            </canvas>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        stage: state.app.stage,\r\n        mouse: state.mouse\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        registerStage: (stage) => dispatch(actions.registerStage(stage)),\r\n        handleMouseDown: (stage, x, y) => dispatch(actions.handleMouseDown(stage, x, y)),\r\n        handleMouseUp: (stage, x, y) => dispatch(actions.handleMouseUp(stage, x, y)),\r\n        handleMouseMove: (stage, x, y, dx, dy) => dispatch(actions.handleMouseMove(stage, x, y, dx, dy)),\r\n        handleMouseWheelMove: (stage, x, y, delta) => dispatch(actions.handleMouseWheelMove(stage, x, y, delta))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CanvasComponent);\r\n","/**\r\n * Created by alexanderbol on 17/06/2017.\r\n */\r\nimport React from 'react';\r\nimport styles from './StatusComponent.module.css';\r\n\r\nconst StatusComponent = () => {\r\n    return (\r\n        <div className={styles[\"App-status-bar\"]}>\r\n            <div>\r\n                <h5>\r\n                    &nbsp;\r\n                </h5>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StatusComponent;","import React, {Component} from 'react';\r\n// import Utils from \"../utils\";\r\n\r\nclass StageComponent extends Component {\r\n    // shouldComponentUpdate useless because always returns \"true\",\r\n    // Don't know why, maybe because of children?\r\n    // ----------------------------------------------------------\r\n    // shouldComponentUpdate(nextProps, nextState) {\r\n    //     if (Utils.is_equal(this.props, nextProps)) {\r\n    //         return false;\r\n    //     }\r\n    //     return true;\r\n    // }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.stage.canvas && this.props.stage.canvas.getContext('2d')) {\r\n\r\n            let origin = this.props.stage.origin;\r\n            let zoomFactor = this.props.stage.zoomFactor*this.props.stage.resolution;\r\n            this.props.stage.setTransform(origin.x, origin.y, zoomFactor, -zoomFactor);\r\n\r\n            this.props.stage.update();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.onStageUnmounted();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                {this.props.children}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default StageComponent;","import Flatten from 'flatten-js';\r\n\r\n// import * as createjs from '@createjs/easeljs';\r\nlet createjs = window.createjs;\r\nlet {Point, Segment, Circle, Arc, Polygon, Box} = Flatten;\r\n\r\n/* Provide conversion methods from FlattenJS objects to CreateJS Graphics */\r\nexport function graphics(shape, style = undefined) {\r\n    if (shape instanceof Point) {\r\n        return graphics_point(shape, style);\r\n    }\r\n    if (shape instanceof Segment) {\r\n        return graphics_segment(shape, style);\r\n    }\r\n    if (shape instanceof Arc) {\r\n        return graphics_arc(shape, style);\r\n    }\r\n    if (shape instanceof Circle) {\r\n        return graphics_circle(shape, style);\r\n    }\r\n    if (shape instanceof Box) {\r\n        return graphics_box(shape, style);\r\n    }\r\n    if (shape instanceof Polygon) {\r\n        return graphics_polygon(shape, style);\r\n    }\r\n    return null;\r\n}\r\n\r\n// Point.prototype.graphics = function(style) {\r\nfunction graphics_point(point, style) {\r\n    let radius = (style && style.radius) ? style.radius : 3;\r\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\r\n    let graphics = new createjs.Graphics();\r\n    graphics.fill = graphics.beginFill(fill).command;\r\n    graphics.circle = graphics.drawCircle(point.x, point.y, radius).command;\r\n    return graphics;\r\n};\r\n\r\n// Segment.prototype.graphics = function(style) {\r\nfunction graphics_segment(segment, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle !== undefined ? style.strokeStyle : 2;\r\n    let ignoreScale = style && style.ignoreScale !== undefined ? style.ignoreScale : true;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,1,0,10,ignoreScale)\r\n        .beginStroke(stroke)\r\n        .moveTo(segment.ps.x, segment.ps.y)\r\n        .lineTo(segment.pe.x, segment.pe.y)\r\n        .endStroke();\r\n};\r\n\r\n// Arc.prototype.graphics = function(style) {\r\nfunction graphics_arc(arc, style) {\r\n    // let startAngle = 2 * Math.PI - this.startAngle;\r\n    // let endAngle =  2 * Math.PI - this.endAngle;\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 2;\r\n    let ignoreScale = style && style.ignoreScale !== undefined ? style.ignoreScale : true;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,1,0,10,ignoreScale)\r\n        .beginStroke(stroke)\r\n        .arc(arc.pc.x, arc.pc.y, arc.r, arc.startAngle, arc.endAngle, !arc.counterClockwise)\r\n        .endStroke();\r\n};\r\n\r\n// Circle.prototype.graphics = function(style) {\r\nfunction graphics_circle(circle, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 2;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    // graphics.setStrokeStyle(2).beginStroke(\"black\").beginFill(\"red\").drawCircle(pcx, pcy, r);\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,0,0,10,true)\r\n        .beginStroke(stroke)\r\n        .drawCircle(circle.pc.x, circle.pc.y, circle.r)\r\n        .endStroke();\r\n};\r\n\r\n// Box.prototype.graphics = function(style) {\r\nfunction graphics_box(box, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    // graphics.setStrokeStyle(2).beginStroke(\"black\").beginFill(\"red\").drawCircle(pcx, pcy, r);\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,0,0,10,true)\r\n        .beginStroke(stroke)\r\n        .drawRect(box.xmin, box.ymin, box.xmax-box.xmin, box.ymax-box.ymin);\r\n};\r\n\r\nfunction setGraphicsEdgeSegment(graphics, segment) {\r\n    graphics.lineTo(segment.pe.x, segment.pe.y);\r\n}\r\n\r\nfunction setGraphicsEdgeArc(graphics, arc) {\r\n    // let startAngle = 2 * Math.PI - arc.startAngle;\r\n    // let endAngle = 2 * Math.PI - arc.endAngle;\r\n    graphics.arc(arc.pc.x, arc.pc.y, arc.r, arc.startAngle, arc.endAngle, !arc.counterClockwise);\r\n}\r\n\r\nfunction setGraphicsEdge(graphics, edge) {\r\n    if (edge.shape instanceof Segment) {\r\n        setGraphicsEdgeSegment(graphics, edge.shape);\r\n    }\r\n    else if (edge.shape instanceof Arc) {\r\n        setGraphicsEdgeArc(graphics, edge.shape);\r\n    }\r\n}\r\n\r\nfunction setGraphicsFace(graphics, face) {\r\n    let ps = face.first.start;\r\n    graphics.moveTo(ps.x, ps.y);\r\n\r\n    for (let edge of face) {\r\n        setGraphicsEdge(graphics, edge);\r\n    }\r\n}\r\n\r\n// Polygon.prototype.graphics = function(style) {\r\nfunction graphics_polygon(polygon, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\r\n    let stroke = style && style.stroke ? style.stroke : \"#FF0303\";\r\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\r\n    graphics.setStrokeStyle(strokeStyle,0,0,10,true);\r\n    graphics.stroke = graphics.beginStroke(stroke).command;\r\n    graphics.fill = graphics.beginFill(fill).command;\r\n\r\n    for (let face of polygon.faces) {\r\n        setGraphicsFace(graphics, face);\r\n    }\r\n\r\n    graphics.endStroke();\r\n    return graphics;\r\n};\r\n\r\n","const Utils = {\r\n    is_equal: (obj1, obj2) => {\r\n        let equal = true;\r\n        for (let key of Object.keys(obj2)) {\r\n            if (obj2[key] !== obj1[key]) {\r\n                equal = false;\r\n                break;\r\n            }\r\n        }\r\n        return equal;\r\n    }\r\n};\r\n\r\nexport default Utils;","/**\r\n * Created by alexanderbol on 19/06/2017.\r\n */\r\n\r\nimport {Component} from 'react';\r\n// import * as createjs from '@createjs/easeljs';\r\nimport {graphics} from '../../../../models/graphics';\r\nimport Utils from '../../../../models/utils';\r\n\r\nlet createjs = window.createjs;\r\nexport class ShapeComponent extends Component {\r\n    constructor(params) {\r\n        super();\r\n\r\n        this.shape = new createjs.Shape();\r\n        params.stage.addChild(this.shape);\r\n\r\n        this.vertexShapes = [];\r\n\r\n        for (let vertex of params.model.geom.vertices) {\r\n            let vertexShape = new createjs.Shape();\r\n            vertexShape.geom = vertex;   // augment Shape with geom struct\r\n            vertexShape.mouseEnabled = false;\r\n            params.stage.addChild(vertexShape);\r\n            this.vertexShapes.push(vertexShape);\r\n        }\r\n    }\r\n\r\n    handleMouseOver = (event) => {\r\n        this.props.onMouseOver(this.props.model);\r\n    };\r\n\r\n    handleMouseOut = (event) => {\r\n        this.props.onMouseOut();\r\n    };\r\n\r\n    handleClick = (event) => {\r\n        this.props.onClick(this.props.model, this.props.layer);\r\n    };\r\n\r\n    redrawVertices(stroke, fill, alpha) {\r\n        let stage = this.props.stage;\r\n\r\n        for (let vertexShape of this.vertexShapes) {\r\n            let vertex = vertexShape.geom;\r\n            if (vertexShape.graphics.isEmpty()) {\r\n                vertexShape.graphics = graphics(vertex,   // vertex.graphics({\r\n                    {\r\n                        stroke: stroke,     // this.props.color,\r\n                        fill: fill,\r\n                        radius: 3. / (stage.zoomFactor * stage.resolution)\r\n                    });\r\n            }\r\n            else {\r\n                vertexShape.graphics.circle.radius = 3. / (stage.zoomFactor * stage.resolution);\r\n                vertexShape.graphics.fill.style = fill;\r\n            }\r\n            vertexShape.alpha = alpha;\r\n        }\r\n    }\r\n\r\n    redraw() {\r\n        // Draw shape\r\n        let stage = this.props.stage;\r\n        let color = (this.props.hovered || this.props.selected) ? \"black\" : this.props.color;\r\n        let alpha = (this.props.hovered || this.props.selected) ? 1.0 : 0.6;\r\n        let widthOn = this.props.widthOn;\r\n\r\n        let strokeStyle = this.props.model.geom.aperture ? this.props.model.geom.aperture : undefined;\r\n        let fill = (widthOn && !this.props.displayVertices) ? this.props.color : \"white\";\r\n\r\n        if (this.shape.graphics.isEmpty()) {\r\n            this.shape.graphics = graphics(this.props.model.geom,{\r\n                strokeStyle: strokeStyle,\r\n                ignoreScale: true,\r\n                stroke: color,\r\n                fill: fill,\r\n                radius: 3. / (stage.zoomFactor * stage.resolution)\r\n            });\r\n\r\n            // this.skeletonShape = new createjs.Shape();\r\n            // this.skeletonShape.graphics = this.props.model.geom.graphics({\r\n            //     strokeStyle: 1,\r\n            //     ignoreScale: true,\r\n            //     stroke: color,\r\n            //     fill: fill,\r\n            //     radius: 3. / (stage.zoomFactor * stage.resolution)\r\n            // });\r\n            // this.skeletonShape.alpha = 1;\r\n            // this.props.stage.addChild(this.skeletonShape);\r\n        }\r\n        else {\r\n            if (this.shape.graphics.stroke) this.shape.graphics.stroke.style = color;\r\n            if (this.shape.graphics.fill) this.shape.graphics.fill.style = fill;\r\n            if (this.shape.graphics.circle) this.shape.graphics.circle.radius =\r\n                3. / (stage.zoomFactor * stage.resolution);\r\n        }\r\n        this.shape.alpha = this.props.displayed ? alpha : 0.0;\r\n\r\n        // let box = this.props.model.geom.box;\r\n        // this.shape.cache(box.xmin, box.ymin, box.xmax - box.xmin, box.ymax - box.ymin);\r\n\r\n        // Draw vertices\r\n        alpha = this.props.displayed && this.props.displayVertices ? 1.0 : 0.0;\r\n        this.redrawVertices(color, color, alpha);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.shape.on(\"mouseover\", this.handleMouseOver);\r\n        this.shape.on(\"mouseout\", this.handleMouseOut);\r\n        this.shape.on(\"click\", this.handleClick);\r\n\r\n        // this.shape.mouseEnabled = false;\r\n\r\n        this.redraw();\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if (Utils.is_equal(this.props, nextProps)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.redraw();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.shape.off(\"mouseover\", this.handleMouseOver);\r\n        this.shape.off(\"mouseout\", this.handleMouseOut);\r\n        this.shape.off(\"click\", this.handleClick);\r\n        this.props.stage.removeChild(this.shape);\r\n        this.shape.graphics.clear();\r\n        for (let vertexShape of this.vertexShapes) {\r\n            this.props.stage.removeChild(vertexShape);\r\n        }\r\n        this.vertexShapes = [];\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * Created by alexanderbol on 19/06/2017.\r\n */\r\n\r\nimport {Component} from 'react';\r\n// import * as createjs from '@createjs/easeljs';\r\nimport '../../../../models/graphics';\r\nimport Utils from '../../../../models/utils';\r\n\r\nlet createjs = window.createjs;\r\n\r\nexport class ImageComponent extends Component {\r\n    constructor(params) {\r\n        super();\r\n\r\n        this.bitmap = new createjs.Bitmap(params.model.geom.uri);\r\n        params.stage.addChild(this.bitmap);\r\n    }\r\n\r\n    handleMouseOver = (event) => {\r\n        this.props.onMouseOver(this.props.model);\r\n    };\r\n\r\n    handleMouseOut = (event) => {\r\n        this.props.onMouseOut();\r\n    };\r\n\r\n    handleClick = (event) => {\r\n        this.props.onClick(this.props.model, this.props.layer);\r\n    };\r\n\r\n    redraw() {\r\n        // Draw shape\r\n\r\n        let alpha = 0.5; // (this.props.hovered || this.props.selected) ? 1.0 : 0.6;\r\n\r\n        this.bitmap.alpha = this.props.displayed ? alpha : 0.0;\r\n\r\n        let width = this.props.model.geom.width;\r\n\r\n        let ratio = this.bitmap.image.naturalWidth/this.bitmap.image.naturalHeight;\r\n        let scaleX = width/this.bitmap.image.naturalWidth; // 1. / (stage.zoomFactor * stage.resolution);\r\n        let scaleY = width/(this.bitmap.image.naturalHeight*ratio);\r\n        let tx = this.props.model.geom.center.x; // stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n        let ty = this.props.model.geom.center.y; // -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n\r\n        this.bitmap.setTransform(tx, ty, scaleX, -scaleY);\r\n\r\n        this.bitmap.regX = this.bitmap.image.naturalWidth/2;\r\n        this.bitmap.regY = this.bitmap.image.naturalHeight/2;\r\n\r\n        // let box = this.state.polygon.geom.box;\r\n        // this.shape.cache(box.xmin, box.ymin, box.xmax - box.xmin, box.ymax - box.ymin);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.bitmap.on(\"mouseover\", this.handleMouseOver);\r\n        this.bitmap.on(\"mouseout\", this.handleMouseOut);\r\n        this.bitmap.on(\"click\", this.handleClick);\r\n\r\n        // this.shape.mouseEnabled = false;\r\n\r\n        this.redraw();\r\n    }\r\n\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if (Utils.is_equal(this.props, nextProps)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.redraw();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.bitmap.off(\"mouseover\", this.handleMouseOver);\r\n        this.bitmap.off(\"mouseout\", this.handleMouseOut);\r\n        this.bitmap.off(\"click\", this.handleClick);\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport {ShapeComponent} from './graphics/shapeComponent';\r\nimport {ImageComponent} from \"./graphics/imageComponent\";\r\n\r\nexport class LayerComponent extends Component {\r\n    render() {\r\n        return (\r\n            this.props.layer.shapes.map((shape, index) => {\r\n                return shape.geom.uri ? (\r\n                    <ImageComponent\r\n                        key={index}\r\n                        stage={this.props.stage}\r\n                        layer={this.props.layer}\r\n                        model={shape}\r\n                        displayed={this.props.layer.displayed}\r\n                        hovered={shape === this.props.hoveredShape}\r\n                        selected={\r\n                            shape === this.props.firstMeasuredShape ||\r\n                            shape === this.props.secondMeasuredShape\r\n                        }\r\n                        color={this.props.layer.color}\r\n                        widthOn={this.props.widthOn}\r\n                        displayLabels={this.props.displayLabels}\r\n                        zoomFactor={this.props.zoomFactor}\r\n                        onMouseOver={this.props.onMouseOver}\r\n                        onMouseOut={this.props.onMouseOut}\r\n                        onClick={this.props.onClick}\r\n                    />\r\n                    ) : (\r\n                    <ShapeComponent\r\n                        key={index}\r\n                        stage={this.props.stage}\r\n                        layer={this.props.layer}\r\n                        model={shape}\r\n                        displayed={this.props.layer.displayed}\r\n                        hovered={shape === this.props.hoveredShape}\r\n                        selected={\r\n                            shape === this.props.firstMeasuredShape ||\r\n                            shape === this.props.secondMeasuredShape\r\n                        }\r\n                        color={this.props.layer.color}\r\n                        widthOn={this.props.widthOn}\r\n                        displayVertices={this.props.displayVertices}\r\n                        zoomFactor={this.props.zoomFactor}\r\n                        onMouseOver={this.props.onMouseOver}\r\n                        onMouseOut={this.props.onMouseOut}\r\n                        onClick={this.props.onClick}\r\n                    /> )\r\n                }\r\n            )\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport classes from '../LabelsLayerComponent/labelsLayer.module.css';\r\n\r\nconst labelComponent = ( {stage, shape} ) => {\r\n    let center = shape.geom.center || shape.geom;  // Point has no method center\r\n    let left = stage.canvas.offsetLeft + stage.W2C_X(center.x) + 6;\r\n    let top = stage.canvas.offsetTop + stage.W2C_Y(center.y) - 4;\r\n    let inside = left > stage.canvas.offsetLeft && left < stage.canvas.offsetLeft + stage.canvas.width &&\r\n        top > stage.canvas.offsetTop && top < stage.canvas.height;\r\n\r\n    return inside ? (\r\n        <div style={{position:\"absolute\", left:left+\"px\", top: top+\"px\"}} className={classes.LabelComponent}>\r\n            <h5>{shape.label}</h5>\r\n        </div>\r\n    ) : null;\r\n};\r\n\r\nexport default labelComponent;","import React from 'react';\r\nimport LabelComponent from '../domelements/labelComponent';\r\n\r\nconst labelsLayerComponent = ({stage, layer, displayLabels}) => {\r\n    return (layer.displayed && displayLabels) ? (\r\n        layer.shapes.map((shape, index) => {\r\n                return (shape.label && shape.label.trim() !== \"\") ? (\r\n                    <LabelComponent\r\n                        key={index}\r\n                        stage={stage}\r\n                        shape={shape}\r\n                    />) : null;\r\n            }\r\n        )\r\n    ) : null;\r\n};\r\n\r\nexport default labelsLayerComponent;","\r\nlet defaultStyle = {\r\n    strokeStyle: 1,\r\n    stroke: \"#FF0303\",\r\n    fill: \"#FF0303\",\r\n    alpha: 1.0\r\n};\r\n\r\n/* Class Model represents data model that will be added to layer */\r\nclass Model {\r\n    constructor(geom = undefined, style = undefined, label = \"\") {\r\n        this.geom = geom;\r\n        this.style = style || defaultStyle;\r\n        this.label = label;\r\n    }\r\n\r\n    clone() {\r\n        let model = new Model(this.geom, this.style, this.label);\r\n        return Object.assign(model, this);\r\n    }\r\n\r\n    get box() {\r\n        return this.geom.box;\r\n    }\r\n/*\r\n    static transformPoint(pt, stage) {\r\n        return new Flatten.Point(stage.W2C_X(pt.x), stage.W2C_Y(pt.y));\r\n    }\r\n\r\n    static transformSegment(segment, stage) {\r\n        return new Flatten.Segment(\r\n            Model.transformPoint(segment.ps, stage),\r\n            Model.transformPoint(segment.pe, stage)\r\n        )\r\n    }\r\n\r\n    static transformArc(arc, stage) {\r\n        return new Flatten.Arc(\r\n            Model.transformPoint(arc.pc, stage),\r\n            stage.W2C_Scalar(arc.r),\r\n            arc.startAngle,\r\n            arc.endAngle,\r\n            arc.counterClockwise\r\n        )\r\n    }\r\n\r\n    static transformEdge(shape, stage) {\r\n        if (shape instanceof Flatten.Segment) {\r\n            return Model.transformSegment(shape, stage);\r\n        }\r\n        else if (shape instanceof Flatten.Arc) {\r\n            return Model.transformArc(shape, stage);\r\n        }\r\n    }\r\n\r\n    static transformFace(face, stage) {\r\n        // Get shapes of face as array\r\n        let shapes = [];\r\n        for (let edge of face) {\r\n            shapes.push(edge.shape);\r\n        }\r\n\r\n        // Transform array of edges\r\n        return shapes.map(shape => Model.transformEdge(shape, stage));\r\n    }\r\n\r\n    static transformPolygon(polygon, stage) {\r\n        let newPolygon = new Flatten.Polygon();\r\n        let shapes = [];\r\n        for (let face of polygon.faces) {\r\n            shapes = Model.transformFace(face, stage);\r\n            newPolygon.addFace(shapes);\r\n        }\r\n        return newPolygon;\r\n    }\r\n*/\r\n}\r\n\r\nexport default Model;","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport Flatten from 'flatten-js';\r\n// import { Shape } from '../models/shape';\r\nimport Model from './model';\r\n\r\nclass Layer {\r\n    constructor(stage) {\r\n        // super();\r\n        // cannot define Layer as extension of PlanarSet due to bug in compiler ?\r\n        this.stage = stage;\r\n        this.shapes = [];         // new Flatten.PlanarSet();\r\n        this.name = \"\";\r\n        this.color = \"\";\r\n        this.title = \"\";\r\n        this.displayed = false;\r\n        this.edited = false;\r\n        this.affected = false;\r\n    }\r\n\r\n    clone() {\r\n        let layer = new Layer(this.stage);\r\n        return Object.assign(layer, this);\r\n    }\r\n\r\n    add(shape) {\r\n        if (shape instanceof Model) {\r\n            this.shapes.push(shape);       // add(shape)\r\n        }\r\n        else {\r\n            let geom = shape;\r\n            let newShape = new Model(geom, {}, shape.label) // , this.stage);\r\n            this.shapes.push(newShape);     // add(newShape);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    addShapesArray(shapes) {\r\n        for (let shape of shapes) {\r\n            this.add(shape);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    get box() {\r\n        let box = new Flatten.Box();\r\n        for (let shape of this.shapes) {\r\n            box = box.merge(shape.box);\r\n        }\r\n        return box;\r\n    }\r\n\r\n    get center() {\r\n        let box = this.box;\r\n        return new Flatten.Point((box.xmin + box.xmax)/2, (box.ymin + box.ymax)/2);\r\n    }\r\n\r\n    toggleDisplayed(color) {\r\n        let displayed = !this.displayed;\r\n        return Object.assign(this.clone(),\r\n            {\r\n                displayed : displayed,\r\n                color: color\r\n            });\r\n    }\r\n\r\n    setAffected(affected) {\r\n        this.affected = affected;\r\n        return this;\r\n        // return Object.assign(this.clone(),\r\n        //     {\r\n        //         affected : affected\r\n        //     });\r\n    }\r\n\r\n    setEdited(edited) {\r\n        return Object.assign(this.clone(),\r\n            {\r\n                edited : edited\r\n            });\r\n    }\r\n\r\n    setNameAndTitle(name,title) {\r\n        return Object.assign(this.clone(),\r\n            {\r\n                name : name,\r\n                title: title,\r\n                edited: false\r\n            });\r\n    }\r\n\r\n    setAlpha() {\r\n        for(let shape of this.shapes) {\r\n            shape.alpha = this.displayed ? 1 : 0;\r\n        }\r\n        return this.shapes;\r\n    }\r\n\r\n    // toggleExpanded(shapeToggle) {\r\n    //     for(let shape of this.shapes) {\r\n    //         if (shape === shapeToggle) {\r\n    //             shape.expanded = !shape.expanded;\r\n    //         }\r\n    //     }\r\n    //     return this;\r\n    // }\r\n\r\n    toJSON() {\r\n        return {\r\n            name: this.name,\r\n            title: this.title,\r\n            shapes: JSON.stringify(this.shapes, null, ' ')\r\n        };\r\n    }\r\n}\r\n\r\nexport default Layer;","/**\r\n * Created by alexanderbol on 20/04/2017.\r\n */\r\n\r\nimport Layer from '../models/layer';\r\n\r\nconst colors = [\r\n    \"#FF0303\",\r\n    \"#4AA403\",\r\n    \"#540080\",\r\n    \"#FFFF40\",\r\n    \"#FF0080\",\r\n    \"#AED424\",\r\n    \"#545400\",\r\n    \"#FFA980\",\r\n    \"#A95480\",\r\n    \"#A9A9FF\",\r\n    \"#00FF00\",\r\n    \"#FFEE76\",\r\n    \"#A40576\",\r\n    \"#4385C8\",\r\n    \"#1CC826\",\r\n    \"#BDBD00\",\r\n    \"#48316E\",\r\n    \"#14616E\",\r\n    \"#8040BD\",\r\n    \"#DC7676\",\r\n    \"#924845\",\r\n    \"#A90000\",\r\n    \"#FFA900\"\r\n];\r\n\r\nclass Layers {\r\n\r\n    static newLayer(stage, layers) {\r\n        let layer = new Layer(stage);\r\n        layer.name = Layers.getNewName(layers);\r\n        if (layers.length === 0) { // first layer\r\n            // layer.color = Layers.getNextColor(layers);\r\n            layer.displayed = false;\r\n            layer.affected = false;\r\n        }\r\n        return layer;\r\n    }\r\n\r\n    static get defaultName() {\r\n        return \"layer\";\r\n    }\r\n\r\n    static getNewName(layers) {\r\n        let name = Layers.defaultName;\r\n        let inc = 1;\r\n        let comparator = (layer) => layer.name === name;\r\n        while (layers.find(comparator) ) {\r\n            name = Layers.defaultName + inc;\r\n            inc++;\r\n        }\r\n        return name;\r\n    }\r\n\r\n    static getAffected(layers) {\r\n        return layers.find((lay) => lay.affected);\r\n    }\r\n\r\n    static setAffected(layers, layer) {\r\n        let currentAffectedLayer = Layers.getAffected(layers);\r\n        if (currentAffectedLayer) {\r\n            currentAffectedLayer.affected = false;\r\n        }\r\n        layer.affected = true;\r\n    }\r\n\r\n    static getNextColor(layers) {\r\n        let color = \"\";\r\n        for (let col of colors) {\r\n            if (!layers.find((layer) =>\r\n                layer.displayed && layer.color === col)) {\r\n                color = col;\r\n                break;\r\n            }\r\n        }\r\n        return color;\r\n    }\r\n\r\n    static delete(layers, layer) {\r\n        let index = layers.findIndex((l) => l === layer);\r\n        let newLayers = layers.filter(l => l !== layer);\r\n        if (index > 0) {\r\n            newLayers[index-1].affected = true;\r\n            if (newLayers[index-1].color === \"\") {\r\n                newLayers[index - 1].color = Layers.getNextColor(newLayers);\r\n            }\r\n            newLayers[index-1].displayed = true;\r\n        }\r\n        return newLayers;\r\n        // another option to delete from array:\r\n        // const newLayers = [...layers]\r\n        // return newLayers.splice( index, 1);\r\n    }\r\n\r\n    static sort(layers) {\r\n        let newLayers = layers.slice();\r\n        newLayers.sort( function(l1, l2) {\r\n            let name1 = l1.name.toUpperCase();\r\n            let name2 = l2.name.toUpperCase();\r\n            if (name1 < name2) {\r\n                return -1;\r\n            }\r\n            if (name1 > name2) {\r\n                return 1;\r\n            }\r\n            return 0;\r\n        });\r\n        return newLayers;\r\n    }\r\n\r\n    static toJSON(layers) {\r\n        return layers.map( layer => layer.toJSON() );\r\n    }\r\n}\r\n\r\nexport default Layers;","import React, {Component} from 'react';\r\nimport {LayerComponent} from \"./layerComponent\";\r\nimport LabelsLayerComponent from \"./LabelsLayerComponent/labelsLayerComponent\";\r\nimport Layers from \"../../../models/layers\";\r\n\r\nclass LayersComponent extends Component {\r\n    componentDidMount() {\r\n        if (this.props.layers.length > 0 && this.props.stage) {\r\n            let affectedLayer = Layers.getAffected(this.props.layers);\r\n            if (affectedLayer) {\r\n                this.props.setHomeView(this.props.stage, affectedLayer);\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        return this.props.layers.map((layer) =>\r\n            <React.Fragment key={layer.name}>\r\n                <LayerComponent\r\n                    stage={this.props.stage}\r\n                    layer={layer}\r\n                    color={layer.color}\r\n                    displayed={layer.displayed}\r\n                    displayVertices={this.props.displayVertices}\r\n                    displayLabels={this.props.displayLabels}\r\n                    widthOn={this.props.widthOn}\r\n                    hoveredShape={this.props.hoveredShape}\r\n                    firstMeasuredShape={this.props.firstMeasuredShape}\r\n                    secondMeasuredShape={this.props.secondMeasuredShape}\r\n                    zoomFactor={this.props.zoomFactor}\r\n                    onMouseOver={this.props.onMouseOver}\r\n                    onMouseOut={this.props.onMouseOut}\r\n                    onClick={this.props.onClick}\r\n                />\r\n                <LabelsLayerComponent\r\n                    stage={this.props.stage}\r\n                    layer={layer}\r\n                    displayed={layer.displayed}\r\n                    displayLabels={this.props.displayLabels}\r\n\r\n                />\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LayersComponent;\r\n","import * as ActionTypes from '../actionTypes';\r\n\r\nexport const resizeStage = () => {\r\n    return {\r\n        type: ActionTypes.STAGE_RESIZED\r\n    }\r\n};\r\n\r\nexport const destroyStage = () => {\r\n    return {\r\n        type: ActionTypes.STAGE_UNMOUNTED\r\n    }\r\n};\r\n\r\nexport const toggleUnits = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_UNITS_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleWidthMode = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_WIDTH_MODE_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleDisplayVertices = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_DISPLAY_VERTICES_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleDisplayLabels = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_DISPLAY_LABELS_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleAboutPopup = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_ABOUT_POPUP_CLICKED\r\n    }\r\n};\r\n\r\n// export const closeAboutPopup = () => {\r\n//     return {\r\n//         type: ActionTypes.CLOSE_ABOUT_POPUP_BUTTON_PRESSED\r\n//     }\r\n// };\r\n\r\nexport const toggleMeasureBetweenPoints = () => {\r\n    return {\r\n        type: ActionTypes.MEASURE_POINTS_BUTTON_PRESSED\r\n    }\r\n};\r\n\r\nexport const toggleMeasureBetweenShapes = () => {\r\n    return {\r\n        type: ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED\r\n    }\r\n};\r\n\r\nexport const applySkeletonRecognition = () => {\r\n    return {\r\n        type: ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED\r\n    }\r\n};\r\n\r\nexport const handleFileSelect = (files, stage, layers) => {\r\n    return {\r\n        type: ActionTypes.FILENAME_LIST_SELECTED,\r\n        files,\r\n        stage,\r\n        layers\r\n    }\r\n};\r\n\r\nexport const setHomeView = (stage, shape) => {\r\n    return {\r\n        type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n        stage,\r\n        shape\r\n    }\r\n};\r\n\r\nexport const togglePanByDrag = () => {\r\n    return {\r\n        type: ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED\r\n    }\r\n};\r\n\r\nexport const handleMouseRollOverShape = (shape) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_ROLL_OVER_SHAPE,\r\n        shape\r\n    }\r\n};\r\n\r\nexport const handleMouseRollOutShape = () => {\r\n    return {\r\n        type: ActionTypes.MOUSE_ROLL_OUT_SHAPE\r\n    }\r\n};\r\n\r\nexport const handleClickOnShape = (shape, layer) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_CLICKED_ON_SHAPE,\r\n        shape,\r\n        layer\r\n    }\r\n};\r\n\r\nexport const asyncOperationStarted = () => {\r\n    return {\r\n        type: ActionTypes.ASYNC_OPERATION_STARTED\r\n    }\r\n};\r\n\r\nexport const asyncOperationEnded = () => {\r\n    return {\r\n        type: ActionTypes.ASYNC_OPERATION_ENDED\r\n    }\r\n};\r\n\r\nexport const openDocumentOnCloud = () => {\r\n    return {\r\n        type: ActionTypes.MANAGE_CLOUD_STORAGE_BUTTON_CLICKED\r\n    }\r\n};\r\n\r\n","import * as ActionTypes from '../actionTypes';\r\n\r\nexport const addEmptyLayer = (stage) => {\r\n    return {\r\n        type: ActionTypes.ADD_LAYER_BUTTON_PRESSED,\r\n        stage: stage\r\n    }\r\n};\r\n\r\nexport const addNewLayer = (layer) => {\r\n    return {\r\n        type: ActionTypes.ADD_NEW_LAYER,\r\n        layer\r\n    }\r\n};\r\n\r\nexport const deleteAffectedLayer = () => {\r\n    return {\r\n        type: ActionTypes.DELETE_LAYER_BUTTON_PRESSED\r\n    };\r\n};\r\n\r\nexport const sortLayers = () => {\r\n    return {\r\n        type: ActionTypes.SORT_LAYERS_BUTTON_PRESSED\r\n    };\r\n};\r\n\r\nexport const toggleDisplayLayer = (layer) => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED,\r\n        layer\r\n    }\r\n};\r\n\r\nexport const toggleAffectedLayer = (event, layer) => {\r\n    event.stopPropagation();\r\n    return {\r\n        type: ActionTypes.TOGGLE_AFFECTED_LAYER_PRESSED,\r\n        layer: layer\r\n    };\r\n};\r\n\r\nexport const updateLayer = (newLayer) => {\r\n    return {\r\n        type: ActionTypes.SUBMIT_LAYER_EDIT_FORM_PRESSED,\r\n        newLayer: newLayer\r\n    };\r\n};\r\n\r\nexport const closeEditLayerForm = () => {\r\n    return {\r\n        type: ActionTypes.ESCAPE_LAYER_EDIT_FORM_PRESSED\r\n    };\r\n};\r\n\r\nexport const openAffectedLayerEditForm = () => {\r\n    return {\r\n        type: ActionTypes.OPEN_LAYER_EDIT_FORM_PRESSED,\r\n    }\r\n};\r\n\r\nexport const setAffectedNextLayer = () => {\r\n    return {\r\n        type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\r\n    }\r\n};\r\n\r\nexport const setAffectedPrevLayer = () => {\r\n    return {\r\n        type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\r\n    }\r\n};\r\n\r\nexport const deleteAllLayers = () => {\r\n    return {\r\n        type: ActionTypes.CLEAR_ALL_BUTTON_CLICKED,\r\n    }\r\n}\r\n\r\n\r\n\r\n","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport { connect } from \"react-redux\";\r\n// import * as ActionTypes from \"../../../store/actionTypes\";\r\nimport * as actions from '../store/actions/stageActions';\r\n\r\nclass MeasurePointsTool extends Component {\r\n    startX = undefined;\r\n    startY = undefined;\r\n    endX = undefined;\r\n    endY = undefined;\r\n    measureStarted = false;\r\n\r\n    measureCanvas = React.createRef();\r\n\r\n    handleMouseDown = (event) => {\r\n        event.preventDefault();\r\n\r\n        let canvas = this.measureCanvas.current;\r\n        let stage = this.props.stage;\r\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        let coordX = event.offsetX || event.originalEvent.layerX;    // layerX for Firefox\r\n        let coordY = event.offsetY || event.originalEvent.layerY;    // layery for Firefox\r\n\r\n        if (this.measureStarted) {   // second click - clear measurement\r\n            this.startX = undefined;\r\n            this.startY = undefined;\r\n            this.endX = undefined;\r\n            this.endY = undefined;\r\n            this.measureStarted = false;\r\n            canvas.style.cursor = \"auto\";\r\n        }\r\n        else {                       // first click - start measurment\r\n            this.startX = stage.C2W_X(coordX);\r\n            this.startY = stage.C2W_Y(coordY);\r\n            this.measureStarted = true;\r\n            canvas.style.cursor = \"crosshair\";\r\n        }\r\n    };\r\n\r\n\r\n    handleMouseMove = (event) => {\r\n        let stage = this.props.stage;\r\n\r\n        let coordX = event.offsetX /*|| event.originalEvent ? event.originalEvent.layerX : undefined*/;    // layerX for Firefox\r\n        let coordY = event.offsetY /*|| event.originalEvent ? event.originalEvent.layerY : undefined*/;    // layerY for Firefox\r\n\r\n        if (this.measureStarted) {\r\n            this.endX = stage.C2W_X(coordX);\r\n            this.endY = stage.C2W_Y(coordY);\r\n\r\n            this.draw();\r\n        }\r\n    };\r\n\r\n    handleMouseUp = (event) => {}\r\n\r\n    handleMouseWheel = (event) => {\r\n        event.preventDefault();\r\n\r\n        let delta = event.detail || event.wheelDelta;\r\n        if (delta !== 0) {\r\n            // this.props.onMouseWheelMove(event.offsetX, event.offsetY, delta);\r\n            this.props.handleMouseWheelMove(this.props.stage, event.offsetX, event.offsetY, delta);\r\n\r\n            this.draw();\r\n        }\r\n    };\r\n\r\n    handleMouseWheelFox = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (event.detail !== 0) {\r\n            // this.props.onMousewheelMove(event.layerX, event.layerY, -event.detail);\r\n            this.props.handleMouseWheelMove(this.props.stage, event.layerX, event.layerY, -event.detail);\r\n\r\n            this.draw();\r\n        }\r\n    };\r\n\r\n    draw() {\r\n        let canvas = this.measureCanvas.current;\r\n        let context = canvas.getContext('2d');\r\n        let stage = this.props.stage;\r\n\r\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        // Draw rectangle\r\n        let pllX = Math.min(stage.W2C_X(this.startX), stage.W2C_X(this.endX));\r\n        let pllY = Math.min(stage.W2C_Y(this.startY), stage.W2C_Y(this.endY));\r\n        let width = Math.abs(stage.W2C_Scalar(this.startX - this.endX));\r\n        let height = Math.abs(stage.W2C_Scalar(this.startY - this.endY));\r\n\r\n        context.beginPath();\r\n        context.rect(pllX, pllY, width, height);\r\n\r\n        // Draw segment\r\n        context.moveTo(stage.W2C_X(this.startX), stage.W2C_Y(this.startY));\r\n        context.lineTo(stage.W2C_X(this.endX), stage.W2C_Y(this.endY));\r\n\r\n        context.lineWidth = 1;\r\n        context.strokeStyle = 'black';\r\n        context.stroke();\r\n\r\n        // Draw text\r\n        let textX, textY, textHeight, textWidth;\r\n        let backX, backY;                      // background rectangle\r\n        let text = this.measurement();\r\n\r\n        context.font = \"12pt Arial\";\r\n\r\n        textHeight = 12;         /* font size*/\r\n        textWidth = context.measureText(text).width;\r\n\r\n        // Rectangle to the right of current point, text aligned left\r\n        if (Math.abs(stage.W2C_X(this.endX) - pllX) <= 2) {\r\n            context.textAlign = \"left\";\r\n            textX = pllX + 3;\r\n            backX = pllX;\r\n        }\r\n        // Rectangle to the left of current point, text aligned right\r\n        else {\r\n            context.textAlign = \"right\";\r\n            textX = pllX + width - 3;\r\n            backX = textX - textWidth - 3;\r\n        }\r\n\r\n        if (Math.abs(stage.W2C_Y(this.endY) - pllY) <= 2) {\r\n            textY = pllY - 3;\r\n        }\r\n        else {\r\n            textY = pllY + height + textHeight + 3;\r\n        }\r\n        backY = textY - textHeight - 3;\r\n\r\n        context.fillStyle = 'white';\r\n        context.globalAlpha = 0.4;\r\n        context.fillRect(backX, backY, textWidth + 6, textHeight + 6);\r\n\r\n        context.fillStyle = \"black\";\r\n        context.globalAlpha = 1;\r\n        context.fillText(this.measurement(), textX, textY);\r\n    }\r\n\r\n    measurement() {\r\n        let dx = this.endX - this.startX;\r\n        let dy = this.endY - this.startY;\r\n        let dist = Math.sqrt(dx * dx + dy * dy);\r\n        let message = \"DX=\" + this.format(dx) + \",DY=\" + this.format(dy) + \",D=\" + this.format(dist);\r\n        return message;\r\n    }\r\n\r\n    format(num) {\r\n        return (num/this.props.divisor).toFixed(this.props.decimals);\r\n    }\r\n\r\n    componentWillMount() {\r\n        // this.dispatch = this.props.store.dispatch;\r\n        // this.setState(this.props.store.getState());\r\n    }\r\n\r\n    componentDidMount() {\r\n        let canvas = this.measureCanvas.current;\r\n        canvas.addEventListener(\"mousedown\", this.handleMouseDown);\r\n        canvas.addEventListener(\"mousemove\", this.handleMouseMove);\r\n        canvas.addEventListener(\"mouseup\", this.handleMouseUp);\r\n\r\n        canvas.addEventListener(\"mousewheel\", this.handleMouseWheel);\r\n        canvas.addEventListener(\"DOMMouseScroll\", this.handleMouseWheelFox);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.measureStarted) {\r\n            this.draw();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        let canvas = this.measureCanvas.current;\r\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n\r\n    render() {\r\n        let mainCanvas = this.props.stage.canvas;\r\n        let width = mainCanvas.width;\r\n        let height = mainCanvas.height;\r\n        let top = mainCanvas.offsetTop;\r\n        let left = mainCanvas.offsetLeft;\r\n        return (\r\n            <canvas tabIndex=\"1\" ref={this.measureCanvas}\r\n                    width={width}\r\n                    height={height}\r\n                    style={{position:'absolute',top:top,left:left}}\r\n            >\r\n            </canvas>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({app}) => {\r\n    return {\r\n        stage: app.stage,\r\n        divisor: app.divisor,\r\n        decimals: app.decimals\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleMouseWheelMove: (stage, x, y, delta) => dispatch(actions.handleMouseWheelMove(stage, x, y, delta))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MeasurePointsTool);\r\n","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\n\r\nimport {Component} from 'react';\r\n// import createjs from 'easel-js';\r\n// import * as createjs from '@createjs/easeljs';\r\nimport {graphics} from '../models/graphics';\r\n// import '../../public/styles/App.css';\r\nlet createjs = window.createjs;\r\nclass MeasureShapesTool extends Component {\r\n    constructor(params) {\r\n        super();\r\n        this.segment = new createjs.Shape();\r\n        params.stage.addChild(this.segment);\r\n\r\n        this.labelShape = new createjs.Text();\r\n        this.labelShape.x = 0;\r\n        this.labelShape.y = 0;\r\n        params.stage.addChild(this.labelShape);\r\n\r\n        // var html = document.createElement('div');\r\n        // html.innerText = \"\"; // params.model.label;\r\n        // html.style.position = \"absolute\";\r\n        // html.style.top = 0;\r\n        // html.style.left = 0;\r\n        //\r\n        // document.body.appendChild(html);\r\n        // this.labelShape = new createjs.DOMElement(html);\r\n        // params.stage.addChild(this.labelShape);\r\n    }\r\n\r\n    // redrawLabel() {\r\n    //     if (!this.labelShape) return;\r\n    //\r\n    //     let stage = this.props.stage;\r\n    //\r\n    //     this.labelShape.htmlElement.style.display = \"block\";\r\n    //\r\n    //     let box = this.props.shortestSegment.box;\r\n    //     let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\r\n    //     let dx = 6. / (stage.zoomFactor * stage.resolution);\r\n    //     let dy = 4. / (stage.zoomFactor * stage.resolution);\r\n    //\r\n    //     this.labelShape.htmlElement.style.font = \"16px Arial\";\r\n    //     this.labelShape.htmlElement.innerText = this.props.shortestSegment.length;\r\n    //\r\n    //     let unscale = 1. / (stage.zoomFactor * stage.resolution);\r\n    //     let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n    //     let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n    //     this.labelShape.setTransform(tx, ty, unscale, -unscale);\r\n    // }\r\n\r\n    format(num) {\r\n        return (num/this.props.divisor).toFixed(this.props.decimals);\r\n    }\r\n\r\n    redrawLabel() {\r\n        if (!this.labelShape) return;\r\n\r\n        let stage = this.props.stage;\r\n\r\n        let box = this.props.shortestSegment.box;\r\n        let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\r\n        let dx = 6. / (stage.zoomFactor * stage.resolution);\r\n        let dy = 4. / (stage.zoomFactor * stage.resolution);\r\n\r\n        if (box.ymin === box.ymax) {\r\n            dx = 0;\r\n            dy = -dy;\r\n        }\r\n\r\n        // this.labelShape.htmlElement.style.display = \"block\";\r\n        // this.labelShape.htmlElement.style.font = \"16px Arial\";\r\n        // this.labelShape.htmlElement.innerText = this.props.shortestSegment.length;\r\n\r\n        this.labelShape.text = this.format(this.props.shortestSegment.length);\r\n\r\n        let fontSize = 14.; // / (stage.zoomFactor * stage.resolution);\r\n        this.labelShape.font = `${fontSize}px Arial`;\r\n\r\n        let unscale = 1. / (stage.zoomFactor * stage.resolution);\r\n        // let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n        // let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n        let tx = point.x + dx;\r\n        let ty = point.y + dy;\r\n        this.labelShape.setTransform(tx, ty, unscale, -unscale);\r\n    }\r\n\r\n    draw() {\r\n        if (this.props.shortestSegment) {\r\n            this.segment.graphics = graphics(this.props.shortestSegment);\r\n            this.redrawLabel();\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.draw();\r\n    }\r\n    componentDidUpdate() {\r\n        this.segment.graphics.clear();\r\n        if (this.props.firstMeasuredShape && this.props.secondMeasuredShape &&\r\n            this.props.firstMeasuredLayer.displayed &&\r\n            this.props.secondMeasuredLayer.displayed) {\r\n\r\n            this.draw();\r\n            this.redrawLabel();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.stage.removeChild(this.segment);\r\n        this.segment.graphics.clear();\r\n        this.props.stage.removeChild(this.labelShape);\r\n        this.labelShape.text = \"\";\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default MeasureShapesTool;","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\nimport React from 'react';\r\nconst DisplayCoordsTool = ({stage, coordX, coordY, divisor, decimals}) => {\r\n    const format = (num) => {\r\n        return (num/divisor).toFixed(decimals);\r\n    };\r\n\r\n    let mainCanvas = stage.canvas;\r\n    let top = mainCanvas.offsetTop + 10;\r\n    let left = mainCanvas.offsetLeft + 10;\r\n    let x = stage.C2W_X(coordX);\r\n    let y = stage.C2W_Y(coordY);\r\n    return (\r\n        <div style={{position: 'absolute', top: top, left: left}}>\r\n            <h5 style={{margin: 0, padding: 3}}>\r\n                X: {format(x)} Y: {format(y)}\r\n            </h5>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default DisplayCoordsTool;\r\n","import {Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst modalRoot = document.getElementById('modal-root');\r\n\r\n// A Modal component that is an abstraction around the portal API.\r\nclass Modal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // Create a div that we'll render the modal into. Because each\r\n        // Modal component has its own element, we can render multiple\r\n        // modal components into the modal container.\r\n        this.el = document.createElement('div');\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Append the element into the DOM on mount. We'll render\r\n        // into the modal container element (see the HTML tab).\r\n        modalRoot.appendChild(this.el);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // Remove the element from the DOM when we unmount\r\n        modalRoot.removeChild(this.el);\r\n    }\r\n\r\n    render() {\r\n        // Use a portal to render the children into the element\r\n        return ReactDOM.createPortal(\r\n            // Any valid React child: JSX, strings, arrays, etc.\r\n            this.props.children,\r\n            // A DOM element\r\n            this.el,\r\n        );\r\n    }\r\n}\r\n\r\nexport default Modal;","import React, {Component} from 'react';\r\nimport Modal from '../Modal';\r\nimport classes from './ModalPopup.module.css';\r\n\r\nclass ModalPopup extends Component {\r\n    offsetX;\r\n    offsetY;\r\n    dragX;\r\n    dragY;\r\n\r\n    onBackDropClicked = (ev) => {\r\n        if (ev.target.id === \"backDrop\") {\r\n            this.props.closePopup();\r\n        }\r\n    };\r\n\r\n    handleKeyDown = (ev) => {\r\n        if (ev.code === \"Escape\") {\r\n            this.props.closePopup();\r\n        }\r\n    };\r\n\r\n    elementDrag = (ev) => {\r\n        ev = ev || window.event;\r\n        // calculate the new cursor position:\r\n        this.offsetX = this.dragX - ev.clientX;\r\n        this.offsetY = this.dragY - ev.clientY;\r\n        this.dragX = ev.clientX;\r\n        this.dragY = ev.clientY;\r\n        // set the element's new position:\r\n        let element = ev.target;\r\n        element.style.top = (element.offsetTop - this.offsetY) + \"px\";\r\n        element.style.left = (element.offsetLeft - this.offsetX) + \"px\";\r\n    };\r\n\r\n    closeDragElement = (ev) => {\r\n        /* stop moving when mouse button is released:*/\r\n        ev.target.onmouseup = null;\r\n        ev.target.onmousemove = null;\r\n    };\r\n\r\n    dragMouseDown = (ev) => {\r\n        ev = ev || window.event;\r\n        // get the mouse cursor position at startup:\r\n        this.dragX = ev.clientX;\r\n        this.dragY = ev.clientY;\r\n        ev.target.onmouseup = this.closeDragElement;\r\n        // call a function whenever the cursor moves:\r\n        ev.target.onmousemove = this.elementDrag;\r\n    };\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    render() {\r\n        return this.props.showPopup ? (\r\n            <Modal>\r\n                <div\r\n                    id=\"backDrop\"\r\n                    className={classes.BackDrop}\r\n                    onClick={this.onBackDropClicked}\r\n                >\r\n                    <div className={classes.ModalPopup}\r\n                         onMouseDown={this.dragMouseDown}\r\n                    >\r\n                        {this.props.children}\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        ) : null;\r\n    }\r\n}\r\n\r\nexport default ModalPopup;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport classes from './AboutPopup.module.css';\r\nimport ModalPopup from \"../UI/ModalPopup/ModalPopup\";\r\n\r\nconst AboutPopup = (props) => {\r\n    return (\r\n        <ModalPopup\r\n            showPopup={props.showAboutPopup}\r\n            closePopup={props.toggleAboutPopup}\r\n        >\r\n            <div className={classes.AboutPopup}>\r\n                <h2>{props.title} v{props.version}</h2>\r\n\r\n                <label>{`Build date: `}</label>\r\n                <span>November 2018</span>\r\n                <br/>\r\n\r\n                <label>{`Github depository: `}</label>\r\n                <a href=\"https://github.com/alexbol99/debug-viewer1\" >\r\n                    https://github.com/alexbol99/debug-viewer1\r\n                </a>\r\n                <br/>\r\n\r\n                <label>{`3d party graphics library: `}</label>\r\n                <a href=\"https://github.com/CreateJS/EaselJS/tree/2.0\" >\r\n                    https://github.com/CreateJS/EaselJS/tree/2.0\r\n                </a>\r\n                <br/>\r\n\r\n            </div>\r\n        </ModalPopup>\r\n\r\n    )\r\n};\r\n\r\nexport default AboutPopup;","// import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nimport Model from '../models/model';\r\n\r\nexport function parseJSON(shapes) {\r\n    let models = [];\r\n    let geom;\r\n    let model;\r\n    for (let shape of JSON.parse(shapes)) {\r\n        if (shape.geom instanceof Array) {      // TODO: add \"name\" to polygon stringified\r\n            geom = new Flatten.Polygon();\r\n            for (let faceArray of shape.geom) {\r\n                geom.addFace(faceArray);\r\n            }\r\n        }\r\n        else {\r\n            geom = Flatten[shape.geom.name](shape.geom);\r\n        }\r\n        model = new Model(geom, shape.style, shape.label);\r\n        models.push(model);\r\n    }\r\n\r\n    return models;\r\n}\r\n","import /*React,*/ {Component} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../../store/actions/appActions';\r\nimport * as layerActions from '../../store/actions/layersActions';\r\nimport * as cloudActions from '../../store/actions/cloudStorageActions';\r\nimport Layer from \"../../models/layer\";\r\nimport {parseJSON} from \"../../dataParsers/parseJSON\";\r\n\r\nclass CloudDocument extends Component {\r\n    state={\r\n        done:false\r\n    };\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n\r\n            cloudActions.fetchDocumentFromDatabase(this.props.match.params.id)\r\n                .then( (response) => {\r\n                    let firstLayer = undefined;\r\n                    if (response.data) {\r\n                        for (let layerData of response.data.layers) {\r\n                            let layer = new Layer();\r\n                            layer.shapes = parseJSON(layerData.shapes);\r\n                            layer.name = layerData.name;\r\n\r\n                            if (!firstLayer) firstLayer = layer;\r\n                            this.props.addNewLayer(layer);\r\n                            this.props.asyncOperationEnded();\r\n                        }\r\n                        this.props.updateDocument(this.props.match.params.id, response.data.name, \"Alex Bol\", response.data.lastUpdated);\r\n                        this.props.panAndZoomToShape(stage, firstLayer);\r\n                        this.props.toggleLayer(firstLayer);\r\n                    }\r\n                })\r\n                .catch( (err) => {\r\n                    console.log(err);\r\n                    this.props.asyncOperationEnded();\r\n                });\r\n            this.setState({done:true});\r\n\r\n            this.props.clearAll();\r\n            this.props.asyncOperationStarted();\r\n        }\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage,\r\n        document: state.cloudStorage.document\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch(actions.setHomeView(stage, layer)),\r\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\r\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded()),\r\n\r\n        addNewLayer: (layer) => dispatch(layerActions.addNewLayer(layer)),\r\n        toggleLayer: (layer) => dispatch(layerActions.toggleDisplayLayer(layer)),\r\n\r\n        clearAll: () => dispatch(layerActions.deleteAllLayers()),\r\n        updateDocument: (id, name, owner, lastUpdated) => dispatch(cloudActions.requestFetchDocumentFromDatabaseSucceed(id, name, owner, lastUpdated))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CloudDocument);\r\n","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport {Route} from 'react-router-dom';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport ToolbarComponent from '../../components/MainComponent/ToolbarComponent/ToolbarComponent';\r\nimport CanvasComponent from '../../components/MainComponent/CanvasComponent/CanvasComponent';\r\nimport StatusComponent from '../../components/Layout/StatusComponent/StatusComponent';\r\n\r\nimport StageComponent from \"../../components/MainComponent/GraphicsComponent/stageComponent\";\r\nimport LayersComponent from '../../components/MainComponent/GraphicsComponent/layersComponent';\r\n\r\nimport * as actions from '../../store/actions/appActions';\r\nimport * as layerActions from \"../../store/actions/layersActions\";\r\nimport * as cloudActions from '../../store/actions/cloudStorageActions';\r\n\r\nimport Layers from '../../models/layers';\r\nimport MeasurePointsTool from '../../tools/measurePointsTool';\r\nimport MeasureShapesTool from \"../../tools/measureShapesTool\";\r\nimport DisplayCoordsTool from \"../../tools/displayCoordsTool\";\r\n\r\nimport AboutPopup from \"../../components/AboutPopup/AboutPopup\";\r\nimport CloudDocument from '../../components/Constructions/CloudDocument';\r\n\r\nimport styles from './MainComponent.module.css';\r\n\r\nclass MainComponent extends Component {\r\n    handleFileSelect = (event) => {\r\n        if (!(File && FileReader && FileList)) return;\r\n        let files = event.target.files; // FileList object\r\n        this.props.handleFileSelect(files, this.props.stage, this.props.layers);\r\n    };\r\n\r\n    setHomeView = () => {\r\n        let layer = Layers.getAffected(this.props.layers);\r\n        if (!layer) return;\r\n        this.props.setHomeView(this.props.stage, layer);\r\n        this.forceUpdate();       // ??? unclear why on Home button click not updated\r\n    };\r\n\r\n    onSaveDocumentButtonClicked = () => {\r\n        if (this.props.layers.length === 0) return;   // nothing to save\r\n        let payload = {\r\n            name: this.props.document.name === \"\" ?\r\n                cloudActions.getNewName(this.props.documentsList) : this.props.document.name,\r\n            layers: Layers.toJSON(this.props.layers),\r\n            dataURL: this.props.stage.toDataURL(),\r\n            lastUpdated: new Date().toLocaleDateString() + \" \" + new Date().toLocaleTimeString()\r\n        };\r\n        if (this.props.document.id) {\r\n            cloudActions.updateDocumentInDatabase(this.props.document.id, payload)\r\n                .then( response => {\r\n                    this.props.updateDocumentState(Date.now());\r\n                    this.props.asyncOperationEnded();\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                });\r\n        }\r\n        else {\r\n            cloudActions.addDocumentToDatabase(payload)\r\n                .then( response => {\r\n                    this.props.registerDocumentAddedToDatabase( response.data.name, Date.now());\r\n                    this.props.asyncOperationEnded();\r\n                    // update url\r\n                    this.props.history.push('/documents/'+response.data.name);\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                });\r\n        }\r\n        this.props.asyncOperationStarted();\r\n    };\r\n\r\n    clearCurrentDocument = () => {\r\n        this.props.clearCurrentDocument();\r\n        this.props.clearAllLayers();\r\n        this.props.history.push(\"/\");\r\n    };\r\n\r\n    handleKeyDown = (e) => {\r\n        // let ctrl = e.ctrlKey;\r\n        if (e.target.id !== \"mainCanvas\")\r\n            return;\r\n        switch (e.code) {\r\n            case \"KeyH\":\r\n                this.setHomeView();\r\n                break;\r\n\r\n            case \"KeyW\":\r\n                this.props.toggleWidthMode();     // toggle width On/Off in graphics model\r\n                break;\r\n\r\n            case \"KeyE\":\r\n                this.props.toggleDisplayVertices();  // toggle vertices On/Off\r\n                break;\r\n\r\n            case \"ArrowRight\":\r\n                break;\r\n\r\n            case \"ArrowLeft\":\r\n                break;\r\n            case \"ArrowUp\":\r\n                break;\r\n            case \"ArrowDown\":\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        window.onresize = this.props.resizeStage;\r\n        // Keyboard event\r\n        // var _keydown = _.throttle(this.keydown, 100);\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n        // var _keyup = _.throttle(this.keyup, 500);\r\n        document.addEventListener('keyup', this.handleKeyUp);\r\n\r\n        // if (this.props.document.id === undefined) {\r\n        //     this.props.history.push(\"/\");\r\n        // }\r\n        // if (this.props.document.id !== undefined) {\r\n        //     this.props.history.push(\"/documents/\" + this.props.document.id)\r\n        // }\r\n    }\r\n\r\n    render() {\r\n        let displayCoordsTool = this.props.stage ? (\r\n            <DisplayCoordsTool\r\n                key=\"displayCoordinatedTool\"\r\n                stage={this.props.stage}\r\n                units={this.props.units}\r\n                divisor={this.props.divisor}\r\n                decimals={this.props.decimals}\r\n                coordX={this.props.mouse.x}\r\n                coordY={this.props.mouse.y}\r\n            />\r\n        ) : null;\r\n\r\n        let measurePointsTool = this.props.measurePointsActive ? <MeasurePointsTool /> : null;\r\n\r\n        let measuredLayersDisplayed = this.props.measureShapesTool.firstMeasuredShape &&\r\n            this.props.measureShapesTool.secondMeasuredShape &&\r\n            this.props.measureShapesTool.firstMeasuredLayer.displayed &&\r\n            this.props.measureShapesTool.secondMeasuredLayer.displayed;\r\n\r\n        let measureShapesTool = this.props.measureShapesTool.distance &&\r\n        this.props.measureShapesTool.shortestSegment && measuredLayersDisplayed ? (\r\n            <MeasureShapesTool\r\n                key=\"MeasureShapesTool\"\r\n                stage={this.props.stage}\r\n                firstMeasuredShape={this.props.measureShapesTool.firstMeasuredShape}\r\n                secondMeasuredShape={this.props.measureShapesTool.secondMeasuredShape}\r\n                firstMeasuredLayer={this.props.measureShapesTool.firstMeasuredLayer}\r\n                secondMeasuredLayer={this.props.measureShapesTool.secondMeasuredLayer}\r\n                distance={this.props.measureShapesTool.distance}\r\n                shortestSegment={this.props.measureShapesTool.shortestSegment}\r\n                divisor={this.props.divisor}\r\n                decimals={this.props.decimals}\r\n            />\r\n        ) : null;\r\n\r\n        return (\r\n            <main className={styles[\"Main-content\"]}>\r\n                <ToolbarComponent\r\n                    measurePointsActive={this.props.measurePointsActive}\r\n                    units={this.props.units}\r\n                    showSkeletonRecognitionButton={this.props.showSkeletonRecognitionButton}\r\n                    onFileSelected={this.handleFileSelect}\r\n                    onHomeButtonPressed={this.setHomeView}\r\n                    onPanByDragPressed={this.props.togglePanByDrag}\r\n                    onMeasurePointsButtonPressed={this.props.toggleMeasureBetweenPoints}\r\n                    onMeasureBetweenShapesButtonPressed={this.props.toggleMeasureBetweenShapes}\r\n                    onToggleWidthModePressed={this.props.toggleWidthMode}\r\n                    onToggleVerticesPressed={this.props.toggleDisplayVertices}\r\n                    onToggleLabelsPressed={this.props.toggleDisplayLabels}\r\n                    onShowAboutPopupPressed={this.props.toggleAboutPopup}\r\n                    onSkeletonRecognitionButtonPressed={this.props.applySkeletonRecognition}\r\n                    onUnitClicked={this.props.toggleUnits}\r\n                    onSaveDocumentButtonClicked={this.onSaveDocumentButtonClicked}\r\n                    onClearAllButtonClicked={this.clearCurrentDocument}\r\n                />\r\n\r\n                <CanvasComponent />\r\n\r\n                { this.props.stage ? (\r\n                <StageComponent\r\n                    stage={this.props.stage}\r\n                    onStageUnmounted={this.props.destroyStage}\r\n                >\r\n                    <LayersComponent\r\n                        stage={this.props.stage}\r\n                        layers={this.props.layers}\r\n                        displayVertices={this.props.displayVertices}\r\n                        displayLabels={this.props.displayLabels}\r\n                        widthOn={this.props.widthOn}\r\n                        zoomFactor={this.props.zoomFactor}\r\n                        hoveredShape={this.props.measureShapesTool.hoveredShape}\r\n                        firstMeasuredShape={this.props.measureShapesTool.firstMeasuredShape}\r\n                        secondMeasuredShape={this.props.measureShapesTool.secondMeasuredShape}\r\n                        onMouseOver={this.props.handleMouseRollOverShape}\r\n                        onMouseOut={this.props.handleMouseRollOutShape}\r\n                        onClick={this.props.handleClickOnShape}\r\n                        setHomeView={this.props.setHomeView}\r\n                    />\r\n                    {displayCoordsTool}\r\n                    {measurePointsTool}\r\n                    {measureShapesTool}\r\n                </StageComponent> ) : null }\r\n\r\n                <StatusComponent />\r\n\r\n                <AboutPopup\r\n                    showAboutPopup={this.props.showAboutPopup}\r\n                    toggleAboutPopup={this.props.toggleAboutPopup}\r\n                    title={this.props.title}\r\n                    version={this.props.version}\r\n                    build={this.props.build}\r\n                />\r\n\r\n                <Route path=\"/documents/:id\" component={CloudDocument}/>\r\n\r\n            </main>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        stage: state.app.stage,\r\n        title: state.app.title,\r\n        version: state.app.version,\r\n        build: state.app.build,\r\n        displayVertices: state.app.displayVertices,\r\n        displayLabels: state.app.displayLabels,\r\n        widthOn: state.app.widthOn,\r\n        zoomFactor: state.app.zoomFactor,\r\n        units: state.app.units,\r\n        showSkeletonRecognitionButton: state.app.showSkeletonRecognitionButton,\r\n        divisor: state.app.divisor,\r\n        decimals: state.app.decimals,\r\n        measurePointsActive: state.app.measurePointsActive,\r\n        showAboutPopup: state.app.showAboutPopup,\r\n        layers: state.layers,\r\n        mouse: state.mouse,\r\n        measureShapesTool: state.measureShapesTool,\r\n\r\n        document: state.cloudStorage.document,\r\n        documentsList: state.cloudStorage.documentsList,\r\n        // onManageCloudStorageButtonClicked: ownProps.onManageCloudStorageButtonClicked\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        resizeStage: () => dispatch(actions.resizeStage()),\r\n        destroyStage: () => dispatch(actions.destroyStage()),\r\n        handleFileSelect: (files, stage, layers) => dispatch(actions.handleFileSelect(files, stage, layers)),\r\n        setHomeView: (stage, shape) => dispatch(actions.setHomeView(stage, shape)),\r\n        toggleUnits: () => dispatch(actions.toggleUnits()),\r\n        toggleWidthMode: () => dispatch(actions.toggleWidthMode()),\r\n        toggleDisplayVertices: () => dispatch(actions.toggleDisplayVertices()),\r\n        toggleDisplayLabels: () => dispatch(actions.toggleDisplayLabels()),\r\n        toggleAboutPopup: () => dispatch(actions.toggleAboutPopup()),\r\n        toggleMeasureBetweenPoints: () => dispatch(actions.toggleMeasureBetweenPoints()),\r\n        toggleMeasureBetweenShapes: () => dispatch(actions.toggleMeasureBetweenShapes()),\r\n        togglePanByDrag: () => dispatch(actions.togglePanByDrag()),\r\n        applySkeletonRecognition: () => dispatch(actions.applySkeletonRecognition()),\r\n        handleMouseRollOverShape: (shape) => dispatch(actions.handleMouseRollOverShape(shape)),\r\n        handleMouseRollOutShape: () => dispatch(actions.handleMouseRollOutShape()),\r\n        handleClickOnShape: (shape, layer) => dispatch(actions.handleClickOnShape(shape, layer)),\r\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\r\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded()),\r\n\r\n        clearAllLayers: () => dispatch(layerActions.deleteAllLayers()),\r\n        // addNewLayer: (layer) => dispatch(layerActions.addNewLayer(layer)),\r\n\r\n        registerDocumentAddedToDatabase: (id, timestamp) => dispatch(cloudActions.registerDocumentAddedToDatabase(id, timestamp)),\r\n        updateDocumentState: (timestamp) => dispatch(cloudActions.updateDocumentState(timestamp)),\r\n        clearCurrentDocument: () => dispatch(cloudActions.clearCurrentDocument())\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainComponent);\r\n","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\nimport React from 'react';\r\nimport FontAwesome from 'react-fontawesome';\r\n\r\nimport styles from './LayerListToolbar.module.css';\r\nimport '@fortawesome/fontawesome-free/css/all.css';\r\n\r\nconst LayerListToolbar = (props) => {\r\n    return (\r\n        <div className={styles[\"Layer-list-toolbar\"]}>\r\n            <button title=\"Add layer\" onClick={props.onAddLayerButtonClicked}>\r\n                <FontAwesome\r\n                    name='plus'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n            <button title=\"Edit selected layer's name and info\" onClick={props.onEditLayerButtonClicked}>\r\n                <FontAwesome\r\n                    name='pencil-alt'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n            <button title=\"Delete selected layer\" onClick={props.onDeleteLayerButtonClicked}>\r\n                <FontAwesome\r\n                    name='times'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n            <button title=\"Sort layer list\" onClick={props.onSortLayersButtonClicked}>\r\n                <FontAwesome\r\n                    name='sort-alpha-down'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default LayerListToolbar;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport styles from './LayerEditForm.module.css';\r\n\r\nconst LayerEditForm = (props) => {\r\n    let onSubmitLayerEditForm = (ev) => {\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n        let form = ev.target.parentElement;\r\n        let newLayer = Object.assign({}, props.layer, {\r\n            name: form.layerName.value,\r\n            title: form.layerTitle.value\r\n        });\r\n        props.onSubmitLayerEditForm(newLayer);\r\n        return false;\r\n    };\r\n\r\n    let setFocus = (ev) => {\r\n        ev.stopPropagation();\r\n        ev.target.focus();\r\n    };\r\n\r\n    let onCancelLayerEditForm = () => {\r\n        props.onEscapeLayerEditForm();\r\n    };\r\n\r\n    return (\r\n        <form className={styles[\"Layer-edit-form\"]}\r\n              id=\"layerEditForm\"\r\n              onSubmit={onSubmitLayerEditForm}\r\n        >\r\n            <label>Layer name:</label><br/>\r\n            <input type=\"text\" id=\"layer-name\" name=\"layerName\" size=\"80\" defaultValue={props.layer.name}\r\n                   onClick={setFocus}/><br/>\r\n            <label>Layer info:</label><br/>\r\n            <textarea id=\"layer-title\" name=\"layerTitle\" cols=\"78\" rows=\"3\" defaultValue={props.layer.title}\r\n                      onClick={setFocus}></textarea><br/>\r\n            <button onClick={onCancelLayerEditForm}>Cancel</button>\r\n            <button onClick={onSubmitLayerEditForm}>OK</button>\r\n        </form>\r\n    )\r\n};\r\n\r\nexport default LayerEditForm;","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport ModalPopup from \"../../UI/ModalPopup/ModalPopup\";\r\nimport LayerEditForm from \"../LayerEditForm/LayerEditForm\";\r\nimport styles from './LayerListElement.module.css';\r\n\r\nclass LayerListElement extends Component {\r\n    componentDidUpdate() {\r\n        if (document.activeElement.nodeName === \"CANVAS\")\r\n            return;\r\n        let elem = this.refs.layerName;\r\n        if (this.props.layer.affected) {\r\n            elem.focus();\r\n        }\r\n    }\r\n\r\n    rgba(hex, opacity) {\r\n        let r, g, b, percent;\r\n        if (hex) {\r\n            hex = hex.replace('#', '');\r\n            r = parseInt(hex.substring(0, 2), 16);\r\n            g = parseInt(hex.substring(2, 4), 16);\r\n            b = parseInt(hex.substring(4, 6), 16);\r\n            percent = opacity;\r\n        }\r\n        else {\r\n            r = 147;\r\n            g = 128;\r\n            b = 108;\r\n            percent = 0;\r\n        }\r\n        let result = `rgba(${r},${g},${b},${percent / 100})`;\r\n\r\n        return result;\r\n    }\r\n\r\n    render() {\r\n        // let style = this.props.layer.displayed ?\r\n        //     styleSheet.displayed : styleSheet.undisplayed;\r\n\r\n        let displayed = this.props.layer.displayed ? \"Layer-displayed\" : \"Layer-undisplayed\";\r\n        let color = displayed ? this.rgba(this.props.layer.color, 100) : this.rgba();\r\n        let bgcolor = displayed ? this.rgba(this.props.layer.color, 30) : this.rgba();\r\n        let alpha = this.props.layer.affected ? 1 : 0;\r\n        let layerNameOpacity = this.props.layer.shapes.length === 0 ? 0.6 : 1.0;\r\n        return [\r\n            <li key={1}\r\n                className={styles.Layer}\r\n                onClick={this.props.onLayerClicked}\r\n                onDoubleClick={this.props.onLayerDoubleClicked}>\r\n\r\n                <div className={styles.LayerSelectionBox}\r\n                     onClick={this.props.onAffectedBoxClicked}\r\n                >\r\n                    <h4 className={styles.LayerSelectionMark}\r\n                        style={{opacity: alpha, color: color}}>\r\n                        ✓\r\n                    </h4>\r\n                </div>\r\n\r\n                <div className={styles.LayerNameBox}\r\n                     style={{backgroundColor: bgcolor, opacity: layerNameOpacity}}>\r\n                    <h4 ref=\"layerName\"\r\n                        title={this.props.layer.name}\r\n                        tabIndex='1'\r\n                    >\r\n                        {this.props.layer.name}\r\n                    </h4>\r\n                </div>\r\n\r\n            </li>,\r\n\r\n            <ModalPopup\r\n                key={2}\r\n                showPopup={this.props.layer.edited}\r\n                closePopup={this.props.onEscapeLayerEditForm}\r\n            >\r\n                <LayerEditForm\r\n                    layer={this.props.layer}\r\n                    onSubmitLayerEditForm={this.props.onSubmitLayerEditForm}\r\n                    onEscapeLayerEditForm={this.props.onEscapeLayerEditForm}\r\n                />\r\n            </ModalPopup>\r\n        ]\r\n    }\r\n}\r\n\r\nexport default LayerListElement;\r\n","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport LayerListToolbar from \"../../components/LayersList/LayerListToolbar/LayerListToolbar\";\r\nimport LayerListElement from '../../components/LayersList/LayerListElement/LayerListElement';\r\nimport * as actions from '../../store/actions/layersActions';\r\nimport { connect } from 'react-redux';\r\nimport styles from './LayersList.module.css';\r\n\r\nclass LayersList extends Component {\r\n    height = 0;\r\n\r\n    handleKeyDown = (e) => {\r\n        // e.stopPropagation();\r\n        // e.preventDefault();\r\n\r\n        if (e.target.parentElement.parentElement &&\r\n            e.target.parentElement.parentElement.parentElement &&\r\n            e.target.parentElement.parentElement.parentElement.id &&\r\n            e.target.parentElement.parentElement.parentElement.id === \"layersList\") {\r\n\r\n\r\n            switch (e.code) {\r\n                case \"ArrowRight\":\r\n                case \"ArrowDown\":\r\n                    this.props.setAffectedNextLayer();\r\n                    break;\r\n                case \"ArrowLeft\":\r\n                case \"ArrowUp\":\r\n                    this.props.setAffectedPrevLayer();\r\n                    break;\r\n                /* tab does not work properly\r\n            case \"Tab\":\r\n                if (e.shiftKey) {\r\n                    this.dispatch({\r\n                        type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\r\n                    });\r\n                }\r\n                else {\r\n                    this.dispatch({\r\n                        type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\r\n                    });\r\n                }\r\n                break;\r\n                */\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    onLayerListClicked = () => {\r\n        this.forceUpdate();\r\n    };\r\n\r\n    componentDidMount() {\r\n        // Keyboard event\r\n        // var _keydown = _.throttle(this.keydown, 100);\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n        // var _keyup = _.throttle(this.keyup, 500);\r\n        // document.addEventListener('keyup', this.handleKeyUp);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.height = this.refs.layersComponent.clientHeight;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={styles[\"App-layers\"]}\r\n                 ref=\"layersComponent\"\r\n                 onClick={this.onLayerListClicked}\r\n            >\r\n                {/*<h5>Layers</h5>*/}\r\n                <LayerListToolbar\r\n                    onAddLayerButtonClicked={() => this.props.onAddLayerButtonClicked(this.props.stage)}\r\n                    onEditLayerButtonClicked={this.props.onEditLayerButtonClicked}\r\n                    onDeleteLayerButtonClicked={this.props.onDeleteLayerButtonClicked}\r\n                    onSortLayersButtonClicked={this.props.onSortLayersButtonClicked}\r\n                />\r\n                <ul id=\"layersList\"\r\n                    style={{maxHeight:0.82*(this.height-40)}}>\r\n                { this.props.layers.map((layer) =>\r\n                    <LayerListElement\r\n                        key={layer.name}\r\n                        layer={layer}\r\n                        onLayerClicked={() => this.props.onLayerClicked(layer)}\r\n                        onAffectedBoxClicked={(event) => this.props.onAffectedBoxClicked(event, layer)}\r\n                        onSubmitLayerEditForm={this.props.onSubmitLayerEditForm}\r\n                        onEscapeLayerEditForm={this.props.onEscapeLayerEditForm}\r\n                    />)\r\n                }\r\n                </ul>\r\n                {/*{addLayer}*/}\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onAddLayerButtonClicked: (stage) => dispatch(actions.addEmptyLayer(stage)),\r\n        onEditLayerButtonClicked: () => dispatch(actions.openAffectedLayerEditForm()),\r\n        onDeleteLayerButtonClicked: () => dispatch(actions.deleteAffectedLayer()),\r\n        onSortLayersButtonClicked: () => dispatch(actions.sortLayers()),\r\n        onLayerClicked: (layer) => dispatch(actions.toggleDisplayLayer(layer)),\r\n        onAffectedBoxClicked: (event, layer) => dispatch(actions.toggleAffectedLayer(event, layer)),\r\n        onSubmitLayerEditForm: (newLayer) => dispatch(actions.updateLayer(newLayer)),\r\n        onEscapeLayerEditForm: () => dispatch(actions.closeEditLayerForm()),\r\n        setAffectedNextLayer: () => dispatch(actions.setAffectedNextLayer()),\r\n        setAffectedPrevLayer: () => dispatch(actions.setAffectedPrevLayer())\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LayersList);\r\n\r\n// export default LayersList;","/**\r\n * Created by alexanderbol on 06/05/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport styles from './AsideComponent.module.css';\r\n\r\nconst AsideComponent = () => {\r\n    return (\r\n        <aside className={styles[\"App-aside\"]}>\r\n            <h5>&nbsp;</h5>\r\n        </aside>\r\n    )\r\n};\r\n\r\nexport default AsideComponent;\r\n","import React, {Component} from 'react';\r\nimport classes from './DocumentName.module.css';\r\n\r\nclass DocumentName extends Component {\r\n    state = {\r\n        name: \"\"\r\n    };\r\n\r\n    handleChange = (ev) => {\r\n        let name = ev.target.value;\r\n        this.setState({name: name});\r\n        this.props.updateDocumentName(name);\r\n    };\r\n\r\n    static getDerivedStateFromProps(nextProps, prevState){\r\n        return {\r\n            name : nextProps.name\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={classes.DocumentName}>\r\n                <input type=\"text\" placeholder=\"Document Name\"  value={this.state.name} onChange={this.handleChange} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DocumentName;","import React from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport * as ActionTypes from \"./store/actionTypes\";\r\nimport * as cloudActions from \"./store/actions/cloudStorageActions\";\r\nimport MainComponent from \"./containers/MainComponent/MainComponent\";\r\nimport LayersList from \"./containers/LayerList/LayersList\";\r\nimport AsideComponent from \"./components/Layout/AsideComponent/AsideComponent\";\r\nimport DocumentName from \"./components/MainComponent/DocumentName/DocumentName\";\r\n\r\nconst appBody = (props) => {\r\n    return (\r\n        <React.Fragment>\r\n            <DocumentName name={props.document.name} updateDocumentName={props.updateDocumentName} />\r\n            <div className=\"App-body\" onPaste={props.pasteDataFromBuffer}>\r\n                <MainComponent history={props.history}\r\n                               onManageCloudStorageButtonClicked={props.onManageCloudStorageButtonClicked}\r\n                />\r\n                <LayersList/>\r\n                <AsideComponent/>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = ({app, cloudStorage}) => {\r\n    return {\r\n        document: cloudStorage.document\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        pasteDataFromBuffer: (event) => dispatch({\r\n            type: ActionTypes.DATA_FROM_BUFFER_PASTED,\r\n            data: event.clipboardData\r\n        }),\r\n        updateDocumentName: (name) => dispatch(cloudActions.updateDocumentName(name))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(appBody);\r\n","import React from 'react';\r\n// import logoImg from \"../../../assets/images/debug-viewer-logo3-notext.png\";\r\nimport logoImg from \"../../../../assets/images/debug-viewer-logo3.png\";\r\nimport classes from \"./Logo.module.css\";\r\n\r\nconst logo = () => {\r\n    return (\r\n        <div className={classes.Logo}>\r\n            <img src={logoImg} alt=\"Debug Viewer Logo\" />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default logo;","import React from 'react';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport classes from './Navigation.module.css';\r\n\r\nconst navigation = () => {\r\n    return (\r\n        <ul className={classes.Navigation}>\r\n            <li><NavLink to=\"/\" exact>Editor</NavLink></li>\r\n            <li><NavLink to=\"/documents\">Cloud Storage</NavLink></li>\r\n        </ul>\r\n    );\r\n};\r\n\r\nexport default navigation;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\nimport React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport classes from './HeaderComponent.module.css';\r\nimport Logo from './Logo/Logo';\r\nimport Navigation from './Navigation/Navigation';\r\n\r\nconst HeaderComponent = (props) => {\r\n    const style = props.location.pathname === \"/documents\" ?\r\n        classes[\"App-header-documents-page\"] :\r\n        classes[\"App-header\"];\r\n    return (\r\n        <header className={style}>\r\n            <Logo />\r\n            <Navigation />\r\n            {props.location.pathname === \"/documents\" ? <hr/> : null}\r\n        </header>\r\n    )\r\n};\r\n\r\nexport default withRouter(HeaderComponent);","import Flatten from 'flatten-js';\r\n\r\nlet {Box} = Flatten;\r\n\r\nexport class Job {\r\n    constructor() {\r\n        this.filename = \"\";\r\n        this.title = \"\";\r\n        this.profiles = [];   // array of FlattenJS Polygons\r\n        this.materials = [];  // array of FlattenJS Polygons\r\n        this.shapes = [];     // array of other FlattenJS shapes\r\n    }\r\n\r\n    get box() {\r\n        let b = new Box();\r\n        for (let shape of this.profiles) {\r\n            b.merge(shape.box);\r\n        }\r\n        for (let shape of this.materials) {\r\n            b.merge(shape.box);\r\n        }\r\n        for (let shape of this.shapes) {\r\n            b.merge(shape.box);\r\n        }\r\n        return b;\r\n    }\r\n}","import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nlet {Point, Segment, Arc, Polygon} = Flatten;\r\nlet { vector } = Flatten;\r\n\r\nconst inch2pixels = 10160000;\r\nconst mils2pixels = 10160;\r\nfunction InchToPixels(str) {\r\n    return Math.round(Number(str)*inch2pixels,0);\r\n}\r\nfunction MilsToPixels(str) {\r\n    return Math.round(Number(str)*mils2pixels,0);\r\n}\r\n\r\nfunction parsePolygon(lines, start) {\r\n    let shapes = [];\r\n    let i = start;\r\n    let line = lines[i];\r\n    let terms = line.split(' ');\r\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n    let pe;\r\n    let pc;\r\n    let end_of_face = false;\r\n    while(true) {\r\n        line = lines[i];\r\n        terms = line.split(' ');\r\n        switch (terms[0]) {\r\n            case 'OS':\r\n                pe = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n                shapes.push( new Segment(ps, pe));\r\n\r\n                ps = pe.clone();\r\n                break;\r\n            case 'OC':\r\n                pe = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n                pc = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\r\n\r\n                let cwStr = terms[5];\r\n                let counterClockwise = cwStr === 'Y' ? Flatten.CW : Flatten.CCW; /* sic ! */\r\n\r\n                let startAngle = vector(pc,ps).slope;\r\n                let endAngle = vector(pc, pe).slope;\r\n                if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n                    endAngle += 2*Math.PI;\r\n                    counterClockwise = true;\r\n                }\r\n                let r = vector(pc, ps).length;\r\n\r\n                shapes.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\r\n\r\n                ps = pe.clone();\r\n                break;\r\n            case 'OE':\r\n                end_of_face = true;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (end_of_face) {\r\n            break;\r\n        }\r\n\r\n        i++;\r\n    }\r\n    return shapes;\r\n}\r\n\r\nfunction parseLine(str, apertures) {\r\n    let terms = str.split(' ');\r\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n    let pe = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\r\n    let segment = new Segment(ps, pe);\r\n    let ap_key = Number(terms[5]);\r\n    let ap_value = apertures[ap_key];\r\n    segment.aperture = ap_value;     // augmentation\r\n    return segment;\r\n}\r\n\r\nfunction parseArc(str, apertures) {\r\n    let terms = str.split(' ');\r\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n    let pe = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\r\n    let pc = new Point( InchToPixels(terms[5]), InchToPixels(terms[6]) );\r\n\r\n    let cwStr = terms[10];\r\n    let counterClockwise = cwStr === 'Y' ? Flatten.CW : Flatten.CCW; /* sic ! */\r\n\r\n    let startAngle = vector(pc,ps).slope;\r\n    let endAngle = vector(pc, pe).slope;\r\n    if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n        endAngle += 2*Math.PI;\r\n        counterClockwise = true;\r\n    }\r\n    let r = vector(pc, ps).length;\r\n\r\n    let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\r\n\r\n    let ap_key = Number(terms[7]);\r\n    let ap_value = apertures[ap_key];\r\n    arc.aperture = ap_value;     // augmentation\r\n\r\n    return arc;\r\n}\r\n\r\nexport function parseODB(filename, str) {\r\n    let job = new Job();\r\n    job.filename = filename;\r\n\r\n    let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n    let polygon;\r\n\r\n    let apertures = [];\r\n\r\n    for (let i=0; i < arrayOfLines.length; i++) {\r\n        let line = arrayOfLines[i];\r\n        let terms = line.split(' ');\r\n\r\n        if (terms[0].substr(0,1) === '$') {\r\n            let ap_key = Number(terms[0].substr(1));\r\n            let ap_value = MilsToPixels(terms[1].substr(1));\r\n            apertures[ap_key] = ap_value;\r\n            continue;\r\n        }\r\n\r\n        switch (terms[0]) {\r\n            case 'S':                  // surface started\r\n                polygon = new Polygon();\r\n                let termArr = line.split(' ');\r\n                let polarity = termArr[1];      // consider later\r\n                polygon.polarity = polarity;\r\n                break;\r\n            case 'OB':                  // polygon started\r\n                let start = i;\r\n                let shapes = parsePolygon(arrayOfLines, start);\r\n                polygon.addFace(shapes);\r\n                i = start + shapes.length + 1;\r\n                break;\r\n            case 'SE':     // surface ended\r\n                job.shapes.push(polygon);\r\n                break;\r\n            case 'L':                  // line\r\n                let odbLine = parseLine(line, apertures);\r\n                job.shapes.push(odbLine);\r\n                break;\r\n            case 'A':                  // Arc\r\n                let odbArc = parseArc(line, apertures);\r\n                job.shapes.push(odbArc);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    return job;\r\n}","import /*React,*/ {Component} from 'react';\r\nimport axios from \"axios\";\r\n\r\nimport Layers from \"../../models/layers\";\r\nimport {parseODB} from \"../../dataParsers/parserODB\";\r\nimport Model from \"../../models/model\";\r\nimport * as ActionTypes from \"../../store/actionTypes\";\r\nimport * as actions from '../../store/actions/appActions';\r\nimport { connect } from 'react-redux';\r\n\r\nclass Demo extends Component {\r\n    state={\r\n        done:false\r\n    };\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n            let layers = this.props.layers;\r\n\r\n            let layer = Layers.newLayer(stage, layers);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.name = \"features\";\r\n            layer.title = \"features\";\r\n            layer.affected = true;\r\n            layer.displayed = true;\r\n\r\n            axios(\"https://gist.githubusercontent.com/alexbol99/825fdf2dd508467cc852eb22aa36183d/raw/d10e853338afd8294eeb3ffdebe3bc380477a978/features\")\r\n                .then( (resp) => {\r\n                    let job = parseODB(\"features\", resp.data);\r\n\r\n                    for (let shape of job.shapes) {\r\n                        let model = new Model(shape, undefined, shape.label);\r\n                        layer.add(model);\r\n                    }\r\n\r\n                    this.props.panAndZoomToShape(stage, layer);\r\n                    this.props.addNewLayer(layer);\r\n                    this.props.asyncOperationEnded();\r\n                });\r\n            this.setState({done:true});\r\n            this.props.asyncOperationStarted();\r\n        }\r\n    }\r\n    componentDidMount() {\r\n\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch({\r\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n            stage: stage,\r\n            shape: layer\r\n        }),\r\n        addNewLayer: (layer) => dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        }),\r\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\r\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded())\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Demo);\r\n","import /*React,*/ {Component} from 'react';\r\nimport Flatten from 'flatten-js';\r\nimport BooleanOp from 'flatten-boolean-op';\r\nimport Layers from \"../../models/layers\";\r\nimport * as ActionTypes from '../../store/actionTypes';\r\nimport { connect } from 'react-redux';\r\n\r\nlet {point, arc, Polygon} = Flatten;\r\nlet {subtract, intersect} = BooleanOp;\r\n\r\nclass BooleanTest extends Component {\r\n    state={\r\n        done:false\r\n    };\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n            let layers = this.props.layers;\r\n\r\n            let layer = Layers.newLayer(stage, layers);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.name = \"features\";\r\n            layer.title = \"features\";\r\n            layer.affected = true;\r\n            layer.displayed = true;\r\n\r\n            let myPoly = new Polygon();\r\n            myPoly.addFace([point(6, 6), point(6,114), point(114, 114), point(114, 6)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);  // 0\r\n\r\n            let myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,0),84.5779281026111, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 1\r\n\r\n            myPoly = intersect(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 2\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,0),84.49938828627135, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 3\r\n\r\n            myPoly = subtract(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 4\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,120),84.8710637077582, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 5\r\n\r\n            myPoly = intersect(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 6\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,120),84.79252389141845, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 7\r\n\r\n            myPoly = subtract(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 8\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(120,120),85.20624291591454, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 9\r\n\r\n            myPoly = intersect(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 10\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(120,120), 85.1277030995748, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 11\r\n\r\n            layers[0].color = Layers.getNextColor(layers);\r\n            layers[0].affected = true;\r\n            layers[0].displayed = true;\r\n\r\n            this.props.panAndZoomToShape(stage, layers[0]);\r\n\r\n            this.setState({done:true});\r\n        }\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch({\r\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n            stage: stage,\r\n            shape: layer\r\n        }),\r\n        addNewLayer: (layer) => dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        })\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BooleanTest);\r\n","import /*React,*/ {Component} from 'react';\r\nimport * as ActionTypes from \"../../store/actionTypes\";\r\nimport { connect } from 'react-redux';\r\n\r\nclass SkeletonRecognition extends Component {\r\n    componentDidMount() {\r\n        this.props.applySkeletonRecognition();\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        applySkeletonRecognition: () => dispatch({type: ActionTypes.SKELETON_RECOGNITION_URI})\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SkeletonRecognition);\r\n","import Flatten from \"flatten-js\";\r\n// let Flatten = require('flatten-js');\r\n\r\nlet {Vector, Segment, Arc, Line, Box, Polygon} = Flatten;\r\n\r\nclass CollisionDistance {\r\n    static apply(polygon1, polygon2) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        for (let edge of [...polygon2.edges]) {\r\n            let distance = CollisionDistance.edge2polygon(edge, polygon1);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static edge2polygon(edge2, polygon1) {\r\n        let shapeBox = edge2.shape.box;\r\n        let box = new Box(\r\n            Number.NEGATIVE_INFINITY,\r\n            shapeBox.ymin,\r\n            Number.POSITIVE_INFINITY,\r\n            shapeBox.ymax\r\n        );\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        let resp_edges =  polygon1.edges.search(box);\r\n        for (let edge1 of resp_edges) {\r\n            let distance;\r\n            if (edge1.shape instanceof Segment && edge2.shape instanceof Segment) {\r\n                distance = CollisionDistance.segment2segment(edge1.shape, edge2.shape);\r\n            }\r\n            else if (edge1.shape instanceof Arc && edge2.shape instanceof Segment) {\r\n                distance = CollisionDistance.segment2arc(edge2.shape, edge1.shape);\r\n            }\r\n            else if (edge1.shape instanceof Segment && edge2.shape instanceof Arc) {\r\n                distance = CollisionDistance.segment2arc(edge1.shape, edge2.shape);\r\n            }\r\n            else if (edge1.shape instanceof Arc && edge2.shape instanceof Arc) {\r\n                distance = CollisionDistance.arc2arc(edge1.shape, edge2.shape);\r\n            }\r\n\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static point2shape(point, shape) {\r\n        let line = new Line(point, new Vector(0,1));\r\n        let intersections = line.intersect(shape);          // segment or arc\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        for (let ip of intersections) {\r\n            // eslint-disable-next-line\r\n            let [distance, shortest_segment] = point.distanceTo(ip);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static segment2segment(segment1, segment2) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        for (let point of segment1.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, segment2);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        for (let point of segment2.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, segment1);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static segment2arc(segment, arc) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        let v_s = new Vector(segment.start, segment.end);\r\n        v_s = v_s.normalize();\r\n\r\n        let v_n = [v_s.rotate90CCW().multiply(arc.r), v_s.rotate90CW().multiply(arc.r)];\r\n        let distance;\r\n\r\n        // Distance between tangent point and segment\r\n        for (let v of v_n) {\r\n            let tangent_point = arc.center.translate(v);  // tangent point in direction of the normal vector\r\n            if (tangent_point.on(arc)) {\r\n                distance = CollisionDistance.point2shape(tangent_point, segment);\r\n                if (distance < collision_distance) {\r\n                    collision_distance = distance;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let point of arc.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, segment);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        for (let point of segment.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, arc);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static arc2arc(arc1, arc2) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        let distance;\r\n\r\n        // test translation of arc2.center to arc1 enlarged by r2\r\n        let arc_enlarged = arc1.clone();\r\n        arc_enlarged.r += arc2.r;\r\n        distance = CollisionDistance.point2shape(arc2.center, arc_enlarged);\r\n        if (distance < collision_distance) {\r\n            // additional check that transformed arc actually touching\r\n            // eslint-disable-next-line\r\n            let [dist_tmp, shortest_segment_tmp] =\r\n                arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\r\n            if (Flatten.Utils.EQ_0(dist_tmp)) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n\r\n        // test translation of arc2.center to arc1 reduced by r2\r\n        if (Flatten.Utils.GE(arc1.r, arc2.r)) {\r\n            let arc_reduced = arc1.clone();\r\n            arc_reduced.r -= arc2.r;\r\n            distance = CollisionDistance.point2shape(arc2.center, arc_reduced);\r\n            if (distance < collision_distance) {\r\n                // additional check that transformed arc actually touching\r\n                // eslint-disable-next-line\r\n                let [dist_tmp, shortest_segment_tmp] =\r\n                    arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\r\n                if (Flatten.Utils.EQ_0(dist_tmp)) {\r\n                    collision_distance = distance;\r\n                }\r\n            }\r\n        }\r\n\r\n        // test translation of arc1.center to arc2 reduced by r1\r\n        if (Flatten.Utils.LT(arc1.r, arc2.r)) {\r\n            let arc_reduced = arc2.clone();\r\n            arc_reduced.r -= arc1.r;\r\n            distance = CollisionDistance.point2shape(arc1.center, arc_reduced);\r\n            if (distance < collision_distance) {\r\n                // additional check that transformed arc actually touching\r\n                // eslint-disable-next-line\r\n                let [dist_tmp, shortest_segment_tmp] =\r\n                    arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\r\n                if (Flatten.Utils.EQ_0(dist_tmp)) {\r\n                    collision_distance = distance;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let point of arc1.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, arc2);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        for (let point of arc2.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, arc1);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static translateArc(arc, vec) {\r\n        let arc_tmp = arc.clone();\r\n        arc_tmp.pc = arc_tmp.pc.translate(vec);\r\n        return arc_tmp;\r\n    }\r\n\r\n    static translate(polygon, vec) {\r\n        let newPolygon = new Polygon();\r\n        for (let face of polygon.faces) {\r\n            let shapes = [];\r\n            for (let edge of face) {\r\n                if (edge.shape instanceof Segment) {\r\n                    shapes.push(\r\n                        new Segment(edge.shape.ps.translate(vec), edge.shape.pe.translate(vec))\r\n                    )\r\n                }\r\n                else if (edge.shape instanceof  Arc) {\r\n                    let arc_trans = edge.shape.clone();\r\n                    arc_trans.pc = edge.shape.pc.translate(vec);\r\n                    shapes.push(arc_trans);\r\n                }\r\n            }\r\n            newPolygon.addFace(shapes);\r\n        }\r\n        return newPolygon;\r\n    }\r\n\r\n};\r\n\r\nCollisionDistance.Flatten = Flatten;\r\n\r\nexport default CollisionDistance;\r\n","import /*React,*/ {Component} from 'react';\r\nimport Flatten from 'flatten-js';\r\nimport CollisionDistance from \"../../models/collisionDistance\";\r\nimport axios from \"axios\";\r\nimport Layers from \"../../models/layers\";\r\n// import {Model} from \"../../models/model\";\r\nimport * as ActionTypes from \"../../store/actionTypes\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../store/actions/appActions\";\r\n\r\nlet {vector} = Flatten;\r\n\r\nclass CollisionDemo extends Component {\r\n    state={\r\n        done:false,\r\n        data:[]\r\n    };\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n            let layers = this.props.layers;\r\n\r\n            let layer = Layers.newLayer(stage, layers);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.name = \"collision_demo\";\r\n            layer.title = \"collision_demo\";\r\n            layer.affected = true;\r\n            layer.displayed = true;\r\n\r\n            axios(\"https://gist.githubusercontent.com/alexbol99/81893d40ec5eaa00d0336c35e069dd73/raw/b9328a4c6d7d6a44f375c68b4ec207690f40fd19/Block_53388_2parts_Cont.txt\")\r\n                .then( (resp) => {\r\n                    let parser = this.props.parser;\r\n                    let polygon1 = parser.parseToPolygon(resp.data);\r\n                    layer.add(polygon1);\r\n\r\n                    let vec = vector( 2*(polygon1.box.xmax - polygon1.box.xmin), 0 );\r\n                    let polygon2 = polygon1.translate(vec);\r\n                    layer.add(polygon2);\r\n\r\n                    let collision = CollisionDistance.apply(polygon2, polygon1);\r\n                    let polygon3 = polygon2.translate(vector(-collision, 0));\r\n                    layer.add(polygon3);\r\n\r\n                    // layers.push(layer);\r\n\r\n                    this.props.panAndZoomToShape(stage, layer);\r\n                    this.props.addNewLayer(layer);\r\n                    this.props.applyCollisionDemo();\r\n                    this.props.asyncOperationEnded();\r\n                });\r\n            this.setState({done:true});\r\n            this.props.asyncOperationStarted();\r\n        }\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage,\r\n        parser: state.app.parser\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch({\r\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n            stage: stage,\r\n            shape: layer\r\n        }),\r\n        addNewLayer: (layer) => dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        }),\r\n        applyCollisionDemo: () => dispatch({\r\n            type: ActionTypes.COLLISION_DEMO_URI\r\n        }),\r\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\r\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded())\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CollisionDemo);\r\n","import React from 'react';\r\nimport Modal from '../Modal';\r\nimport classes from './Spinner.module.css';\r\n\r\nconst spinner = () => {\r\n    return (\r\n        <Modal>\r\n            <div className={classes.BackDrop} >\r\n                <div className={classes.Loader}>Loading ...</div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default spinner;","import React from 'react';\r\nimport classes from \"./DocumentComponentCell.module.css\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst documentComponentCell = ({id, document, deleteDocumentFromDatabase, documentSelectedFromList}) => {\r\n    const deleteDocumentButtonClicked = (event) => {\r\n        event.stopPropagation();\r\n        deleteDocumentFromDatabase(id);\r\n    };\r\n\r\n    const onClick = () => {\r\n        documentSelectedFromList({\r\n            id: id,\r\n            name: document.name,\r\n            owner: document.owner,\r\n            lastUpdated: document.lastUpdated\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className={classes.DocumentComponentCell}>\r\n            <Link to={\"/documents/\" + id} onClick={onClick} >\r\n                <div>\r\n                    <img src={document.dataURL} alt={document.name} width=\"400px\"/>\r\n                </div>\r\n            </Link>\r\n            <div className={classes.DocumentComponentCellBottom}>\r\n                <div>\r\n                    <h4>{document.name}</h4>\r\n                    <h6>Last updated: {document.lastUpdated}</h6>\r\n                </div>\r\n                <button onClick={deleteDocumentButtonClicked}>Delete</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default documentComponentCell;","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\n// import {Link/*, Switch*/} from 'react-router-dom';\r\nimport * as cloudActions from '../../store/actions/cloudStorageActions';\r\nimport * as actions from \"../../store/actions/appActions\";\r\nimport classes from './DocumentsComponent.module.css';\r\nimport DocumentComponentCell from '../../components/Documents/DocumentComponentCell';\r\n\r\nclass DocumentsComponent extends Component {\r\n    deleteDocumentFromDatabase = (id) => {\r\n        cloudActions.deleteDocumentFromDatabase(id)\r\n            .then((response) => {\r\n                // const index = this.props.documentsList.findIndex((doc) => doc.id === id);\r\n                this.props.deleteDocumentFromDatabaseSucceed(id);\r\n                this.props.asyncOperationEnded();\r\n            });\r\n        this.props.asyncOperationStarted();\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        cloudActions.fetchDocumentsFromDatabase()\r\n            .then((response) => {\r\n                this.props.requestFetchDocumentsFromDatabaseSucceed(response.data);\r\n                this.props.asyncOperationEnded();\r\n            });\r\n        if (this.props.documentsList.length === 0) {\r\n            this.props.asyncOperationStarted();\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className={classes.DocumentComponent}>\r\n                <h2>My Cloud Documents</h2>\r\n                {/*<hr />*/}\r\n                <div className={classes.DocumentComponentGrid}>\r\n                    {Object.keys(this.props.documentsList).map(key => {\r\n                        let document = this.props.documentsList[key];\r\n                        return (<DocumentComponentCell\r\n                            key={key}\r\n                            id={key}\r\n                            document={document}\r\n                            deleteDocumentFromDatabase={this.deleteDocumentFromDatabase}\r\n                            documentSelectedFromList={this.props.documentSelectedFromList}\r\n                        />)\r\n                    })}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        documentsList: state.cloudStorage.documentsList\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\r\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded()),\r\n        requestFetchDocumentsFromDatabaseSucceed: (documentsList) =>\r\n            dispatch(cloudActions.requestFetchDocumentsFromDatabaseSucceed(documentsList)),\r\n        deleteDocumentFromDatabaseSucceed: (id) =>\r\n            dispatch(cloudActions.deleteDocumentFromDatabaseSucceed(id)),\r\n        documentSelectedFromList: (document) => dispatch(cloudActions.updateCurrentDocument(document))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentsComponent);\r\n","import React, {Component} from 'react';\r\nimport {Route, Switch, withRouter} from 'react-router-dom';\r\n\r\nimport AppBody from './AppBody';\r\n\r\nimport HeaderComponent from './components/Layout/HeaderComponent/HeaderComponent';\r\nimport {connect} from 'react-redux';\r\n\r\nimport './App.css';\r\n\r\n// import CloudDocument from './components/Constructions/CloudDocument';\r\nimport Demo from './components/Constructions/Demo';\r\nimport BooleanTest from './components/Constructions/BooleanTest';\r\nimport SkeletonRecognition from './components/Constructions/SkeletonRecognition';\r\nimport CollisionDemo from \"./components/Constructions/CollisionDemo\";\r\nimport Spinner from \"./components/UI/Spinner/Spinner\";\r\nimport DocumentsComponent from \"./containers/DocumentsComponent/DocumentsComponent\";\r\n\r\nclass App extends Component {\r\n    componentDidUpdate() {\r\n        if (this.props.location.pathname === '/' && this.props.document.id !== undefined) {\r\n            this.props.history.push(\"/documents/\" + this.props.document.id)\r\n        }\r\n        // if (this.props.location.pathname.split('/').length > 2 &&\r\n        //     this.props.location.pathname.split('/')[2].length > 0 &&\r\n        //     this.props.document.id === undefined) {\r\n        //     this.props.history.push(\"/\");\r\n        // }\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"App\">\r\n                <HeaderComponent\r\n                    title={this.props.title}\r\n                    version={this.props.version}\r\n                />\r\n\r\n                <Switch>\r\n                    <Route path=\"/documents\" exact component={DocumentsComponent}/>\r\n\r\n                    <Route path=\"/\" component={AppBody}/>\r\n\r\n                    {/*<Route path=\"/documents/:id\" component={CloudDocument}/>*/}\r\n\r\n                    <Route path=\"/demo\" component={Demo}/>\r\n                    <Route path=\"/boolean-test\" component={BooleanTest}/>\r\n                    <Route path=\"/skeleton\" component={SkeletonRecognition}/>\r\n                    <Route path=\"/collision-distance\" component={CollisionDemo}/>\r\n\r\n                </Switch>\r\n\r\n                {this.props.showSpinner ? <Spinner/> : null}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({app, cloudStorage}) => {\r\n    return {\r\n        title: app.title,\r\n        version: app.version,\r\n        showSpinner: app.showSpinner,\r\n        document: cloudStorage.document\r\n    }\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, null)(App));\r\n","/**\r\n * Created by alexanderbol on 01/05/2017.\r\n */\r\n\r\nimport Flatten from 'flatten-js';\r\nlet {Point, Segment, Arc, Polygon} = Flatten;\r\nlet { vector } = Flatten;\r\n\r\n/*\r\nlet debug_str = `+\t\t[0]\t{nrec=27 nalloc=27 h_ind_id=-1 ...} mat_cont_hdr_struc\tmat_cont_struc\r\n    +\t\t[1]\t{pmin=59146400,5973200 pmax=59606001,6438000} mat_cont_lim_struc\tmat_cont_struc\r\n+\t\t[2]\t{nedge=23 nalloc=25 ntop=2 ...} mat_cont_poly_struc\tmat_cont_struc\r\n+\t\t[3]\t{pmin=59146400,5973200 pmax=59606001,6438000} mat_cont_lim_struc\tmat_cont_struc\r\n+\t\t[4]\t{ps=59192738,6363124 pe=59216000,6372800 pc=59216000,6340000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[5]\t{ps=59216000,6372800 pe=59267652,6372800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[6]\t{ps=59267652,6372800 pe=59267652,6307200 pc=59360000,6340000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[7]\t{ps=59267652,6307200 pe=59229586,6307200} mat_seg_struc\tmat_cont_struc\r\n+\t\t[8]\t{ps=59229586,6307200 pe=59212000,6289614} mat_seg_struc\tmat_cont_struc\r\n+\t\t[9]\t{ps=59212000,6289614 pe=59212000,6056386} mat_seg_struc\tmat_cont_struc\r\n+\t\t[10]\t{ps=59212000,6056386 pe=59229586,6038800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[11]\t{ps=59229586,6038800 pe=59469614,6038800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[12]\t{ps=59469614,6038800 pe=59487200,6056386} mat_seg_struc\tmat_cont_struc\r\n+\t\t[13]\t{ps=59487200,6056386 pe=59487200,6100500} mat_seg_struc\tmat_cont_struc\r\n+\t\t[14]\t{ps=59487200,6100500 pe=59434000,6180000 pc=59520000,6180000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[15]\t{ps=59434000,6180000 pe=59552800,6100500 pc=59520000,6180000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[16]\t{ps=59552800,6100500 pe=59552800,6042800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[17]\t{ps=59552800,6042800 pe=59543124,6019538 pc=59520000,6042800 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[18]\t{ps=59543124,6019538 pe=59506462,5982876} mat_seg_struc\tmat_cont_struc\r\n+\t\t[19]\t{ps=59506462,5982876 pe=59483200,5973200 pc=59483200,6006000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[20]\t{ps=59483200,5973200 pe=59216000,5973200} mat_seg_struc\tmat_cont_struc\r\n+\t\t[21]\t{ps=59216000,5973200 pe=59192738,5982876 pc=59216000,6006000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[22]\t{ps=59192738,5982876 pe=59156076,6019538} mat_seg_struc\tmat_cont_struc\r\n+\t\t[23]\t{ps=59156076,6019538 pe=59146400,6042800 pc=59179200,6042800 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[24]\t{ps=59146400,6042800 pe=59146400,6303200} mat_seg_struc\tmat_cont_struc\r\n+\t\t[25]\t{ps=59146400,6303200 pe=59156076,6326462 pc=59179200,6303200 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[26]\t{ps=59156076,6326462 pe=59192738,6363124} mat_seg_struc\tmat_cont_struc\r\n`;\r\n*/\r\n\r\nexport class Parser {\r\n    parseToWatchArray(str) {\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n        let watchArray = [];\r\n        for (let line of arrayOfLines) {\r\n            watchArray.push(line.substring(line.indexOf('{')));\r\n        }\r\n        return watchArray;\r\n    }\r\n\r\n    parseToSegment(line) {\r\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\r\n\r\n        let psArr = termArr[0].split('=')[1].split(',');\r\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n\r\n        let peArr = termArr[1].split('=')[1].split(',');\r\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n\r\n        return new Segment(ps, pe);\r\n    }\r\n\r\n    parseToArc(line) {\r\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\r\n\r\n        let psArr = termArr[0].split('=')[1].split(',');\r\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n\r\n        let peArr = termArr[1].split('=')[1].split(',');\r\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n\r\n        let pcArr = termArr[2].split('=')[1].split(',');\r\n        let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\r\n\r\n        let cwStr = termArr[3].split('=')[1];\r\n        let counterClockwise = cwStr === '0' ? true : false;\r\n\r\n        let startAngle = vector(pc,ps).slope;\r\n        let endAngle = vector(pc, pe).slope;\r\n\r\n        if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n            endAngle += 2*Math.PI;\r\n        }\r\n        let r = vector(pc, ps).length;\r\n\r\n        return new Arc(pc, r, startAngle, endAngle, counterClockwise);\r\n    }\r\n\r\n    parseToPolygon(str) {\r\n        let polygon = new Polygon();\r\n        // let mulitystr = debug_str;\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n\r\n        for (let i=0; i < arrayOfLines.length; i++) {\r\n            let line = arrayOfLines[i];\r\n            if (line.search('mat_cont_poly_struc') >= 0) {\r\n                let parenth = line.match(/\\{([^)]+)\\}/)[1];       // string inside {..}\r\n                let termArr = parenth.split(' ');                 // array of terms \"attr=value\"\r\n                let nedgesTerm = termArr[0];                      // \"nedge=nn\"\r\n                let nedgesStr = nedgesTerm.split('=')[1];\r\n                let nedges = parseInt(nedgesStr,10);\r\n\r\n                // Create new face from next #nedges of segments and arcs\r\n                let edges = [];\r\n                for (let j=i+2; j < i+2+nedges; j++) {\r\n                    line = arrayOfLines[j];\r\n                    // let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n                    // let termArr = parenth.split(' ');             // array of terms \"attr=value\"\r\n\r\n                    if (line.search('mat_seg_struc') >= 0) {\r\n                        let segment = this.parseToSegment(line);\r\n                        edges.push(segment);\r\n\r\n                        // let psArr = termArr[0].split('=')[1].split(',');\r\n                        // let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n                        //\r\n                        // let peArr = termArr[1].split('=')[1].split(',');\r\n                        // let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n                        //\r\n                        // edges.push(new Segment(ps, pe));\r\n                    }\r\n                    else if (line.search('mat_curve_struc') >= 0) {\r\n                        let arc = this.parseToArc(line);\r\n                        edges.push(arc);\r\n\r\n                        // let psArr = termArr[0].split('=')[1].split(',');\r\n                        // let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n                        //\r\n                        // let peArr = termArr[1].split('=')[1].split(',');\r\n                        // let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n                        //\r\n                        // let pcArr = termArr[2].split('=')[1].split(',');\r\n                        // let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\r\n                        //\r\n                        // let cwStr = termArr[3].split('=')[1];\r\n                        // let counterClockwise = cwStr === '0' ? true : false;\r\n                        //\r\n                        // let startAngle = vector(pc,ps).slope;\r\n                        // let endAngle = vector(pc, pe).slope;\r\n                        //\r\n                        // if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n                        //     endAngle += 2*Math.PI;\r\n                        // }\r\n                        // let r = vector(pc, ps).length;\r\n                        //\r\n                        // edges.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\r\n                    }\r\n                }\r\n                polygon.addFace(edges);\r\n            }\r\n        }\r\n        return polygon;\r\n    }\r\n\r\n    parseToPoints(str) {\r\n        let points = [];\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n        for (let line of arrayOfLines) {\r\n            if (line.search('point_struc') >= 0) {\r\n                let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n                let pointArr = parenth.split('=')[1].split(',');\r\n                let point = new Point(parseInt(pointArr[0],10), parseInt(pointArr[1],10));\r\n                point.label = line.split(/\\s+/)[1];\r\n                points.push(point);\r\n            }\r\n        }\r\n        return points;\r\n    }\r\n\r\n    parseToSegmentsArcs(str) {\r\n        let shapes = [];\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n        for (let line of arrayOfLines) {\r\n            if (line.search('mat_seg_struc') >= 0) {\r\n                let segment = this.parseToSegment(line);\r\n                shapes.push(segment);\r\n            }\r\n            else if (line.search('mat_curve_struc') >= 0) {\r\n                let arc = this.parseToArc(line);\r\n                shapes.push(arc);\r\n            }\r\n        }\r\n        return shapes;\r\n    }\r\n\r\n    parse(str) {\r\n        /* try polygon */\r\n        let polygon = this.parseToPolygon(str);\r\n        if (polygon.edges.size > 0 && polygon.faces.size > 0) {\r\n            return [polygon];\r\n        }\r\n\r\n        /* try array of points */\r\n        let points = this.parseToPoints(str);\r\n        if (points.length > 0) {\r\n            return points;\r\n        }\r\n\r\n        /* try array of segments and arcs */\r\n        let shapes = this.parseToSegmentsArcs(str);\r\n        if (shapes.length > 0) {\r\n            return shapes;\r\n        }\r\n    }\r\n}\r\n\r\n","import * as ActionTypes from \"../actionTypes\";\r\nimport {Parser} from \"../../dataParsers/parser\";\r\n\r\nconst unitsList = [\r\n    {\r\n        name: \"pixels\",\r\n        decimals: 0,\r\n        divisor: 1\r\n    },\r\n    {\r\n        name: \"inch\",\r\n        decimals: 7,\r\n        divisor: 10160000\r\n    },\r\n    {\r\n        name: \"mm\",\r\n        decimals: 6,\r\n        divisor: 400000\r\n    }];\r\n\r\nconst defaultAppState = {\r\n    title: \"Debug Viewer\",\r\n    version: process.env.REACT_APP_VERSION,\r\n    build: \"\",\r\n    units: \"pixels\",\r\n    decimals: 0,\r\n    divisor: 1,\r\n    // bg: \"#F1F1F1\",\r\n    parser: new Parser(),\r\n    widthOn: true,\r\n    displayVertices: false,\r\n    displayLabels: true,\r\n    measurePointsActive: false,\r\n    zoomFactor: undefined,\r\n    originX: undefined,\r\n    originY: undefined,\r\n    showAboutPopup: false,\r\n    importDataToNewLayer: true,       // if false, import data to affected layer\r\n    showSkeletonRecognitionButton: false,\r\n    applySkeletonRecognition: false,\r\n    stage: null,\r\n    showSpinner: false\r\n};\r\n\r\nconst app = (state = defaultAppState, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.NEW_STAGE_CREATED:\r\n            return Object.assign({}, state, {\r\n                stage: action.stage,\r\n                zoomFactor: action.stage.zoomFactor * action.stage.resolution,\r\n                originX: action.stage.origin.x,\r\n                originY: action.stage.origin.y,\r\n            });\r\n\r\n        case ActionTypes.STAGE_UNMOUNTED:\r\n            return Object.assign({}, state, {\r\n                stage: null,\r\n                zoomFactor: undefined,\r\n                originX: undefined,\r\n                originY: undefined\r\n            });\r\n\r\n        case ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE:\r\n        case ActionTypes.PAN_AND_ZOOM_TO_SHAPE:\r\n            return Object.assign({}, state, {\r\n                zoomFactor: action.stage.zoomFactor * action.stage.resolution,\r\n                originX: action.stage.origin.x,\r\n                originY: action.stage.origin.y,\r\n            });\r\n        case ActionTypes.MOUSE_MOVED_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                originX: action.stage.origin.x,\r\n                originY: action.stage.origin.y\r\n            });\r\n        case ActionTypes.TOGGLE_UNITS_CLICKED:\r\n            let curUnitsId = unitsList.findIndex(units => state.units === units.name);\r\n            let newUnits = unitsList[(curUnitsId + 1) % 3];\r\n            return Object.assign({}, state, {\r\n                units: newUnits.name,\r\n                decimals: newUnits.decimals,\r\n                divisor: newUnits.divisor\r\n            });\r\n        case ActionTypes.TOGGLE_WIDTH_MODE_CLICKED:\r\n            return Object.assign({}, state, {\r\n                widthOn: !state.widthOn,\r\n                displayVertices: state.widthOn ? state.displayVertices : false\r\n            });\r\n        case ActionTypes.TOGGLE_DISPLAY_VERTICES_CLICKED:\r\n            if (state.displayVertices) {\r\n                return Object.assign({}, state, {\r\n                    displayVertices: false\r\n                });\r\n            }\r\n            else {\r\n                return Object.assign({}, state, {\r\n                    widthOn: false,\r\n                    displayVertices: true\r\n                });\r\n            }\r\n\r\n        case ActionTypes.TOGGLE_DISPLAY_LABELS_CLICKED:\r\n            return Object.assign({}, state, {\r\n                displayLabels: !state.displayLabels\r\n            });\r\n\r\n        case ActionTypes.TOGGLE_ABOUT_POPUP_CLICKED:\r\n            return Object.assign({}, state, {\r\n                showAboutPopup: !state.showAboutPopup\r\n            });\r\n\r\n        // case ActionTypes.CLOSE_ABOUT_POPUP_BUTTON_PRESSED:\r\n        //     return Object.assign({}, state, {\r\n        //         showAboutPopup: false\r\n        //     });\r\n\r\n        case ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED:\r\n            return Object.assign({}, state, {\r\n                measurePointsActive: false\r\n            });\r\n\r\n        case ActionTypes.MEASURE_POINTS_BUTTON_PRESSED:\r\n            return Object.assign({}, state, {\r\n                measurePointsActive: true\r\n            });\r\n        case ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED:\r\n            return Object.assign({}, state, {\r\n                measurePointsActive: false\r\n            });\r\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n            if (state.hoveredShape) {\r\n                return state\r\n            }\r\n            else {\r\n                return Object.assign({}, state, {\r\n                    measureShapesFirstClick: true,\r\n                    firstMeasuredShape: null,\r\n                    firstMeasuredLayer: null,\r\n                    secondMeasuredShape: null,\r\n                    secondMeasuredLayer: null,\r\n                    distance: undefined,\r\n                    shortestSegment: null\r\n                });\r\n            }\r\n        case ActionTypes.SKELETON_RECOGNITION_URI:\r\n            return Object.assign({}, state, {\r\n                showSkeletonRecognitionButton: true\r\n            });\r\n        case ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED:\r\n            return Object.assign({}, state, {\r\n                applySkeletonRecognition: true\r\n            });\r\n        case ActionTypes.ASYNC_OPERATION_STARTED:\r\n            return Object.assign({}, state, {\r\n                showSpinner: true\r\n            });\r\n        case ActionTypes.ASYNC_OPERATION_ENDED:\r\n            return Object.assign({}, state, {\r\n                showSpinner: false\r\n            });\r\n        case ActionTypes.AABB_TREE_NEXT_LEVEL:\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default app;","import * as ActionTypes from \"../actionTypes\";\r\nimport Layers from \"../../models/layers\";\r\n\r\nconst layers = (state = [], action) => {\r\n    let affectedLayer = state.find(layer => layer.affected);\r\n    let affectedLayerId = state.findIndex(layer => layer.affected);\r\n    let newLayer;\r\n\r\n    switch (action.type) {\r\n        case ActionTypes.ADD_LAYER_BUTTON_PRESSED:\r\n            newLayer = Layers.newLayer(action.stage, state);\r\n            return [...state, newLayer];\r\n\r\n        case ActionTypes.ADD_NEW_LAYER:\r\n            return [...state, action.layer];\r\n\r\n        case ActionTypes.DELETE_LAYER_BUTTON_PRESSED:\r\n            if (affectedLayer) {\r\n                return Layers.delete(state, affectedLayer);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n\r\n        case ActionTypes.CLEAR_ALL_BUTTON_CLICKED:\r\n            return [];\r\n\r\n        case ActionTypes.SORT_LAYERS_BUTTON_PRESSED:\r\n            return Layers.sort(state);\r\n\r\n        case ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED:\r\n            let color = \"\";\r\n            if (!action.layer.displayed) {\r\n                color = Layers.getNextColor(state);\r\n                if (color === \"\") return;  // no free colors\r\n            }\r\n            return state.map((layer) => {\r\n                if (layer !== action.layer) {\r\n                    // if action.layer will be undisplayed,\r\n                    // it cannot become affected, then\r\n                    // keep affected on this layer\r\n                    if (action.layer.displayed) {\r\n                        return layer;\r\n                    }\r\n                    else {\r\n                        return layer.setAffected(false);\r\n                    }\r\n                }\r\n                else {\r\n                    let newLayer = layer.toggleDisplayed(color);\r\n                    newLayer.affected = newLayer.displayed;\r\n                    return newLayer;\r\n                }\r\n                // return layer.toggleDisplayed(color);\r\n            });\r\n\r\n        case ActionTypes.TOGGLE_AFFECTED_LAYER_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer !== action.layer) {\r\n                    return layer.setAffected(false);\r\n                }\r\n                else {\r\n                    return layer.setAffected(!layer.affected);\r\n                }\r\n            });\r\n\r\n        // case ActionTypes.NEW_SHAPE_PASTED:\r\n        //     return state.map((layer) => {\r\n        //         if (layer.affected) {\r\n        //             return layer.addShapesArray(action.shapesArray);\r\n        //         }\r\n        //         else {\r\n        //             return layer;\r\n        //         }\r\n        //     });\r\n\r\n        case ActionTypes.OPEN_LAYER_EDIT_FORM_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer !== affectedLayer) {\r\n                    return layer;\r\n                }\r\n                else {\r\n                    return layer.setEdited(true);\r\n                }\r\n            });\r\n\r\n        case ActionTypes.SUBMIT_LAYER_EDIT_FORM_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer.edited) {\r\n                    return layer.setNameAndTitle(action.newLayer.name, action.newLayer.title);\r\n                }\r\n                else {\r\n                    return layer;\r\n                }\r\n            });\r\n\r\n        case ActionTypes.ESCAPE_LAYER_EDIT_FORM_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer.edited) {             // !== action.layer) {\r\n                    return layer.setEdited(false);\r\n                }\r\n                else {\r\n                    return layer;\r\n                }\r\n            });\r\n\r\n        case ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED:\r\n            if (affectedLayerId === state.length - 1) {\r\n                return state;\r\n            }\r\n            else {\r\n\r\n                let nextLayer = state[affectedLayerId + 1];\r\n\r\n                return state.map(layer => {\r\n                    if (layer === affectedLayer) {\r\n                        let newCurLayer = layer.toggleDisplayed(\"\");\r\n                        newCurLayer.affected = false;\r\n                        return newCurLayer;\r\n                    }\r\n                    else if (layer === nextLayer) {\r\n                        let color = affectedLayer.color;\r\n                        let newNextLayer = layer.toggleDisplayed(color);\r\n                        newNextLayer.affected = true;\r\n                        return newNextLayer;\r\n                    }\r\n                    else {\r\n                        return layer;\r\n                    }\r\n                });\r\n            }\r\n\r\n        case ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED:\r\n            if (affectedLayerId === 0) {\r\n                return state;\r\n            }\r\n            else {\r\n                let nextLayer = state[affectedLayerId - 1];\r\n\r\n                return state.map(layer => {\r\n                    if (layer === affectedLayer) {\r\n                        let newCurLayer = layer.toggleDisplayed(\"\");\r\n                        newCurLayer.affected = false;\r\n                        return newCurLayer;\r\n                    }\r\n                    else if (layer === nextLayer) {\r\n                        let newNextLayer = layer.toggleDisplayed(affectedLayer.color);\r\n                        newNextLayer.displayed = true;\r\n                        newNextLayer.affected = true;\r\n                        return newNextLayer;\r\n                    }\r\n                    else {\r\n                        return layer;\r\n                    }\r\n                });\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default layers;","import * as ActionTypes from \"../actionTypes\";\r\n\r\nconst defaultMouseState = {\r\n    x: 0,\r\n    y: 0,\r\n    startX: undefined,\r\n    startY: undefined\r\n};\r\n\r\nconst mouse = (state = defaultMouseState, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.MOUSE_MOVED_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                x: action.x,\r\n                y: action.y\r\n            });\r\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                startX: action.x,\r\n                startY: action.y\r\n            });\r\n        case ActionTypes.MOUSE_UP_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                startX: undefined,\r\n                startY: undefined\r\n            });\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default mouse;","import * as ActionTypes from \"../actionTypes\";\r\nimport Flatten from \"flatten-js\";\r\n\r\nconst defaultMeasureShapesTool = {\r\n    measureShapesActive: false,\r\n    measureShapesFirstClick: true,\r\n    hoveredShape: null,\r\n    firstMeasuredShape: null,\r\n    secondMeasuredShape: null,\r\n    firstMeasuredLayer: null,\r\n    secondMeasuredLayer: null,\r\n    distance: undefined,\r\n    shortestSegment: null\r\n};\r\n\r\nconst measureShapesTool = (state = defaultMeasureShapesTool, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED:\r\n            return Object.assign({}, defaultMeasureShapesTool, {\r\n                measureShapesActive: true\r\n            });\r\n        case ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED:\r\n            return Object.assign({}, defaultMeasureShapesTool);\r\n\r\n        case ActionTypes.MEASURE_POINTS_BUTTON_PRESSED:\r\n            return Object.assign({}, defaultMeasureShapesTool);\r\n\r\n        case ActionTypes.MOUSE_ROLL_OVER_SHAPE:\r\n            return Object.assign({}, state, {\r\n                hoveredShape: state.measureShapesActive ? action.shape : null\r\n            });\r\n        case ActionTypes.MOUSE_ROLL_OUT_SHAPE:\r\n            return Object.assign({}, state, {\r\n                hoveredShape: null\r\n            });\r\n        case ActionTypes.MOUSE_CLICKED_ON_SHAPE:\r\n            if (!state.measureShapesActive) {\r\n                return state;\r\n            }\r\n            // measureShapesActive\r\n\r\n            if (state.measureShapesFirstClick) {\r\n                return Object.assign({}, state, {\r\n                    firstMeasuredShape: action.shape,\r\n                    firstMeasuredLayer: action.layer,\r\n                    secondMeasuredShape: null,\r\n                    secondMeasuredLayer: null,\r\n                    measureShapesFirstClick: false,\r\n                    distance: undefined,\r\n                    shortestSegment: null\r\n                })\r\n            }\r\n            else {    // second click\r\n                if (action.shape === state.firstMeasuredShape) {\r\n                    return state;  // second click on the same shape\r\n                }\r\n\r\n                let shape1 = state.firstMeasuredShape.geom;\r\n                let shape2 = action.shape.geom;\r\n                let distance, shortestSegment;\r\n                // if (shape1 instanceof Flatten.Polygon && shape2 instanceof Flatten.Polygon) {\r\n                //     [distance, shortestSegment] = Flatten.Distance.polygon2polygon(shape1, shape2);\r\n                // }\r\n                // else {\r\n                [distance, shortestSegment] = Flatten.Distance.distance(shape1, shape2);\r\n                // }\r\n\r\n\r\n                return Object.assign({}, state, {\r\n                    secondMeasuredShape: action.shape,\r\n                    secondMeasuredLayer: action.layer,\r\n                    measureShapesFirstClick: true,\r\n                    distance: distance,\r\n                    shortestSegment: shortestSegment\r\n                });\r\n            }\r\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n            if (state.hoveredShape) {\r\n                return state\r\n            }\r\n            else {\r\n                return Object.assign({}, state, {\r\n                    measureShapesFirstClick: true,\r\n                    firstMeasuredShape: null,\r\n                    firstMeasuredLayer: null,\r\n                    secondMeasuredShape: null,\r\n                    secondMeasuredLayer: null,\r\n                    distance: undefined,\r\n                    shortestSegment: null\r\n                });\r\n            }\r\n\r\n        case ActionTypes.DELETE_LAYER_BUTTON_PRESSED:\r\n            if (action.layer === state.firstMeasuredLayer ||\r\n                action.layer === state.secondMeasuredLayer) {\r\n                return Object.assign({}, defaultMeasureShapesTool);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n\r\n        case ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED:\r\n            if (action.layer.displayed &&\r\n                (action.layer === state.firstMeasuredLayer ||\r\n                    action.layer === state.secondMeasuredLayer)) {\r\n                return Object.assign({}, defaultMeasureShapesTool);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default measureShapesTool;","import * as ActionTypes from \"../actionTypes\";\r\n\r\nconst documentDefaultState = {\r\n    id: undefined,\r\n    name: \"\",\r\n    owner: \"Alex Bol\",\r\n    lastUpdated: undefined\r\n};\r\n\r\nconst cloudStorageDefaultState = {\r\n    document: documentDefaultState,\r\n    documentsList: {}\r\n};\r\n\r\nfunction isUpToDate(stateDocumentsList, actionDocumentsList) {\r\n    if (actionDocumentsList === null || actionDocumentsList === undefined)\r\n        return true;\r\n\r\n    if (Object.keys(stateDocumentsList).length !== Object.keys(actionDocumentsList).length)\r\n        return false;\r\n    for (let key in stateDocumentsList) {\r\n        if (!(actionDocumentsList.hasOwnProperty(key) && (stateDocumentsList[key].lastUpdated !== actionDocumentsList[key].lastUpdated))) {\r\n            return false\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nconst cloudStorage = (state = cloudStorageDefaultState, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED:\r\n            return {\r\n                ...state,\r\n                document: {\r\n                    id: action.id,\r\n                    name: action.name,\r\n                    owner: action.owner,\r\n                    lastUpdated: action.lastUpdated\r\n                }\r\n            };\r\n\r\n        case ActionTypes.REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED:\r\n            return {\r\n                ...state,\r\n                document: {\r\n                    id: action.id,\r\n                    name: action.name,\r\n                    owner: action.owner,\r\n                    lastUpdated: action.lastUpdated\r\n                }\r\n            };\r\n\r\n        case ActionTypes.REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED:\r\n            return {\r\n                ...state,\r\n                document: {\r\n                    ...state.document,\r\n                    lastUpdated: action.lastUpdated\r\n                }\r\n            };\r\n\r\n        case ActionTypes.DOCUMENT_NAME_UPDATED:\r\n            return {\r\n                ...state,\r\n                document: {\r\n                    ...state.document,\r\n                    name: action.name\r\n                }\r\n            };\r\n\r\n        case ActionTypes.DELETE_DOCUMENT_FROM_DATABASE_SUCCEED:\r\n            let { [action.id]: document, ...newList } = state.documentsList;\r\n            return {\r\n                ...state,\r\n                document: state.document.id === action.id ? documentDefaultState : state.document,\r\n                documentsList: newList\r\n            };\r\n\r\n        case ActionTypes.DOCUMENT_SELECTED_FROM_LIST:\r\n            return {\r\n                ...state,\r\n                document: action.document\r\n            };\r\n\r\n        case ActionTypes.CLEAR_ALL_BUTTON_CLICKED:\r\n            return {\r\n                ...state,\r\n                document: documentDefaultState\r\n            };\r\n\r\n        case ActionTypes.REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED:\r\n            return isUpToDate(state.documentsList, action.documentsList) ?\r\n                state :\r\n            {\r\n                ...state,\r\n                documentsList: action.documentsList\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default cloudStorage","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport app from \"./reducers/app\";\r\nimport layers from \"./reducers/layers\";\r\nimport mouse from \"./reducers/mouse\";\r\nimport measureShapesTool from \"./reducers/measureShapesTool\";\r\nimport cloudStorage from \"./reducers/cloudStorage\";\r\n\r\nconst reducer = combineReducers({\r\n    app,\r\n    layers,\r\n    cloudStorage,\r\n    measureShapesTool,\r\n    mouse\r\n});\r\n\r\nexport default reducer;\r\n","import * as ActionTypes from '../store/actionTypes';\r\n\r\nconst log = ({ getState, dispatch }) => next => action => {\r\n\r\n    if(action.type !== ActionTypes.MOUSE_MOVED_ON_STAGE) {\r\n        console.log('ACTION: ' + action.type, action);\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\nexport default log;","import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nlet {Point, Segment, Arc, Polygon} = Flatten;\r\nlet { vector } = Flatten;\r\n\r\nfunction parseEdges(edgesXML) {\r\n    let edges = [];\r\n\r\n    for (let edge of Array.from(edgesXML)) {\r\n        let type = edge.getAttribute('type');\r\n\r\n        if (type === \"segment\") {\r\n            let ps = new Point(parseInt(edge.getAttribute('xs'),10), parseInt(edge.getAttribute('ys'),10));\r\n            let pe = new Point(parseInt(edge.getAttribute('xe'),10), parseInt(edge.getAttribute('ye'),10));\r\n\r\n            edges.push(new Segment(ps, pe));\r\n        }\r\n\r\n        if (type === \"curve\") {\r\n            let ps = new Point(parseInt(edge.getAttribute('xs'),10), parseInt(edge.getAttribute('ys'),10));\r\n            let pe = new Point(parseInt(edge.getAttribute('xe'),10), parseInt(edge.getAttribute('ye'),10));\r\n            let pc = new Point(parseInt(edge.getAttribute('xc'),10), parseInt(edge.getAttribute('yc'),10));\r\n\r\n            let counterClockwise = edge.getAttribute('cw') === 'no' ? true : false;\r\n\r\n            let startAngle = vector(pc,ps).slope;\r\n            let endAngle = vector(pc, pe).slope;\r\n\r\n            if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n                endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\r\n            }\r\n\r\n            let r = vector(pc, ps).length;\r\n\r\n            edges.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\r\n        }\r\n    }\r\n\r\n    return edges;\r\n}\r\n\r\nfunction parsePolygon(polygonsXML) {\r\n    let polygon = new Polygon();\r\n\r\n    // let nedges = parseInt(profile.getAttribute(\"n_edges\"), 10);\r\n\r\n    // Augment Flatten object with style\r\n    let color = polygonsXML.getAttribute(\"color\");\r\n    polygon.style = {\r\n        stroke: color || undefined,\r\n        fill: color || undefined,\r\n        alpha: 1.0\r\n    };\r\n\r\n    // Augment Flatten object with label\r\n    let label = polygonsXML.getAttribute(\"label\");\r\n    polygon.label = label;\r\n\r\n    // Add islands\r\n    let islands = polygonsXML.getElementsByTagName('island');\r\n    for (let island of Array.from(islands)) {\r\n        let edgesXML = island.getElementsByTagName('edge');\r\n        polygon.addFace(parseEdges(edgesXML));\r\n    }\r\n\r\n    // Add holes\r\n    let holes = polygonsXML.getElementsByTagName('hole');\r\n    for (let hole of Array.from(holes)) {\r\n        let edgesXML = hole.getElementsByTagName('edge');\r\n        polygon.addFace(parseEdges(edgesXML));\r\n    }\r\n\r\n    return polygon;\r\n}\r\n\r\nfunction parseSegment(segmentXML) {\r\n    let ps = new Point(parseInt(segmentXML.getAttribute('xs'),10), parseInt(segmentXML.getAttribute('ys'),10));\r\n    let pe = new Point(parseInt(segmentXML.getAttribute('xe'),10), parseInt(segmentXML.getAttribute('ye'),10));\r\n\r\n    let segment = new Segment(ps, pe);\r\n\r\n    // Augment Flatten object with label property\r\n    let label = segmentXML.getAttribute(\"label\");\r\n    segment.label = label;\r\n\r\n    return segment;\r\n}\r\n\r\nfunction parseCurve(curveXML) {\r\n    let ps = new Point(parseInt(curveXML.getAttribute('xs'),10), parseInt(curveXML.getAttribute('ys'),10));\r\n    let pe = new Point(parseInt(curveXML.getAttribute('xe'),10), parseInt(curveXML.getAttribute('ye'),10));\r\n    let pc = new Point(parseInt(curveXML.getAttribute('xc'),10), parseInt(curveXML.getAttribute('yc'),10));\r\n\r\n    let counterClockwise = curveXML.getAttribute('cw') === 'yes' ? true : false;\r\n\r\n    let startAngle = vector(pc,ps).slope;\r\n    let endAngle = vector(pc, pe).slope;\r\n\r\n    if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n        endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\r\n    }\r\n\r\n    let r = vector(pc, ps).length;\r\n\r\n    let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\r\n\r\n    // Augment Flatten object with label property\r\n    let label = curveXML.getAttribute(\"label\");\r\n    arc.label = label;\r\n\r\n    return arc;\r\n}\r\n\r\nfunction parsePoint(pointXML) {\r\n    let point = new Point(parseInt(pointXML.getAttribute('x'),10), parseInt(pointXML.getAttribute('y'),10));\r\n\r\n    // Augment Flatten object with label property\r\n    let label = pointXML.getAttribute(\"label\");\r\n    point.label = label;\r\n\r\n    return point;\r\n}\r\nexport function parseXML(filename, str) {\r\n    let job = new Job();\r\n\r\n    job.filename = filename;\r\n\r\n    let parser = new DOMParser();\r\n    let xmlDoc = parser.parseFromString(str, \"text/xml\");\r\n\r\n    // Parse document title\r\n    let titles = xmlDoc.getElementsByTagName('title');\r\n    if (titles && titles.length > 0) {\r\n        job.title = titles[0].firstChild.nodeValue;          // take the first title if more than one\r\n    }\r\n\r\n    // Parse profiles and add polygons to the job\r\n    let profilesXML = xmlDoc.getElementsByTagName('profile');\r\n    for (let profileXML of Array.from(profilesXML)) {\r\n        let polygon = parsePolygon(profileXML);\r\n        job.profiles.push(polygon);\r\n    }\r\n\r\n    // Parse materials and add polygons to the job\r\n    let materialXML = xmlDoc.getElementsByTagName('material');\r\n    for (let shapeXML of Array.from(materialXML)) {\r\n        let polygon = parsePolygon(shapeXML);\r\n        job.materials.push(polygon);\r\n    }\r\n\r\n    // Parse segments\r\n    let segmentsXML = xmlDoc.getElementsByTagName('segment');\r\n    for (let segmentXML of Array.from(segmentsXML)) {\r\n        let segment = parseSegment(segmentXML);\r\n        job.shapes.push(segment);\r\n    }\r\n\r\n    // Parse segments\r\n    let curvesXML = xmlDoc.getElementsByTagName('curve');\r\n    for (let curveXML of Array.from(curvesXML)) {\r\n        let curve = parseCurve(curveXML);\r\n        job.shapes.push(curve);\r\n    }\r\n\r\n    // Parse points\r\n    let pointsXML = xmlDoc.getElementsByTagName('point');\r\n    for (let pointXML of Array.from(pointsXML)) {\r\n        let point = parsePoint(pointXML);\r\n        job.shapes.push(point);\r\n    }\r\n    return job;\r\n}\r\n","import Flatten from 'flatten-js';\r\n\r\nconst pgmResolution = 25.500025;\r\nconst microns2pixels = 400;\r\n// const inch2pixels = 10160;\r\n// const offsetX = 12.322830;\r\n// const offsetY = 8.326776;\r\nconst sizeX = 3.0303;\r\n\r\nfunction toPixels(str) {\r\n    let num = Number(str);\r\n    return Math.round(num*pgmResolution*microns2pixels,0);\r\n}\r\n\r\nexport function parseImage(file) {\r\n    let image = {};          // TODO: to be Flatten.Image\r\n\r\n    let terms = file.name.split('_');\r\n    let yStr = terms[0].substr(1);\r\n    let xStr = terms[1] ? terms[1].substr(1) : undefined;\r\n\r\n    let x = isNaN(xStr) ? 0 : toPixels(xStr) + 90000;\r\n    let y = isNaN(yStr) ? 0 : toPixels(yStr) - 40000;\r\n\r\n    image.center = new Flatten.Point(x,y);\r\n    image.width = sizeX*microns2pixels*1000;    // 2 mm\r\n    image.box = new Flatten.Box(\r\n        image.center.x - image.width/2,\r\n        image.center.y - image.width/2,\r\n        image.center.x + image.width/2,\r\n        image.center.y + image.width/2,\r\n    );\r\n\r\n    return image;\r\n}","import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nlet {point} = Flatten;\r\n\r\nconst micron2pixels = 400;\r\nfunction micronToPixels(str) {\r\n    return Math.round(Number(str)*micron2pixels,0);\r\n}\r\n\r\nexport function parseCSV(filename, str) {\r\n    let job = new Job();\r\n    job.filename = filename;\r\n\r\n    let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n\r\n    for (let i = 0; i < arrayOfLines.length; i++) {\r\n        let line = arrayOfLines[i];\r\n        let terms = line.split(',');\r\n\r\n        let px = micronToPixels(terms[0]);\r\n        let py = micronToPixels(terms[1]);\r\n        let nx = Number(terms[2]);\r\n        let ny = Number(terms[3]);\r\n        let shape = point(px,py);\r\n        shape.nx = nx\r\n        shape.ny = ny;\r\n        job.shapes.push(shape)\r\n    }\r\n\r\n    return job\r\n}","import * as ActionTypes from '../store/actionTypes';\r\nimport Layers from '../models/layers';\r\n// import { Shape } from '../models/shape';\r\nimport Model from \"../models/model\";\r\nimport { parseXML } from '../dataParsers/parserXML';\r\nimport { parseODB } from \"../dataParsers/parserODB\";\r\nimport { parseImage } from \"../dataParsers/parsePGM\";\r\nimport { parseCSV } from \"../dataParsers/parseCSV\";\r\nimport { parseTXT } from \"../dataParsers/parseTXT\";\r\n\r\nconst readAsText = (reader, file, stage, layers, dispatch, files) => {\r\n\r\n    // Closure to capture file information and parameters\r\n    reader.onload = (function(theFile, stage, layers, dispatch, files) {\r\n        return (event) => {\r\n            let string = event.target.result;\r\n\r\n            let namesplitted = theFile.name.split('.');\r\n            let extension = namesplitted[namesplitted.length-1];\r\n            let job;\r\n            if (extension === 'xml') {\r\n                job = parseXML(theFile.name, string);\r\n            }\r\n            else if (extension === 'csv') {\r\n                job = parseCSV(theFile.name, string);\r\n            }\r\n            else if (extension === 'txt') {\r\n                job = parseTXT(theFile.name, string);\r\n            }\r\n            else {\r\n                job = parseODB(theFile.name, string);\r\n            }\r\n            let layer = Layers.newLayer(stage, layers);\r\n            if (theFile.name !== \"\") {\r\n                layer.name = theFile.name;\r\n            }\r\n            layer.title = job.title;\r\n\r\n            for (let polygon of job.profiles) {\r\n                if (polygon.edges.size > 0 && polygon.faces.size > 0) {\r\n                    // let watch = undefined; //  parser.parseToWatchArray(string);\r\n                    // let shape = new Shape(polygon, stage, polygon.style, watch);\r\n                    let shape = new Model(polygon, undefined, polygon.label);\r\n\r\n                    layer.add(shape);\r\n                }\r\n            }\r\n\r\n            for (let polygon of job.materials) {\r\n                if (polygon.edges.size > 0 && polygon.faces.size > 0) {\r\n                    // let watch = undefined; //  parser.parseToWatchArray(string);\r\n                    // let shape = new Shape(polygon, stage, polygon.style, watch);\r\n                    let shape = new Model(polygon, undefined, polygon.label);\r\n\r\n                    layer.add(shape);\r\n                }\r\n            }\r\n\r\n            for (let shape of job.shapes) {\r\n                let model = new Model(shape, undefined, shape.label);\r\n                layer.add(model);\r\n            }\r\n\r\n            // layers.push(layer);\r\n\r\n            if (theFile === files[0]) {\r\n                Layers.setAffected(layers, layer);\r\n                layer.color = Layers.getNextColor(layers);\r\n                layer.displayed = true;\r\n                dispatch({\r\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                    stage: stage,\r\n                    shape: layer\r\n                });\r\n            }\r\n            dispatch({\r\n                type: ActionTypes.ADD_NEW_LAYER,\r\n                layer: layer\r\n            });\r\n\r\n            dispatch({\r\n                type: ActionTypes.ASYNC_OPERATION_ENDED\r\n            });\r\n        }\r\n    })(file, stage, layers, dispatch, files);\r\n\r\n    reader.readAsText(file);\r\n\r\n    dispatch({\r\n        type: ActionTypes.ASYNC_OPERATION_STARTED\r\n    })\r\n\r\n};\r\n\r\nconst readAsImage = (reader, file, stage, layers, dispatch, files) => {\r\n    reader.addEventListener(\"load\", function () {\r\n        // let image = {};          // TODO: to be Flatten.Image\r\n        // image.uri = this.result;\r\n        // image.center = new Flatten.Point(0,0);\r\n        // image.width = 2*400000;    // 2 micron\r\n        // image.box = new Flatten.Box(\r\n        //     image.center.x - image.width/2,\r\n        //     image.center.y - image.width/2,\r\n        //     image.center.x + image.width/2,\r\n        //     image.center.y + image.width/2,\r\n        // );\r\n\r\n        let image = parseImage(file);\r\n        image.uri = this.result;\r\n\r\n        let model = new Model(image);\r\n\r\n        let layer = Layers.newLayer(stage, layers);\r\n        if (file.name !== \"\") {\r\n            layer.name = file.name;\r\n        }\r\n\r\n        layer.add(model);\r\n\r\n        // layers.push(layer);\r\n\r\n        if (file === files[0]) {\r\n            Layers.setAffected(layers, layer);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.displayed = true;\r\n            dispatch({\r\n                type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                stage: stage,\r\n                shape: layer\r\n            });\r\n        }\r\n\r\n        dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        });\r\n\r\n        dispatch({\r\n            type: ActionTypes.ASYNC_OPERATION_ENDED\r\n        });\r\n\r\n    }, false);\r\n\r\n    reader.readAsDataURL(file);\r\n};\r\n\r\nconst readFile = (file, stage, layers, dispatch, files) => {\r\n    if (file.type !== \"\" &&\r\n        !(file.type.match('text.*') || file.type.match('application.*') ||\r\n        file.type.match('image.*')) ) return;   // validate type is text\r\n\r\n    let reader = new FileReader();\r\n\r\n    if (file.type.match('text.*') || file.type.match('application.*') || file.name.match('features*')) {\r\n        readAsText(reader, file, stage, layers, dispatch, files);\r\n    }\r\n\r\n    else if (file.type.match('image.*')) {\r\n        readAsImage(reader, file, stage, layers, dispatch, files);\r\n    }\r\n\r\n};\r\n\r\nconst readFiles = ({ dispatch, getState }) => next => action => {\r\n\r\n    if (action.type !== ActionTypes.FILENAME_LIST_SELECTED) {\r\n        return next(action);\r\n    }\r\n\r\n    let stage = action.stage;\r\n    let layers = action.layers;\r\n\r\n    // Load and parse files\r\n    // in MS Edge FilesList is not array. It is indexable but not iterable\r\n    // for (let i=0; i < action.files.length; i++) {\r\n    //     readFile(action.files[i], stage, layers, dispatch, action.files);\r\n    // }\r\n    for (let file of Array.from(action.files)) {\r\n        readFile(file, stage, layers, dispatch, action.files);\r\n    }\r\n};\r\n\r\nexport default readFiles;\r\n\r\n","import { Job } from '../models/job';\r\nimport {Parser} from './parser';\r\n\r\nexport function parseTXT(filename, str) {\r\n    let job = new Job();\r\n    job.filename = filename;\r\n\r\n    let parser = new Parser();\r\n\r\n    let shapesArray = parser.parse(str);\r\n\r\n    if (shapesArray.length > 0) {\r\n        for (let shape of shapesArray) {\r\n            job.shapes.push(shape)\r\n        }\r\n    }\r\n\r\n    return job\r\n}","import * as ActionTypes from \"../store/actionTypes\";\r\nimport Layers from \"../models/layers\";\r\n\r\nconst pasteData = ({ dispatch, getState }) => next => action => {\r\n\r\n    if (action.type !== ActionTypes.DATA_FROM_BUFFER_PASTED) {\r\n        return next(action);\r\n    }\r\n\r\n    let state = getState();\r\n    let stage = state.app.stage;\r\n    let layers = state.layers;\r\n    let parser = state.app.parser;\r\n\r\n    let layer = undefined;\r\n    if (state.app.importDataToNewLayer) {   // import data to new layer\r\n        layer = Layers.newLayer(stage, layers);\r\n        layers.push(layer);\r\n    }\r\n    else {                                  // import data to affected layer\r\n        layer = layers.find((lay) => lay.affected);\r\n        if (!layer) {                       // if no layer affected, add new\r\n            layer = Layers.newLayer(stage, layers);\r\n            layers.push(layer);\r\n        }\r\n    }\r\n\r\n    // Paste data from ClipBoard\r\n    for (let item of action.data.items) {\r\n        item.getAsString((string) => {\r\n            let shapesArray = parser.parse(string);\r\n\r\n            // TODO: add something like poly.valid()\r\n\r\n            if (shapesArray.length > 0) {\r\n                for (let shape of shapesArray) {\r\n                    layer.add(shape);\r\n                }\r\n            }\r\n\r\n            if (layer.shapes.length > 0) {\r\n                dispatch({\r\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                    shape: layer,\r\n                    stage: stage\r\n                });\r\n                dispatch({\r\n                    type: ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED,\r\n                    layer: layer\r\n                })\r\n            }\r\n\r\n        });\r\n\r\n        break;\r\n    }\r\n\r\n};\r\n\r\nexport default pasteData;\r\n","import * as ActionTypes from '../store/actionTypes';\r\n\r\nconst stageController = ({ getState, dispatch }) => next => action => {\r\n\r\n    // let state = getState();\r\n    let stage = action.stage;\r\n\r\n    if (stage) {\r\n        switch (action.type) {\r\n            case ActionTypes.STAGE_RESIZED:\r\n                stage.resize();\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n                stage.panByMouseStart();\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_MOVED_ON_STAGE:\r\n                if (action.dx !== undefined && action.dy !== undefined) {\r\n                    stage.panByMouseMove(action.dx, action.dy);\r\n                }\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_UP_ON_STAGE:\r\n                stage.panByMouseStop();\r\n                break;\r\n\r\n            case ActionTypes.PAN_AND_ZOOM_TO_SHAPE:\r\n                let center = action.shape.center;\r\n                let box = action.shape.box;\r\n                if (isNaN(center.x) || isNaN(center.y)) return;\r\n                stage.panToCoordinate(center.x, center.y);\r\n                stage.zoomToLimits(box.xmax - box.xmin, box.ymax - box.ymin);\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE:\r\n                let bIn = action.delta > 0;\r\n                // stage.zoomByMouse(action.x, action.y, bIn, 1 + Math.abs(action.delta)/100.);\r\n                stage.zoomByMouse(action.x, action.y, bIn, 1.2);\r\n                break;\r\n\r\n            case ActionTypes.CLEAR_ALL:\r\n                stage.removeAllChildren();\r\n                stage.removeAllListeners();\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\nexport default stageController;","import * as ActionTypes from '../store/actionTypes';\r\nimport Layers from \"../models/layers\";\r\n\r\nimport Flatten from 'flatten-js';\r\nlet {point, arc, segment} = Flatten;\r\nlet Algorithmia = window.Algorithmia;\r\n\r\n// function zoomHome(shape, stage) {\r\n//     let box = shape.box;\r\n//     let x = (box.xmin + box.xmax)/2;\r\n//     let y = (box.ymin + box.ymax)/2;\r\n//     stage.panToCoordinate(x, y);\r\n//     stage.zoomToLimits(box.xmax - box.xmin, box.ymax - box.ymin);\r\n// }\r\n\r\nconst skeleton_recognition = ({dispatch, getState}) => next => action => {\r\n\r\n    if (action.type === ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED) {\r\n\r\n        let state = getState();\r\n        let stage = state.app.stage;\r\n\r\n        let layers = state.layers;\r\n        let currentLayer = Layers.getAffected(layers);\r\n        let shapes = currentLayer.shapes;\r\n        let input = shapes.map(shape =>\r\n            [shape.geom.x / 400., shape.geom.y / 400., shape.geom.nx, shape.geom.ny]\r\n        );\r\n\r\n        let client = Algorithmia.client(\"simby4RUwqQmtMDaHAPj5wsQwlD1\");\r\n        let algorithm = \"alexbol99/SeketonRecognition\";\r\n\r\n        client.algo(algorithm)\r\n            .pipe(input)\r\n            .then(function (output) {\r\n                if (output.error) return console.error(\"error: \" + output.error);\r\n\r\n                let newLayer = Layers.newLayer(stage, layers);\r\n                newLayer.name = \"recognized\";\r\n                newLayer.title = \"recognized\";\r\n                // newLayer.displayed = true;\r\n\r\n                for (let row of output.result) {\r\n                    let shape;\r\n                    if (row[0] instanceof Array && row[0].length === 2) {\r\n                        let pc = point(row[0][0] * 400, row[0][1] * 400);\r\n                        let r = row[1] * 400;\r\n                        /********center radius startAng endAng **********/\r\n                        shape = arc(pc, r, row[2], row[3], Flatten.CCW)\r\n                    }\r\n                    else {\r\n                        shape = segment(\r\n                            point(row[0] * 400, row[1] * 400),\r\n                            point(row[2] * 400, row[3] * 400))\r\n                    }\r\n                    if (row[4]) {\r\n                        shape.label = row[4]\r\n                    }\r\n                    newLayer.add(shape)\r\n                }\r\n                layers.push(newLayer);\r\n\r\n                dispatch({\r\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                    stage: stage,\r\n                    shape: currentLayer\r\n                })\r\n            });\r\n    }\r\n\r\n    return next(action);\r\n};\r\n\r\n\r\nexport default skeleton_recognition;\r\n","import React from 'react';\r\nimport './index.css';\r\n\r\nimport App from './App';\r\nimport {createStore, applyMiddleware} from 'redux';\r\nimport {Provider} from 'react-redux';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport reducer from './store/reducer';\r\n\r\nimport log from './middleware/log';\r\nimport readFiles from './middleware/readFiles';\r\nimport pasteData from './middleware/pasteData';\r\nimport stageController from './middleware/stageController';\r\nimport skeleton_recognition from './middleware/skeleton_recognition';\r\n\r\nconst store = createStore(reducer,\r\n    applyMiddleware(log, readFiles, pasteData, skeleton_recognition, stageController));\r\n\r\nconst Preloader = () => {\r\n    return (\r\n        <Provider store={store}>\r\n            <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n                <App/>\r\n            </BrowserRouter>\r\n        </Provider>\r\n    );\r\n};\r\n\r\nexport default Preloader;\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1wEe_\",\"IconTrigger\":\"Button_IconTrigger__2UBJg\",\"IconModeActive\":\"Button_IconModeActive__3BB17\",\"IconModeNotActive\":\"Button_IconModeNotActive__ekYF8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ButtonSeparator\":\"ButtonSeparator_ButtonSeparator__1v1YA\",\"IconSeparator\":\"ButtonSeparator_IconSeparator__1F-6s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-toolbar\":\"ToolbarComponent_App-toolbar__384Ol\",\"App-toolbar-units\":\"ToolbarComponent_App-toolbar-units__2xvim\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-canvas\":\"CanvasComponent_App-canvas__1SRjy\"};"],"sourceRoot":""}