{"version":3,"sources":["components/MainComponent/GraphicsEditor/LabelsLayerComponent/labelsLayer.module.css","components/UI/ModalPopup/ModalPopup.module.css","components/AboutPopup/AboutPopup.module.css","containers/MainComponent/MainComponent.module.css","components/LayersList/LayerListToolbar/LayerListToolbar.module.css","components/LayersList/LayerEditForm/LayerEditForm.module.css","components/LayersList/LayerListElement/LayerListElement.module.css","containers/LayerList/LayersList.module.css","components/Layout/AsideComponent/AsideComponent.module.css","components/Layout/HeaderComponent/HeaderComponent.module.css","assets/images/debug-viewer-logo3-notext.png","components/Layout/Logo/Logo.module.css","components/MainComponent/ToolbarComponent/ToolbarComponent.js","models/stage.js","components/MainComponent/CanvasComponent/CanvasComponent.js","store/actions/stageActions.js","store/actionTypes.js","components/Layout/StatusComponent/StatusComponent.js","components/MainComponent/GraphicsEditor/stageComponent.js","models/graphics.js","models/utils.js","components/MainComponent/GraphicsEditor/graphics/shapeComponent.js","components/MainComponent/GraphicsEditor/graphics/imageComponent.js","components/MainComponent/GraphicsEditor/layerComponent.js","components/MainComponent/GraphicsEditor/domelements/labelComponent.js","components/MainComponent/GraphicsEditor/LabelsLayerComponent/labelsLayerComponent.js","components/MainComponent/GraphicsEditor/layersComponent.js","models/model.js","models/layer.js","models/layers.js","tools/measurePointsTool.js","tools/measureShapesTool.js","tools/displayCoordsTool.js","components/UI/Modal.js","components/UI/ModalPopup/ModalPopup.js","components/AboutPopup/AboutPopup.js","containers/MainComponent/MainComponent.js","store/actions/appActions.js","components/LayersList/LayerListToolbar/LayerListToolbar.js","components/LayersList/LayerEditForm/LayerEditForm.js","components/LayersList/LayerListElement/LayerListElement.js","containers/LayerList/LayersList.js","store/actions/layersActions.js","components/Layout/AsideComponent/AsideComponent.js","AppBody.js","components/Layout/Logo/Logo.js","components/Layout/HeaderComponent/HeaderComponent.js","models/job.js","models/parserODB.js","components/Constructions/Demo.js","components/Constructions/BooleanTest.js","components/Constructions/SkeletonRecognition.js","models/collisionDistance.js","components/Constructions/CollisionDemo.js","App.js","models/parser.js","store/reducers/app.js","store/reducers/layers.js","store/reducers/mouse.js","store/reducers/measureShapesTool.js","store/reducer.js","middleware/log.js","models/parserXML.js","models/parsePGM.js","models/parseCSV.js","middleware/readFiles.js","models/parseTXT.js","middleware/pasteData.js","middleware/stageController.js","middleware/skeleton_recognition.js","Preloader.js","assets/icons/measureContour.png","assets/icons/measurePoints.png","assets/icons/WidthOn.png","assets/icons/editContourVertextOnOff.png","components/MainComponent/ToolbarComponent/ToolbarComponent.module.css","components/MainComponent/CanvasComponent/CanvasComponent.module.css","components/Layout/StatusComponent/StatusComponent.module.css"],"names":["module","exports","LabelsLayer","LabelComponent","BackDrop","ModalPopup","fadeIn","AboutPopup","Main-content","Layer-list-toolbar","Layer-edit-form","Layer","LayerSelectionBox","LayerSelectionMark","LayerNameBox","Layer-displayed","Layer-undisplayed","App-layers","App-aside","App-header","Logo","App-logo-spin","ToolbarComponent","openJobButtonClicked","_this","refs","browseFiles","click","notImplemented","alert","react_default","a","createElement","className","styles","title","onClick","this","lib_default","name","size","style","color","fontSize","marginTop","marginBottom","display","type","id","ref","multiple","onChange","props","onFileSelected","onHomeButtonPressed","onPanByDragPressed","onMeasurePointsButtonPressed","src","measurePoints","alt","onMeasureBetweenShapesButtonPressed","measureShapes","onToggleWidthModePressed","width","onToggleVerticesPressed","vertices","onToggleLabelsPressed","showSkeletonRecognitionButton","onSkeletonRecognitionButtonPressed","onShowAboutPopupPressed","position","top","onUnitClicked","units","Component","createjs","window","Stage","canvas","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Touch","enable","assertThisInitialized","mouseMoveOutside","enableMouseOver","clientWidth","clientHeight","height","origin","x","y","oldOrigin","undefined","resolution","zoomFactor","stage","assign","shape","addChild","scalar","scalingFactor","canvasX","canvasY","worldX","worldY","point","W2C_X","W2C_Y","newOrigin","deltaX","deltaY","ratio","curRatio","Math","min","max","focusX","focusY","bIn","C2W_X","C2W_Y","zoomIn","zoomOut","newFocusX","newFocusY","panBy","zoom","dx","dy","tx","ty","minX","minY","maxX","maxY","Flatten","Box","CanvasComponent","canvasElement","React","createRef","handleMouseMove","event","focus","stageX","stageY","mouse","startX","startY","handleMouseDown","handleMouseUp","stopPropagation","preventDefault","panByMouseStop","handleMouseLeave","blur","document","body","handleMouseWheel","delta","detail","wheelDelta","handleMouseWheelMove","offsetX","offsetY","handleMouseWheelFox","layerX","layerY","current","on","addEventListener","registerStage","tabIndex","connect","state","app","dispatch","actions","StatusComponent","StageComponent","_Component","apply","arguments","inherits","createClass","key","value","getContext","setTransform","update","Fragment","children","Point","Segment","Circle","Arc","Polygon","graphics","length","radius","fill","Graphics","beginFill","command","circle","drawCircle","graphics_point","segment","strokeStyle","ignoreScale","stroke","setStrokeStyle","beginStroke","moveTo","ps","lineTo","pe","endStroke","graphics_segment","arc","pc","r","startAngle","endAngle","counterClockwise","graphics_arc","graphics_circle","box","drawRect","xmin","ymin","xmax","ymax","graphics_box","polygon","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","faces","Symbol","iterator","next","done","face","setGraphicsFace","err","return","graphics_polygon","setGraphicsEdge","edge","setGraphicsEdgeSegment","setGraphicsEdgeArc","first","start","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Utils","is_equal","obj1","obj2","equal","_arr","keys","_i","ShapeComponent","params","handleMouseOver","onMouseOver","model","handleMouseOut","onMouseOut","handleClick","layer","Shape","vertexShapes","geom","vertex","vertexShape","mouseEnabled","push","alpha","isEmpty","hovered","selected","widthOn","aperture","displayVertices","displayed","redrawVertices","redraw","nextProps","nextState","off","removeChild","clear","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","ImageComponent","bitmap","Bitmap","uri","image","naturalWidth","naturalHeight","scaleX","scaleY","center","regX","regY","LayerComponent","shapes","map","index","imageComponent_ImageComponent","hoveredShape","firstMeasuredShape","secondMeasuredShape","displayLabels","shapeComponent_ShapeComponent","labelComponent","_ref","left","offsetLeft","offsetTop","classes","label","labelsLayerComponent","trim","domelements_labelComponent","LayersComponent","layers","layerComponent_LayerComponent","LabelsLayerComponent_labelsLayerComponent","defaultStyle","Model","get","edited","affected","newShape","add","clone","merge","colors","Layers","getNewName","defaultName","inc","comparator","find","lay","currentAffectedLayer","getAffected","_loop","col","findIndex","l","newLayers","filter","getNextColor","slice","sort","l1","l2","name1","toUpperCase","name2","MeasurePointsTool","_getPrototypeOf2","_len","args","Array","_key","concat","endX","endY","measureStarted","measureCanvas","clearRect","coordX","originalEvent","coordY","cursor","draw","onMouseWheelMove","onMousewheelMove","context","textX","textY","textWidth","backX","backY","pllX","pllY","abs","W2C_Scalar","beginPath","rect","lineWidth","text","measurement","font","measureText","textAlign","fillStyle","globalAlpha","fillRect","textHeight","fillText","dist","sqrt","format","num","divisor","toFixed","decimals","mainCanvas","MeasureShapesTool","labelShape","Text","shortestSegment","unscale","redrawLabel","firstMeasuredLayer","secondMeasuredLayer","DisplayCoordsTool","margin","padding","modalRoot","getElementById","Modal","el","appendChild","ReactDOM","createPortal","onBackDropClicked","ev","target","closePopup","handleKeyDown","code","elementDrag","dragX","clientX","dragY","clientY","element","closeDragElement","onmouseup","onmousemove","dragMouseDown","removeEventListener","showPopup","UI_Modal","onMouseDown","version","MainComponent","handleFileSelect","File","FileReader","FileList","files","setHomeView","e","toggleWidthMode","toggleDisplayVertices","onresize","resizeStage","handleKeyUp","displayCoordsTool","displayCoordsTool_DisplayCoordsTool","measurePointsTool","measurePointsActive","measurePointsTool_MeasurePointsTool","measuredLayersDisplayed","measureShapesTool","distance","measureShapesTool_MeasureShapesTool","MainComponent_ToolbarComponent_ToolbarComponent","togglePanByDrag","toggleMeasureBetweenPoints","toggleMeasureBetweenShapes","toggleDisplayLabels","toggleAboutPopup","applySkeletonRecognition","toggleUnits","MainComponent_CanvasComponent_CanvasComponent","stageComponent_StageComponent","layersComponent","handleMouseRollOverShape","handleMouseRollOutShape","handleClickOnShape","Layout_StatusComponent_StatusComponent","UI_ModalPopup_ModalPopup","showAboutPopup","components_AboutPopup_AboutPopup","build","LayerListToolbar","onAddLayerButtonClicked","onEditLayerButtonClicked","onDeleteLayerButtonClicked","onSortLayersButtonClicked","LayerEditForm","onSubmitLayerEditForm","form","parentElement","newLayer","layerName","layerTitle","setFocus","onSubmit","defaultValue","cols","rows","onEscapeLayerEditForm","LayerListElement","activeElement","nodeName","elem","hex","opacity","g","b","percent","replace","parseInt","substring","rgba","bgcolor","layerNameOpacity","onLayerClicked","onDoubleClick","onLayerDoubleClicked","onAffectedBoxClicked","backgroundColor","LayersList_LayerEditForm_LayerEditForm","LayersList","setAffectedNextLayer","setAffectedPrevLayer","_this2","onLayerListClicked","LayersList_LayerListToolbar_LayerListToolbar","maxHeight","LayersList_LayerListElement_LayerListElement","AsideComponent","pasteDataFromBuffer","data","clipboardData","onPaste","containers_MainComponent_MainComponent","LayerList_LayersList","Layout_AsideComponent_AsideComponent","logo","logoImg","HeaderComponent","Job","filename","profiles","materials","vector","inch2pixels","mils2pixels","InchToPixels","str","round","Number","MilsToPixels","parsePolygon","lines","i","line","terms","split","end_of_face","CW","CCW","slope","EQ","PI","parseLine","apertures","ap_value","parseArc","parseODB","job","arrayOfLines","match","substr","polarity","addFace","odbLine","odbArc","ap_key","Demo","axios","then","resp","panAndZoomToShape","addNewLayer","setState","subtract","BooleanOp","intersect","BooleanTest","myPoly","myCircle","SkeletonRecognition","Vector","Line","CollisionDistance","polygon1","polygon2","collision_distance","POSITIVE_INFINITY","toConsumableArray","edges","edge2polygon","edge2","shapeBox","NEGATIVE_INFINITY","resp_edges","search","edge1","segment2segment","segment2arc","arc2arc","intersections","ip","_point$distanceTo","distanceTo","_point$distanceTo2","slicedToArray","segment1","segment2","point2shape","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","v_s","end","v_n","normalize","rotate90CCW","multiply","rotate90CW","_i2","v","tangent_point","translate","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","arc1","arc2","arc_enlarged","_arc1$distanceTo","translateArc","_arc1$distanceTo2","dist_tmp","EQ_0","GE","arc_reduced","_arc1$distanceTo3","_arc1$distanceTo4","LT","_arc1$distanceTo5","_arc1$distanceTo6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","vec","arc_tmp","newPolygon","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","arc_trans","CollisionDemo","parser","parseToPolygon","collision","polygon3","applyCollisionDemo","App","Layout_HeaderComponent_HeaderComponent","Route","path","component","AppBody","Parser","watchArray","indexOf","termArr","psArr","peArr","pcArr","nedgesStr","nedges","j","parseToSegment","parseToArc","points","pointArr","parseToPoints","parseToSegmentsArcs","unitsList","defaultAppState","process","originX","originY","importDataToNewLayer","action","curUnitsId","newUnits","measureShapesFirstClick","affectedLayer","affectedLayerId","delete","setAffected","toggleDisplayed","setEdited","setNameAndTitle","nextLayer","newCurLayer","newNextLayer","defaultMouseState","defaultMeasureShapesTool","measureShapesActive","shape1","shape2","_Flatten$Distance$dis","Distance","_Flatten$Distance$dis2","reducer","combineReducers","log","getState","console","parseEdges","edgesXML","from","getAttribute","polygonsXML","islands","getElementsByTagName","_arr2","holes","_arr3","_i3","parseSegment","segmentXML","parseCurve","curveXML","parsePoint","pointXML","pgmResolution","microns2pixels","sizeX","toPixels","micron2pixels","micronToPixels","readAsText","reader","file","onload","theFile","string","result","namesplitted","extension","xmlDoc","DOMParser","parseFromString","titles","firstChild","nodeValue","profilesXML","_arr4","_i4","materialXML","_arr5","_i5","segmentsXML","_arr6","_i6","curvesXML","_arr7","_i7","curve","pointsXML","_arr8","_i8","parseXML","px","py","nx","ny","parseCSV","shapesArray","parse","parseTXT","readAsImage","yStr","xStr","isNaN","parseImage","readAsDataURL","readFile","readFiles","pasteData","items","getAsString","stageController","resize","panByMouseStart","panByMouseMove","panToCoordinate","zoomToLimits","zoomByMouse","Algorithmia","skeleton_recognition","currentLayer","input","client","algo","pipe","output","error","row","store","createStore","applyMiddleware","Preloader","es","BrowserRouter","basename","src_App_0","App-toolbar","App-canvas","App-status-bar"],"mappings":"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","file":"static/js/1.5cdf8821.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LabelsLayer\":\"labelsLayer_LabelsLayer__2N8px\",\"LabelComponent\":\"labelsLayer_LabelComponent__2mxZP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BackDrop\":\"ModalPopup_BackDrop__38gqK\",\"ModalPopup\":\"ModalPopup_ModalPopup__tiHI3\",\"fadeIn\":\"ModalPopup_fadeIn__1kcV2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AboutPopup\":\"AboutPopup_AboutPopup__3A-Ey\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Main-content\":\"MainComponent_Main-content__1huDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer-list-toolbar\":\"LayerListToolbar_Layer-list-toolbar__3h7SF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer-edit-form\":\"LayerEditForm_Layer-edit-form__3PKfb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer\":\"LayerListElement_Layer__TTm6c\",\"LayerSelectionBox\":\"LayerListElement_LayerSelectionBox__2y2BJ\",\"LayerSelectionMark\":\"LayerListElement_LayerSelectionMark__1YNk5\",\"LayerNameBox\":\"LayerListElement_LayerNameBox__rdxbt\",\"Layer-displayed\":\"LayerListElement_Layer-displayed__2ITp_\",\"Layer-undisplayed\":\"LayerListElement_Layer-undisplayed__v_ey_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-layers\":\"LayersList_App-layers__W6LER\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-aside\":\"AsideComponent_App-aside__3lf4P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-header\":\"HeaderComponent_App-header__3BtxE\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAACKTSURBVHhe7V1NrB1JdZ4dS5azZBWxieRNoiyi0Ugs8tztCYYkxIAIEwWBh+eBAUJkkZFifhTDCGIm42ePyAwmyIzHfm9ksjJZRFYiRZaiBEvZGCQkLxLpJSMRhwjJkwmiO99Xfe593VWnb3dV/9zudn3S0X3vVt+6davqq3Pq1KmqxyIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIgrkaXosO378VJ4k57L3JX+ffT75afaNJM++kryZP5++Rx6LiFg28p2dd+UnTjxpiJCm17IkuQty5BX5BOTSkWQXk7fziyeelCwiIuaP/Ikn3kEiQCs8ByJcgNyGPHTIoMnZpEIQQ5K99GF28fgpyT4iYj5Apz4yjwoi3Hc6vY98AIR4Ca8WSQxRLh5/Tr42ImJaaGUe9SW7mH/UkeRSekGKFBExPjqZR54ieV/G32fNd+L71ukfoyZxzS0hybX8O0+8Q4ocETEM0BH7NY9qBNrmHvK+Kd+zkz/11LulCBWYZ8qf+2jyP5h/3K8hye38myffKR+NiAjHWOYR8j1E/rfxeh7/Pw3y/YYUoRXwuQeV/EiYveTx7BLKq5IE77+88y75eETEZmzTPMpPdhvNkc+xcv5GQGiTBk0BMtyqIclhvpceM5lERKzADjUl86gr8D2nne8H8ST5Mc45QIYrNSR5AFNsRx6NeJQwF/OoK/C9VyrloeaDRpTkNUCG8ypJ9vD8Xvq0PBaxVNBUyT6V/CD7FBr9ZJqVO01fYojQo3nUB1CeigbE/3ckyQFIclojiZG99Kw8FrFEZL+f3it3lC6CUXkU86grUL7HnbJjDiXJKmhSGa2hkATvX5bHIpYEraO0kW2bR12B333S/k18T5Jrwck55x81JLkZ10oWiOy3039zOkuDiKa4LJP2xyWr2YDawvldLc0+unlBBn2tZC+9E9dKFgaaQdkz6c+cDuMhcyMMyltxPLD8ktQK4gbW10pInrhWsixkNzAJfV0a+IuQjycVAvjKlAlj1m7c8l6R5NYQN3DdWsmDuFayIOT7yePZASagB2hgkexa8q+0y2mOsMPbncpHpkQY40VzyxjsruUEXSUJQ+bjWslykB1gNCwRxMgbR14odmx2cNPReyIMCTiGy5dlN8QoyPEduzxdvW109WokMRLXSpaBbB+ju02QgyL0QkPPhLlLTdU3YZDnDvOu+U66dvn63/J4J5AI1BoqSS7V12PETGBsatvMOkjvS3IjpkQYfgZ5VFbK6wTPvUUiyUc7gSZVrRv4kv88J2JigJl1pUwQQ5LrYWsc2yKM8colyaGWzyZh/pJFJ8hayWENSW5FN/CMkd1IdxyCvNHPKrGJ8eKiIkZ2dMZOgY6bCIP372ifaSMktGTTCWatZFPI/N781o4iBNAihxWC8P8BVoh7J0yxqv9tO81HkMchNZ8UsROKtZL0tkoSrpW8NM0wnIgGYN5xoUwQQxJoFkkeDH0QBp9T3/cRfr8UqTOKtZL0mkoShsxfnleITgTAOYdDkIP0miSPBm/CJN0WN1eC71LD3ruABz+oJDFer+YYsIiJgd4riyAPtx2IJ5Pv0+jA3KPiTMLxXuX/LoK5SO8jO48Q0khCgTY5LY9FzAFc/ygTxMj+tBa8bML0YV6VZJDfysPo6tZKQJLz8ljE1MEVdJsgXGmX5EkCBPl3paMHCfKiW/rsIJoE8w7OP2pIcmXbmjqiJWBW3bFJwpgtSZ4coEWG2RqMOQnyvoW/eyMMPVjGk6WSJB4vNAtk+7CZLYLwPUmeHGhq2Z17COmLMKHHC8HUPUZztzCDk3Nm7WrCA9diwUp3CAKtIsmTAzrs0+WOHCoggPp+nZQJA/EKcZd9JXrIPDVMKWSepLCdJ2XJ9qF5SsGlESOgKcJ3Ssgu/NYT2QeT/y133hBBh/8XdPjKgXI+ws8ij5vQLs/h/0bCFGsl9ccL5d966gSIcc1pB0WMt3E/HiIxGgpVbjfE9CJTGW5uvEMvoJO8F2VUOm4boSaQLFfngPFAvJvUEvazbaUtYRjx65DkZXz+RpK5bbBZpu5QWQzM6NYhwndoFHa8Fc7B+z6UjtokRmtsCDPhfAPPnSWJhiIMQ+bLvyV7Da+luveSqEnGgabeQyN8+4RZU9DcpRdRvj/xIwk67T0SQLJuhZ4Jw7Wc02ZtZ3W80BWkW/XuI2Zgi3OS4TFkhG8IZGKr2uwVobn14WaioGNe6SO0pEfCHGafSf8Ok25v08qWaGqNgMLMGifCtwmyyHZPJQTE0SjUJs8nWXYSr+VOWJz0eMFXa/igE2H+FFKq704SXcDDgxrDrvgxInzLUCexIoYYq4m6nf55SKnzkRiS5ajwIUz2IjSfVd+hwq3UUoSIobDNCF85qO2O0/FFTBon68oz2TeVY1WTaUTPGsLISfl2GbNv4dWq71CZ8uLuokDvVaXiR4jwpVdHnYiz81NbyMHRfNXSs48m+3bn6/NQiD5ROlH/dp8Eid6skTBmhK/sxlM3GlE4D1ltNgI5jhmyuM8w0rd6gnuS3DVfMHFg8Lnp1HWoTCwKe7EYK8JXJuLqoQcUpK0jXo0DQYlnwnu3qCnK5BCCzOJkEXUwCpV9v/CXiA7AyDZohC86tnpZDQVpMLWq8wftefMc5iSca9gEgcxiNNXmfCFCs1iyjBgDQ0X4Svh3/UScGsE6CYSaRn32YuG1obfKIcjOfA6Vpna269pXeOayZBcxBoaI8DUTcc09y85emoiXIaaVsx7CeYs8op3g/kCSZoH8S8d/LbuW/NKu77bC6F7Jar5Ao/GomiJk+vg83HHqyBYQ0mAm4rx0xurkKzEEqDkhHZ9zDozG84erjUZcGWedVgiSpjfNh2cAxoQZB0PggqHxML4+8ysY0Gi11xBPGfSKuI3iV250cB7RWT8RJwFqXMj5xRNP1nxmvXCpneA+lwFIjk090n4gCTSJVd/1ku0n96YQK9cZbLByA65l4iQx5o0d4YtGkeSNENNo00T8sNzRbUgclkMsEkoeMWAdKnU7eW+OaD5n4TD/EH7jXzWTBO1woW5gmR1QEfVbRCdOEhDEO8LXTMRrtphSkOZMxG3gGSdIEeS4b3cKmlPl+sT/vZ91NQTscq/lIyDHGbzycqOr6Q84v8iup/cYDm9C4r+DdC4uLumqBXsS6ciESZJfT046BDmoj3HimVDoyLUTcabLo7Wgd0r9vCwYlsEJebkuOSpL0mSBMvKa7GofYNmhPQw5INmZo4VOalOnLkpOillDm0SqMlGSGFNpH52wQpDkUJLXKDY0QTNYDbkSpN1rc0at5OOaVspZUqi32c3takzCPDuFVyGHIcgz1cHA3ixmBqElmFj48W4j1slEG7cpwheNtXkizuM4WzYm8nK8XYZcyuehPU4rdTjZ4z3V8kKy34PZtIu/19rD9cJR8zr1smEONxugArQTOJ6GVtHPoJ0gSfKDE086BOH9ItQuNWfRUkgan0akXe3kUayP6C5gboCy62+qAYr6an+evS/5v/yT+LukPUAW5/cy0tmpG8zTJHm+ABHUe7q50jsnkmDeUY3wfT19Cw30Y7vRVoI0rwtk5J4NJZq3vi7s+uNcT5ImBbqiNTM7eyr9r/wZ/F0ih6Y9VkD9VBwf+N8xdWcHNBrPUSo34vpHzYkk0Bjn1wT5LhsHr4pwxEfDeYc92Da25FW7ci8nwlfqjIORJE8GKNcxtLlztBDeezM7nb5lkeNhvlvv3VM3kl088aQkzxN25aARKyPEXEhiInxvoPyvwl62G0nEjHABl8XU2NcPN+VVY7JMyvVp2lY/nf5B9kfp1TI5DEF2NxOc9eHUE0xcSZ4f0IiPK5XjemNmQBJG12aXk1/YDbQSkON8iFfFrJmQDG5+G7UQtYVTV6hHSd46zCq50qZ472H2/vSDRluUydGgPVZAXVXO+eX/kjQ/oDJ2nAqquRtvqiQpJuLuot1KQJqfhap5k7e2fRbmljxSCww01QBF1J0kbR3GtV+z9sX2z86gPkvkKAjS7koEMxBZ9VXnxJg8UCE8w7VaSRsusp8aSRpPFnkVciP9J3ncG5pNje8zezzkERXsgHb9oN4mEaAo5KjMO9dlpJt3Nz2mkOMw/2g77avHp01rvtoaaLRKiAn+fyhJtZgKSTAqOXu/V2Im6Fchq0l7QDQpRz3NtKKrVx6pxZQDFO02X4u0Hb1ULkH8yo5BpLLmxEFMkuYFjBiVkzZQea32U2yTJGYle9OGpsvpT/LX8feKHEb8yiRmm7vHY6+dFmAdKHWzdTMDbebOiyDoB2a9oqv2WAH15GwBqLtCYbKoMQNan1K4DZIwBsqYOHbliyDtfP59TD4DI3xXMPm4eR82mVYroF4qUbDogFvfIIVyuOZ0Ubb1Xn5ojzs2QUAab88bCLJj1x81viTPA6gcJ8TE1wwYiyQSWl4/EeeKeClQMCTCd4W6PR70kskjjSAhynVBwkjSVoAyqPeVGCJjoDTPfDI5aZOjHJDoA9HAlYGsjWNjUkAjOnE3IEirTlSGL0ny03geNi09JdluetvImeQ83julqXIzEa+5IoyCir9mr4j7RviuIF4r57tITnmkEfjdkwpQRNs4nkoK2v9uOeyFZLAJQtJIsjdMu1j12FYDTwKoODXERJK90IYk+XPQAor7sCzZLkadkkpXV2ZFzAhVM2E2Hb1FhK8NTUsZwniEpFALO3WASbskjwoOeGgXN4SEbYU2k8d61R4rqFsC5rRHBJV0x640SQrCRpJ8KLmKCj+0G6FOsk8n/5C9mP6zU8Ei6LR3mlbEfc/wVe1miucaCurA9RJtIUBRrqbWQkgelF351Npa29jh7L4wZrHlBcQANJ8T3hU7ubOfXiXJKdmB5inZZ/G6BylVcCHtzJW6CF9JrkDmOMoeD/8wCfv305SRpNFQN1jhPWqTijeN5q5T9xsCEn1AQlTqk4Tx0MZbAyvQqTwlxCQElcZ5L/J9JowglOwcXo8q9762Y28TnAjfmjN8NXsZjavu8dgEtV5HDlA0ISSW+17K8RBS0aB12kMLZw8BTSqnXuWssEkD8wI3kK7HjTwrkmR/iHztyveVb5jOeiVk5KlE+K5IYh3Br9rKbEhPMhKoR9dbNOIGKbNKbpnOJXHsfxDhrF3ffWkPgpNyp17nsBUXleUVYhKC7Omd99mVHyLZZ9KfSJbeaDrD1yw6eu7x2ARqC6deMVhI8uCA5lBDSCDugXe7+O2BAYk+ACGqW3FZ356aeXSgIasnbQywkAXVfb5c+Z2kQ6OBEHerBEEnkDN8bRtZGvBuaANyvlGpV2hRSRoc+G539yLLUGM6M3TdruemcPYQcIHQqeOpb8VFpQWFmPiA6xt2A4QK8gquUN5JUSaIIcmN5DSIcFppuI17PDaBtn+5Tk29jnSCO0lgf/em7x9LexDqVlzr7LBJQW1IjxCTtsh2QcJSA3SSgHCHFRio6BDkevJDQwar4Tjayce8gTrUtg4MHqCorrvwu2luySq5DWj34HD2EGAwqsS14f/pbsXl4pFSmb2fvI0Kd1dmQ6UDQQgeblYhyCt4LTVY0WjdQiG4IGrXK2TQAEW05SnlO9med+vIQQ+VXb/Gk+UZkOgDdcF3qltxSQanQgNCTJowFROLoEm1Jsh3IVZjGW3SMdoUGmTUAEVqLIi7Sk7zecPCJL1UTv16hrP7Apr5mFPnyjlikwDNKbtSh1jpzc9g1LAaIlie61a+dYTv62wY5GdLxxAIca9WOiv+H2yDFPI/ppKD608bvGbb0B4rYBCax1ZcVGI1xAQjjiT1iuyF5M/txggRNGAv4QnZfvI32bfcAx0wknXOH/U4WoCiWWOqCyFpMOmgPXoJZw8BBib3fLJAh8igGHqkk7UF4z41K+F2g3iI8aw8208l5q8kB3YDZZeTn/cRYapOlAcIUATpirs6rO8ybdrwfUMEJPpgFltxuRhoV26fIx3UZvWIzz00AmOqrIZpLbv9bLLhqni1YQrJrvYzT+AgU65T02FrJsmhkBAS/aAFK4REg+o06RDOHoJK32D9X5rYQXoMe3AquIdQCBNerm2zpDBU5Nk0cxqnQbKP47UH8pqyadtnv41XM3HvPtKj41bOlmJHlqReIHMc966OQhpNpG1rjxXQDu6mtyltxUXDuQtKHUNM6KHQOuBKkHYrf/7Eb6r2b41kf4C5wgn8zfJ1JIlm+2YvI/8b+Jsu35oI37YYI0DR1lBraVE3Q4Wzh4AWhtMWLa6bGA12RXNiJ0lB4MIafnTtXRtMl0cNaDLZDVWW7BPJ2/nv4O9SGY0EkqR2+ywvehG3r9lY1SE2COUbNEARbabf1dFycXfIcHZfiKVh7RGZ0FZcVGp1r0JgiEkxEYfKL/3QshiNUnNYWDGiHT9VuIFLQhekRAGXy7gWT5LIhh13++wr6Q9X5DgiSXgINgaZwU5w52928oagjlpFxA4dzh4C9Bt3K+4U9ojUhJh4mwI5j/jceLIITJouI3JPJNHsXUOY68d/3SHIQfiIyvlGuYwsuyR1AvLV7+rYEEJiQ9PY29IeK2DgdPaI8D1J3h7Uw8w8Qkxk193mk0V6itLsShKSWC2j7PHgMUAWQR5yMdF82APqoNNDgCJNNDtfybty0MImjBmQ6APR7NPbiqv56tuGmJiTRZom4j2sJ5QRShJZh1G2zx6FNtRF+Epya9R05G6r8hjI8Lv1VfKkfR0zdL1MDkOQAcLZQ2D6S7ltSJgOVkcvQAW7k70WqpoT7fKPKQt/2JBeiBCSaDYuGqSyx0ON8N33nyxiRNfCzIPte34WeWqr5IesC3msEVPVHiugPdytBtveimvUc7XSN4aYmJF40xGfgXdt+MKHJJp9a0YnxWFgR/ga8TzDF+XqLUDR/M6auzrw6kU6TMxHDWf3BfuW004w3yV5O0Bjtg4xYUdDgTcf8TmiSmxDEjGtWm+frUT4rgSmlyQ3os8ARbNKrvw+5g/xmtcZb6BLjlECEn1gD76m7bZlZqGytZts3X3KI07EfdFEEs3tzEaQjzvoeoYv5292OTjPk+TWMESrCyGpuatlE+ilcgkyocU4gWa6b6tv6RtrrMUsMxFX1g1WAnJ4XXo5BGpJ8pmijJXy0rRqOlzuAJ2pRBAj++3MGZLBKYdngKKQo/auDnmsNeaiPYhJbcVFZbuTSXQ2Seakyb0VSMR0tCn4qQUOST6MMr5ULbMpd4uLOrlAaBOERwVJ8kagDJ0DFPGZjXd1+ALaY2vh7CFAG01jK649SuF/M5nkCAsC1E/EWxzxuQ2USZJ9TSl3y/AF2rwhZ/gSrMNKnXqe4I7nN97V4YupBCT6QNuKG3IeWWeg0qvRpvS+TGwi7guSJP+CW/7spSTPP5J8XR5rBIMVywQppGFvhbJtgB1ekhuB5xvv6vAFyWATZOxwdl9o2xDY7yR5HDirve9HIV5If2IXbCVUc5PdUF8CXbfQcG85v+FTEP7OlmaKzxm+KyD/4ABF9bMQM2h5mmgrzFF7rIA2rG7FhdklSeMAFX90HM3HUIAX3W2nK0Fhb04icKwBxjTiOoxd/i/htdTp2pKEZlWFIA0RvjSDKt9DaRECUmmLkiC/1iEkNqYUzh4C9Dl3H9GYZr3xtvAQ6S9sIAZNrQlNxJtANez8hr9MfpF/AH/bHbAFSbIDzAdKBClIUu9iRYeuHryHDi5JtUA7tLqrwxdTCmcPwda34ma/mx5oE9mVTHUiXgfNbjXywvGPm85mdUAjDSTh9WwOQWoifB2TFUKNIskqOGfBM/pBCx02rE0xnD0EZoAutSX7pCQNj+zLyU/LX14WjsTy2CxgTCttj4eEKTgu4LI0kaRlhC/nGkr+tdq3rkyiTTp15CmGs4eA7We36WhbcaE9nB1/KFDl0su5QLNXDWFK86ZQkvCq6DJBDEmUCF/k3foEdxNCYpljFJID0mnVeOoBiT7Qtiegj3ovlAYh+2ryj/aX0wMkybMBiND6irQQkrSN8EW+9rliaoCixGq1vqvDF1MOZ/eFWAbb2YqrdaxJbZRvAYkR87oiLYQkMKvu2CQpR/hKp28VoAjitL6rwxdL0h4roJ/etNt3FI+qzs4J7ODygGaj4r3GK9J8SdIU4avuylQCFEEOr7s6fIGJ+aTD2UNAL6rdxqN5VkmI8hcbwjR0rqlAuyKN5W87h/IhCS/WMZPzEkGygyMXLj6jrYBXzFWSQHmm0dPVFnMKSPSBsRLsgRxaRZKHBU2q8hfLl28ntNgDddtnff3kPiQBIW6VCWLkjcIVS3Oq/Fn8XwlQVCN8+ZzHQQtNoJfKJci8TOY62FsWRhvIZ3fLj8DWfFLuOyGV1pYkmyJ80dFrAxRBDu+7OnyxVO2xAtrb2YpLD5ckDwtjs5e+GB1tmsfPCzSb1IwoHRY125DEzNkcM8t8pvYEd+QZdFeHL6A9ZhXO7gt1IB9rKy49PvaXT3UFnRVlyGCXt8MVaSu0IQmDFcsEMST5dPIXyvNcNAy6q8MXcw5I9IGxEEptDoKMsxVXjXnpocMNAdsWpfTpF28iSXYj3VEI8iPl+bpTSLwPWmgCyWATZOrh7CFgn7TbfpTocmM62DEvYy3GeKDGodD5ijQbzSRJ/oPXtamX7nwV8rnkZ9rnjTbx3HrbhEdFexC0apz6Hmu+jC+qLMaYjjeh8HZWjilTqYxGBvKH15LkE6ibi8nbTjksMUGgH4aUPov8evUOzj2cPQRbmy9rE9/RvAQNMBrOsj8pqKxBFzVtkmTn6rcFaGL2w38Wnyk+3zuR5x7OHgK0ubudYYzYwa16CRrAtQ2lbIdcC5FHBsOaJJ+vfr+XfC65Ktn1hqWEs/tC39JQXa8aDOh0lZ147ISStDWwQjTTaszjKPPn0/dkF9Nf2mVoK0OQeSnh7CEw9Vmt33G24mojNUyvrY1I4jxwDsbGe6NqNs2885XsUrt7O9pgiQGJPkB7bGcr7ta3OFoAEVx7k6PHiM4DXaWHSvL1YhDqKF9L7uRfxtymLHxPe3aBwsHGqduxliXQASfh7tXJivKMHCemkTTK9IRaXppsWNB8cQowsrtXvFbu9tktxIip9REsGOnV96P0IdJkw0J1944Vey/QOqUhzBhhBRaoQe2yhAp+l/p+lO6Cuh3HoURtoXz5aJNimlD295syjOHrVqDau4ESCTKMoM88ZL+RJhse9qiJhu10JXRb1O3xwHtb2RHHSkddvGmXJ1S6bGdeejj7rFB4C44a1jTuCCO4NlqDHJUr0saAWXtZDRJ71fJ0kg4xY0sPZ58VuPbhNvCw7t667bMsizwyOCTeyzkgoA/TCHkEh8U8SgGJs4Ft6nAkl6TeUXtF2ki+bfn+Hr1VVTG/rcNKOslgE2SJ4eyzgtpheg6XWAHfpW6fleTBYA4DuJReMJrK+v6y0NxCGb+npbWSDl7A7Aw0q0WOqD0mAJhU7oX7A7h70fHca3/ZYQcMHeCcpliRVbRWSZB+l/Ww+oxG5GYJN00f1YDEWcCMrtbISvtckntB3fZZkkYe6R30JCF/5TSUI0GZ7tcNBny/iVgUfkdXx8ajGM4+K6w9OUeN3useYHREZY/HMKEtdAKYjm99X1n4+0igpt9o5ix76WWNaNnLkFeT212jD6L2mAFMZ7E6QF97gDkBt/M2BOx5noOOvIN8nQt1yoJnoMWScyGdOr9y4lfy15AP5QbE7FPv7vHLz6A8Fjmy3f4igiN6gLoHuIdFO5CDV6S5E+Me5ziVtYwNwkl6V1I6hzg0XNPWhEc9nH1WsM0SEKTT5hSZ7LpXpPW0X6JuLcMWfl9fhz2Ys7EqBOk2T1jS6eyLhxlh7Q7WoWMZU8bKD4TpvOPOzAtarGXgmVvUYPKxXsAzeisEUa5GaIuoPWYG2vBKJwvyMtHssfMy+XUINGu9lkGHwEBnKJEQFYJAo0iSNzjPKJOjkO1tWotogDGJenD3imnV2/ZZ5tdyLQPfOeyqs33aIm/ClSQvxIDEmQKdrPMVCfiMfkWaZz5Eq7UMrkOMdFUXNIZzE64keYFrHC5BlnE6+6LBjuZ0QA+zqG77rK/J03Ytw7iQA4gXCu0Ow/LtU20QtceMoZ+Z1c6rUswR3NG+7ecJkhF5NK5l4JnzXRfoQqDePiX3hrQF46tcgox3tFFER6DzBR35iM+522eZV4sRvvVaBs23nhcYfaDdG5IftNeOMZx9ATCjs905G9y9nBzbnzEjfUOMUuu1DD7T01pGF5AMNkFIGkluhKY9Yjj7zKDNIzhZlmQHsi6hTKTrXZbt1zKgVbZ4oJ0NmlMOQZR71DXEcPaFgCYROm/rM7M0DYD31CvSZJ5yntrF/kxZ8MzdodYyuoAXfNoEaROPFQMSFwa705sOrXX4vXZXpPGz9DjZxLMFn70/9FpGV9gEyd5oPsMrhrMvDOuO/woa8irkNch+8vPsIDnkarJZD7iWntI6vG2O4ZnTkOa1jA1m3JTAOqgQ5GBzbFnUHgtE/tfJr2avJZWRUpPse3h9GbLu6EemGDVBoRGO0m0pCJaca+PpmgowUNyr1EFDPFYMZ18Y8uvo2PvouKVOsEkwSS00DU0rrqNg7oCO32ItA1poC2sZXeHGY9VPtGNA4sKguTHbSvZqcq3VWga9V1tcy+gKmlSV370hYDGGsy8I+fdPvtO2r30ke33zmVLQGjeHPKBhLHBSbv92Saogao+FwR4ZQyT7rksSapWuhxpMCWo8FgYXSV4jhrMvCNoCWIjAPl9P2jkPgdYY9Y6PMaDGY1kBizEgcWHI99OzTqMHSvbt5E26iSXrxaFNPBbXOFyCxHD22cLeCNRNkq9ItouE6si4frS4GbXHAmG7LrsIyPYjjLLPmY40o/WNtlDN0f0jjcn4KpcgMZx91sAE/abT6IGCvOz/7xf5J+eyG+mO7wajqUGNx4KJatJiOPsyobkuhxQQ5uE6ZAWjb3Z9Xl4u9/cUZ4hp2iOGsy8AtKHtRt+GcFUapLlWuFJhoinu0ynAjjTgHC6Gsy8YnCv4hJfUCfJ4qL3fRdD5TICkMdHoQfLc4joEaDZWynjj+N+aibhFkBiQuCDo7ktfKdydMJuOFfmxU8OU6oF8tph8YRqO7RBAp386+2L6n9nZ5EhT/HH6VvZs8ff6vRjOvjwU5k3RAX2laV9EMbmlixSkwfeANJWo2D6EeSLvQRwC+bNPvRud3r0/0BJokuLvqD2WBxOPFdBxOXcIHcFJGq5Oo2Nf6NPdvBJqr8IhkJwPdQigs5+146o2SbabvB1duwuFmY+wMymdTRPzbM/mjVlrMI4DapvkFiQ4iLJOkOddyBW6aDc5BLJPJqc1ErSR7JnlxKBFWOBIi1H9jta5KGZUHtE9yw5sOjI6NDv2prKFCokIuUViGoK+mLzHR3PYAk1yL66gLxyruQMnw0Wg3rTcrySpMZ2gyfp2CGR/hlel4/sI5iSd71mJiOgVnJybSXrhELgZ5BC4AlE6vK8YDRS1SMTUwXnSWhMa9/Bmh0B24ciN21Wy3eWF/Uc8InDWbMQhkH1F7+whEkPdIxYFzruyz6ZuXFWwxJ2EEQsDzKLbemcPkUiQiIUheza9rHd2f4mLhhGLA2OutM4eJKfnvQcmIsJB/tzJd6oRup6CPG5JlhERy4K2x8NHzBpI1B4RSwY0wBWt87cRxnFJNhERy0RhajWHuduCz8T9IBGPDtqGvGe7yQNO8OVjERGPDsymqd30mkYUTuiNORbP3o141MHgw/zMiSfXEncPRkRERERERERERERERERERERERERERERERERERERERERERMwXjz32/wCxdRWzIF1OAAAAAElFTkSuQmCC\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Logo\":\"Logo_Logo__2MVPj\",\"App-logo-spin\":\"Logo_App-logo-spin__2MUPY\"};","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport FontAwesome from 'react-fontawesome';\r\n\r\nimport measureShapes from '../../../assets/icons/measureContour.png';\r\nimport measurePoints from '../../../assets/icons/measurePoints.png';\r\nimport width from '../../../assets/icons/WidthOn.png';\r\nimport vertices from '../../../assets/icons/editContourVertextOnOff.png';\r\n\r\nimport styles from './ToolbarComponent.module.css';\r\nimport '@fortawesome/fontawesome-free/css/all.css';\r\n\r\nclass ToolbarComponent extends Component {\r\n    openJobButtonClicked = () => this.refs.browseFiles.click();\r\n\r\n    notImplemented = () => alert(\"Not implemented yet\");\r\n\r\n    render() {\r\n        return (\r\n            <div className={styles[\"App-toolbar\"]}>\r\n                {/*<h4>Toolbar</h4>*/}\r\n                <button title=\"Open file\" onClick={this.openJobButtonClicked}>\r\n                    {/*<img src={open} alt=\"open\" />*/}\r\n                    <FontAwesome\r\n                        name='folder-open'\r\n                        size='2x'\r\n                        style={{color:\"grey\"}}\r\n                    />\r\n                </button>\r\n\r\n                <input style={{fontSize: 16, marginTop: 5, marginBottom: 5, display: \"none\"}}\r\n                       type=\"file\" id=\"browseFiles\" ref=\"browseFiles\" name=\"files[]\" multiple\r\n                       onChange={this.props.onFileSelected}\r\n                />\r\n\r\n                <button title=\"Zoom and pan to home view\" onClick={this.props.onHomeButtonPressed}>\r\n                    {/*<img src={home} alt=\"home\" />*/}\r\n                    <FontAwesome\r\n                        name='home'\r\n                        size='2x'\r\n                        style={{color:\"grey\"}}\r\n                    />\r\n                </button>\r\n                <button title=\"Pan by drag\" onClick={this.props.onPanByDragPressed}>\r\n                    {/*<img src={pan} alt=\"panByDrag\" />*/}\r\n                    <FontAwesome\r\n                        name='arrows-alt'\r\n                        size='2x'\r\n                        style={{color:\"grey\"}}\r\n                    />\r\n                </button>\r\n                <button title=\"Measure distance between points\" onClick={this.props.onMeasurePointsButtonPressed}>\r\n                    <img src={measurePoints} alt=\"measurePoints\" />\r\n                </button>\r\n                <button title=\"Measure distance between shapes\" onClick={this.props.onMeasureBetweenShapesButtonPressed}>\r\n                    <img src={measureShapes} alt=\"measureShapes\" />\r\n                </button>\r\n                <button title=\"Display solid or wire\" onClick={this.props.onToggleWidthModePressed}>\r\n                    <img src={width} alt=\"width\" />\r\n                </button>\r\n                <button title=\"Display vertices on/off\" onClick={this.props.onToggleVerticesPressed}>\r\n                    <img src={vertices} alt=\"vertices\" />\r\n                </button>\r\n                <button title=\"Display labels on/off\" onClick={this.props.onToggleLabelsPressed}>\r\n                    {/*<img src={label} alt=\"labels\" />*/}\r\n                    <FontAwesome\r\n                        name='tag'\r\n                        size='2x'\r\n                        style={{color:\"grey\"}}\r\n                    />\r\n                </button>\r\n                {/*<button title=\"Settings\" onClick={this.notImplemented}>*/}\r\n                    {/*<img src={setting} alt=\"setting\" />*/}\r\n                {/*</button>*/}\r\n\r\n                {/*{this.props.showCollisionDemoToolButton ? (*/}\r\n                    {/*<button title=\"Collision Distance Demo\" onClick={this.props.onCollisionDemoButtonPressed}>*/}\r\n                        {/*<FontAwesome*/}\r\n                            {/*name='arrows-h'*/}\r\n                            {/*size='2x'*/}\r\n                            {/*style={{color: \"grey\"}}*/}\r\n                        {/*/>*/}\r\n                    {/*</button>*/}\r\n                {/*) : null}*/}\r\n\r\n                {this.props.showSkeletonRecognitionButton ? (\r\n                    <button title=\"Skeleton Recognition Demo\" onClick={this.props.onSkeletonRecognitionButtonPressed}>\r\n                        <FontAwesome\r\n                            name='tree'\r\n                            size='2x'\r\n                            style={{color: \"grey\"}}\r\n                        />\r\n                    </button>\r\n                ) : null}\r\n\r\n                <button title=\"About\" onClick={this.props.onShowAboutPopupPressed}>\r\n                    {/*<img src={about} alt=\"about\" />*/}\r\n                    <FontAwesome\r\n                        name='info'\r\n                        size='2x'\r\n                        style={{color:\"grey\"}}\r\n                    />\r\n                </button>\r\n\r\n                <button>\r\n                    <FontAwesome\r\n                        name='ellipsis-v'\r\n                        size='2x'\r\n                        style={{color:\"white\"}}\r\n                    />\r\n                </button>\r\n\r\n                <span style={{position:\"relative\", top:-3}}>\r\n                    Units:\r\n                </span>\r\n                <button\r\n                    style={{position:\"relative\", top:-3}}\r\n                    onClick={this.props.onUnitClicked}\r\n                >\r\n                    <h3>{this.props.units}</h3>\r\n                </button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ToolbarComponent;","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\nimport Flatten from 'flatten-js';\r\nlet createjs = window.createjs;\r\n\r\nclass Stage extends createjs.Stage {\r\n    constructor(canvas) {\r\n        super(canvas);\r\n\r\n        createjs.Touch.enable(this);\r\n        this.mouseMoveOutside = false;   // true;\r\n        // this.enableDOMEvents(false);\r\n        this.enableMouseOver(20);\r\n\r\n        if (this.canvas.clientWidth > 0 && this.canvas.clientHeight > 0) {\r\n            this.canvas.width = this.canvas.clientWidth;\r\n            this.canvas.height = this.canvas.clientHeight;\r\n            // this.updateViewport(this.canvas.width, this.canvas.height);\r\n        }\r\n        this.origin = {x: this.canvas.width / 2, y: this.canvas.height / 2};\r\n        this.oldOrigin = {x: undefined, y: undefined};   // used by pan\r\n        this.resolution = 0.00001;          // MM 2 Pixels when zoomFactor = 1;\r\n        this.zoomFactor = 1.0;\r\n    }\r\n\r\n    get box() {\r\n        let minX = this.C2W_X(0);\r\n        let minY = this.C2W_Y(this.canvas.height);\r\n        let maxX = this.C2W_X(this.canvas.width);\r\n        let maxY = this.C2W_Y(0);\r\n\r\n        return ( new Flatten.Box(minX, minY, maxX, maxY) );\r\n    }\r\n\r\n    clone() {\r\n        let stage = new Stage(this.canvas);\r\n        return Object.assign(stage, this);\r\n    }\r\n\r\n    add(shape) {\r\n        this.addChild(shape);\r\n        return this;\r\n    }\r\n\r\n    scalingFactor() {\r\n        return this.resolution * this.zoomFactor;\r\n    }\r\n\r\n    C2W_Scalar(scalar) {\r\n        return (scalar / this.scalingFactor());\r\n    }\r\n\r\n    W2C_Scalar(scalar) {\r\n        return (this.scalingFactor() * scalar);\r\n    }\r\n\r\n    C2W_X(canvasX) {\r\n        return ((canvasX - this.origin.x) / this.scalingFactor());\r\n    }\r\n\r\n    C2W_Y(canvasY) {\r\n        return ((this.origin.y - canvasY) / this.scalingFactor());\r\n    }\r\n\r\n    W2C_X(worldX) {\r\n        return (this.scalingFactor() * worldX + this.origin.x);\r\n    }\r\n\r\n    W2C_Y(worldY) {\r\n        return (this.origin.y - this.scalingFactor() * worldY);\r\n    }\r\n\r\n    W2C(point) {\r\n        return {x: this.W2C_X(point.x), y: this.W2C_Y(point.y)}\r\n    }\r\n\r\n    panTo(newOrigin) {\r\n        this.origin = {x: newOrigin.x, y: newOrigin.y}\r\n    }\r\n\r\n    panBy(deltaX, deltaY) {\r\n        this.origin = {\r\n            x: this.origin.x + deltaX,\r\n            y: this.origin.y + deltaY\r\n        }\r\n    }\r\n\r\n    // zoom by 10% each time\r\n    zoomIn(ratio) {\r\n        let curRatio = ratio || 1.1;\r\n        this.zoomFactor = Math.min(10000000, curRatio * this.zoomFactor);\r\n    }\r\n\r\n    zoomOut(ratio) {\r\n        let curRatio = ratio || 1.1;\r\n        this.zoomFactor = Math.max(0.001, this.zoomFactor / curRatio);\r\n    }\r\n\r\n    // ZoomIn/Out + \"Focus follows mouse\"\r\n    zoom(focusX, focusY, bIn, ratio) {\r\n        let worldX = this.C2W_X(focusX);    // world coordinate of mouse focus before zoom\r\n        let worldY = this.C2W_Y(focusY);\r\n\r\n        bIn ? this.zoomIn(ratio) : this.zoomOut(ratio);\r\n\r\n        let newFocusX = this.W2C_X(worldX); // canvas coordinate after zoom\r\n        let newFocusY = this.W2C_Y(worldY);\r\n\r\n        this.panBy(focusX - newFocusX, focusY - newFocusY);\r\n\r\n        return [newFocusX, newFocusY];\r\n    }\r\n\r\n    zoomByMouse(focusX, focusY, bIn, ratio) {\r\n        this.zoom(focusX, focusY, bIn, ratio);\r\n    }\r\n\r\n    zoomToLimits(width, height) {\r\n        // prevent zero division in case of single point box\r\n        if (width === 0) width = 400000;\r\n        if (height === 0) height = 400000;\r\n        let resolution = Math.min(this.canvas.width / (1.1*width), this.canvas.height / (1.1*height));\r\n        let zoomFactor = resolution / this.resolution;\r\n        let ratio = zoomFactor / this.zoomFactor;\r\n        let bIn = true; //ratio > 1;\r\n\r\n        let focusX = this.canvas.width/2;\r\n        let focusY = this.canvas.height/2;\r\n        this.zoom(focusX, focusY, bIn, ratio);\r\n    }\r\n\r\n    resize() {\r\n        // this.origin.x = this.canvas.width / 2;\r\n        // this.origin.y = this.canvas.height / 2;\r\n        if (this.canvas.clientWidth > 0 && this.canvas.clientHeight > 0) {\r\n            this.canvas.width = this.canvas.clientWidth;\r\n            this.canvas.height = this.canvas.clientHeight;\r\n        }\r\n    }\r\n\r\n    // drawSomething() {\r\n    //     let shape = new Shape();\r\n    //     shape.graphics.beginFill('red').drawRect(0, 0, 20, 20);\r\n    //     this.addChild(shape);\r\n    //     this.update();\r\n    // }\r\n\r\n    panByMouseStart() {\r\n        this.oldOrigin.x = this.origin.x;\r\n        this.oldOrigin.y = this.origin.y;\r\n    }\r\n\r\n    panByMouseMove(dx, dy) {\r\n        if (dx !== undefined && dy !== undefined &&\r\n            this.oldOrigin.x !== undefined && this.oldOrigin.y !== undefined) {\r\n            this.origin = {\r\n                    x: this.oldOrigin.x + dx,\r\n                    y: this.oldOrigin.y + dy\r\n                };\r\n        }\r\n    }\r\n\r\n    panByMouseStop() {\r\n        this.oldOrigin.x = undefined;\r\n        this.oldOrigin.y = undefined;\r\n        this.tx = undefined;\r\n        this.ty = undefined;\r\n    }\r\n\r\n    panToCoordinate(x, y) {\r\n        let canvasX = this.W2C_X(x);\r\n        let canvasY = this.W2C_Y(y);\r\n\r\n        let dx = this.canvas.width / 2 - canvasX;\r\n        let dy = this.canvas.height / 2 - canvasY;\r\n        this.panBy(dx, dy);\r\n    }\r\n}\r\n\r\nexport default Stage;\r\n","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport styles from \"./CanvasComponent.module.css\";\r\nimport Stage from '../../../models/stage';\r\nimport { connect } from \"react-redux\";\r\n// import * as ActionTypes from \"../../../store/actionTypes\";\r\nimport * as actions from '../../../store/actions/stageActions';\r\n\r\nclass CanvasComponent extends Component {\r\n    canvasElement = React.createRef();\r\n\r\n    handleMouseMove = (event) => {\r\n        this.props.stage.canvas.focus();\r\n        this.props.handleMouseMove(\r\n            this.props.stage,\r\n            event.stageX,\r\n            event.stageY,\r\n            this.props.mouse.startX ? event.stageX - this.props.mouse.startX : undefined,\r\n            this.props.mouse.startY ? event.stageY - this.props.mouse.startY : undefined\r\n        );\r\n    };\r\n\r\n    handleMouseDown = (event) => {\r\n        this.props.handleMouseDown(this.props.stage, event.stageX, event.stageY);\r\n    };\r\n\r\n    handleMouseUp = (event) => {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        this.props.stage.panByMouseStop();\r\n        this.props.handleMouseUp(this.props.stage, event.stageX, event.stageY);\r\n    };\r\n\r\n    handleMouseLeave = (event) => {   // nothing works except click\r\n        this.props.stage.canvas.blur();\r\n        document.body.focus();\r\n    };\r\n\r\n    handleMouseWheel = (event) => {\r\n        event.preventDefault();\r\n\r\n        let delta = event.detail || event.wheelDelta;\r\n        if (delta !== 0) {\r\n            this.props.handleMouseWheelMove(this.props.stage, event.offsetX, event.offsetY, delta);\r\n        }\r\n    };\r\n\r\n    handleMouseWheelFox = (event) => {\r\n        event.preventDefault();\r\n        if (event.detail !== 0) {\r\n            this.props.handleMouseWheelMove(this.props.stage, event.layerX, event.layerY, -event.detail);\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        let stage = new Stage(this.canvasElement.current);\r\n\r\n        // stage.setClearColor(\"#FFFFFF\");\r\n        // stage.update();\r\n\r\n        stage.on(\"stagemousemove\", this.handleMouseMove);\r\n        stage.on(\"stagemousedown\", this.handleMouseDown);\r\n        stage.on(\"stagemouseup\", this.handleMouseUp);\r\n        stage.on(\"mouseleave\", this.handleMouseLeave);\r\n        stage.canvas.addEventListener(\"mousewheel\", this.handleMouseWheel);\r\n        stage.canvas.addEventListener(\"DOMMouseScroll\", this.handleMouseWheelFox);\r\n\r\n        this.props.registerStage(stage);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <canvas tabIndex=\"1\" ref={this.canvasElement} id=\"mainCanvas\" className={styles[\"App-canvas\"]}>\r\n            </canvas>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        stage: state.app.stage,\r\n        mouse: state.mouse\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        registerStage: (stage) => dispatch(actions.registerStage(stage)),\r\n        handleMouseDown: (stage, x, y) => dispatch(actions.handleMouseDown(stage, x, y)),\r\n        handleMouseUp: (stage, x, y) => dispatch(actions.handleMouseUp(stage, x, y)),\r\n        handleMouseMove: (stage, x, y, dx, dy) => dispatch(actions.handleMouseMove(stage, x, y, dx, dy)),\r\n        handleMouseWheelMove: (stage, x, y, delta) => dispatch(actions.handleMouseWheelMove(stage, x, y, delta))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CanvasComponent);\r\n","import * as ActionTypes from '../actionTypes';\r\n\r\nexport const registerStage = (stage) => {\r\n    return {\r\n        type: ActionTypes.NEW_STAGE_CREATED,\r\n        stage: stage\r\n    }\r\n};\r\n\r\nexport const handleMouseDown = (stage, x, y) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_DOWN_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y\r\n    }\r\n};\r\n\r\nexport const handleMouseUp = (stage, x, y) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_UP_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y\r\n    }\r\n};\r\n\r\nexport const handleMouseMove = (stage, x, y, dx, dy) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_MOVED_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y,\r\n        dx: dx,\r\n        dy: dy\r\n    }\r\n};\r\n\r\nexport const handleMouseWheelMove = (stage, x, y, delta) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y,\r\n        delta: delta\r\n    }\r\n};\r\n","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\nexport const NEW_STAGE_CREATED = \"NEW_STAGE_CREATED\";\r\nexport const STAGE_RESIZED = \"STAGE_RESIZED\";\r\n\r\nexport const NEW_SHAPE_PASTED = \"NEW_SHAPE_PASTED\";\r\n\r\n/** Toolbar buttons **/\r\nexport const PAN_BY_DRAG_BUTTON_CLICKED = \"PAN_BY_DRAG_BUTTON_CLICKED\";\r\nexport const MEASURE_POINTS_BUTTON_PRESSED = \"MEASURE_POINTS_BUTTON_PRESSED\";\r\nexport const MEASURE_SHAPES_BUTTON_PRESSED = \"MEASURE_SHAPES_BUTTON_PRESSED\";\r\nexport const TOGGLE_ABOUT_POPUP_CLICKED = \"TOGGLE_ABOUT_POPUP_CLICKED\";\r\n// export const CLOSE_ABOUT_POPUP_BUTTON_PRESSED = \"CLOSE_ABOUT_POPUP_BUTTON_PRESSED\";\r\nexport const TOGGLE_UNITS_CLICKED = \"TOGGLE_UNITS_CLICKED\";\r\nexport const TOGGLE_WIDTH_MODE_CLICKED = \"TOGGLE_WIDTH_MODE_CLICKED\";\r\nexport const TOGGLE_DISPLAY_VERTICES_CLICKED = \"TOGGLE_DISPLAY_VERTICES_CLICKED\";\r\nexport const TOGGLE_DISPLAY_LABELS_CLICKED = \"TOGGLE_DISPLAY_LABELS_CLICKED\";\r\n\r\nexport const MOUSE_MOVED_ON_STAGE = \"MOUSE_MOVED_ON_STAGE\";\r\nexport const MOUSE_DOWN_ON_STAGE = \"MOUSE_DOWN_ON_STAGE\";\r\nexport const MOUSE_UP_ON_STAGE = \"MOUSE_UP_ON_STAGE\";\r\nexport const MOUSE_WHEEL_MOVE_ON_STAGE = \"MOUSE_WHEEL_MOVE_ON_STAGE\";\r\n\r\nexport const MOUSE_ROLL_OVER_SHAPE = \"MOUSE_ROLL_OVER_SHAPE\";\r\nexport const MOUSE_ROLL_OUT_SHAPE = \"MOUSE_ROLL_OUT_SHAPE\";\r\nexport const MOUSE_CLICKED_ON_SHAPE = \"MOUSE_CLICKED_ON_SHAPE\";\r\n\r\n// export const HOME_BUTTON_CLICKED = \"HOME_BUTTON_CLICKED\";\r\nexport const PAN_TO_COORDINATE = \"PAN_TO_COORDINATE\";\r\nexport const PAN_AND_ZOOM_TO_SHAPE = \"PAN_AND_ZOOM_TO_SHAPE\";\r\n\r\nexport const LAYER_LIST_PANEL_PRESSED = \"LAYER_LIST_PANEL_PRESSED\";\r\nexport const ADD_LAYER_BUTTON_PRESSED = \"ADD_LAYER_BUTTON_PRESSED\";\r\nexport const ADD_NEW_LAYER = \"ADD_NEW_LAYER\";\r\nexport const DELETE_LAYER_BUTTON_PRESSED = \"DELETE_LAYER_BUTTON_PRESSED\";\r\nexport const SORT_LAYERS_BUTTON_PRESSED = \"SORT_LAYERS_BUTTON_PRESSED\";\r\n\r\nexport const TOGGLE_DISPLAY_LAYER_PRESSED = \"TOGGLE_DISPLAY_LAYER_PRESSED\";\r\nexport const TOGGLE_AFFECTED_LAYER_PRESSED=\"TOGGLE_AFFECTED_LAYER_PRESSED\";\r\nexport const OPEN_LAYER_EDIT_FORM_PRESSED = \"OPEN_LAYER_EDIT_FORM_PRESSED\";\r\nexport const SUBMIT_LAYER_EDIT_FORM_PRESSED = \"SUBMIT_LAYER_EDIT_FORM_PRESSED\";\r\nexport const ESCAPE_LAYER_EDIT_FORM_PRESSED = \"ESCAPE_LAYER_EDIT_FORM_PRESSED\";\r\n\r\nexport const LAYERS_LIST_ARROW_DOWN_PRESSED = \"LAYERS_LIST_ARROW_DOWN_PRESSED\";\r\nexport const LAYERS_LIST_ARROW_UP_PRESSED = \"LAYERS_LIST_ARROW_UP_PRESSED\";\r\n\r\n// export const TOGGLE_WATCH_EXPAND_CLICKED = \"TOGGLE_WATCH_EXPAND_CLICKED\";\r\n\r\nexport const FILENAME_LIST_SELECTED = \"FILENAME_LIST_SELECTED\";\r\nexport const INPUT_FILE_LOADED = \"INPUT_FILE_LOADED\";\r\nexport const DATA_FROM_BUFFER_PASTED = \"DATA_FROM_BUFFER_PASTED\";\r\n\r\n\r\n\r\n/** AABB Distance Measurement Demo **/\r\nexport const AABB_DEMO_URI = \"AABB_DEMO_URI\";\r\nexport const AABB_DEMO_NEXT_DIST_STEP = \"AABB_DEMO_NEXT_DIST_STEP\";\r\nexport const AABB_TREE_NEXT_LEVEL = \"AABB_TREE_NEXT_LEVEL\";\r\n\r\n/** Collision demo **/\r\nexport const COLLISION_DEMO_URI = \"COLLISION_DEMO_URI\";\r\nexport const COLLISION_DEMO_BUTTON_PRESSED = \"COLLISION_DEMO_BUTTON_PRESSED\";\r\n\r\n/** Skeleton recognition demo **/\r\nexport const SKELETON_RECOGNITION_URI = \"SKELETON_RECOGNITION_URI\";\r\nexport const SKELETON_RECOGNITION_BUTTON_PRESSED=\"SKELETON_RECOGNITION_BUTTON_PRESSED\";","/**\r\n * Created by alexanderbol on 17/06/2017.\r\n */\r\nimport React from 'react';\r\nimport styles from './StatusComponent.module.css';\r\n\r\nconst StatusComponent = () => {\r\n    return (\r\n        <div className={styles[\"App-status-bar\"]}>\r\n            <div>\r\n                <h5>\r\n                    &nbsp;\r\n                </h5>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StatusComponent;","import React, {Component} from 'react';\r\n// import Utils from \"../utils\";\r\n\r\nexport class StageComponent extends Component {\r\n    // shouldComponentUpdate useless because always returns \"true\",\r\n    // Don't know why, maybe because of children?\r\n    // ----------------------------------------------------------\r\n    // shouldComponentUpdate(nextProps, nextState) {\r\n    //     if (Utils.is_equal(this.props, nextProps)) {\r\n    //         return false;\r\n    //     }\r\n    //     return true;\r\n    // }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.stage.canvas && this.props.stage.canvas.getContext('2d')) {\r\n\r\n            let origin = this.props.stage.origin;\r\n            let zoomFactor = this.props.stage.zoomFactor*this.props.stage.resolution;\r\n            this.props.stage.setTransform(origin.x, origin.y, zoomFactor, -zoomFactor);\r\n\r\n            this.props.stage.update();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                {this.props.children}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}","import Flatten from 'flatten-js';\r\n\r\n// import * as createjs from '@createjs/easeljs';\r\nlet createjs = window.createjs;\r\nlet {Point, Segment, Circle, Arc, Polygon, Box} = Flatten;\r\n\r\n/* Provide conversion methods from FlattenJS objects to CreateJS Graphics */\r\nexport function graphics(shape, style = undefined) {\r\n    if (shape instanceof Point) {\r\n        return graphics_point(shape, style);\r\n    }\r\n    if (shape instanceof Segment) {\r\n        return graphics_segment(shape, style);\r\n    }\r\n    if (shape instanceof Arc) {\r\n        return graphics_arc(shape, style);\r\n    }\r\n    if (shape instanceof Circle) {\r\n        return graphics_circle(shape, style);\r\n    }\r\n    if (shape instanceof Box) {\r\n        return graphics_box(shape, style);\r\n    }\r\n    if (shape instanceof Polygon) {\r\n        return graphics_polygon(shape, style);\r\n    }\r\n    return null;\r\n}\r\n\r\n// Point.prototype.graphics = function(style) {\r\nfunction graphics_point(point, style) {\r\n    let radius = (style && style.radius) ? style.radius : 3;\r\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\r\n    let graphics = new createjs.Graphics();\r\n    graphics.fill = graphics.beginFill(fill).command;\r\n    graphics.circle = graphics.drawCircle(point.x, point.y, radius).command;\r\n    return graphics;\r\n};\r\n\r\n// Segment.prototype.graphics = function(style) {\r\nfunction graphics_segment(segment, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle !== undefined ? style.strokeStyle : 2;\r\n    let ignoreScale = style && style.ignoreScale !== undefined ? style.ignoreScale : true;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,1,0,10,ignoreScale)\r\n        .beginStroke(stroke)\r\n        .moveTo(segment.ps.x, segment.ps.y)\r\n        .lineTo(segment.pe.x, segment.pe.y)\r\n        .endStroke();\r\n};\r\n\r\n// Arc.prototype.graphics = function(style) {\r\nfunction graphics_arc(arc, style) {\r\n    // let startAngle = 2 * Math.PI - this.startAngle;\r\n    // let endAngle =  2 * Math.PI - this.endAngle;\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 2;\r\n    let ignoreScale = style && style.ignoreScale !== undefined ? style.ignoreScale : true;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,1,0,10,ignoreScale)\r\n        .beginStroke(stroke)\r\n        .arc(arc.pc.x, arc.pc.y, arc.r, arc.startAngle, arc.endAngle, !arc.counterClockwise)\r\n        .endStroke();\r\n};\r\n\r\n// Circle.prototype.graphics = function(style) {\r\nfunction graphics_circle(circle, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 2;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    // graphics.setStrokeStyle(2).beginStroke(\"black\").beginFill(\"red\").drawCircle(pcx, pcy, r);\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,0,0,10,true)\r\n        .beginStroke(stroke)\r\n        .drawCircle(circle.pc.x, circle.pc.y, circle.r)\r\n        .endStroke();\r\n};\r\n\r\n// Box.prototype.graphics = function(style) {\r\nfunction graphics_box(box, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    // graphics.setStrokeStyle(2).beginStroke(\"black\").beginFill(\"red\").drawCircle(pcx, pcy, r);\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,0,0,10,true)\r\n        .beginStroke(stroke)\r\n        .drawRect(box.xmin, box.ymin, box.xmax-box.xmin, box.ymax-box.ymin);\r\n};\r\n\r\nfunction setGraphicsEdgeSegment(graphics, segment) {\r\n    graphics.lineTo(segment.pe.x, segment.pe.y);\r\n}\r\n\r\nfunction setGraphicsEdgeArc(graphics, arc) {\r\n    // let startAngle = 2 * Math.PI - arc.startAngle;\r\n    // let endAngle = 2 * Math.PI - arc.endAngle;\r\n    graphics.arc(arc.pc.x, arc.pc.y, arc.r, arc.startAngle, arc.endAngle, !arc.counterClockwise);\r\n}\r\n\r\nfunction setGraphicsEdge(graphics, edge) {\r\n    if (edge.shape instanceof Segment) {\r\n        setGraphicsEdgeSegment(graphics, edge.shape);\r\n    }\r\n    else if (edge.shape instanceof Arc) {\r\n        setGraphicsEdgeArc(graphics, edge.shape);\r\n    }\r\n}\r\n\r\nfunction setGraphicsFace(graphics, face) {\r\n    let ps = face.first.start;\r\n    graphics.moveTo(ps.x, ps.y);\r\n\r\n    for (let edge of face) {\r\n        setGraphicsEdge(graphics, edge);\r\n    }\r\n}\r\n\r\n// Polygon.prototype.graphics = function(style) {\r\nfunction graphics_polygon(polygon, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\r\n    let stroke = style && style.stroke ? style.stroke : \"#FF0303\";\r\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\r\n    graphics.setStrokeStyle(strokeStyle,0,0,10,true);\r\n    graphics.stroke = graphics.beginStroke(stroke).command;\r\n    graphics.fill = graphics.beginFill(fill).command;\r\n\r\n    for (let face of polygon.faces) {\r\n        setGraphicsFace(graphics, face);\r\n    }\r\n\r\n    graphics.endStroke();\r\n    return graphics;\r\n};\r\n\r\n","const Utils = {\r\n    is_equal: (obj1, obj2) => {\r\n        let equal = true;\r\n        for (let key of Object.keys(obj2)) {\r\n            if (obj2[key] !== obj1[key]) {\r\n                equal = false;\r\n                break;\r\n            }\r\n        }\r\n        return equal;\r\n    }\r\n};\r\n\r\nexport default Utils;","/**\r\n * Created by alexanderbol on 19/06/2017.\r\n */\r\n\r\nimport {Component} from 'react';\r\n// import * as createjs from '@createjs/easeljs';\r\nimport {graphics} from '../../../../models/graphics';\r\nimport Utils from '../../../../models/utils';\r\n\r\nlet createjs = window.createjs;\r\nexport class ShapeComponent extends Component {\r\n    constructor(params) {\r\n        super();\r\n\r\n        this.shape = new createjs.Shape();\r\n        params.stage.addChild(this.shape);\r\n\r\n        this.vertexShapes = [];\r\n\r\n        for (let vertex of params.model.geom.vertices) {\r\n            let vertexShape = new createjs.Shape();\r\n            vertexShape.geom = vertex;   // augment Shape with geom struct\r\n            vertexShape.mouseEnabled = false;\r\n            params.stage.addChild(vertexShape);\r\n            this.vertexShapes.push(vertexShape);\r\n        }\r\n    }\r\n\r\n    handleMouseOver = (event) => {\r\n        this.props.onMouseOver(this.props.model);\r\n    };\r\n\r\n    handleMouseOut = (event) => {\r\n        this.props.onMouseOut();\r\n    };\r\n\r\n    handleClick = (event) => {\r\n        this.props.onClick(this.props.model, this.props.layer);\r\n    };\r\n\r\n    redrawVertices(stroke, fill, alpha) {\r\n        let stage = this.props.stage;\r\n\r\n        for (let vertexShape of this.vertexShapes) {\r\n            let vertex = vertexShape.geom;\r\n            if (vertexShape.graphics.isEmpty()) {\r\n                vertexShape.graphics = graphics(vertex,   // vertex.graphics({\r\n                    {\r\n                        stroke: stroke,     // this.props.color,\r\n                        fill: fill,\r\n                        radius: 3. / (stage.zoomFactor * stage.resolution)\r\n                    });\r\n            }\r\n            else {\r\n                vertexShape.graphics.circle.radius = 3. / (stage.zoomFactor * stage.resolution);\r\n                vertexShape.graphics.fill.style = fill;\r\n            }\r\n            vertexShape.alpha = alpha;\r\n        }\r\n    }\r\n\r\n    redraw() {\r\n        // Draw shape\r\n        let stage = this.props.stage;\r\n        let color = (this.props.hovered || this.props.selected) ? \"black\" : this.props.color;\r\n        let alpha = (this.props.hovered || this.props.selected) ? 1.0 : 0.6;\r\n        let widthOn = this.props.widthOn;\r\n\r\n        let strokeStyle = this.props.model.geom.aperture ? this.props.model.geom.aperture : undefined;\r\n        let fill = (widthOn && !this.props.displayVertices) ? this.props.color : \"white\";\r\n\r\n        if (this.shape.graphics.isEmpty()) {\r\n            this.shape.graphics = graphics(this.props.model.geom,{\r\n                strokeStyle: strokeStyle,\r\n                ignoreScale: true,\r\n                stroke: color,\r\n                fill: fill,\r\n                radius: 3. / (stage.zoomFactor * stage.resolution)\r\n            });\r\n\r\n            // this.skeletonShape = new createjs.Shape();\r\n            // this.skeletonShape.graphics = this.props.model.geom.graphics({\r\n            //     strokeStyle: 1,\r\n            //     ignoreScale: true,\r\n            //     stroke: color,\r\n            //     fill: fill,\r\n            //     radius: 3. / (stage.zoomFactor * stage.resolution)\r\n            // });\r\n            // this.skeletonShape.alpha = 1;\r\n            // this.props.stage.addChild(this.skeletonShape);\r\n        }\r\n        else {\r\n            if (this.shape.graphics.stroke) this.shape.graphics.stroke.style = color;\r\n            if (this.shape.graphics.fill) this.shape.graphics.fill.style = fill;\r\n            if (this.shape.graphics.circle) this.shape.graphics.circle.radius =\r\n                3. / (stage.zoomFactor * stage.resolution);\r\n        }\r\n        this.shape.alpha = this.props.displayed ? alpha : 0.0;\r\n\r\n        // let box = this.props.model.geom.box;\r\n        // this.shape.cache(box.xmin, box.ymin, box.xmax - box.xmin, box.ymax - box.ymin);\r\n\r\n        // Draw vertices\r\n        alpha = this.props.displayed && this.props.displayVertices ? 1.0 : 0.0;\r\n        this.redrawVertices(color, color, alpha);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.shape.on(\"mouseover\", this.handleMouseOver);\r\n        this.shape.on(\"mouseout\", this.handleMouseOut);\r\n        this.shape.on(\"click\", this.handleClick);\r\n\r\n        // this.shape.mouseEnabled = false;\r\n\r\n        this.redraw();\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if (Utils.is_equal(this.props, nextProps)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.redraw();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.shape.off(\"mouseover\", this.handleMouseOver);\r\n        this.shape.off(\"mouseout\", this.handleMouseOut);\r\n        this.shape.off(\"click\", this.handleClick);\r\n        this.props.stage.removeChild(this.shape);\r\n        this.shape.graphics.clear();\r\n        for (let vertexShape of this.vertexShapes) {\r\n            this.props.stage.removeChild(vertexShape);\r\n        }\r\n        this.vertexShapes = [];\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * Created by alexanderbol on 19/06/2017.\r\n */\r\n\r\nimport {Component} from 'react';\r\n// import * as createjs from '@createjs/easeljs';\r\nimport '../../../../models/graphics';\r\nimport Utils from '../../../../models/utils';\r\n\r\nlet createjs = window.createjs;\r\n\r\nexport class ImageComponent extends Component {\r\n    constructor(params) {\r\n        super();\r\n\r\n        this.bitmap = new createjs.Bitmap(params.model.geom.uri);\r\n        params.stage.addChild(this.bitmap);\r\n    }\r\n\r\n    handleMouseOver = (event) => {\r\n        this.props.onMouseOver(this.props.model);\r\n    };\r\n\r\n    handleMouseOut = (event) => {\r\n        this.props.onMouseOut();\r\n    };\r\n\r\n    handleClick = (event) => {\r\n        this.props.onClick(this.props.model, this.props.layer);\r\n    };\r\n\r\n    redraw() {\r\n        // Draw shape\r\n\r\n        let alpha = 0.5; // (this.props.hovered || this.props.selected) ? 1.0 : 0.6;\r\n\r\n        this.bitmap.alpha = this.props.displayed ? alpha : 0.0;\r\n\r\n        let width = this.props.model.geom.width;\r\n\r\n        let ratio = this.bitmap.image.naturalWidth/this.bitmap.image.naturalHeight;\r\n        let scaleX = width/this.bitmap.image.naturalWidth; // 1. / (stage.zoomFactor * stage.resolution);\r\n        let scaleY = width/(this.bitmap.image.naturalHeight*ratio);\r\n        let tx = this.props.model.geom.center.x; // stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n        let ty = this.props.model.geom.center.y; // -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n\r\n        this.bitmap.setTransform(tx, ty, scaleX, -scaleY);\r\n\r\n        this.bitmap.regX = this.bitmap.image.naturalWidth/2;\r\n        this.bitmap.regY = this.bitmap.image.naturalHeight/2;\r\n\r\n        // let box = this.state.polygon.geom.box;\r\n        // this.shape.cache(box.xmin, box.ymin, box.xmax - box.xmin, box.ymax - box.ymin);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.bitmap.on(\"mouseover\", this.handleMouseOver);\r\n        this.bitmap.on(\"mouseout\", this.handleMouseOut);\r\n        this.bitmap.on(\"click\", this.handleClick);\r\n\r\n        // this.shape.mouseEnabled = false;\r\n\r\n        this.redraw();\r\n    }\r\n\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if (Utils.is_equal(this.props, nextProps)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.redraw();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.bitmap.off(\"mouseover\", this.handleMouseOver);\r\n        this.bitmap.off(\"mouseout\", this.handleMouseOut);\r\n        this.bitmap.off(\"click\", this.handleClick);\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport {ShapeComponent} from './graphics/shapeComponent';\r\nimport {ImageComponent} from \"./graphics/imageComponent\";\r\n\r\nexport class LayerComponent extends Component {\r\n    render() {\r\n        return (\r\n            this.props.layer.shapes.map((shape, index) => {\r\n                return shape.geom.uri ? (\r\n                    <ImageComponent\r\n                        key={index}\r\n                        stage={this.props.stage}\r\n                        layer={this.props.layer}\r\n                        model={shape}\r\n                        displayed={this.props.layer.displayed}\r\n                        hovered={shape === this.props.hoveredShape}\r\n                        selected={\r\n                            shape === this.props.firstMeasuredShape ||\r\n                            shape === this.props.secondMeasuredShape\r\n                        }\r\n                        color={this.props.layer.color}\r\n                        widthOn={this.props.widthOn}\r\n                        displayLabels={this.props.displayLabels}\r\n                        zoomFactor={this.props.zoomFactor}\r\n                        onMouseOver={this.props.onMouseOver}\r\n                        onMouseOut={this.props.onMouseOut}\r\n                        onClick={this.props.onClick}\r\n                    />\r\n                    ) : (\r\n                    <ShapeComponent\r\n                        key={index}\r\n                        stage={this.props.stage}\r\n                        layer={this.props.layer}\r\n                        model={shape}\r\n                        displayed={this.props.layer.displayed}\r\n                        hovered={shape === this.props.hoveredShape}\r\n                        selected={\r\n                            shape === this.props.firstMeasuredShape ||\r\n                            shape === this.props.secondMeasuredShape\r\n                        }\r\n                        color={this.props.layer.color}\r\n                        widthOn={this.props.widthOn}\r\n                        displayVertices={this.props.displayVertices}\r\n                        zoomFactor={this.props.zoomFactor}\r\n                        onMouseOver={this.props.onMouseOver}\r\n                        onMouseOut={this.props.onMouseOut}\r\n                        onClick={this.props.onClick}\r\n                    /> )\r\n                }\r\n            )\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport classes from '../LabelsLayerComponent/labelsLayer.module.css';\r\n\r\nconst labelComponent = ( {stage, shape} ) => {\r\n    let center = shape.geom.center || shape.geom;  // Point has no method center\r\n    let left = stage.canvas.offsetLeft + stage.W2C_X(center.x) + 6;\r\n    let top = stage.canvas.offsetTop + stage.W2C_Y(center.y) - 4;\r\n    let inside = left > stage.canvas.offsetLeft && left < stage.canvas.offsetLeft + stage.canvas.width &&\r\n        top > stage.canvas.offsetTop && top < stage.canvas.height;\r\n\r\n    return inside ? (\r\n        <div style={{position:\"absolute\", left:left+\"px\", top: top+\"px\"}} className={classes.LabelComponent}>\r\n            <h5>{shape.label}</h5>\r\n        </div>\r\n    ) : null;\r\n};\r\n\r\nexport default labelComponent;","import React from 'react';\r\nimport LabelComponent from '../domelements/labelComponent';\r\n\r\nconst labelsLayerComponent = ({stage, layer, displayLabels}) => {\r\n    return (layer.displayed && displayLabels) ? (\r\n        layer.shapes.map((shape, index) => {\r\n                return (shape.label && shape.label.trim() !== \"\") ? (\r\n                    <LabelComponent\r\n                        key={index}\r\n                        stage={stage}\r\n                        shape={shape}\r\n                    />) : null;\r\n            }\r\n        )\r\n    ) : null;\r\n};\r\n\r\nexport default labelsLayerComponent;","import React, {Component} from 'react';\r\nimport {LayerComponent} from \"./layerComponent\";\r\nimport LabelsLayerComponent from \"./LabelsLayerComponent/labelsLayerComponent\";\r\n\r\nclass LayersComponent extends Component {\r\n\r\n    render() {\r\n        return this.props.layers.map((layer) =>\r\n            <React.Fragment key={layer.name}>\r\n                <LayerComponent\r\n                    stage={this.props.stage}\r\n                    layer={layer}\r\n                    color={layer.color}\r\n                    displayed={layer.displayed}\r\n                    displayVertices={this.props.displayVertices}\r\n                    displayLabels={this.props.displayLabels}\r\n                    widthOn={this.props.widthOn}\r\n                    hoveredShape={this.props.hoveredShape}\r\n                    firstMeasuredShape={this.props.firstMeasuredShape}\r\n                    secondMeasuredShape={this.props.secondMeasuredShape}\r\n                    zoomFactor={this.props.zoomFactor}\r\n                    onMouseOver={this.props.onMouseOver}\r\n                    onMouseOut={this.props.onMouseOut}\r\n                    onClick={this.props.onClick}\r\n                />\r\n                <LabelsLayerComponent\r\n                    stage={this.props.stage}\r\n                    layer={layer}\r\n                    displayed={layer.displayed}\r\n                    displayLabels={this.props.displayLabels}\r\n\r\n                />\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LayersComponent;\r\n","\r\nlet defaultStyle = {\r\n    strokeStyle: 1,\r\n    stroke: \"#FF0303\",\r\n    fill: \"#FF0303\",\r\n    alpha: 1.0\r\n};\r\n\r\n/* Class Model represents data model that will be added to layer */\r\nexport class Model {\r\n    constructor(geom = undefined, style = undefined, label = \"\") {\r\n        this.geom = geom;\r\n        this.style = style || defaultStyle;\r\n        this.label = label;\r\n    }\r\n\r\n    clone() {\r\n        let model = new Model(this.geom, this.style, this.label);\r\n        return Object.assign(model, this);\r\n    }\r\n\r\n    get box() {\r\n        return this.geom.box;\r\n    }\r\n/*\r\n    static transformPoint(pt, stage) {\r\n        return new Flatten.Point(stage.W2C_X(pt.x), stage.W2C_Y(pt.y));\r\n    }\r\n\r\n    static transformSegment(segment, stage) {\r\n        return new Flatten.Segment(\r\n            Model.transformPoint(segment.ps, stage),\r\n            Model.transformPoint(segment.pe, stage)\r\n        )\r\n    }\r\n\r\n    static transformArc(arc, stage) {\r\n        return new Flatten.Arc(\r\n            Model.transformPoint(arc.pc, stage),\r\n            stage.W2C_Scalar(arc.r),\r\n            arc.startAngle,\r\n            arc.endAngle,\r\n            arc.counterClockwise\r\n        )\r\n    }\r\n\r\n    static transformEdge(shape, stage) {\r\n        if (shape instanceof Flatten.Segment) {\r\n            return Model.transformSegment(shape, stage);\r\n        }\r\n        else if (shape instanceof Flatten.Arc) {\r\n            return Model.transformArc(shape, stage);\r\n        }\r\n    }\r\n\r\n    static transformFace(face, stage) {\r\n        // Get shapes of face as array\r\n        let shapes = [];\r\n        for (let edge of face) {\r\n            shapes.push(edge.shape);\r\n        }\r\n\r\n        // Transform array of edges\r\n        return shapes.map(shape => Model.transformEdge(shape, stage));\r\n    }\r\n\r\n    static transformPolygon(polygon, stage) {\r\n        let newPolygon = new Flatten.Polygon();\r\n        let shapes = [];\r\n        for (let face of polygon.faces) {\r\n            shapes = Model.transformFace(face, stage);\r\n            newPolygon.addFace(shapes);\r\n        }\r\n        return newPolygon;\r\n    }\r\n*/\r\n}\r\n","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport Flatten from 'flatten-js';\r\n// import { Shape } from '../models/shape';\r\nimport { Model } from './model';\r\n\r\nexport class Layer {\r\n    constructor(stage) {\r\n        // super();\r\n        // cannot define Layer as extension of PlanarSet due to bug in compiler ?\r\n        this.stage = stage;\r\n        this.shapes = [];         // new Flatten.PlanarSet();\r\n        this.name = \"\";\r\n        this.color = \"\";\r\n        this.title = \"\";\r\n        this.displayed = false;\r\n        this.edited = false;\r\n        this.affected = false;\r\n    }\r\n\r\n    clone() {\r\n        let layer = new Layer(this.stage);\r\n        return Object.assign(layer, this);\r\n    }\r\n\r\n    add(shape) {\r\n        if (shape instanceof Model) {\r\n            this.shapes.push(shape);       // add(shape)\r\n        }\r\n        else {\r\n            let geom = shape;\r\n            let newShape = new Model(geom, {}, shape.label) // , this.stage);\r\n            this.shapes.push(newShape);     // add(newShape);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    addShapesArray(shapes) {\r\n        for (let shape of shapes) {\r\n            this.add(shape);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    get box() {\r\n        let box = new Flatten.Box();\r\n        for (let shape of this.shapes) {\r\n            box = box.merge(shape.box);\r\n        }\r\n        return box;\r\n    }\r\n\r\n    get center() {\r\n        let box = this.box;\r\n        return new Flatten.Point((box.xmin + box.xmax)/2, (box.ymin + box.ymax)/2);\r\n    }\r\n\r\n    toggleDisplayed(color) {\r\n        let displayed = !this.displayed;\r\n        return Object.assign(this.clone(),\r\n            {\r\n                displayed : displayed,\r\n                color: color\r\n            });\r\n    }\r\n\r\n    setAffected(affected) {\r\n        this.affected = affected;\r\n        return this;\r\n        // return Object.assign(this.clone(),\r\n        //     {\r\n        //         affected : affected\r\n        //     });\r\n    }\r\n\r\n    setEdited(edited) {\r\n        return Object.assign(this.clone(),\r\n            {\r\n                edited : edited\r\n            });\r\n    }\r\n\r\n    setNameAndTitle(name,title) {\r\n        return Object.assign(this.clone(),\r\n            {\r\n                name : name,\r\n                title: title,\r\n                edited: false\r\n            });\r\n    }\r\n\r\n    setAlpha() {\r\n        for(let shape of this.shapes) {\r\n            shape.alpha = this.displayed ? 1 : 0;\r\n        }\r\n        return this.shapes;\r\n    }\r\n\r\n    // toggleExpanded(shapeToggle) {\r\n    //     for(let shape of this.shapes) {\r\n    //         if (shape === shapeToggle) {\r\n    //             shape.expanded = !shape.expanded;\r\n    //         }\r\n    //     }\r\n    //     return this;\r\n    // }\r\n}","/**\r\n * Created by alexanderbol on 20/04/2017.\r\n */\r\n\r\nimport { Layer } from '../models/layer';\r\n\r\nconst colors = [\r\n    \"#FF0303\",\r\n    \"#4AA403\",\r\n    \"#540080\",\r\n    \"#FFFF40\",\r\n    \"#FF0080\",\r\n    \"#AED424\",\r\n    \"#545400\",\r\n    \"#FFA980\",\r\n    \"#A95480\",\r\n    \"#A9A9FF\",\r\n    \"#00FF00\",\r\n    \"#FFEE76\",\r\n    \"#A40576\",\r\n    \"#4385C8\",\r\n    \"#1CC826\",\r\n    \"#BDBD00\",\r\n    \"#48316E\",\r\n    \"#14616E\",\r\n    \"#8040BD\",\r\n    \"#DC7676\",\r\n    \"#924845\",\r\n    \"#A90000\",\r\n    \"#FFA900\"\r\n];\r\n\r\nexport class Layers {\r\n\r\n    static newLayer(stage, layers) {\r\n        let layer = new Layer(stage);\r\n        layer.name = Layers.getNewName(layers);\r\n        if (layers.length === 0) { // first layer\r\n            // layer.color = Layers.getNextColor(layers);\r\n            layer.displayed = false;\r\n            layer.affected = false;\r\n        }\r\n        return layer;\r\n    }\r\n\r\n    static get defaultName() {\r\n        return \"layer\";\r\n    }\r\n\r\n    static getNewName(layers) {\r\n        let name = Layers.defaultName;\r\n        let inc = 1;\r\n        let comparator = (layer) => layer.name === name;\r\n        while (layers.find(comparator) ) {\r\n            name = Layers.defaultName + inc;\r\n            inc++;\r\n        }\r\n        return name;\r\n    }\r\n\r\n    static getAffected(layers) {\r\n        return layers.find((lay) => lay.affected);\r\n    }\r\n\r\n    static setAffected(layers, layer) {\r\n        let currentAffectedLayer = Layers.getAffected(layers);\r\n        if (currentAffectedLayer) {\r\n            currentAffectedLayer.affected = false;\r\n        }\r\n        layer.affected = true;\r\n    }\r\n\r\n    static getNextColor(layers) {\r\n        let color = \"\";\r\n        for (let col of colors) {\r\n            if (!layers.find((layer) =>\r\n                layer.displayed && layer.color === col)) {\r\n                color = col;\r\n                break;\r\n            }\r\n        }\r\n        return color;\r\n    }\r\n\r\n    static delete(layers, layer) {\r\n        let index = layers.findIndex((l) => l === layer);\r\n        let newLayers = layers.filter(l => l !== layer);\r\n        if (index > 0) {\r\n            newLayers[index-1].affected = true;\r\n            if (newLayers[index-1].color === \"\") {\r\n                newLayers[index - 1].color = Layers.getNextColor(newLayers);\r\n            }\r\n            newLayers[index-1].displayed = true;\r\n        }\r\n        return newLayers;\r\n        // another option to delete from array:\r\n        // const newLayers = [...layers]\r\n        // return newLayers.splice( index, 1);\r\n    }\r\n\r\n    static sort(layers) {\r\n        let newLayers = layers.slice();\r\n        newLayers.sort( function(l1, l2) {\r\n            let name1 = l1.name.toUpperCase();\r\n            let name2 = l2.name.toUpperCase();\r\n            if (name1 < name2) {\r\n                return -1;\r\n            }\r\n            if (name1 > name2) {\r\n                return 1;\r\n            }\r\n            return 0;\r\n        });\r\n        return newLayers;\r\n    }\r\n}","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\n\r\nexport class MeasurePointsTool extends Component {\r\n    startX = undefined;\r\n    startY = undefined;\r\n    endX = undefined;\r\n    endY = undefined;\r\n    measureStarted = false;\r\n\r\n    handleMouseDown = (event) => {\r\n        event.preventDefault();\r\n\r\n        let canvas = this.refs.measureCanvas;\r\n        let stage = this.props.stage;\r\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        let coordX = event.offsetX || event.originalEvent.layerX;    // layerX for Firefox\r\n        let coordY = event.offsetY || event.originalEvent.layerY;    // layery for Firefox\r\n\r\n        if (this.measureStarted) {   // second click - clear measurement\r\n            this.startX = undefined;\r\n            this.startY = undefined;\r\n            this.endX = undefined;\r\n            this.endY = undefined;\r\n            this.measureStarted = false;\r\n            canvas.style.cursor = \"auto\";\r\n        }\r\n        else {                       // first click - start measurment\r\n            this.startX = stage.C2W_X(coordX);\r\n            this.startY = stage.C2W_Y(coordY);\r\n            this.measureStarted = true;\r\n            canvas.style.cursor = \"crosshair\";\r\n        }\r\n    };\r\n\r\n\r\n    handleMouseMove = (event) => {\r\n        let stage = this.props.stage;\r\n\r\n        let coordX = event.offsetX /*|| event.originalEvent ? event.originalEvent.layerX : undefined*/;    // layerX for Firefox\r\n        let coordY = event.offsetY /*|| event.originalEvent ? event.originalEvent.layerY : undefined*/;    // layerY for Firefox\r\n\r\n        if (this.measureStarted) {\r\n            this.endX = stage.C2W_X(coordX);\r\n            this.endY = stage.C2W_Y(coordY);\r\n\r\n            this.draw();\r\n        }\r\n    };\r\n\r\n    handleMouseUp = (event) => {}\r\n\r\n    handleMouseWheel = (event) => {\r\n        event.preventDefault();\r\n\r\n        let delta = event.detail || event.wheelDelta;\r\n        if (delta !== 0) {\r\n            this.props.onMouseWheelMove(event.offsetX, event.offsetY, delta);\r\n        }\r\n    };\r\n\r\n    handleMouseWheelFox = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (event.detail !== 0) {\r\n            this.props.onMousewheelMove(event.layerX, event.layerY, -event.detail);\r\n        }\r\n    };\r\n\r\n    draw() {\r\n        let canvas = this.refs.measureCanvas;\r\n        let context = canvas.getContext('2d');\r\n        let stage = this.props.stage;\r\n\r\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        // Draw rectangle\r\n        let pllX = Math.min(stage.W2C_X(this.startX), stage.W2C_X(this.endX));\r\n        let pllY = Math.min(stage.W2C_Y(this.startY), stage.W2C_Y(this.endY));\r\n        let width = Math.abs(stage.W2C_Scalar(this.startX - this.endX));\r\n        let height = Math.abs(stage.W2C_Scalar(this.startY - this.endY));\r\n\r\n        context.beginPath();\r\n        context.rect(pllX, pllY, width, height);\r\n\r\n        // Draw segment\r\n        context.moveTo(stage.W2C_X(this.startX), stage.W2C_Y(this.startY));\r\n        context.lineTo(stage.W2C_X(this.endX), stage.W2C_Y(this.endY));\r\n\r\n        context.lineWidth = 1;\r\n        context.strokeStyle = 'black';\r\n        context.stroke();\r\n\r\n        // Draw text\r\n        let textX, textY, textHeight, textWidth;\r\n        let backX, backY;                      // background rectangle\r\n        let text = this.measurement();\r\n\r\n        context.font = \"12pt Arial\";\r\n\r\n        textHeight = 12;         /* font size*/\r\n        textWidth = context.measureText(text).width;\r\n\r\n        // Rectangle to the right of current point, text aligned left\r\n        if (Math.abs(stage.W2C_X(this.endX) - pllX) <= 2) {\r\n            context.textAlign = \"left\";\r\n            textX = pllX + 3;\r\n            backX = pllX;\r\n        }\r\n        // Rectangle to the left of current point, text aligned right\r\n        else {\r\n            context.textAlign = \"right\";\r\n            textX = pllX + width - 3;\r\n            backX = textX - textWidth - 3;\r\n        }\r\n\r\n        if (Math.abs(stage.W2C_Y(this.endY) - pllY) <= 2) {\r\n            textY = pllY - 3;\r\n        }\r\n        else {\r\n            textY = pllY + height + textHeight + 3;\r\n        }\r\n        backY = textY - textHeight - 3;\r\n\r\n        context.fillStyle = 'white';\r\n        context.globalAlpha = 0.4;\r\n        context.fillRect(backX, backY, textWidth + 6, textHeight + 6);\r\n\r\n        context.fillStyle = \"black\";\r\n        context.globalAlpha = 1;\r\n        context.fillText(this.measurement(), textX, textY);\r\n    }\r\n\r\n    measurement() {\r\n        let dx = this.endX - this.startX;\r\n        let dy = this.endY - this.startY;\r\n        let dist = Math.sqrt(dx * dx + dy * dy);\r\n        let message = \"DX=\" + this.format(dx) + \",DY=\" + this.format(dy) + \",D=\" + this.format(dist);\r\n        return message;\r\n    }\r\n\r\n    format(num) {\r\n        return (num/this.props.divisor).toFixed(this.props.decimals);\r\n    }\r\n\r\n    componentWillMount() {\r\n        // this.dispatch = this.props.store.dispatch;\r\n        // this.setState(this.props.store.getState());\r\n    }\r\n\r\n    componentDidMount() {\r\n        let canvas = this.refs.measureCanvas;\r\n        canvas.addEventListener(\"mousedown\", this.handleMouseDown);\r\n        canvas.addEventListener(\"mousemove\", this.handleMouseMove);\r\n        canvas.addEventListener(\"mouseup\", this.handleMouseUp);\r\n\r\n        canvas.addEventListener(\"mousewheel\", this.handleMouseWheel);\r\n        canvas.addEventListener(\"DOMMouseScroll\", this.handleMouseWheelFox);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.measureStarted) {\r\n            this.draw();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        let canvas = this.refs.measureCanvas;\r\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n\r\n    render() {\r\n        let mainCanvas = this.props.stage.canvas;\r\n        let width = mainCanvas.width;\r\n        let height = mainCanvas.height;\r\n        let top = mainCanvas.offsetTop;\r\n        let left = mainCanvas.offsetLeft;\r\n        return (\r\n            <canvas tabIndex=\"1\" ref=\"measureCanvas\" id=\"measurePoints\"\r\n                    width={width}\r\n                    height={height}\r\n                    style={{position:'absolute',top:top,left:left}}\r\n            >\r\n            </canvas>\r\n        )\r\n    }\r\n}\r\n","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\n\r\nimport {Component} from 'react';\r\n// import createjs from 'easel-js';\r\n// import * as createjs from '@createjs/easeljs';\r\nimport {graphics} from '../models/graphics';\r\n// import '../../public/styles/App.css';\r\nlet createjs = window.createjs;\r\nexport class MeasureShapesTool extends Component {\r\n    constructor(params) {\r\n        super();\r\n        this.segment = new createjs.Shape();\r\n        params.stage.addChild(this.segment);\r\n\r\n        this.labelShape = new createjs.Text();\r\n        this.labelShape.x = 0;\r\n        this.labelShape.y = 0;\r\n        params.stage.addChild(this.labelShape);\r\n\r\n        // var html = document.createElement('div');\r\n        // html.innerText = \"\"; // params.model.label;\r\n        // html.style.position = \"absolute\";\r\n        // html.style.top = 0;\r\n        // html.style.left = 0;\r\n        //\r\n        // document.body.appendChild(html);\r\n        // this.labelShape = new createjs.DOMElement(html);\r\n        // params.stage.addChild(this.labelShape);\r\n    }\r\n\r\n    // redrawLabel() {\r\n    //     if (!this.labelShape) return;\r\n    //\r\n    //     let stage = this.props.stage;\r\n    //\r\n    //     this.labelShape.htmlElement.style.display = \"block\";\r\n    //\r\n    //     let box = this.props.shortestSegment.box;\r\n    //     let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\r\n    //     let dx = 6. / (stage.zoomFactor * stage.resolution);\r\n    //     let dy = 4. / (stage.zoomFactor * stage.resolution);\r\n    //\r\n    //     this.labelShape.htmlElement.style.font = \"16px Arial\";\r\n    //     this.labelShape.htmlElement.innerText = this.props.shortestSegment.length;\r\n    //\r\n    //     let unscale = 1. / (stage.zoomFactor * stage.resolution);\r\n    //     let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n    //     let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n    //     this.labelShape.setTransform(tx, ty, unscale, -unscale);\r\n    // }\r\n\r\n    format(num) {\r\n        return (num/this.props.divisor).toFixed(this.props.decimals);\r\n    }\r\n\r\n    redrawLabel() {\r\n        if (!this.labelShape) return;\r\n\r\n        let stage = this.props.stage;\r\n\r\n        let box = this.props.shortestSegment.box;\r\n        let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\r\n        let dx = 6. / (stage.zoomFactor * stage.resolution);\r\n        let dy = 4. / (stage.zoomFactor * stage.resolution);\r\n\r\n        if (box.ymin === box.ymax) {\r\n            dx = 0;\r\n            dy = -dy;\r\n        }\r\n\r\n        // this.labelShape.htmlElement.style.display = \"block\";\r\n        // this.labelShape.htmlElement.style.font = \"16px Arial\";\r\n        // this.labelShape.htmlElement.innerText = this.props.shortestSegment.length;\r\n\r\n        this.labelShape.text = this.format(this.props.shortestSegment.length);\r\n\r\n        let fontSize = 14.; // / (stage.zoomFactor * stage.resolution);\r\n        this.labelShape.font = `${fontSize}px Arial`;\r\n\r\n        let unscale = 1. / (stage.zoomFactor * stage.resolution);\r\n        // let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n        // let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n        let tx = point.x + dx;\r\n        let ty = point.y + dy;\r\n        this.labelShape.setTransform(tx, ty, unscale, -unscale);\r\n    }\r\n\r\n    draw() {\r\n        if (this.props.shortestSegment) {\r\n            this.segment.graphics = graphics(this.props.shortestSegment);\r\n            this.redrawLabel();\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.draw();\r\n    }\r\n    componentDidUpdate() {\r\n        this.segment.graphics.clear();\r\n        if (this.props.firstMeasuredShape && this.props.secondMeasuredShape &&\r\n            this.props.firstMeasuredLayer.displayed &&\r\n            this.props.secondMeasuredLayer.displayed) {\r\n\r\n            this.draw();\r\n            this.redrawLabel();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.stage.removeChild(this.segment);\r\n        this.segment.graphics.clear();\r\n        this.props.stage.removeChild(this.labelShape);\r\n        this.labelShape.text = \"\";\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\nimport React from 'react';\r\nexport const DisplayCoordsTool = ({stage, coordX, coordY, divisor, decimals}) => {\r\n    const format = (num) => {\r\n        return (num/divisor).toFixed(decimals);\r\n    };\r\n\r\n    let mainCanvas = stage.canvas;\r\n    let top = mainCanvas.offsetTop + 10;\r\n    let left = mainCanvas.offsetLeft + 10;\r\n    let x = stage.C2W_X(coordX);\r\n    let y = stage.C2W_Y(coordY);\r\n    return (\r\n        <div style={{position: 'absolute', top: top, left: left}}>\r\n            <h5 style={{margin: 0, padding: 3}}>\r\n                X: {format(x)} Y: {format(y)}\r\n            </h5>\r\n        </div>\r\n    )\r\n}\r\n","import {Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst modalRoot = document.getElementById('modal-root');\r\n\r\n// A Modal component that is an abstraction around the portal API.\r\nclass Modal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // Create a div that we'll render the modal into. Because each\r\n        // Modal component has its own element, we can render multiple\r\n        // modal components into the modal container.\r\n        this.el = document.createElement('div');\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Append the element into the DOM on mount. We'll render\r\n        // into the modal container element (see the HTML tab).\r\n        modalRoot.appendChild(this.el);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // Remove the element from the DOM when we unmount\r\n        modalRoot.removeChild(this.el);\r\n    }\r\n\r\n    render() {\r\n        // Use a portal to render the children into the element\r\n        return ReactDOM.createPortal(\r\n            // Any valid React child: JSX, strings, arrays, etc.\r\n            this.props.children,\r\n            // A DOM element\r\n            this.el,\r\n        );\r\n    }\r\n}\r\n\r\nexport default Modal;","import React, {Component} from 'react';\r\nimport Modal from '../Modal';\r\nimport classes from './ModalPopup.module.css';\r\n\r\nclass ModalPopup extends Component {\r\n    offsetX;\r\n    offsetY;\r\n    dragX;\r\n    dragY;\r\n\r\n    onBackDropClicked = (ev) => {\r\n        if (ev.target.id === \"backDrop\") {\r\n            this.props.closePopup();\r\n        }\r\n    };\r\n\r\n    handleKeyDown = (ev) => {\r\n        if (ev.code === \"Escape\") {\r\n            this.props.closePopup();\r\n        }\r\n    };\r\n\r\n    elementDrag = (ev) => {\r\n        ev = ev || window.event;\r\n        // calculate the new cursor position:\r\n        this.offsetX = this.dragX - ev.clientX;\r\n        this.offsetY = this.dragY - ev.clientY;\r\n        this.dragX = ev.clientX;\r\n        this.dragY = ev.clientY;\r\n        // set the element's new position:\r\n        let element = ev.target;\r\n        element.style.top = (element.offsetTop - this.offsetY) + \"px\";\r\n        element.style.left = (element.offsetLeft - this.offsetX) + \"px\";\r\n    };\r\n\r\n    closeDragElement = (ev) => {\r\n        /* stop moving when mouse button is released:*/\r\n        ev.target.onmouseup = null;\r\n        ev.target.onmousemove = null;\r\n    };\r\n\r\n    dragMouseDown = (ev) => {\r\n        ev = ev || window.event;\r\n        // get the mouse cursor position at startup:\r\n        this.dragX = ev.clientX;\r\n        this.dragY = ev.clientY;\r\n        ev.target.onmouseup = this.closeDragElement;\r\n        // call a function whenever the cursor moves:\r\n        ev.target.onmousemove = this.elementDrag;\r\n    };\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    render() {\r\n        return this.props.showPopup ? (\r\n            <Modal>\r\n                <div\r\n                    id=\"backDrop\"\r\n                    className={classes.BackDrop}\r\n                    onClick={this.onBackDropClicked}\r\n                >\r\n                    <div className={classes.ModalPopup}\r\n                         onMouseDown={this.dragMouseDown}\r\n                    >\r\n                        {this.props.children}\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        ) : null;\r\n    }\r\n}\r\n\r\nexport default ModalPopup;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport classes from './AboutPopup.module.css';\r\n\r\nconst AboutPopup = (props) => {\r\n    return (\r\n        <div className={classes.AboutPopup}>\r\n            <h2>{props.title} v{props.version}</h2>\r\n            <h4>Build October 2018</h4>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default AboutPopup;","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport ToolbarComponent from '../../components/MainComponent/ToolbarComponent/ToolbarComponent';\r\nimport CanvasComponent from '../../components/MainComponent/CanvasComponent/CanvasComponent';\r\nimport StatusComponent from '../../components/Layout/StatusComponent/StatusComponent';\r\n\r\nimport {StageComponent} from \"../../components/MainComponent/GraphicsEditor/stageComponent\";\r\nimport LayersComponent from '../../components/MainComponent/GraphicsEditor/layersComponent';\r\n\r\nimport * as actions from '../../store/actions/appActions';\r\n\r\nimport {Layers} from '../../models/layers';\r\nimport {MeasurePointsTool} from '../../tools/measurePointsTool';\r\nimport {MeasureShapesTool} from \"../../tools/measureShapesTool\";\r\nimport {DisplayCoordsTool} from \"../../tools/displayCoordsTool\";\r\n\r\nimport ModalPopup from \"../../components/UI/ModalPopup/ModalPopup\";\r\nimport AboutPopup from \"../../components/AboutPopup/AboutPopup\";\r\n\r\nimport styles from './MainComponent.module.css';\r\nimport { connect } from \"react-redux\";\r\n\r\nclass MainComponent extends Component {\r\n    handleFileSelect = (event) => {\r\n        if (!(File && FileReader && FileList)) return;\r\n        let files = event.target.files; // FileList object\r\n        this.props.handleFileSelect(files, this.props.stage, this.props.layers);\r\n    };\r\n\r\n    setHomeView = () => {\r\n        let layer = Layers.getAffected(this.props.layers);\r\n        if (!layer) return;\r\n        this.props.setHomeView(this.props.stage, layer);\r\n    };\r\n\r\n    handleKeyDown = (e) => {\r\n        // let ctrl = e.ctrlKey;\r\n        if (e.target.id !== \"mainCanvas\")\r\n            return;\r\n        switch (e.code) {\r\n            case \"KeyH\":\r\n                this.setHomeView();\r\n                break;\r\n\r\n            case \"KeyW\":\r\n                this.props.toggleWidthMode();     // toggle width On/Off in graphics model\r\n                break;\r\n\r\n            case \"KeyE\":\r\n                this.props.toggleDisplayVertices();  // toggle vertices On/Off\r\n                break;\r\n\r\n            case \"ArrowRight\":\r\n                break;\r\n\r\n            case \"ArrowLeft\":\r\n                break;\r\n            case \"ArrowUp\":\r\n                break;\r\n            case \"ArrowDown\":\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        window.onresize = this.props.resizeStage;\r\n        // Keyboard event\r\n        // var _keydown = _.throttle(this.keydown, 100);\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n        // var _keyup = _.throttle(this.keyup, 500);\r\n        document.addEventListener('keyup', this.handleKeyUp);\r\n    }\r\n\r\n    render() {\r\n        let displayCoordsTool = this.props.stage ? (\r\n            <DisplayCoordsTool\r\n                key=\"displayCoordinatedTool\"\r\n                stage={this.props.stage}\r\n                units={this.props.units}\r\n                divisor={this.props.divisor}\r\n                decimals={this.props.decimals}\r\n                coordX={this.props.mouse.x}\r\n                coordY={this.props.mouse.y}\r\n            />\r\n        ) : null;\r\n\r\n        let measurePointsTool =\r\n            this.props.measurePointsActive ? (\r\n                <MeasurePointsTool\r\n                    stage={this.props.stage}\r\n                    divisor={this.props.divisor}\r\n                    decimals={this.props.decimals}\r\n                    onMouseWheelMove={this.handleMouseWheelMove}\r\n                />\r\n            ) : null;\r\n\r\n        let measuredLayersDisplayed = this.props.measureShapesTool.firstMeasuredShape &&\r\n            this.props.measureShapesTool.secondMeasuredShape &&\r\n            this.props.measureShapesTool.firstMeasuredLayer.displayed &&\r\n            this.props.measureShapesTool.secondMeasuredLayer.displayed;\r\n\r\n        let measureShapesTool = this.props.measureShapesTool.distance &&\r\n        this.props.measureShapesTool.shortestSegment && measuredLayersDisplayed ? (\r\n            <MeasureShapesTool\r\n                key=\"MeasureShapesTool\"\r\n                stage={this.props.stage}\r\n                firstMeasuredShape={this.props.measureShapesTool.firstMeasuredShape}\r\n                secondMeasuredShape={this.props.measureShapesTool.secondMeasuredShape}\r\n                firstMeasuredLayer={this.props.measureShapesTool.firstMeasuredLayer}\r\n                secondMeasuredLayer={this.props.measureShapesTool.secondMeasuredLayer}\r\n                distance={this.props.measureShapesTool.distance}\r\n                shortestSegment={this.props.measureShapesTool.shortestSegment}\r\n                divisor={this.props.divisor}\r\n                decimals={this.props.decimals}\r\n            />\r\n        ) : null;\r\n\r\n        return (\r\n            <main className={styles[\"Main-content\"]}>\r\n                <ToolbarComponent\r\n                    units={this.props.units}\r\n                    showSkeletonRecognitionButton={this.props.showSkeletonRecognitionButton}\r\n                    onFileSelected={this.handleFileSelect}\r\n                    onHomeButtonPressed={this.setHomeView}\r\n                    onPanByDragPressed={this.props.togglePanByDrag}\r\n                    onMeasurePointsButtonPressed={this.props.toggleMeasureBetweenPoints}\r\n                    onMeasureBetweenShapesButtonPressed={this.props.toggleMeasureBetweenShapes}\r\n                    onToggleWidthModePressed={this.props.toggleWidthMode}\r\n                    onToggleVerticesPressed={this.props.toggleDisplayVertices}\r\n                    onToggleLabelsPressed={this.props.toggleDisplayLabels}\r\n                    onShowAboutPopupPressed={this.props.toggleAboutPopup}\r\n                    onSkeletonRecognitionButtonPressed={this.props.applySkeletonRecognition}\r\n                    onUnitClicked={this.props.toggleUnits}\r\n                />\r\n\r\n                <CanvasComponent />\r\n\r\n                <StageComponent\r\n                    stage={this.props.stage}\r\n                >\r\n                    <LayersComponent\r\n                        stage={this.props.stage}\r\n                        layers={this.props.layers}\r\n                        displayVertices={this.props.displayVertices}\r\n                        displayLabels={this.props.displayLabels}\r\n                        widthOn={this.props.widthOn}\r\n                        zoomFactor={this.props.zoomFactor}\r\n                        hoveredShape={this.props.measureShapesTool.hoveredShape}\r\n                        firstMeasuredShape={this.props.measureShapesTool.firstMeasuredShape}\r\n                        secondMeasuredShape={this.props.measureShapesTool.secondMeasuredShape}\r\n                        onMouseOver={this.props.handleMouseRollOverShape}\r\n                        onMouseOut={this.props.handleMouseRollOutShape}\r\n                        onClick={this.props.handleClickOnShape}\r\n                    />\r\n                    {displayCoordsTool}\r\n                    {measurePointsTool}\r\n                    {measureShapesTool}\r\n                </StageComponent>\r\n\r\n                <StatusComponent />\r\n\r\n                <ModalPopup\r\n                    showPopup={this.props.showAboutPopup}\r\n                    closePopup={this.props.toggleAboutPopup}\r\n                >\r\n                    <AboutPopup\r\n                        title={this.props.title}\r\n                        version={this.props.version}\r\n                        build={this.props.build}\r\n                        // onCloseAboutPopupPressed={this.closeAboutPopup}\r\n                    />\r\n                </ModalPopup>\r\n\r\n            </main>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        stage: state.app.stage,\r\n        title: state.app.title,\r\n        version: state.app.version,\r\n        build: state.app.build,\r\n        displayVertices: state.app.displayVertices,\r\n        displayLabels: state.app.displayLabels,\r\n        widthOn: state.app.widthOn,\r\n        zoomFactor: state.app.zoomFactor,\r\n        units: state.app.units,\r\n        showSkeletonRecognitionButton: state.app.showSkeletonRecognitionButton,\r\n        divisor: state.app.divisor,\r\n        decimals: state.app.decimals,\r\n        measurePointsActive: state.app.measurePointsActive,\r\n        showAboutPopup: state.app.showAboutPopup,\r\n        layers: state.layers,\r\n        mouse: state.mouse,\r\n        measureShapesTool: state.measureShapesTool,\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        resizeStage: () => dispatch(actions.resizeStage()),\r\n        handleFileSelect: (files, stage, layers) => dispatch(actions.handleFileSelect(files, stage, layers)),\r\n        setHomeView: (stage, shape) => dispatch(actions.setHomeView(stage, shape)),\r\n        toggleUnits: () => dispatch(actions.toggleUnits()),\r\n        toggleWidthMode: () => dispatch(actions.toggleWidthMode()),\r\n        toggleDisplayVertices: () => dispatch(actions.toggleDisplayVertices()),\r\n        toggleDisplayLabels: () => dispatch(actions.toggleDisplayLabels()),\r\n        toggleAboutPopup: () => dispatch(actions.toggleAboutPopup()),\r\n        toggleMeasureBetweenPoints: () => dispatch(actions.toggleMeasureBetweenPoints()),\r\n        toggleMeasureBetweenShapes: () => dispatch(actions.toggleMeasureBetweenShapes()),\r\n        togglePanByDrag: () => dispatch(actions.togglePanByDrag()),\r\n        applySkeletonRecognition: () => dispatch(actions.applySkeletonRecognition()),\r\n        handleMouseRollOverShape: (shape) => dispatch(actions.handleMouseRollOverShape(shape)),\r\n        handleMouseRollOutShape: () => dispatch(actions.handleMouseRollOutShape()),\r\n        handleClickOnShape: (shape, layer) => dispatch(actions.handleClickOnShape(shape, layer)),\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainComponent);\r\n","import * as ActionTypes from '../actionTypes';\r\n\r\n/* not in use ?*/\r\nexport const resizeStage = () => {\r\n    return {\r\n        type: ActionTypes.STAGE_RESIZED\r\n    }\r\n};\r\n\r\nexport const toggleUnits = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_UNITS_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleWidthMode = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_WIDTH_MODE_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleDisplayVertices = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_DISPLAY_VERTICES_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleDisplayLabels = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_DISPLAY_LABELS_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleAboutPopup = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_ABOUT_POPUP_CLICKED\r\n    }\r\n};\r\n\r\n// export const closeAboutPopup = () => {\r\n//     return {\r\n//         type: ActionTypes.CLOSE_ABOUT_POPUP_BUTTON_PRESSED\r\n//     }\r\n// };\r\n\r\nexport const toggleMeasureBetweenPoints = () => {\r\n    return {\r\n        type: ActionTypes.MEASURE_POINTS_BUTTON_PRESSED\r\n    }\r\n};\r\n\r\nexport const toggleMeasureBetweenShapes = () => {\r\n    return {\r\n        type: ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED\r\n    }\r\n};\r\n\r\nexport const applySkeletonRecognition = () => {\r\n    return {\r\n        type: ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED\r\n    }\r\n};\r\n\r\nexport const handleFileSelect = (files, stage, layers) => {\r\n    return {\r\n        type: ActionTypes.FILENAME_LIST_SELECTED,\r\n        files: files,\r\n        stage: stage,\r\n        layers: layers\r\n    }\r\n};\r\n\r\nexport const setHomeView = (stage, shape) => {\r\n    return {\r\n        type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n        stage: stage,\r\n        shape: shape\r\n    }\r\n};\r\n\r\nexport const togglePanByDrag = () => {\r\n    return {\r\n        type: ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED\r\n    }\r\n};\r\n\r\nexport const handleMouseRollOverShape = (shape) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_ROLL_OVER_SHAPE,\r\n        shape: shape\r\n    }\r\n};\r\n\r\nexport const handleMouseRollOutShape = () => {\r\n    return {\r\n        type: ActionTypes.MOUSE_ROLL_OUT_SHAPE\r\n    }\r\n};\r\n\r\nexport const handleClickOnShape = (shape, layer) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_CLICKED_ON_SHAPE,\r\n        shape: shape,\r\n        layer: layer\r\n    }\r\n};\r\n","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\nimport React from 'react';\r\nimport FontAwesome from 'react-fontawesome';\r\n\r\nimport styles from './LayerListToolbar.module.css';\r\nimport '@fortawesome/fontawesome-free/css/all.css';\r\n\r\nconst LayerListToolbar = (props) => {\r\n    return (\r\n        <div className={styles[\"Layer-list-toolbar\"]}>\r\n            <button title=\"Add layer\" onClick={props.onAddLayerButtonClicked}>\r\n                <FontAwesome\r\n                    name='plus'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n            <button title=\"Edit selected layer's name and info\" onClick={props.onEditLayerButtonClicked}>\r\n                <FontAwesome\r\n                    name='pencil-alt'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n            <button title=\"Delete selected layer\" onClick={props.onDeleteLayerButtonClicked}>\r\n                <FontAwesome\r\n                    name='times'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n            <button title=\"Sort layer list\" onClick={props.onSortLayersButtonClicked}>\r\n                <FontAwesome\r\n                    name='sort-alpha-down'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default LayerListToolbar;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport styles from './LayerEditForm.module.css';\r\n\r\nconst LayerEditForm = (props) => {\r\n    let onSubmitLayerEditForm = (ev) => {\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n        let form = ev.target.parentElement;\r\n        let newLayer = Object.assign({}, props.layer, {\r\n            name: form.layerName.value,\r\n            title: form.layerTitle.value\r\n        });\r\n        props.onSubmitLayerEditForm(newLayer);\r\n        return false;\r\n    };\r\n\r\n    let setFocus = (ev) => {\r\n        ev.stopPropagation();\r\n        ev.target.focus();\r\n    };\r\n\r\n    let onCancelLayerEditForm = () => {\r\n        props.onEscapeLayerEditForm();\r\n    };\r\n\r\n    return (\r\n        <form className={styles[\"Layer-edit-form\"]}\r\n              id=\"layerEditForm\"\r\n              onSubmit={onSubmitLayerEditForm}\r\n        >\r\n            <label>Layer name:</label><br/>\r\n            <input type=\"text\" id=\"layer-name\" name=\"layerName\" size=\"80\" defaultValue={props.layer.name}\r\n                   onClick={setFocus}/><br/>\r\n            <label>Layer info:</label><br/>\r\n            <textarea id=\"layer-title\" name=\"layerTitle\" cols=\"78\" rows=\"3\" defaultValue={props.layer.title}\r\n                      onClick={setFocus}></textarea><br/>\r\n            <button onClick={onCancelLayerEditForm}>Cancel</button>\r\n            <button onClick={onSubmitLayerEditForm}>OK</button>\r\n        </form>\r\n    )\r\n};\r\n\r\nexport default LayerEditForm;","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport ModalPopup from \"../../UI/ModalPopup/ModalPopup\";\r\nimport LayerEditForm from \"../LayerEditForm/LayerEditForm\";\r\nimport styles from './LayerListElement.module.css';\r\n\r\nclass LayerListElement extends Component {\r\n    componentDidUpdate() {\r\n        if (document.activeElement.nodeName === \"CANVAS\")\r\n            return;\r\n        let elem = this.refs.layerName;\r\n        if (this.props.layer.affected) {\r\n            elem.focus();\r\n        }\r\n    }\r\n\r\n    rgba(hex, opacity) {\r\n        let r, g, b, percent;\r\n        if (hex) {\r\n            hex = hex.replace('#', '');\r\n            r = parseInt(hex.substring(0, 2), 16);\r\n            g = parseInt(hex.substring(2, 4), 16);\r\n            b = parseInt(hex.substring(4, 6), 16);\r\n            percent = opacity;\r\n        }\r\n        else {\r\n            r = 147;\r\n            g = 128;\r\n            b = 108;\r\n            percent = 0;\r\n        }\r\n        let result = `rgba(${r},${g},${b},${percent / 100})`;\r\n\r\n        return result;\r\n    }\r\n\r\n    render() {\r\n        // let style = this.props.layer.displayed ?\r\n        //     styleSheet.displayed : styleSheet.undisplayed;\r\n\r\n        let displayed = this.props.layer.displayed ? \"Layer-displayed\" : \"Layer-undisplayed\";\r\n        let color = displayed ? this.rgba(this.props.layer.color, 100) : this.rgba();\r\n        let bgcolor = displayed ? this.rgba(this.props.layer.color, 30) : this.rgba();\r\n        let alpha = this.props.layer.affected ? 1 : 0;\r\n        let layerNameOpacity = this.props.layer.shapes.length === 0 ? 0.6 : 1.0;\r\n        return [\r\n            <li key={1}\r\n                className={styles.Layer}\r\n                onClick={this.props.onLayerClicked}\r\n                onDoubleClick={this.props.onLayerDoubleClicked}>\r\n\r\n                <div className={styles.LayerSelectionBox}\r\n                     onClick={this.props.onAffectedBoxClicked}\r\n                >\r\n                    <h4 className={styles.LayerSelectionMark}\r\n                        style={{opacity: alpha, color: color}}>\r\n                        ✓\r\n                    </h4>\r\n                </div>\r\n\r\n                <div className={styles.LayerNameBox}\r\n                     style={{backgroundColor: bgcolor, opacity: layerNameOpacity}}>\r\n                    <h4 ref=\"layerName\"\r\n                        title={this.props.layer.name}\r\n                        tabIndex='1'\r\n                    >\r\n                        {this.props.layer.name}\r\n                    </h4>\r\n                </div>\r\n\r\n            </li>,\r\n\r\n            <ModalPopup\r\n                key={2}\r\n                showPopup={this.props.layer.edited}\r\n                closePopup={this.props.onEscapeLayerEditForm}\r\n            >\r\n                <LayerEditForm\r\n                    layer={this.props.layer}\r\n                    onSubmitLayerEditForm={this.props.onSubmitLayerEditForm}\r\n                    onEscapeLayerEditForm={this.props.onEscapeLayerEditForm}\r\n                />\r\n            </ModalPopup>\r\n        ]\r\n    }\r\n}\r\n\r\nexport default LayerListElement;\r\n","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport LayerListToolbar from \"../../components/LayersList/LayerListToolbar/LayerListToolbar\";\r\nimport LayerListElement from '../../components/LayersList/LayerListElement/LayerListElement';\r\nimport * as actions from '../../store/actions/layersActions';\r\nimport { connect } from 'react-redux';\r\nimport styles from './LayersList.module.css';\r\n\r\nclass LayersList extends Component {\r\n    height = 0;\r\n\r\n    handleKeyDown = (e) => {\r\n        // e.stopPropagation();\r\n        // e.preventDefault();\r\n\r\n        if (e.target.parentElement.parentElement &&\r\n            e.target.parentElement.parentElement.parentElement &&\r\n            e.target.parentElement.parentElement.parentElement.id &&\r\n            e.target.parentElement.parentElement.parentElement.id === \"layersList\") {\r\n\r\n\r\n            switch (e.code) {\r\n                case \"ArrowRight\":\r\n                case \"ArrowDown\":\r\n                    this.props.setAffectedNextLayer();\r\n                    // this.dispatch({\r\n                    //     type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\r\n                    // });\r\n                    break;\r\n                case \"ArrowLeft\":\r\n                case \"ArrowUp\":\r\n                    this.props.setAffectedPrevLayer();\r\n                    // this.dispatch({\r\n                    //     type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\r\n                    // });\r\n                    break;\r\n                /* tab does not work properly\r\n            case \"Tab\":\r\n                if (e.shiftKey) {\r\n                    this.dispatch({\r\n                        type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\r\n                    });\r\n                }\r\n                else {\r\n                    this.dispatch({\r\n                        type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\r\n                    });\r\n                }\r\n                break;\r\n                */\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    componentDidMount() {\r\n        // Keyboard event\r\n        // var _keydown = _.throttle(this.keydown, 100);\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n        // var _keyup = _.throttle(this.keyup, 500);\r\n        // document.addEventListener('keyup', this.handleKeyUp);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.height = this.refs.layersComponent.clientHeight;\r\n        // let container = this.refs.watchContainer;\r\n        // let parentHeight = container.parentElement.clientHeight;\r\n        // container.style.maxHeight = 0.7*parentHeight;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={styles[\"App-layers\"]}\r\n                 ref=\"layersComponent\"\r\n                 onClick={this.props.onLayerListClicked}\r\n            >\r\n                {/*<h5>Layers</h5>*/}\r\n                <LayerListToolbar\r\n                    onAddLayerButtonClicked={() => this.props.onAddLayerButtonClicked(this.props.stage)}\r\n                    onEditLayerButtonClicked={this.props.onEditLayerButtonClicked}\r\n                    onDeleteLayerButtonClicked={this.props.onDeleteLayerButtonClicked}\r\n                    onSortLayersButtonClicked={this.props.onSortLayersButtonClicked}\r\n                />\r\n                <ul style={{maxHeight:0.82*(this.height-40)}}>\r\n                { this.props.layers.map((layer) =>\r\n                    <LayerListElement\r\n                        key={layer.name}\r\n                        layer={layer}\r\n                        onLayerClicked={() => this.props.onLayerClicked(layer)}\r\n                        onAffectedBoxClicked={(event) => this.props.onAffectedBoxClicked(event, layer)}\r\n                        onSubmitLayerEditForm={this.props.onSubmitLayerEditForm}\r\n                        onEscapeLayerEditForm={this.props.onEscapeLayerEditForm}\r\n                    />)\r\n                }\r\n                </ul>\r\n                {/*{addLayer}*/}\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onAddLayerButtonClicked: (stage) => dispatch(actions.addEmptyLayer(stage)),\r\n        onEditLayerButtonClicked: () => dispatch(actions.openAffectedLayerEditForm()),\r\n        onDeleteLayerButtonClicked: () => dispatch(actions.deleteAffectedLayer()),\r\n        onSortLayersButtonClicked: () => dispatch(actions.sortLayers()),\r\n        onLayerClicked: (layer) => dispatch(actions.toggleDisplayLayer(layer)),\r\n        onAffectedBoxClicked: (event, layer) => dispatch(actions.toggleAffectedLayer(event, layer)),\r\n        onSubmitLayerEditForm: (newLayer) => dispatch(actions.updateLayer(newLayer)),\r\n        onEscapeLayerEditForm: () => dispatch(actions.closeEditLayerForm()),\r\n        onLayerListClicked: () => dispatch(actions.refreshLayerList()),\r\n        setAffectedNextLayer: () => dispatch(actions.setAffectedNextLayer()),\r\n        setAffectedPrevLayer: () => dispatch(actions.setAffectedPrevLayer())\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LayersList);\r\n\r\n// export default LayersList;","import * as ActionTypes from '../actionTypes';\r\n\r\nexport const addEmptyLayer = (stage) => {\r\n    return {\r\n        type: ActionTypes.ADD_LAYER_BUTTON_PRESSED,\r\n        stage: stage\r\n    }\r\n};\r\n\r\nexport const addNewLayer = (layer) => {\r\n    return {\r\n        type: ActionTypes.ADD_NEW_LAYER,\r\n        stage: layer\r\n    }\r\n};\r\n\r\nexport const deleteAffectedLayer = () => {\r\n    return {\r\n        type: ActionTypes.DELETE_LAYER_BUTTON_PRESSED\r\n    };\r\n};\r\n\r\nexport const sortLayers = () => {\r\n    return {\r\n        type: ActionTypes.SORT_LAYERS_BUTTON_PRESSED\r\n    };\r\n};\r\n\r\nexport const toggleDisplayLayer = (layer) => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED,\r\n        layer: layer\r\n    }\r\n};\r\n\r\nexport const toggleAffectedLayer = (event, layer) => {\r\n    event.stopPropagation();\r\n    return {\r\n        type: ActionTypes.TOGGLE_AFFECTED_LAYER_PRESSED,\r\n        layer: layer\r\n    };\r\n};\r\n\r\nexport const updateLayer = (newLayer) => {\r\n    return {\r\n        type: ActionTypes.SUBMIT_LAYER_EDIT_FORM_PRESSED,\r\n        newLayer: newLayer\r\n    };\r\n};\r\n\r\nexport const closeEditLayerForm = () => {\r\n    return {\r\n        type: ActionTypes.ESCAPE_LAYER_EDIT_FORM_PRESSED\r\n    };\r\n};\r\n\r\nexport const openAffectedLayerEditForm = () => {\r\n    return {\r\n        type: ActionTypes.OPEN_LAYER_EDIT_FORM_PRESSED,\r\n    }\r\n};\r\n\r\nexport const refreshLayerList = () => {\r\n    return {\r\n        type: ActionTypes.LAYER_LIST_PANEL_PRESSED\r\n    }\r\n};\r\n\r\nexport const setAffectedNextLayer = () => {\r\n    return {\r\n        type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\r\n    }\r\n};\r\n\r\nexport const setAffectedPrevLayer = () => {\r\n    return {\r\n        type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\r\n    }\r\n};\r\n\r\n\r\n","/**\r\n * Created by alexanderbol on 06/05/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport styles from './AsideComponent.module.css';\r\n\r\nconst AsideComponent = () => {\r\n    return (\r\n        <aside className={styles[\"App-aside\"]}>\r\n            <h5>&nbsp;</h5>\r\n        </aside>\r\n    )\r\n};\r\n\r\nexport default AsideComponent;\r\n","import React from 'react';\r\nimport MainComponent from \"./containers/MainComponent/MainComponent\";\r\nimport LayersList from \"./containers/LayerList/LayersList\";\r\nimport AsideComponent from \"./components/Layout/AsideComponent/AsideComponent\";\r\nimport * as ActionTypes from \"./store/actionTypes\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst appBody = (props) => {\r\n    return (\r\n        <div className=\"App-body\" onPaste={props.pasteDataFromBuffer}>\r\n            <MainComponent />\r\n            <LayersList />\r\n            <AsideComponent />\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        pasteDataFromBuffer: (event) => dispatch({\r\n            type: ActionTypes.DATA_FROM_BUFFER_PASTED,\r\n            data: event.clipboardData\r\n        })\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(appBody);\r\n","import React from 'react';\r\nimport logoImg from \"../../../assets/images/debug-viewer-logo3-notext.png\";\r\nimport classes from \"./Logo.module.css\";\r\n\r\nconst logo = () => {\r\n    return (\r\n        <div className={classes.Logo}>\r\n            <img src={logoImg} alt=\"Debug Viewer Logo\" height=\"70px\" />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default logo;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport classes from './HeaderComponent.module.css';\r\nimport Logo from '../Logo/Logo';\r\n\r\nconst HeaderComponent = (props) => {\r\n    return (\r\n        <header className={classes[\"App-header\"]}>\r\n            <Logo />\r\n            <h2>{props.title} v{props.version}</h2>\r\n        </header>\r\n    )\r\n};\r\n\r\nexport default HeaderComponent;","import Flatten from 'flatten-js';\r\n\r\nlet {Box} = Flatten;\r\n\r\nexport class Job {\r\n    constructor() {\r\n        this.filename = \"\";\r\n        this.title = \"\";\r\n        this.profiles = [];   // array of FlattenJS Polygons\r\n        this.materials = [];  // array of FlattenJS Polygons\r\n        this.shapes = [];     // array of other FlattenJS shapes\r\n    }\r\n\r\n    get box() {\r\n        let b = new Box();\r\n        for (let shape of this.profiles) {\r\n            b.merge(shape.box);\r\n        }\r\n        for (let shape of this.materials) {\r\n            b.merge(shape.box);\r\n        }\r\n        for (let shape of this.shapes) {\r\n            b.merge(shape.box);\r\n        }\r\n        return b;\r\n    }\r\n}","import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nlet {Point, Segment, Arc, Polygon} = Flatten;\r\nlet { vector } = Flatten;\r\n\r\nconst inch2pixels = 10160000;\r\nconst mils2pixels = 10160;\r\nfunction InchToPixels(str) {\r\n    return Math.round(Number(str)*inch2pixels,0);\r\n}\r\nfunction MilsToPixels(str) {\r\n    return Math.round(Number(str)*mils2pixels,0);\r\n}\r\n\r\nfunction parsePolygon(lines, start) {\r\n    let shapes = [];\r\n    let i = start;\r\n    let line = lines[i];\r\n    let terms = line.split(' ');\r\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n    let pe;\r\n    let pc;\r\n    let end_of_face = false;\r\n    while(true) {\r\n        line = lines[i];\r\n        terms = line.split(' ');\r\n        switch (terms[0]) {\r\n            case 'OS':\r\n                pe = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n                shapes.push( new Segment(ps, pe));\r\n\r\n                ps = pe.clone();\r\n                break;\r\n            case 'OC':\r\n                pe = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n                pc = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\r\n\r\n                let cwStr = terms[5];\r\n                let counterClockwise = cwStr === 'Y' ? Flatten.CW : Flatten.CCW; /* sic ! */\r\n\r\n                let startAngle = vector(pc,ps).slope;\r\n                let endAngle = vector(pc, pe).slope;\r\n                if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n                    endAngle += 2*Math.PI;\r\n                    counterClockwise = true;\r\n                }\r\n                let r = vector(pc, ps).length;\r\n\r\n                shapes.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\r\n\r\n                ps = pe.clone();\r\n                break;\r\n            case 'OE':\r\n                end_of_face = true;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (end_of_face) {\r\n            break;\r\n        }\r\n\r\n        i++;\r\n    }\r\n    return shapes;\r\n}\r\n\r\nfunction parseLine(str, apertures) {\r\n    let terms = str.split(' ');\r\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n    let pe = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\r\n    let segment = new Segment(ps, pe);\r\n    let ap_key = Number(terms[5]);\r\n    let ap_value = apertures[ap_key];\r\n    segment.aperture = ap_value;     // augmentation\r\n    return segment;\r\n}\r\n\r\nfunction parseArc(str, apertures) {\r\n    let terms = str.split(' ');\r\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n    let pe = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\r\n    let pc = new Point( InchToPixels(terms[5]), InchToPixels(terms[6]) );\r\n\r\n    let cwStr = terms[10];\r\n    let counterClockwise = cwStr === 'Y' ? Flatten.CW : Flatten.CCW; /* sic ! */\r\n\r\n    let startAngle = vector(pc,ps).slope;\r\n    let endAngle = vector(pc, pe).slope;\r\n    if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n        endAngle += 2*Math.PI;\r\n        counterClockwise = true;\r\n    }\r\n    let r = vector(pc, ps).length;\r\n\r\n    let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\r\n\r\n    let ap_key = Number(terms[7]);\r\n    let ap_value = apertures[ap_key];\r\n    arc.aperture = ap_value;     // augmentation\r\n\r\n    return arc;\r\n}\r\n\r\nexport function parseODB(filename, str) {\r\n    let job = new Job();\r\n    job.filename = filename;\r\n\r\n    let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n    let polygon;\r\n\r\n    let apertures = [];\r\n\r\n    for (let i=0; i < arrayOfLines.length; i++) {\r\n        let line = arrayOfLines[i];\r\n        let terms = line.split(' ');\r\n\r\n        if (terms[0].substr(0,1) === '$') {\r\n            let ap_key = Number(terms[0].substr(1));\r\n            let ap_value = MilsToPixels(terms[1].substr(1));\r\n            apertures[ap_key] = ap_value;\r\n            continue;\r\n        }\r\n\r\n        switch (terms[0]) {\r\n            case 'S':                  // surface started\r\n                polygon = new Polygon();\r\n                let termArr = line.split(' ');\r\n                let polarity = termArr[1];      // consider later\r\n                polygon.polarity = polarity;\r\n                break;\r\n            case 'OB':                  // polygon started\r\n                let start = i;\r\n                let shapes = parsePolygon(arrayOfLines, start);\r\n                polygon.addFace(shapes);\r\n                i = start + shapes.length + 1;\r\n                break;\r\n            case 'SE':     // surface ended\r\n                job.shapes.push(polygon);\r\n                break;\r\n            case 'L':                  // line\r\n                let odbLine = parseLine(line, apertures);\r\n                job.shapes.push(odbLine);\r\n                break;\r\n            case 'A':                  // Arc\r\n                let odbArc = parseArc(line, apertures);\r\n                job.shapes.push(odbArc);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    return job;\r\n}","import /*React,*/ {Component} from 'react';\r\nimport axios from \"axios\";\r\n\r\nimport {Layers} from \"../../models/layers\";\r\nimport {parseODB} from \"../../models/parserODB\";\r\nimport {Model} from \"../../models/model\";\r\nimport * as ActionTypes from \"../../store/actionTypes\";\r\nimport { connect } from 'react-redux';\r\n\r\nclass Demo extends Component {\r\n    state={\r\n        done:false\r\n    };\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n            let layers = this.props.layers;\r\n\r\n            let layer = Layers.newLayer(stage, layers);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.name = \"features\";\r\n            layer.title = \"features\";\r\n            layer.affected = true;\r\n            layer.displayed = true;\r\n\r\n            axios(\"https://gist.githubusercontent.com/alexbol99/825fdf2dd508467cc852eb22aa36183d/raw/d10e853338afd8294eeb3ffdebe3bc380477a978/features\")\r\n                .then( (resp) => {\r\n                    let job = parseODB(\"features\", resp.data);\r\n\r\n                    for (let shape of job.shapes) {\r\n                        let model = new Model(shape, undefined, shape.label);\r\n                        layer.add(model);\r\n                    }\r\n\r\n                    this.props.panAndZoomToShape(stage, layer);\r\n                    this.props.addNewLayer(layer);\r\n                });\r\n            this.setState({done:true})\r\n        }\r\n    }\r\n    componentDidMount() {\r\n\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch({\r\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n            stage: stage,\r\n            shape: layer\r\n        }),\r\n        addNewLayer: (layer) => dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        })\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Demo);\r\n","import /*React,*/ {Component} from 'react';\r\nimport Flatten from 'flatten-js';\r\nimport BooleanOp from 'flatten-boolean-op';\r\nimport {Layers} from \"../../models/layers\";\r\nimport * as ActionTypes from '../../store/actionTypes';\r\nimport { connect } from 'react-redux';\r\n\r\nlet {point, arc, Polygon} = Flatten;\r\nlet {subtract, intersect} = BooleanOp;\r\n\r\nclass BooleanTest extends Component {\r\n    state={\r\n        done:false\r\n    };\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n            let layers = this.props.layers;\r\n\r\n            let layer = Layers.newLayer(stage, layers);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.name = \"features\";\r\n            layer.title = \"features\";\r\n            layer.affected = true;\r\n            layer.displayed = true;\r\n\r\n            let myPoly = new Polygon();\r\n            myPoly.addFace([point(6, 6), point(6,114), point(114, 114), point(114, 6)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);  // 0\r\n\r\n            let myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,0),84.5779281026111, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 1\r\n\r\n            myPoly = intersect(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 2\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,0),84.49938828627135, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 3\r\n\r\n            myPoly = subtract(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 4\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,120),84.8710637077582, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 5\r\n\r\n            myPoly = intersect(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 6\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,120),84.79252389141845, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 7\r\n\r\n            myPoly = subtract(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 8\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(120,120),85.20624291591454, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 9\r\n\r\n            myPoly = intersect(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 10\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(120,120), 85.1277030995748, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 11\r\n\r\n            layers[0].color = Layers.getNextColor(layers);\r\n            layers[0].affected = true;\r\n            layers[0].displayed = true;\r\n\r\n            this.props.panAndZoomToShape(stage, layers[0]);\r\n\r\n            this.setState({done:true});\r\n        }\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch({\r\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n            stage: stage,\r\n            shape: layer\r\n        }),\r\n        addNewLayer: (layer) => dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        })\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BooleanTest);\r\n","import /*React,*/ {Component} from 'react';\r\nimport * as ActionTypes from \"../../store/actionTypes\";\r\nimport { connect } from 'react-redux';\r\n\r\nclass SkeletonRecognition extends Component {\r\n    componentDidMount() {\r\n        this.props.applySkeletonRecognition();\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        applySkeletonRecognition: () => dispatch({type: ActionTypes.SKELETON_RECOGNITION_URI})\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SkeletonRecognition);\r\n","import Flatten from \"flatten-js\";\r\n// let Flatten = require('flatten-js');\r\n\r\nlet {Vector, Segment, Arc, Line, Box, Polygon} = Flatten;\r\n\r\nclass CollisionDistance {\r\n    static apply(polygon1, polygon2) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        for (let edge of [...polygon2.edges]) {\r\n            let distance = CollisionDistance.edge2polygon(edge, polygon1);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static edge2polygon(edge2, polygon1) {\r\n        let shapeBox = edge2.shape.box;\r\n        let box = new Box(\r\n            Number.NEGATIVE_INFINITY,\r\n            shapeBox.ymin,\r\n            Number.POSITIVE_INFINITY,\r\n            shapeBox.ymax\r\n        );\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        let resp_edges =  polygon1.edges.search(box);\r\n        for (let edge1 of resp_edges) {\r\n            let distance;\r\n            if (edge1.shape instanceof Segment && edge2.shape instanceof Segment) {\r\n                distance = CollisionDistance.segment2segment(edge1.shape, edge2.shape);\r\n            }\r\n            else if (edge1.shape instanceof Arc && edge2.shape instanceof Segment) {\r\n                distance = CollisionDistance.segment2arc(edge2.shape, edge1.shape);\r\n            }\r\n            else if (edge1.shape instanceof Segment && edge2.shape instanceof Arc) {\r\n                distance = CollisionDistance.segment2arc(edge1.shape, edge2.shape);\r\n            }\r\n            else if (edge1.shape instanceof Arc && edge2.shape instanceof Arc) {\r\n                distance = CollisionDistance.arc2arc(edge1.shape, edge2.shape);\r\n            }\r\n\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static point2shape(point, shape) {\r\n        let line = new Line(point, new Vector(0,1));\r\n        let intersections = line.intersect(shape);          // segment or arc\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        for (let ip of intersections) {\r\n            // eslint-disable-next-line\r\n            let [distance, shortest_segment] = point.distanceTo(ip);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static segment2segment(segment1, segment2) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        for (let point of segment1.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, segment2);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        for (let point of segment2.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, segment1);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static segment2arc(segment, arc) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        let v_s = new Vector(segment.start, segment.end);\r\n        v_s = v_s.normalize();\r\n\r\n        let v_n = [v_s.rotate90CCW().multiply(arc.r), v_s.rotate90CW().multiply(arc.r)];\r\n        let distance;\r\n\r\n        // Distance between tangent point and segment\r\n        for (let v of v_n) {\r\n            let tangent_point = arc.center.translate(v);  // tangent point in direction of the normal vector\r\n            if (tangent_point.on(arc)) {\r\n                distance = CollisionDistance.point2shape(tangent_point, segment);\r\n                if (distance < collision_distance) {\r\n                    collision_distance = distance;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let point of arc.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, segment);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        for (let point of segment.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, arc);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static arc2arc(arc1, arc2) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        let distance;\r\n\r\n        // test translation of arc2.center to arc1 enlarged by r2\r\n        let arc_enlarged = arc1.clone();\r\n        arc_enlarged.r += arc2.r;\r\n        distance = CollisionDistance.point2shape(arc2.center, arc_enlarged);\r\n        if (distance < collision_distance) {\r\n            // additional check that transformed arc actually touching\r\n            // eslint-disable-next-line\r\n            let [dist_tmp, shortest_segment_tmp] =\r\n                arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\r\n            if (Flatten.Utils.EQ_0(dist_tmp)) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n\r\n        // test translation of arc2.center to arc1 reduced by r2\r\n        if (Flatten.Utils.GE(arc1.r, arc2.r)) {\r\n            let arc_reduced = arc1.clone();\r\n            arc_reduced.r -= arc2.r;\r\n            distance = CollisionDistance.point2shape(arc2.center, arc_reduced);\r\n            if (distance < collision_distance) {\r\n                // additional check that transformed arc actually touching\r\n                // eslint-disable-next-line\r\n                let [dist_tmp, shortest_segment_tmp] =\r\n                    arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\r\n                if (Flatten.Utils.EQ_0(dist_tmp)) {\r\n                    collision_distance = distance;\r\n                }\r\n            }\r\n        }\r\n\r\n        // test translation of arc1.center to arc2 reduced by r1\r\n        if (Flatten.Utils.LT(arc1.r, arc2.r)) {\r\n            let arc_reduced = arc2.clone();\r\n            arc_reduced.r -= arc1.r;\r\n            distance = CollisionDistance.point2shape(arc1.center, arc_reduced);\r\n            if (distance < collision_distance) {\r\n                // additional check that transformed arc actually touching\r\n                // eslint-disable-next-line\r\n                let [dist_tmp, shortest_segment_tmp] =\r\n                    arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\r\n                if (Flatten.Utils.EQ_0(dist_tmp)) {\r\n                    collision_distance = distance;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let point of arc1.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, arc2);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        for (let point of arc2.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, arc1);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static translateArc(arc, vec) {\r\n        let arc_tmp = arc.clone();\r\n        arc_tmp.pc = arc_tmp.pc.translate(vec);\r\n        return arc_tmp;\r\n    }\r\n\r\n    static translate(polygon, vec) {\r\n        let newPolygon = new Polygon();\r\n        for (let face of polygon.faces) {\r\n            let shapes = [];\r\n            for (let edge of face) {\r\n                if (edge.shape instanceof Segment) {\r\n                    shapes.push(\r\n                        new Segment(edge.shape.ps.translate(vec), edge.shape.pe.translate(vec))\r\n                    )\r\n                }\r\n                else if (edge.shape instanceof  Arc) {\r\n                    let arc_trans = edge.shape.clone();\r\n                    arc_trans.pc = edge.shape.pc.translate(vec);\r\n                    shapes.push(arc_trans);\r\n                }\r\n            }\r\n            newPolygon.addFace(shapes);\r\n        }\r\n        return newPolygon;\r\n    }\r\n\r\n};\r\n\r\nCollisionDistance.Flatten = Flatten;\r\n\r\nexport default CollisionDistance;\r\n","import /*React,*/ {Component} from 'react';\r\nimport Flatten from 'flatten-js';\r\nimport CollisionDistance from \"../../models/collisionDistance\";\r\nimport axios from \"axios\";\r\nimport {Layers} from \"../../models/layers\";\r\n// import {Model} from \"../../models/model\";\r\nimport * as ActionTypes from \"../../store/actionTypes\";\r\nimport { connect } from \"react-redux\";\r\n\r\nlet {vector} = Flatten;\r\n\r\nclass CollisionDemo extends Component {\r\n    state={\r\n        done:false,\r\n        data:[]\r\n    };\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n            let layers = this.props.layers;\r\n\r\n            let layer = Layers.newLayer(stage, layers);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.name = \"collision_demo\";\r\n            layer.title = \"collision_demo\";\r\n            layer.affected = true;\r\n            layer.displayed = true;\r\n\r\n            axios(\"https://gist.githubusercontent.com/alexbol99/81893d40ec5eaa00d0336c35e069dd73/raw/b9328a4c6d7d6a44f375c68b4ec207690f40fd19/Block_53388_2parts_Cont.txt\")\r\n                .then( (resp) => {\r\n                    let parser = this.props.parser;\r\n                    let polygon1 = parser.parseToPolygon(resp.data);\r\n                    layer.add(polygon1);\r\n\r\n                    let vec = vector( 2*(polygon1.box.xmax - polygon1.box.xmin), 0 );\r\n                    let polygon2 = polygon1.translate(vec);\r\n                    layer.add(polygon2);\r\n\r\n                    let collision = CollisionDistance.apply(polygon2, polygon1);\r\n                    let polygon3 = polygon2.translate(vector(-collision, 0));\r\n                    layer.add(polygon3);\r\n\r\n                    // layers.push(layer);\r\n\r\n                    this.props.panAndZoomToShape(stage, layer);\r\n                    this.props.addNewLayer(layer);\r\n                    this.props.applyCollisionDemo();\r\n                });\r\n            this.setState({done:true})\r\n        }\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage,\r\n        parser: state.app.parser\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch({\r\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n            stage: stage,\r\n            shape: layer\r\n        }),\r\n        addNewLayer: (layer) => dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        }),\r\n        applyCollisionDemo: () => dispatch({\r\n            type: ActionTypes.COLLISION_DEMO_URI\r\n        })\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CollisionDemo);\r\n","import React, {Component} from 'react';\r\nimport { Route } from 'react-router-dom';\r\n\r\nimport AppBody from './AppBody';\r\n\r\nimport HeaderComponent from './components/Layout/HeaderComponent/HeaderComponent';\r\nimport { connect } from 'react-redux';\r\n\r\nimport './App.css';\r\n\r\nimport Demo from './components/Constructions/Demo';\r\nimport BooleanTest from './components/Constructions/BooleanTest';\r\nimport SkeletonRecognition from './components/Constructions/SkeletonRecognition';\r\nimport CollisionDemo from \"./components/Constructions/CollisionDemo\";\r\n\r\nclass App extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"App\">\r\n                <HeaderComponent\r\n                    title={this.props.title}\r\n                    version={this.props.version}\r\n                />\r\n\r\n                <Route path=\"/\" component={AppBody}/>\r\n\r\n                <Route path=\"/demo\" component={Demo}/>\r\n                <Route path=\"/boolean-test\" component={BooleanTest}/>\r\n                <Route path=\"/skeleton\" component={SkeletonRecognition}/>\r\n                <Route path=\"/collision-distance\" component={CollisionDemo}/>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        title: state.app.title,\r\n        version: state.app.version\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","/**\r\n * Created by alexanderbol on 01/05/2017.\r\n */\r\n\r\nimport Flatten from 'flatten-js';\r\nlet {Point, Segment, Arc, Polygon} = Flatten;\r\nlet { vector } = Flatten;\r\n\r\n/*\r\nlet debug_str = `+\t\t[0]\t{nrec=27 nalloc=27 h_ind_id=-1 ...} mat_cont_hdr_struc\tmat_cont_struc\r\n    +\t\t[1]\t{pmin=59146400,5973200 pmax=59606001,6438000} mat_cont_lim_struc\tmat_cont_struc\r\n+\t\t[2]\t{nedge=23 nalloc=25 ntop=2 ...} mat_cont_poly_struc\tmat_cont_struc\r\n+\t\t[3]\t{pmin=59146400,5973200 pmax=59606001,6438000} mat_cont_lim_struc\tmat_cont_struc\r\n+\t\t[4]\t{ps=59192738,6363124 pe=59216000,6372800 pc=59216000,6340000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[5]\t{ps=59216000,6372800 pe=59267652,6372800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[6]\t{ps=59267652,6372800 pe=59267652,6307200 pc=59360000,6340000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[7]\t{ps=59267652,6307200 pe=59229586,6307200} mat_seg_struc\tmat_cont_struc\r\n+\t\t[8]\t{ps=59229586,6307200 pe=59212000,6289614} mat_seg_struc\tmat_cont_struc\r\n+\t\t[9]\t{ps=59212000,6289614 pe=59212000,6056386} mat_seg_struc\tmat_cont_struc\r\n+\t\t[10]\t{ps=59212000,6056386 pe=59229586,6038800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[11]\t{ps=59229586,6038800 pe=59469614,6038800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[12]\t{ps=59469614,6038800 pe=59487200,6056386} mat_seg_struc\tmat_cont_struc\r\n+\t\t[13]\t{ps=59487200,6056386 pe=59487200,6100500} mat_seg_struc\tmat_cont_struc\r\n+\t\t[14]\t{ps=59487200,6100500 pe=59434000,6180000 pc=59520000,6180000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[15]\t{ps=59434000,6180000 pe=59552800,6100500 pc=59520000,6180000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[16]\t{ps=59552800,6100500 pe=59552800,6042800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[17]\t{ps=59552800,6042800 pe=59543124,6019538 pc=59520000,6042800 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[18]\t{ps=59543124,6019538 pe=59506462,5982876} mat_seg_struc\tmat_cont_struc\r\n+\t\t[19]\t{ps=59506462,5982876 pe=59483200,5973200 pc=59483200,6006000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[20]\t{ps=59483200,5973200 pe=59216000,5973200} mat_seg_struc\tmat_cont_struc\r\n+\t\t[21]\t{ps=59216000,5973200 pe=59192738,5982876 pc=59216000,6006000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[22]\t{ps=59192738,5982876 pe=59156076,6019538} mat_seg_struc\tmat_cont_struc\r\n+\t\t[23]\t{ps=59156076,6019538 pe=59146400,6042800 pc=59179200,6042800 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[24]\t{ps=59146400,6042800 pe=59146400,6303200} mat_seg_struc\tmat_cont_struc\r\n+\t\t[25]\t{ps=59146400,6303200 pe=59156076,6326462 pc=59179200,6303200 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[26]\t{ps=59156076,6326462 pe=59192738,6363124} mat_seg_struc\tmat_cont_struc\r\n`;\r\n*/\r\n\r\nexport class Parser {\r\n    parseToWatchArray(str) {\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n        let watchArray = [];\r\n        for (let line of arrayOfLines) {\r\n            watchArray.push(line.substring(line.indexOf('{')));\r\n        }\r\n        return watchArray;\r\n    }\r\n\r\n    parseToSegment(line) {\r\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\r\n\r\n        let psArr = termArr[0].split('=')[1].split(',');\r\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n\r\n        let peArr = termArr[1].split('=')[1].split(',');\r\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n\r\n        return new Segment(ps, pe);\r\n    }\r\n\r\n    parseToArc(line) {\r\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\r\n\r\n        let psArr = termArr[0].split('=')[1].split(',');\r\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n\r\n        let peArr = termArr[1].split('=')[1].split(',');\r\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n\r\n        let pcArr = termArr[2].split('=')[1].split(',');\r\n        let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\r\n\r\n        let cwStr = termArr[3].split('=')[1];\r\n        let counterClockwise = cwStr === '0' ? true : false;\r\n\r\n        let startAngle = vector(pc,ps).slope;\r\n        let endAngle = vector(pc, pe).slope;\r\n\r\n        if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n            endAngle += 2*Math.PI;\r\n        }\r\n        let r = vector(pc, ps).length;\r\n\r\n        return new Arc(pc, r, startAngle, endAngle, counterClockwise);\r\n    }\r\n\r\n    parseToPolygon(str) {\r\n        let polygon = new Polygon();\r\n        // let mulitystr = debug_str;\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n\r\n        for (let i=0; i < arrayOfLines.length; i++) {\r\n            let line = arrayOfLines[i];\r\n            if (line.search('mat_cont_poly_struc') >= 0) {\r\n                let parenth = line.match(/\\{([^)]+)\\}/)[1];       // string inside {..}\r\n                let termArr = parenth.split(' ');                 // array of terms \"attr=value\"\r\n                let nedgesTerm = termArr[0];                      // \"nedge=nn\"\r\n                let nedgesStr = nedgesTerm.split('=')[1];\r\n                let nedges = parseInt(nedgesStr,10);\r\n\r\n                // Create new face from next #nedges of segments and arcs\r\n                let edges = [];\r\n                for (let j=i+2; j < i+2+nedges; j++) {\r\n                    line = arrayOfLines[j];\r\n                    // let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n                    // let termArr = parenth.split(' ');             // array of terms \"attr=value\"\r\n\r\n                    if (line.search('mat_seg_struc') >= 0) {\r\n                        let segment = this.parseToSegment(line);\r\n                        edges.push(segment);\r\n\r\n                        // let psArr = termArr[0].split('=')[1].split(',');\r\n                        // let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n                        //\r\n                        // let peArr = termArr[1].split('=')[1].split(',');\r\n                        // let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n                        //\r\n                        // edges.push(new Segment(ps, pe));\r\n                    }\r\n                    else if (line.search('mat_curve_struc') >= 0) {\r\n                        let arc = this.parseToArc(line);\r\n                        edges.push(arc);\r\n\r\n                        // let psArr = termArr[0].split('=')[1].split(',');\r\n                        // let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n                        //\r\n                        // let peArr = termArr[1].split('=')[1].split(',');\r\n                        // let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n                        //\r\n                        // let pcArr = termArr[2].split('=')[1].split(',');\r\n                        // let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\r\n                        //\r\n                        // let cwStr = termArr[3].split('=')[1];\r\n                        // let counterClockwise = cwStr === '0' ? true : false;\r\n                        //\r\n                        // let startAngle = vector(pc,ps).slope;\r\n                        // let endAngle = vector(pc, pe).slope;\r\n                        //\r\n                        // if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n                        //     endAngle += 2*Math.PI;\r\n                        // }\r\n                        // let r = vector(pc, ps).length;\r\n                        //\r\n                        // edges.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\r\n                    }\r\n                }\r\n                polygon.addFace(edges);\r\n            }\r\n        }\r\n        return polygon;\r\n    }\r\n\r\n    parseToPoints(str) {\r\n        let points = [];\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n        for (let line of arrayOfLines) {\r\n            if (line.search('point_struc') >= 0) {\r\n                let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n                let pointArr = parenth.split('=')[1].split(',');\r\n                let point = new Point(parseInt(pointArr[0],10), parseInt(pointArr[1],10));\r\n                point.label = line.split(/\\s+/)[1];\r\n                points.push(point);\r\n            }\r\n        }\r\n        return points;\r\n    }\r\n\r\n    parseToSegmentsArcs(str) {\r\n        let shapes = [];\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n        for (let line of arrayOfLines) {\r\n            if (line.search('mat_seg_struc') >= 0) {\r\n                let segment = this.parseToSegment(line);\r\n                shapes.push(segment);\r\n            }\r\n            else if (line.search('mat_curve_struc') >= 0) {\r\n                let arc = this.parseToArc(line);\r\n                shapes.push(arc);\r\n            }\r\n        }\r\n        return shapes;\r\n    }\r\n\r\n    parse(str) {\r\n        /* try polygon */\r\n        let polygon = this.parseToPolygon(str);\r\n        if (polygon.edges.size > 0 && polygon.faces.size > 0) {\r\n            return [polygon];\r\n        }\r\n\r\n        /* try array of points */\r\n        let points = this.parseToPoints(str);\r\n        if (points.length > 0) {\r\n            return points;\r\n        }\r\n\r\n        /* try array of segments and arcs */\r\n        let shapes = this.parseToSegmentsArcs(str);\r\n        if (shapes.length > 0) {\r\n            return shapes;\r\n        }\r\n    }\r\n}\r\n\r\n","import * as ActionTypes from \"../actionTypes\";\r\nimport {Parser} from \"../../models/parser\";\r\n\r\nconst unitsList = [\r\n    {\r\n        name: \"pixels\",\r\n        decimals: 0,\r\n        divisor: 1\r\n    },\r\n    {\r\n        name: \"inch\",\r\n        decimals: 7,\r\n        divisor: 10160000\r\n    },\r\n    {\r\n        name: \"mm\",\r\n        decimals: 6,\r\n        divisor: 400000\r\n    }];\r\n\r\nconst defaultAppState = {\r\n    title: \"Debug Viewer\",\r\n    version: process.env.REACT_APP_VERSION,\r\n    build: \"\",\r\n    units: \"pixels\",\r\n    decimals: 0,\r\n    divisor: 1,\r\n    // bg: \"#F1F1F1\",\r\n    parser: new Parser(),\r\n    widthOn: true,\r\n    displayVertices: false,\r\n    displayLabels: true,\r\n    measurePointsActive: false,\r\n    zoomFactor: undefined,\r\n    originX: undefined,\r\n    originY: undefined,\r\n    showAboutPopup: false,\r\n    importDataToNewLayer: true,       // if false, import data to affected layer\r\n    showSkeletonRecognitionButton: false,\r\n    applySkeletonRecognition: false,\r\n    stage: null\r\n};\r\n\r\nconst app = (state = defaultAppState, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.NEW_STAGE_CREATED:\r\n            return Object.assign({}, state, {\r\n                stage: action.stage,\r\n                zoomFactor: action.stage.zoomFactor * action.stage.resolution,\r\n                originX: action.stage.origin.x,\r\n                originY: action.stage.origin.y,\r\n            });\r\n\r\n        case ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE:\r\n        case ActionTypes.PAN_AND_ZOOM_TO_SHAPE:\r\n            return Object.assign({}, state, {\r\n                zoomFactor: action.stage.zoomFactor * action.stage.resolution,\r\n                originX: action.stage.origin.x,\r\n                originY: action.stage.origin.y,\r\n            });\r\n        case ActionTypes.MOUSE_MOVED_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                originX: action.stage.origin.x,\r\n                originY: action.stage.origin.y\r\n            });\r\n        case ActionTypes.TOGGLE_UNITS_CLICKED:\r\n            let curUnitsId = unitsList.findIndex(units => state.units === units.name);\r\n            let newUnits = unitsList[(curUnitsId + 1) % 3];\r\n            return Object.assign({}, state, {\r\n                units: newUnits.name,\r\n                decimals: newUnits.decimals,\r\n                divisor: newUnits.divisor\r\n            });\r\n        case ActionTypes.TOGGLE_WIDTH_MODE_CLICKED:\r\n            return Object.assign({}, state, {\r\n                widthOn: !state.widthOn,\r\n                displayVertices: state.widthOn ? state.displayVertices : false\r\n            });\r\n        case ActionTypes.TOGGLE_DISPLAY_VERTICES_CLICKED:\r\n            if (state.displayVertices) {\r\n                return Object.assign({}, state, {\r\n                    displayVertices: false\r\n                });\r\n            }\r\n            else {\r\n                return Object.assign({}, state, {\r\n                    widthOn: false,\r\n                    displayVertices: true\r\n                });\r\n            }\r\n\r\n        case ActionTypes.TOGGLE_DISPLAY_LABELS_CLICKED:\r\n            return Object.assign({}, state, {\r\n                displayLabels: !state.displayLabels\r\n            });\r\n\r\n        case ActionTypes.TOGGLE_ABOUT_POPUP_CLICKED:\r\n            return Object.assign({}, state, {\r\n                showAboutPopup: !state.showAboutPopup\r\n            });\r\n\r\n        // case ActionTypes.CLOSE_ABOUT_POPUP_BUTTON_PRESSED:\r\n        //     return Object.assign({}, state, {\r\n        //         showAboutPopup: false\r\n        //     });\r\n\r\n        case ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED:\r\n            return Object.assign({}, state, {\r\n                measurePointsActive: false\r\n            });\r\n\r\n        case ActionTypes.MEASURE_POINTS_BUTTON_PRESSED:\r\n            return Object.assign({}, state, {\r\n                measurePointsActive: true\r\n            });\r\n        case ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED:\r\n            return Object.assign({}, state, {\r\n                measurePointsActive: false\r\n            });\r\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n            if (state.hoveredShape) {\r\n                return state\r\n            }\r\n            else {\r\n                return Object.assign({}, state, {\r\n                    measureShapesFirstClick: true,\r\n                    firstMeasuredShape: null,\r\n                    firstMeasuredLayer: null,\r\n                    secondMeasuredShape: null,\r\n                    secondMeasuredLayer: null,\r\n                    distance: undefined,\r\n                    shortestSegment: null\r\n                });\r\n            }\r\n        case ActionTypes.SKELETON_RECOGNITION_URI:\r\n            return Object.assign({}, state, {\r\n                showSkeletonRecognitionButton: true\r\n            });\r\n        case ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED:\r\n            return Object.assign({}, state, {\r\n                applySkeletonRecognition: true\r\n            });\r\n        case ActionTypes.LAYER_LIST_PANEL_PRESSED:\r\n            return state;  // only to cause refresh of layers list component\r\n        case ActionTypes.AABB_TREE_NEXT_LEVEL:\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default app;","import * as ActionTypes from \"../actionTypes\";\r\nimport {Layers} from \"../../models/layers\";\r\n\r\nconst layers = (state = [], action) => {\r\n    let affectedLayer = state.find(layer => layer.affected);\r\n    let affectedLayerId = state.findIndex(layer => layer.affected);\r\n    let newLayer;\r\n\r\n    switch (action.type) {\r\n        case ActionTypes.ADD_LAYER_BUTTON_PRESSED:\r\n            newLayer = Layers.newLayer(action.stage, state);\r\n            return [...state, newLayer];\r\n\r\n        case ActionTypes.ADD_NEW_LAYER:\r\n            return [...state, action.layer];\r\n\r\n        case ActionTypes.DELETE_LAYER_BUTTON_PRESSED:\r\n            if (affectedLayer) {\r\n                return Layers.delete(state, affectedLayer);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n\r\n        case ActionTypes.SORT_LAYERS_BUTTON_PRESSED:\r\n            return Layers.sort(state);\r\n\r\n        case ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED:\r\n            let color = \"\";\r\n            if (!action.layer.displayed) {\r\n                color = Layers.getNextColor(state);\r\n                if (color === \"\") return;  // no free colors\r\n            }\r\n            return state.map((layer) => {\r\n                if (layer !== action.layer) {\r\n                    // if action.layer will be undisplayed,\r\n                    // it cannot become affected, then\r\n                    // keep affected on this layer\r\n                    if (action.layer.displayed) {\r\n                        return layer;\r\n                    }\r\n                    else {\r\n                        return layer.setAffected(false);\r\n                    }\r\n                }\r\n                else {\r\n                    let newLayer = layer.toggleDisplayed(color);\r\n                    newLayer.affected = newLayer.displayed;\r\n                    return newLayer;\r\n                }\r\n                // return layer.toggleDisplayed(color);\r\n            });\r\n\r\n        case ActionTypes.TOGGLE_AFFECTED_LAYER_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer !== action.layer) {\r\n                    return layer.setAffected(false);\r\n                }\r\n                else {\r\n                    return layer.setAffected(!layer.affected);\r\n                }\r\n            });\r\n\r\n        // case ActionTypes.NEW_SHAPE_PASTED:\r\n        //     return state.map((layer) => {\r\n        //         if (layer.affected) {\r\n        //             return layer.addShapesArray(action.shapesArray);\r\n        //         }\r\n        //         else {\r\n        //             return layer;\r\n        //         }\r\n        //     });\r\n\r\n        case ActionTypes.OPEN_LAYER_EDIT_FORM_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer !== affectedLayer) {\r\n                    return layer;\r\n                }\r\n                else {\r\n                    return layer.setEdited(true);\r\n                }\r\n            });\r\n\r\n        case ActionTypes.SUBMIT_LAYER_EDIT_FORM_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer.edited) {\r\n                    return layer.setNameAndTitle(action.newLayer.name, action.newLayer.title);\r\n                }\r\n                else {\r\n                    return layer;\r\n                }\r\n            });\r\n\r\n        case ActionTypes.ESCAPE_LAYER_EDIT_FORM_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer.edited) {             // !== action.layer) {\r\n                    return layer.setEdited(false);\r\n                }\r\n                else {\r\n                    return layer;\r\n                }\r\n            });\r\n\r\n        case ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED:\r\n            if (affectedLayerId === state.length - 1) {\r\n                return state;\r\n            }\r\n            else {\r\n\r\n                let nextLayer = state[affectedLayerId + 1];\r\n\r\n                return state.map(layer => {\r\n                    if (layer === affectedLayer) {\r\n                        let newCurLayer = layer.toggleDisplayed(\"\");\r\n                        newCurLayer.affected = false;\r\n                        return newCurLayer;\r\n                    }\r\n                    else if (layer === nextLayer) {\r\n                        let color = affectedLayer.color;\r\n                        let newNextLayer = layer.toggleDisplayed(color);\r\n                        newNextLayer.affected = true;\r\n                        return newNextLayer;\r\n                    }\r\n                    else {\r\n                        return layer;\r\n                    }\r\n                });\r\n            }\r\n\r\n        case ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED:\r\n            if (affectedLayerId === 0) {\r\n                return state;\r\n            }\r\n            else {\r\n                let nextLayer = state[affectedLayerId - 1];\r\n\r\n                return state.map(layer => {\r\n                    if (layer === affectedLayer) {\r\n                        let newCurLayer = layer.toggleDisplayed(\"\");\r\n                        newCurLayer.affected = false;\r\n                        return newCurLayer;\r\n                    }\r\n                    else if (layer === nextLayer) {\r\n                        let newNextLayer = layer.toggleDisplayed(affectedLayer.color);\r\n                        newNextLayer.displayed = true;\r\n                        newNextLayer.affected = true;\r\n                        return newNextLayer;\r\n                    }\r\n                    else {\r\n                        return layer;\r\n                    }\r\n                });\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default layers;","import * as ActionTypes from \"../actionTypes\";\r\n\r\nconst defaultMouseState = {\r\n    x: 0,\r\n    y: 0,\r\n    startX: undefined,\r\n    startY: undefined\r\n};\r\n\r\nconst mouse = (state = defaultMouseState, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.MOUSE_MOVED_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                x: action.x,\r\n                y: action.y\r\n            });\r\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                startX: action.x,\r\n                startY: action.y\r\n            });\r\n        case ActionTypes.MOUSE_UP_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                startX: undefined,\r\n                startY: undefined\r\n            });\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default mouse;","import * as ActionTypes from \"../actionTypes\";\r\nimport Flatten from \"flatten-js\";\r\n\r\nconst defaultMeasureShapesTool = {\r\n    measureShapesActive: false,\r\n    measureShapesFirstClick: true,\r\n    hoveredShape: null,\r\n    firstMeasuredShape: null,\r\n    secondMeasuredShape: null,\r\n    firstMeasuredLayer: null,\r\n    secondMeasuredLayer: null,\r\n    distance: undefined,\r\n    shortestSegment: null\r\n};\r\n\r\nconst measureShapesTool = (state = defaultMeasureShapesTool, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED:\r\n            return Object.assign({}, defaultMeasureShapesTool, {\r\n                measureShapesActive: true\r\n            });\r\n        case ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED:\r\n            return Object.assign({}, defaultMeasureShapesTool);\r\n\r\n        case ActionTypes.MEASURE_POINTS_BUTTON_PRESSED:\r\n            return Object.assign({}, defaultMeasureShapesTool);\r\n\r\n        case ActionTypes.MOUSE_ROLL_OVER_SHAPE:\r\n            return Object.assign({}, state, {\r\n                hoveredShape: state.measureShapesActive ? action.shape : null\r\n            });\r\n        case ActionTypes.MOUSE_ROLL_OUT_SHAPE:\r\n            return Object.assign({}, state, {\r\n                hoveredShape: null\r\n            });\r\n        case ActionTypes.MOUSE_CLICKED_ON_SHAPE:\r\n            if (!state.measureShapesActive) {\r\n                return state;\r\n            }\r\n            // measureShapesActive\r\n\r\n            if (state.measureShapesFirstClick) {\r\n                return Object.assign({}, state, {\r\n                    firstMeasuredShape: action.shape,\r\n                    firstMeasuredLayer: action.layer,\r\n                    secondMeasuredShape: null,\r\n                    secondMeasuredLayer: null,\r\n                    measureShapesFirstClick: false,\r\n                    distance: undefined,\r\n                    shortestSegment: null\r\n                })\r\n            }\r\n            else {    // second click\r\n                if (action.shape === state.firstMeasuredShape) {\r\n                    return state;  // second click on the same shape\r\n                }\r\n\r\n                let shape1 = state.firstMeasuredShape.geom;\r\n                let shape2 = action.shape.geom;\r\n                let distance, shortestSegment;\r\n                // if (shape1 instanceof Flatten.Polygon && shape2 instanceof Flatten.Polygon) {\r\n                //     [distance, shortestSegment] = Flatten.Distance.polygon2polygon(shape1, shape2);\r\n                // }\r\n                // else {\r\n                [distance, shortestSegment] = Flatten.Distance.distance(shape1, shape2);\r\n                // }\r\n\r\n\r\n                return Object.assign({}, state, {\r\n                    secondMeasuredShape: action.shape,\r\n                    secondMeasuredLayer: action.layer,\r\n                    measureShapesFirstClick: true,\r\n                    distance: distance,\r\n                    shortestSegment: shortestSegment\r\n                });\r\n            }\r\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n            if (state.hoveredShape) {\r\n                return state\r\n            }\r\n            else {\r\n                return Object.assign({}, state, {\r\n                    measureShapesFirstClick: true,\r\n                    firstMeasuredShape: null,\r\n                    firstMeasuredLayer: null,\r\n                    secondMeasuredShape: null,\r\n                    secondMeasuredLayer: null,\r\n                    distance: undefined,\r\n                    shortestSegment: null\r\n                });\r\n            }\r\n\r\n        case ActionTypes.DELETE_LAYER_BUTTON_PRESSED:\r\n            if (action.layer === state.firstMeasuredLayer ||\r\n                action.layer === state.secondMeasuredLayer) {\r\n                return Object.assign({}, defaultMeasureShapesTool);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n\r\n        case ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED:\r\n            if (action.layer.displayed &&\r\n                (action.layer === state.firstMeasuredLayer ||\r\n                    action.layer === state.secondMeasuredLayer)) {\r\n                return Object.assign({}, defaultMeasureShapesTool);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default measureShapesTool;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport app from \"./reducers/app\";\r\nimport layers from \"./reducers/layers\";\r\nimport mouse from \"./reducers/mouse\";\r\nimport measureShapesTool from \"./reducers/measureShapesTool\";\r\n\r\nconst reducer = combineReducers({\r\n    app,\r\n    layers,\r\n    measureShapesTool,\r\n    mouse\r\n});\r\n\r\nexport default reducer;\r\n","import * as ActionTypes from '../store/actionTypes';\r\n\r\nconst log = ({ getState, dispatch }) => next => action => {\r\n\r\n    if(action.type !== ActionTypes.MOUSE_MOVED_ON_STAGE) {\r\n        console.log('ACTION: ' + action.type, action);\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\nexport default log;","import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nlet {Point, Segment, Arc, Polygon} = Flatten;\r\nlet { vector } = Flatten;\r\n\r\nfunction parseEdges(edgesXML) {\r\n    let edges = [];\r\n\r\n    for (let edge of Array.from(edgesXML)) {\r\n        let type = edge.getAttribute('type');\r\n\r\n        if (type === \"segment\") {\r\n            let ps = new Point(parseInt(edge.getAttribute('xs'),10), parseInt(edge.getAttribute('ys'),10));\r\n            let pe = new Point(parseInt(edge.getAttribute('xe'),10), parseInt(edge.getAttribute('ye'),10));\r\n\r\n            edges.push(new Segment(ps, pe));\r\n        }\r\n\r\n        if (type === \"curve\") {\r\n            let ps = new Point(parseInt(edge.getAttribute('xs'),10), parseInt(edge.getAttribute('ys'),10));\r\n            let pe = new Point(parseInt(edge.getAttribute('xe'),10), parseInt(edge.getAttribute('ye'),10));\r\n            let pc = new Point(parseInt(edge.getAttribute('xc'),10), parseInt(edge.getAttribute('yc'),10));\r\n\r\n            let counterClockwise = edge.getAttribute('cw') === 'no' ? true : false;\r\n\r\n            let startAngle = vector(pc,ps).slope;\r\n            let endAngle = vector(pc, pe).slope;\r\n\r\n            if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n                endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\r\n            }\r\n\r\n            let r = vector(pc, ps).length;\r\n\r\n            edges.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\r\n        }\r\n    }\r\n\r\n    return edges;\r\n}\r\n\r\nfunction parsePolygon(polygonsXML) {\r\n    let polygon = new Polygon();\r\n\r\n    // let nedges = parseInt(profile.getAttribute(\"n_edges\"), 10);\r\n\r\n    // Augment Flatten object with style\r\n    let color = polygonsXML.getAttribute(\"color\");\r\n    polygon.style = {\r\n        stroke: color || undefined,\r\n        fill: color || undefined,\r\n        alpha: 1.0\r\n    };\r\n\r\n    // Augment Flatten object with label\r\n    let label = polygonsXML.getAttribute(\"label\");\r\n    polygon.label = label;\r\n\r\n    // Add islands\r\n    let islands = polygonsXML.getElementsByTagName('island');\r\n    for (let island of Array.from(islands)) {\r\n        let edgesXML = island.getElementsByTagName('edge');\r\n        polygon.addFace(parseEdges(edgesXML));\r\n    }\r\n\r\n    // Add holes\r\n    let holes = polygonsXML.getElementsByTagName('hole');\r\n    for (let hole of Array.from(holes)) {\r\n        let edgesXML = hole.getElementsByTagName('edge');\r\n        polygon.addFace(parseEdges(edgesXML));\r\n    }\r\n\r\n    return polygon;\r\n}\r\n\r\nfunction parseSegment(segmentXML) {\r\n    let ps = new Point(parseInt(segmentXML.getAttribute('xs'),10), parseInt(segmentXML.getAttribute('ys'),10));\r\n    let pe = new Point(parseInt(segmentXML.getAttribute('xe'),10), parseInt(segmentXML.getAttribute('ye'),10));\r\n\r\n    let segment = new Segment(ps, pe);\r\n\r\n    // Augment Flatten object with label property\r\n    let label = segmentXML.getAttribute(\"label\");\r\n    segment.label = label;\r\n\r\n    return segment;\r\n}\r\n\r\nfunction parseCurve(curveXML) {\r\n    let ps = new Point(parseInt(curveXML.getAttribute('xs'),10), parseInt(curveXML.getAttribute('ys'),10));\r\n    let pe = new Point(parseInt(curveXML.getAttribute('xe'),10), parseInt(curveXML.getAttribute('ye'),10));\r\n    let pc = new Point(parseInt(curveXML.getAttribute('xc'),10), parseInt(curveXML.getAttribute('yc'),10));\r\n\r\n    let counterClockwise = curveXML.getAttribute('cw') === 'yes' ? true : false;\r\n\r\n    let startAngle = vector(pc,ps).slope;\r\n    let endAngle = vector(pc, pe).slope;\r\n\r\n    if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n        endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\r\n    }\r\n\r\n    let r = vector(pc, ps).length;\r\n\r\n    let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\r\n\r\n    // Augment Flatten object with label property\r\n    let label = curveXML.getAttribute(\"label\");\r\n    arc.label = label;\r\n\r\n    return arc;\r\n}\r\n\r\nfunction parsePoint(pointXML) {\r\n    let point = new Point(parseInt(pointXML.getAttribute('x'),10), parseInt(pointXML.getAttribute('y'),10));\r\n\r\n    // Augment Flatten object with label property\r\n    let label = pointXML.getAttribute(\"label\");\r\n    point.label = label;\r\n\r\n    return point;\r\n}\r\nexport function parseXML(filename, str) {\r\n    let job = new Job();\r\n\r\n    job.filename = filename;\r\n\r\n    let parser = new DOMParser();\r\n    let xmlDoc = parser.parseFromString(str, \"text/xml\");\r\n\r\n    // Parse document title\r\n    let titles = xmlDoc.getElementsByTagName('title');\r\n    if (titles && titles.length > 0) {\r\n        job.title = titles[0].firstChild.nodeValue;          // take the first title if more than one\r\n    }\r\n\r\n    // Parse profiles and add polygons to the job\r\n    let profilesXML = xmlDoc.getElementsByTagName('profile');\r\n    for (let profileXML of Array.from(profilesXML)) {\r\n        let polygon = parsePolygon(profileXML);\r\n        job.profiles.push(polygon);\r\n    }\r\n\r\n    // Parse materials and add polygons to the job\r\n    let materialXML = xmlDoc.getElementsByTagName('material');\r\n    for (let shapeXML of Array.from(materialXML)) {\r\n        let polygon = parsePolygon(shapeXML);\r\n        job.materials.push(polygon);\r\n    }\r\n\r\n    // Parse segments\r\n    let segmentsXML = xmlDoc.getElementsByTagName('segment');\r\n    for (let segmentXML of Array.from(segmentsXML)) {\r\n        let segment = parseSegment(segmentXML);\r\n        job.shapes.push(segment);\r\n    }\r\n\r\n    // Parse segments\r\n    let curvesXML = xmlDoc.getElementsByTagName('curve');\r\n    for (let curveXML of Array.from(curvesXML)) {\r\n        let curve = parseCurve(curveXML);\r\n        job.shapes.push(curve);\r\n    }\r\n\r\n    // Parse points\r\n    let pointsXML = xmlDoc.getElementsByTagName('point');\r\n    for (let pointXML of Array.from(pointsXML)) {\r\n        let point = parsePoint(pointXML);\r\n        job.shapes.push(point);\r\n    }\r\n    return job;\r\n}\r\n","import Flatten from 'flatten-js';\r\n\r\nconst pgmResolution = 25.500025;\r\nconst microns2pixels = 400;\r\n// const inch2pixels = 10160;\r\n// const offsetX = 12.322830;\r\n// const offsetY = 8.326776;\r\nconst sizeX = 3.0303;\r\n\r\nfunction toPixels(str) {\r\n    let num = Number(str);\r\n    return Math.round(num*pgmResolution*microns2pixels,0);\r\n}\r\n\r\nexport function parseImage(file) {\r\n    let image = {};          // TODO: to be Flatten.Image\r\n\r\n    let terms = file.name.split('_');\r\n    let yStr = terms[0].substr(1);\r\n    let xStr = terms[1] ? terms[1].substr(1) : undefined;\r\n\r\n    let x = isNaN(xStr) ? 0 : toPixels(xStr) + 90000;\r\n    let y = isNaN(yStr) ? 0 : toPixels(yStr) - 40000;\r\n\r\n    image.center = new Flatten.Point(x,y);\r\n    image.width = sizeX*microns2pixels*1000;    // 2 mm\r\n    image.box = new Flatten.Box(\r\n        image.center.x - image.width/2,\r\n        image.center.y - image.width/2,\r\n        image.center.x + image.width/2,\r\n        image.center.y + image.width/2,\r\n    );\r\n\r\n    return image;\r\n}","import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nlet {point} = Flatten;\r\n\r\nconst micron2pixels = 400;\r\nfunction micronToPixels(str) {\r\n    return Math.round(Number(str)*micron2pixels,0);\r\n}\r\n\r\nexport function parseCSV(filename, str) {\r\n    let job = new Job();\r\n    job.filename = filename;\r\n\r\n    let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n\r\n    for (let i = 0; i < arrayOfLines.length; i++) {\r\n        let line = arrayOfLines[i];\r\n        let terms = line.split(',');\r\n\r\n        let px = micronToPixels(terms[0]);\r\n        let py = micronToPixels(terms[1]);\r\n        let nx = Number(terms[2]);\r\n        let ny = Number(terms[3]);\r\n        let shape = point(px,py);\r\n        shape.nx = nx\r\n        shape.ny = ny;\r\n        job.shapes.push(shape)\r\n    }\r\n\r\n    return job\r\n}","import * as ActionTypes from '../store/actionTypes';\r\nimport { Layers } from '../models/layers';\r\n// import { Shape } from '../models/shape';\r\nimport { Model } from \"../models/model\";\r\nimport { parseXML } from '../models/parserXML';\r\nimport { parseODB } from \"../models/parserODB\";\r\nimport { parseImage } from \"../models/parsePGM\";\r\nimport { parseCSV } from \"../models/parseCSV\";\r\nimport { parseTXT } from \"../models/parseTXT\";\r\n\r\nconst readAsText = (reader, file, stage, layers, dispatch, files) => {\r\n\r\n    // Closure to capture file information and parameters\r\n    reader.onload = (function(theFile, stage, layers, dispatch, files) {\r\n        return (event) => {\r\n            let string = event.target.result;\r\n\r\n            let namesplitted = theFile.name.split('.');\r\n            let extension = namesplitted[namesplitted.length-1];\r\n            let job;\r\n            if (extension === 'xml') {\r\n                job = parseXML(theFile.name, string);\r\n            }\r\n            else if (extension === 'csv') {\r\n                job = parseCSV(theFile.name, string);\r\n            }\r\n            else if (extension === 'txt') {\r\n                job = parseTXT(theFile.name, string);\r\n            }\r\n            else {\r\n                job = parseODB(theFile.name, string);\r\n            }\r\n            let layer = Layers.newLayer(stage, layers);\r\n            if (theFile.name !== \"\") {\r\n                layer.name = theFile.name;\r\n            }\r\n            layer.title = job.title;\r\n\r\n            for (let polygon of job.profiles) {\r\n                if (polygon.edges.size > 0 && polygon.faces.size > 0) {\r\n                    // let watch = undefined; //  parser.parseToWatchArray(string);\r\n                    // let shape = new Shape(polygon, stage, polygon.style, watch);\r\n                    let shape = new Model(polygon, undefined, polygon.label);\r\n\r\n                    layer.add(shape);\r\n                }\r\n            }\r\n\r\n            for (let polygon of job.materials) {\r\n                if (polygon.edges.size > 0 && polygon.faces.size > 0) {\r\n                    // let watch = undefined; //  parser.parseToWatchArray(string);\r\n                    // let shape = new Shape(polygon, stage, polygon.style, watch);\r\n                    let shape = new Model(polygon, undefined, polygon.label);\r\n\r\n                    layer.add(shape);\r\n                }\r\n            }\r\n\r\n            for (let shape of job.shapes) {\r\n                let model = new Model(shape, undefined, shape.label);\r\n                layer.add(model);\r\n            }\r\n\r\n            // layers.push(layer);\r\n\r\n            if (theFile === files[0]) {\r\n                Layers.setAffected(layers, layer);\r\n                layer.color = Layers.getNextColor(layers);\r\n                layer.displayed = true;\r\n                dispatch({\r\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                    stage: stage,\r\n                    shape: layer\r\n                });\r\n            }\r\n            dispatch({\r\n                type: ActionTypes.ADD_NEW_LAYER,\r\n                layer: layer\r\n            })\r\n\r\n        }\r\n    })(file, stage, layers, dispatch, files);\r\n\r\n    reader.readAsText(file);\r\n};\r\n\r\nconst readAsImage = (reader, file, stage, layers, dispatch, files) => {\r\n    reader.addEventListener(\"load\", function () {\r\n        // let image = {};          // TODO: to be Flatten.Image\r\n        // image.uri = this.result;\r\n        // image.center = new Flatten.Point(0,0);\r\n        // image.width = 2*400000;    // 2 micron\r\n        // image.box = new Flatten.Box(\r\n        //     image.center.x - image.width/2,\r\n        //     image.center.y - image.width/2,\r\n        //     image.center.x + image.width/2,\r\n        //     image.center.y + image.width/2,\r\n        // );\r\n\r\n        let image = parseImage(file);\r\n        image.uri = this.result;\r\n\r\n        let model = new Model(image);\r\n\r\n        let layer = Layers.newLayer(stage, layers);\r\n        if (file.name !== \"\") {\r\n            layer.name = file.name;\r\n        }\r\n\r\n        layer.add(model);\r\n\r\n        layers.push(layer);\r\n\r\n        if (file === files[0]) {\r\n            Layers.setAffected(layers, layer);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.displayed = true;\r\n            dispatch({\r\n                type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                stage: stage,\r\n                shape: layer\r\n            });\r\n        }\r\n\r\n        dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        })\r\n\r\n\r\n    }, false);\r\n\r\n    reader.readAsDataURL(file);\r\n};\r\n\r\nconst readFile = (file, stage, layers, dispatch, files) => {\r\n    if (file.type !== \"\" &&\r\n        !(file.type.match('text.*') || file.type.match('application.*') ||\r\n        file.type.match('image.*')) ) return;   // validate type is text\r\n\r\n    let reader = new FileReader();\r\n\r\n    if (file.type.match('text.*') || file.type.match('application.*') || file.name.match('features*')) {\r\n        readAsText(reader, file, stage, layers, dispatch, files);\r\n    }\r\n\r\n    else if (file.type.match('image.*')) {\r\n        readAsImage(reader, file, stage, layers, dispatch, files);\r\n    }\r\n\r\n};\r\n\r\nconst readFiles = ({ dispatch, getState }) => next => action => {\r\n\r\n    if (action.type !== ActionTypes.FILENAME_LIST_SELECTED) {\r\n        return next(action);\r\n    }\r\n\r\n    let stage = action.stage;\r\n    let layers = action.layers;\r\n\r\n    // Load and parse files\r\n    // in MS Edge FilesList is not array. It is indexable but not iterable\r\n    // for (let i=0; i < action.files.length; i++) {\r\n    //     readFile(action.files[i], stage, layers, dispatch, action.files);\r\n    // }\r\n    for (let file of Array.from(action.files)) {\r\n        readFile(file, stage, layers, dispatch, action.files);\r\n    }\r\n};\r\n\r\nexport default readFiles;\r\n\r\n","import { Job } from '../models/job';\r\nimport {Parser} from '../models/parser';\r\n\r\nexport function parseTXT(filename, str) {\r\n    let job = new Job();\r\n    job.filename = filename;\r\n\r\n    let parser = new Parser();\r\n\r\n    let shapesArray = parser.parse(str);\r\n\r\n    if (shapesArray.length > 0) {\r\n        for (let shape of shapesArray) {\r\n            job.shapes.push(shape)\r\n        }\r\n    }\r\n\r\n    return job\r\n}","import * as ActionTypes from \"../store/actionTypes\";\r\nimport {Layers} from \"../models/layers\";\r\n\r\nconst pasteData = ({ dispatch, getState }) => next => action => {\r\n\r\n    if (action.type !== ActionTypes.DATA_FROM_BUFFER_PASTED) {\r\n        return next(action);\r\n    }\r\n\r\n    let state = getState();\r\n    let stage = state.app.stage;\r\n    let layers = state.layers;\r\n    let parser = state.app.parser;\r\n\r\n    let layer = undefined;\r\n    if (state.app.importDataToNewLayer) {   // import data to new layer\r\n        layer = Layers.newLayer(stage, layers);\r\n        layers.push(layer);\r\n    }\r\n    else {                                  // import data to affected layer\r\n        layer = layers.find((lay) => lay.affected);\r\n        if (!layer) {                       // if no layer affected, add new\r\n            layer = Layers.newLayer(stage, layers);\r\n            layers.push(layer);\r\n        }\r\n    }\r\n\r\n    // Paste data from ClipBoard\r\n    for (let item of action.data.items) {\r\n        item.getAsString((string) => {\r\n            let shapesArray = parser.parse(string);\r\n\r\n            // TODO: add something like poly.valid()\r\n\r\n            if (shapesArray.length > 0) {\r\n                for (let shape of shapesArray) {\r\n                    layer.add(shape);\r\n                }\r\n            }\r\n\r\n            if (layer.shapes.length > 0) {\r\n                dispatch({\r\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                    shape: layer,\r\n                    stage: stage\r\n                });\r\n                dispatch({\r\n                    type: ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED,\r\n                    layer: layer\r\n                })\r\n            }\r\n\r\n        });\r\n\r\n        break;\r\n    }\r\n\r\n};\r\n\r\nexport default pasteData;\r\n","import * as ActionTypes from '../store/actionTypes';\r\n\r\nconst stageController = ({ getState, dispatch }) => next => action => {\r\n\r\n    // let state = getState();\r\n    let stage = action.stage;\r\n\r\n    if (stage) {\r\n        switch (action.type) {\r\n            case ActionTypes.STAGE_RESIZED:\r\n                stage.resize();\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n                stage.panByMouseStart();\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_MOVED_ON_STAGE:\r\n                if (action.dx !== undefined && action.dy !== undefined) {\r\n                    stage.panByMouseMove(action.dx, action.dy);\r\n                }\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_UP_ON_STAGE:\r\n                stage.panByMouseStop();\r\n                break;\r\n\r\n            case ActionTypes.PAN_AND_ZOOM_TO_SHAPE:\r\n                let center = action.shape.center;\r\n                let box = action.shape.box;\r\n                if (isNaN(center.x) || isNaN(center.y)) return;\r\n                stage.panToCoordinate(center.x, center.y);\r\n                stage.zoomToLimits(box.xmax - box.xmin, box.ymax - box.ymin);\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE:\r\n                let bIn = action.delta > 0;\r\n                // stage.zoomByMouse(action.x, action.y, bIn, 1 + Math.abs(action.delta)/100.);\r\n                stage.zoomByMouse(action.x, action.y, bIn, 1.2);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\nexport default stageController;","import * as ActionTypes from '../store/actionTypes';\r\nimport {Layers} from \"../models/layers\";\r\n\r\nimport Flatten from 'flatten-js';\r\nlet {point, arc, segment} = Flatten;\r\nlet Algorithmia = window.Algorithmia;\r\n\r\n// function zoomHome(shape, stage) {\r\n//     let box = shape.box;\r\n//     let x = (box.xmin + box.xmax)/2;\r\n//     let y = (box.ymin + box.ymax)/2;\r\n//     stage.panToCoordinate(x, y);\r\n//     stage.zoomToLimits(box.xmax - box.xmin, box.ymax - box.ymin);\r\n// }\r\n\r\nconst skeleton_recognition = ({dispatch, getState}) => next => action => {\r\n\r\n    if (action.type === ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED) {\r\n\r\n        let state = getState();\r\n        let stage = state.app.stage;\r\n\r\n        let layers = state.layers;\r\n        let currentLayer = Layers.getAffected(layers);\r\n        let shapes = currentLayer.shapes;\r\n        let input = shapes.map(shape =>\r\n            [shape.geom.x / 400., shape.geom.y / 400., shape.geom.nx, shape.geom.ny]\r\n        );\r\n\r\n        let client = Algorithmia.client(\"simby4RUwqQmtMDaHAPj5wsQwlD1\");\r\n        let algorithm = \"alexbol99/SeketonRecognition\";\r\n\r\n        client.algo(algorithm)\r\n            .pipe(input)\r\n            .then(function (output) {\r\n                if (output.error) return console.error(\"error: \" + output.error);\r\n\r\n                let newLayer = Layers.newLayer(stage, layers);\r\n                newLayer.name = \"recognized\";\r\n                newLayer.title = \"recognized\";\r\n                // newLayer.displayed = true;\r\n\r\n                for (let row of output.result) {\r\n                    let shape;\r\n                    if (row[0] instanceof Array && row[0].length === 2) {\r\n                        let pc = point(row[0][0] * 400, row[0][1] * 400);\r\n                        let r = row[1] * 400;\r\n                        /********center radius startAng endAng **********/\r\n                        shape = arc(pc, r, row[2], row[3], Flatten.CCW)\r\n                    }\r\n                    else {\r\n                        shape = segment(\r\n                            point(row[0] * 400, row[1] * 400),\r\n                            point(row[2] * 400, row[3] * 400))\r\n                    }\r\n                    if (row[4]) {\r\n                        shape.label = row[4]\r\n                    }\r\n                    newLayer.add(shape)\r\n                }\r\n                layers.push(newLayer);\r\n\r\n                dispatch({\r\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                    stage: stage,\r\n                    shape: currentLayer\r\n                })\r\n            });\r\n    }\r\n\r\n    return next(action);\r\n};\r\n\r\n\r\nexport default skeleton_recognition;\r\n","import React from 'react';\r\nimport './index.css';\r\n\r\nimport App from './App';\r\nimport {createStore, applyMiddleware} from 'redux';\r\nimport {Provider} from 'react-redux';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport reducer from './store/reducer';\r\n\r\nimport log from './middleware/log';\r\nimport readFiles from './middleware/readFiles';\r\nimport pasteData from './middleware/pasteData';\r\nimport stageController from './middleware/stageController'\r\nimport skeleton_recognition from './middleware/skeleton_recognition'\r\n\r\nconst store = createStore(reducer,\r\n    applyMiddleware(log, readFiles, pasteData, skeleton_recognition, stageController));\r\n\r\nconst Preloader = () => {\r\n    return (\r\n        <Provider store={store}>\r\n            <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n                <App/>\r\n            </BrowserRouter>\r\n        </Provider>\r\n    );\r\n};\r\n\r\nexport default Preloader;\r\n\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAACWUExURezp2L3CsAAAAH91jbamy9Sx1NXVxL2u0MvA2yEeEZy460hBJUU/JAC+ACQhE4qi2Zaw5JCp3se72Ap3Hsi82cq+2qK/8XeKtWNfTb+x0nSEsG19pH6QtWFfU8S31nt1Wpax5Xp0WoeeynBrVMm92WhkVsGz02JfU21oU5m06Mq/2se62MS21bmqzsW517ipzbyu0P///wUDcXkAAAAydFJOU/////////////////////////////////////////////////////////////////8ADVCY7wAAAO1JREFUeNpiMMQCAAKIAZsgQABhFQQIIAZDeW5uZTgXwgEIIAZFKX5+aQk2iBiUAxBADDwCClyCfIwQQSgHIICAglxigny8wmAI4TACBBCDhoymkrg6KwMIsEI4jAABxGCoyskpy8gEFmSCcNgAAojBkI2RkZENqhLIMWRkMwQIIKg7YSohACCAoIIwlRAAEEBYVQIEEFaVAAHEwIwJDAECiIGZg4NJSAiE5OSYJCWZWFiYGAECCCgowi6qwi6iza6jxs6uywISBAggoKCoFoeoioiemoE+CxgwMQIEEAMzEwZgBAggBkNGTAAQYABIRSX4H75PxQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAABOUExURezp2AAAAH91jb3CsE9PT83C3CQhE7amy9Sx1ImFdL2u0AC+AMq+2si82Qp3Hsm92cvA28Gz07ipzcq/2se62LmqzsS21cW517yu0P///44+OfEAAAAadFJOU/////////////////////////////////8AFCIA2gAAAMxJREFUeNpikMQCAAKIAZsgQABhFQQIIAYWFklJTjYoD8oBCCAGIAMuJgnlAAQQUDsLG5JOMAcggBiAykGaoADCAQggBqByDhYWbj4w5GTjAJkLEEAg2xkZEIARpB4ggECCHEiCHCBBgADCqhIggLCqBAggrCoBAgirSoAAYmDCBJIAAcTAxMrKiIy4uBiZAQIIKMjLxcPPxSvCJSbIxSXKzs7OyAwQQAxMAjzCAjz8vOKCEkLsYMDIDBBADEyMGIAZIIAYJJkxAUCAAQCiZRN3sUCgAwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MEYwOEQ4MDMwMzJFNDExOUZGN0MyRjAwQkZFNDkwMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4NkNFODE2MzMyM0QxMUU0OTc2NkEyNzVGRDRDQUREMiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NkNFODE2MjMyM0QxMUU0OTc2NkEyNzVGRDRDQUREMiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM3Q0UwRDg3MzgzMkU0MTE5RkY3QzJGMDBCRkU0OTAxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjcwRjA4RDgwMzAzMkU0MTE5RkY3QzJGMDBCRkU0OTAxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+nXk3UAAAAjtJREFUeNrU1ktIVFEcx/FRhExEei0kULQkiijMKduo0RNCEHuQRohgggsVJbRSNy2qRSK4qIjohRARk5YgGvmoVSEWRe9EzHJVkFZEoInT9w+/gXGasjngwgMf7uDcOeee/+Nco/x+v2cuR7RnjkdM4MPh+jOBj+moxVYsxnvcQhO+Bf/48umjEe+gAHcxgM1YgkNIxGOsjHQHUYEcsIP1XHqQg7dIk36Mo8JugxfTf5swdFfBO6jDSU1+CvdRrRDdwFn8wB7XJG9XrFejCOvQhgnkoxE+3ee0gMX7E1bgmfLRgG0qBrvuwiKnKmJ8xCol0ybLxBaUoBcH8QqjrjvwKZGf8QAJeI0NWsRC9Ut/b3SpIgvRUyX6Es4rD7sxhevqgyOqtj71yz+rKThEY9iJOziAVtX9S31vE5ZhEjvwSCU9gi8K4+3QEg5ttEFYP1zBRnzVwtYHVZp8IZoRiyTE4Y2+f4KU2c6iKdV9qXaSgYfoVPwvahEr57VYjmTtxh6sW/fNzEGYM2lGrnAOWYjHGizFBZWuR6EtxFV8IAcnIjlN7SnKdbXfLECL+sXK+Ttytah1/D6X49omH1a8LVzZCmUHjqt/NuEdUl3fB2MKxXMtaP1ioWhXTuwBlqk4nBawA3CvwnVPlWRHygtcUxXuV8n+0Qf/M27qfCpGnp7WynlIrMRr9LIKX0XhRkhlpakUu1RZg3oh2ZMfQ6UdO4FOdnknDwU1ocX+p15KXh2SvrBn0bz9r+K3AAMAvVSdlmlN6ucAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAB3RJTUUH1AgfBgU3vDbVaQAAAAlwSFlzAAAPPAAADzwBFzqfWQAAAwBQTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Bz0LCAAAAAJ0Uk5T/wDltzBKAAAARUlEQVR42mNgxAIYsPEYkMUZoGwGJNVwNoLAUIWmngHVNFQ2iitQnQQTZACqRkfYVaJrg1qFUE20IMnehGtFNZhIQSAAABhlAUeIwcHOAAAAAElFTkSuQmCC\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-toolbar\":\"ToolbarComponent_App-toolbar__384Ol\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-canvas\":\"CanvasComponent_App-canvas__1SRjy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-status-bar\":\"StatusComponent_App-status-bar__3yjbw\"};"],"sourceRoot":""}