(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{121:function(e,t,a){e.exports={"App-status-bar":"StatusComponent_App-status-bar__1PC6i"}},123:function(e,t,a){e.exports={LabelsLayer:"labelsLayer_LabelsLayer__3z1ll",LabelComponent:"labelsLayer_LabelComponent__p3Nap"}},125:function(e,t,a){e.exports={AboutPopup:"AboutPopup_AboutPopup__1HH4R"}},127:function(e,t,a){e.exports={BackDrop:"ModalPopup_BackDrop__3-oG9",ModalPopup:"ModalPopup_ModalPopup__1AvS-",fadeIn:"ModalPopup_fadeIn__2twM6"}},129:function(e,t,a){e.exports={"Main-content":"MainComponent_Main-content__1w1St"}},134:function(e,t,a){e.exports={"Layer-list-toolbar":"LayerListToolbar_Layer-list-toolbar__1SOXw"}},136:function(e,t,a){e.exports={"Layer-edit-form":"LayerEditForm_Layer-edit-form__1_dNQ"}},138:function(e,t,a){e.exports={Layer:"LayerListElement_Layer__1LybR",LayerSelectionBox:"LayerListElement_LayerSelectionBox__11__5",LayerSelectionMark:"LayerListElement_LayerSelectionMark__20kD0",LayerNameBox:"LayerListElement_LayerNameBox__2w-wI","Layer-displayed":"LayerListElement_Layer-displayed__1IqeA","Layer-undisplayed":"LayerListElement_Layer-undisplayed__37KZD"}},140:function(e,t,a){e.exports={"App-layers":"LayersList_App-layers__YRpy2"}},142:function(e,t,a){e.exports={"App-aside":"AsideComponent_App-aside__3rrry"}},144:function(e,t,a){e.exports={DocumentName:"DocumentName_DocumentName__ISiLa"}},146:function(e,t,a){e.exports={"App-header":"HeaderComponent_App-header__2sYI1","App-header-documents-page":"HeaderComponent_App-header-documents-page__1I9Y7"}},148:function(e,t){e.exports="data:image/png;base64,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"},149:function(e,t,a){e.exports={Logo:"Logo_Logo__1LRm4","App-logo-spin":"Logo_App-logo-spin__4_OJS"}},151:function(e,t,a){e.exports={Navigation:"Navigation_Navigation__33Fd1",active:"Navigation_active__3YdRl"}},155:function(e,t,a){},158:function(e,t,a){e.exports={BackDrop:"Spinner_BackDrop__lblJJ",Loader:"Spinner_Loader__gneD6",load2:"Spinner_load2__SMn6D"}},160:function(e,t,a){e.exports={DocumentComponent:"DocumentsComponent_DocumentComponent__1URU3",DocumentComponentGrid:"DocumentsComponent_DocumentComponentGrid__3jeWd"}},162:function(e,t,a){e.exports={DocumentComponentCell:"DocumentComponentCell_DocumentComponentCell__eCmFg",DocumentComponentCellBottom:"DocumentComponentCell_DocumentComponentCellBottom__3nRHr"}},168:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=(a(9),a(1)),s=a(2),i=a(5),l=a(3),c=a(4),u=a(171),p=a(131),d=a(170),h=a(20),m=a(31),f=a.n(m),y=f.a.create({baseURL:"https://debug-viewer.firebaseio.com/"}),v=function(e){for(var t="document",a=1,n=function(e){return e.name===t};Object.values(e).find(n);)t="document"+a,a++;return t},g=function(e,t){return y.put("/documents/".concat(e,".json"),t)},E=function(e){return y.post("/documents.json",e)},S=function(e){return y.delete("/documents/"+e+".json")},b=function(){return y.get("/documents.json")},O=a(33),A=a.n(O),_=a(81),C=a.n(_),L=function(e){var t;switch(e.type){case"trigger":t=C.a.IconTrigger;break;case"mode":t=e.active?C.a.IconModeActive:C.a.IconModeNotActive;break;default:t=C.a.IconTrigger}return r.a.createElement("button",{title:e.title,onClick:e.onClick,className:C.a.Button},r.a.createElement(A.a,{name:e.iconName,size:"2x",className:t}))},k=a(83),w=a.n(k),D=function(){return r.a.createElement("div",{className:w.a.ButtonSeparator},r.a.createElement(A.a,{name:"ellipsis-v",size:"2x",className:w.a.IconSeparator}))},T=a(85),M=a.n(T),N=(a(42),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).openJobButtonClicked=function(){return a.refs.browseFiles.click()},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:M.a["App-toolbar"]},r.a.createElement(L,{type:"trigger",title:"Open files",iconName:"folder-open",onClick:this.openJobButtonClicked}),r.a.createElement("input",{style:{fontSize:16,marginTop:5,marginBottom:5,display:"none"},type:"file",id:"browseFiles",ref:"browseFiles",name:"files[]",multiple:!0,onChange:this.props.onFileSelected}),r.a.createElement(L,{type:"trigger",title:"Save document on cloud",iconName:"save",onClick:this.props.onSaveDocumentButtonClicked}),r.a.createElement(L,{type:"trigger",title:"Clean current document",iconName:"broom",onClick:this.props.onClearAllButtonClicked}),r.a.createElement(D,null),r.a.createElement(L,{type:"trigger",title:"Zoom and pan to home view",iconName:"home",onClick:this.props.onHomeButtonPressed}),r.a.createElement(D,null),r.a.createElement(L,{type:"mode",title:"Pan by drag",iconName:"hand-paper",active:!this.props.measurePointsActive,onClick:this.props.onPanByDragPressed}),r.a.createElement(L,{type:"mode",title:"Measure distance",iconName:"hand-lizard",active:this.props.measurePointsActive,onClick:this.props.onMeasurePointsButtonPressed}),r.a.createElement(D,null),r.a.createElement(L,{type:"trigger",title:"Measure distance between shapes",iconName:"ruler",onClick:this.props.onMeasureBetweenShapesButtonPressed}),r.a.createElement(L,{type:"trigger",title:"Display solid or wire",iconName:"fill-drip",onClick:this.props.onToggleWidthModePressed}),r.a.createElement(L,{type:"trigger",title:"Display vertices on/off",iconName:"draw-polygon",onClick:this.props.onToggleVerticesPressed}),r.a.createElement(L,{type:"trigger",title:"Display labels on/off",iconName:"tag",onClick:this.props.onToggleLabelsPressed}),this.props.showSkeletonRecognitionButton?r.a.createElement(L,{type:"trigger",title:"Skeleton Recognition Demo",iconName:"tree",onClick:this.props.onSkeletonRecognitionButtonPressed}):null,r.a.createElement(D,null),r.a.createElement("button",{className:M.a["App-toolbar-units"],onClick:this.props.onUnitClicked},this.props.units),r.a.createElement(D,null),r.a.createElement(L,{type:"trigger",title:"About",iconName:"info",onClick:this.props.onShowAboutPopupPressed}),r.a.createElement(D,null))}}]),t}(n.Component)),I=a(88),x=a.n(I),P=a(8),j=a(19),R=a.n(j),B=window.createjs,U=function(e){function t(e){var a;return Object(o.a)(this,t),a=Object(i.a)(this,Object(l.a)(t).call(this,e)),B.Touch.enable(Object(P.a)(Object(P.a)(a))),a.mouseMoveOutside=!1,a.enableMouseOver(20),a.canvas.clientWidth>0&&a.canvas.clientHeight>0&&(a.canvas.width=a.canvas.clientWidth,a.canvas.height=a.canvas.clientHeight),a.origin={x:a.canvas.width/2,y:a.canvas.height/2},a.oldOrigin={x:void 0,y:void 0},a.resolution=1e-5,a.zoomFactor=1,a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"clone",value:function(){var e=new t(this.canvas);return Object.assign(e,this)}},{key:"add",value:function(e){return this.addChild(e),this}},{key:"scalingFactor",value:function(){return this.resolution*this.zoomFactor}},{key:"C2W_Scalar",value:function(e){return e/this.scalingFactor()}},{key:"W2C_Scalar",value:function(e){return this.scalingFactor()*e}},{key:"C2W_X",value:function(e){return(e-this.origin.x)/this.scalingFactor()}},{key:"C2W_Y",value:function(e){return(this.origin.y-e)/this.scalingFactor()}},{key:"W2C_X",value:function(e){return this.scalingFactor()*e+this.origin.x}},{key:"W2C_Y",value:function(e){return this.origin.y-this.scalingFactor()*e}},{key:"W2C",value:function(e){return{x:this.W2C_X(e.x),y:this.W2C_Y(e.y)}}},{key:"panTo",value:function(e){this.origin={x:e.x,y:e.y}}},{key:"panBy",value:function(e,t){this.origin={x:this.origin.x+e,y:this.origin.y+t}}},{key:"zoomIn",value:function(e){var t=e||1.1;this.zoomFactor=Math.min(1e7,t*this.zoomFactor)}},{key:"zoomOut",value:function(e){var t=e||1.1;this.zoomFactor=Math.max(.001,this.zoomFactor/t)}},{key:"zoom",value:function(e,t,a,n){var r=this.C2W_X(e),o=this.C2W_Y(t);a?this.zoomIn(n):this.zoomOut(n);var s=this.W2C_X(r),i=this.W2C_Y(o);return this.panBy(e-s,t-i),[s,i]}},{key:"zoomByMouse",value:function(e,t,a,n){this.zoom(e,t,a,n)}},{key:"zoomToLimits",value:function(e,t){0===e&&(e=4e5),0===t&&(t=4e5);var a=Math.min(this.canvas.width/(1.1*e),this.canvas.height/(1.1*t))/this.resolution/this.zoomFactor,n=this.canvas.width/2,r=this.canvas.height/2;this.zoom(n,r,!0,a)}},{key:"resize",value:function(){this.canvas.clientWidth>0&&this.canvas.clientHeight>0&&(this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight)}},{key:"panByMouseStart",value:function(){this.oldOrigin.x=this.origin.x,this.oldOrigin.y=this.origin.y}},{key:"panByMouseMove",value:function(e,t){void 0!==e&&void 0!==t&&void 0!==this.oldOrigin.x&&void 0!==this.oldOrigin.y&&(this.origin={x:this.oldOrigin.x+e,y:this.oldOrigin.y+t})}},{key:"panByMouseStop",value:function(){this.oldOrigin.x=void 0,this.oldOrigin.y=void 0,this.tx=void 0,this.ty=void 0}},{key:"panToCoordinate",value:function(e,t){var a=this.W2C_X(e),n=this.W2C_Y(t),r=this.canvas.width/2-a,o=this.canvas.height/2-n;this.panBy(r,o)}},{key:"box",get:function(){var e=this.C2W_X(0),t=this.C2W_Y(this.canvas.height),a=this.C2W_X(this.canvas.width),n=this.C2W_Y(0);return new R.a.Box(e,t,a,n)}}]),t}(B.Stage),F=function(e,t,a,n){return{type:"MOUSE_WHEEL_MOVE_ON_STAGE",stage:e,x:t,y:a,delta:n}},Y=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).canvasElement=r.a.createRef(),a.handleMouseMove=function(e){a.props.stage.canvas.focus(),a.props.handleMouseMove(a.props.stage,e.stageX,e.stageY,a.props.mouse.startX?e.stageX-a.props.mouse.startX:void 0,a.props.mouse.startY?e.stageY-a.props.mouse.startY:void 0)},a.handleMouseDown=function(e){a.props.handleMouseDown(a.props.stage,e.stageX,e.stageY)},a.handleMouseUp=function(e){e.stopPropagation(),e.preventDefault(),a.props.stage.panByMouseStop(),a.props.handleMouseUp(a.props.stage,e.stageX,e.stageY)},a.handleMouseLeave=function(e){a.props.stage.canvas.blur(),document.body.focus()},a.handleMouseWheel=function(e){var t=e.detail||e.wheelDelta;0!==t&&a.props.handleMouseWheelMove(a.props.stage,e.offsetX,e.offsetY,t)},a.handleMouseWheelFox=function(e){0!==e.detail&&a.props.handleMouseWheelMove(a.props.stage,e.layerX,e.layerY,-e.detail)},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=new U(this.canvasElement.current);e.on("stagemousemove",this.handleMouseMove),e.on("stagemousedown",this.handleMouseDown),e.on("stagemouseup",this.handleMouseUp),e.on("mouseleave",this.handleMouseLeave),e.canvas.addEventListener("mousewheel",this.handleMouseWheel,{passive:!0}),e.canvas.addEventListener("DOMMouseScroll",this.handleMouseWheelFox,{passive:!0}),this.props.registerStage(e)}},{key:"render",value:function(){return r.a.createElement("canvas",{tabIndex:"1",ref:this.canvasElement,id:"mainCanvas",className:x.a["App-canvas"]})}}]),t}(n.Component),W=Object(h.b)(function(e){return{stage:e.app.stage,mouse:e.mouse}},function(e){return{registerStage:function(t){return e(function(e){return{type:"NEW_STAGE_CREATED",stage:e}}(t))},handleMouseDown:function(t,a,n){return e(function(e,t,a){return{type:"MOUSE_DOWN_ON_STAGE",stage:e,x:t,y:a}}(t,a,n))},handleMouseUp:function(t,a,n){return e(function(e,t,a){return{type:"MOUSE_UP_ON_STAGE",stage:e,x:t,y:a}}(t,a,n))},handleMouseMove:function(t,a,n,r,o){return e(function(e,t,a,n,r){return{type:"MOUSE_MOVED_ON_STAGE",stage:e,x:t,y:a,dx:n,dy:r}}(t,a,n,r,o))},handleMouseWheelMove:function(t,a,n,r){return e(F(t,a,n,r))}}})(Y),X=a(121),z=a.n(X),V=function(){return r.a.createElement("div",{className:z.a["App-status-bar"]},r.a.createElement("div",null,r.a.createElement("h5",null,"\xa0")))},G=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){if(this.props.stage.canvas&&this.props.stage.canvas.getContext("2d")){var e=this.props.stage.origin,t=this.props.stage.zoomFactor*this.props.stage.resolution;this.props.stage.setTransform(e.x,e.y,t,-t),this.props.stage.update()}}},{key:"componentWillUnmount",value:function(){this.props.onStageUnmounted()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.children)}}]),t}(n.Component),Q=window.createjs,H=R.a.Point,Z=R.a.Segment,K=R.a.Circle,J=R.a.Arc,q=R.a.Polygon,$=R.a.Box;function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e instanceof H?function(e,t){var a=t&&t.radius?t.radius:3,n=t&&t.fill?t.fill:"#FF0303",r=new Q.Graphics;return r.fill=r.beginFill(n).command,r.circle=r.drawCircle(e.x,e.y,a).command,r}(e,t):e instanceof Z?function(e,t){var a=new Q.Graphics,n=t&&void 0!==t.strokeStyle?t.strokeStyle:2,r=!t||void 0===t.ignoreScale||t.ignoreScale,o=t&&t.stroke?t.stroke:"black";return a.setStrokeStyle(n,1,0,10,r).beginStroke(o).moveTo(e.ps.x,e.ps.y).lineTo(e.pe.x,e.pe.y).endStroke()}(e,t):e instanceof J?function(e,t){var a=new Q.Graphics,n=t&&t.strokeStyle?t.strokeStyle:2,r=!t||void 0===t.ignoreScale||t.ignoreScale,o=t&&t.stroke?t.stroke:"black";return a.setStrokeStyle(n,1,0,10,r).beginStroke(o).arc(e.pc.x,e.pc.y,e.r,e.startAngle,e.endAngle,!e.counterClockwise).endStroke()}(e,t):e instanceof K?function(e,t){var a=new Q.Graphics,n=t&&t.strokeStyle?t.strokeStyle:2,r=t&&t.stroke?t.stroke:"black";return a.setStrokeStyle(n,0,0,10,!0).beginStroke(r).drawCircle(e.pc.x,e.pc.y,e.r).endStroke()}(e,t):e instanceof $?function(e,t){var a=new Q.Graphics,n=t&&t.strokeStyle?t.strokeStyle:1,r=t&&t.stroke?t.stroke:"black";return a.setStrokeStyle(n,0,0,10,!0).beginStroke(r).drawRect(e.xmin,e.ymin,e.xmax-e.xmin,e.ymax-e.ymin)}(e,t):e instanceof q?function(e,t){var a=new Q.Graphics,n=t&&t.strokeStyle?t.strokeStyle:1,r=t&&t.stroke?t.stroke:"#FF0303",o=t&&t.fill?t.fill:"#FF0303";a.setStrokeStyle(n,0,0,10,!0),a.stroke=a.beginStroke(r).command,a.fill=a.beginFill(o).command;var s=!0,i=!1,l=void 0;try{for(var c,u=e.faces[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var p=c.value;ae(a,p)}}catch(d){i=!0,l=d}finally{try{s||null==u.return||u.return()}finally{if(i)throw l}}return a.endStroke(),a}(e,t):null}function te(e,t){t.shape instanceof Z?function(e,t){e.lineTo(t.pe.x,t.pe.y)}(e,t.shape):t.shape instanceof J&&function(e,t){e.arc(t.pc.x,t.pc.y,t.r,t.startAngle,t.endAngle,!t.counterClockwise)}(e,t.shape)}function ae(e,t){var a=t.first.start;e.moveTo(a.x,a.y);var n=!0,r=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){te(e,s.value)}}catch(l){r=!0,o=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}var ne={is_equal:function(e,t){for(var a=!0,n=Object.keys(t),r=0;r<n.length;r++){var o=n[r];if(t[o]!==e[o]){a=!1;break}}return a}},re=window.createjs,oe=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this))).handleMouseOver=function(e){a.props.onMouseOver(a.props.model)},a.handleMouseOut=function(e){a.props.onMouseOut()},a.handleClick=function(e){a.props.onClick(a.props.model,a.props.layer)},a.shape=new re.Shape,e.stage.addChild(a.shape),a.vertexShapes=[];var n=!0,r=!1,s=void 0;try{for(var c,u=e.model.geom.vertices[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var p=c.value,d=new re.Shape;d.geom=p,d.mouseEnabled=!1,e.stage.addChild(d),a.vertexShapes.push(d)}}catch(h){r=!0,s=h}finally{try{n||null==u.return||u.return()}finally{if(r)throw s}}return a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"redrawVertices",value:function(e,t,a){var n=this.props.stage,r=!0,o=!1,s=void 0;try{for(var i,l=this.vertexShapes[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value,u=c.geom;c.graphics.isEmpty()?c.graphics=ee(u,{stroke:e,fill:t,radius:3/(n.zoomFactor*n.resolution)}):(c.graphics.circle.radius=3/(n.zoomFactor*n.resolution),c.graphics.fill.style=t),c.alpha=a}}catch(p){o=!0,s=p}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}},{key:"redraw",value:function(){var e=this.props.stage,t=this.props.hovered||this.props.selected?"black":this.props.color,a=this.props.hovered||this.props.selected?1:.6,n=this.props.widthOn,r=this.props.model.geom.aperture?this.props.model.geom.aperture:void 0,o=n&&!this.props.displayVertices?this.props.color:"white";this.shape.graphics.isEmpty()?this.shape.graphics=ee(this.props.model.geom,{strokeStyle:r,ignoreScale:!0,stroke:t,fill:o,radius:3/(e.zoomFactor*e.resolution)}):(this.shape.graphics.stroke&&(this.shape.graphics.stroke.style=t),this.shape.graphics.fill&&(this.shape.graphics.fill.style=o),this.shape.graphics.circle&&(this.shape.graphics.circle.radius=3/(e.zoomFactor*e.resolution))),this.shape.alpha=this.props.displayed?a:0,a=this.props.displayed&&this.props.displayVertices?1:0,this.redrawVertices(t,t,a)}},{key:"componentDidMount",value:function(){this.shape.on("mouseover",this.handleMouseOver),this.shape.on("mouseout",this.handleMouseOut),this.shape.on("click",this.handleClick),this.redraw()}},{key:"shouldComponentUpdate",value:function(e,t){return!ne.is_equal(this.props,e)}},{key:"componentDidUpdate",value:function(){this.redraw()}},{key:"componentWillUnmount",value:function(){this.shape.off("mouseover",this.handleMouseOver),this.shape.off("mouseout",this.handleMouseOut),this.shape.off("click",this.handleClick),this.props.stage.removeChild(this.shape),this.shape.graphics.clear();var e=!0,t=!1,a=void 0;try{for(var n,r=this.vertexShapes[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;this.props.stage.removeChild(o)}}catch(s){t=!0,a=s}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}this.vertexShapes=[]}},{key:"render",value:function(){return null}}]),t}(n.Component),se=window.createjs,ie=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this))).handleMouseOver=function(e){a.props.onMouseOver(a.props.model)},a.handleMouseOut=function(e){a.props.onMouseOut()},a.handleClick=function(e){a.props.onClick(a.props.model,a.props.layer)},a.bitmap=new se.Bitmap(e.model.geom.uri),e.stage.addChild(a.bitmap),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"redraw",value:function(){this.bitmap.alpha=this.props.displayed?.5:0;var e=this.props.model.geom.width,t=this.bitmap.image.naturalWidth/this.bitmap.image.naturalHeight,a=e/this.bitmap.image.naturalWidth,n=e/(this.bitmap.image.naturalHeight*t),r=this.props.model.geom.center.x,o=this.props.model.geom.center.y;this.bitmap.setTransform(r,o,a,-n),this.bitmap.regX=this.bitmap.image.naturalWidth/2,this.bitmap.regY=this.bitmap.image.naturalHeight/2}},{key:"componentDidMount",value:function(){this.bitmap.on("mouseover",this.handleMouseOver),this.bitmap.on("mouseout",this.handleMouseOut),this.bitmap.on("click",this.handleClick),this.redraw()}},{key:"shouldComponentUpdate",value:function(e,t){return!ne.is_equal(this.props,e)}},{key:"componentDidUpdate",value:function(){this.redraw()}},{key:"componentWillUnmount",value:function(){this.bitmap.off("mouseover",this.handleMouseOver),this.bitmap.off("mouseout",this.handleMouseOut),this.bitmap.off("click",this.handleClick)}},{key:"render",value:function(){return null}}]),t}(n.Component),le=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.props.layer.shapes.map(function(t,a){return t.geom.uri?r.a.createElement(ie,{key:a,stage:e.props.stage,layer:e.props.layer,model:t,displayed:e.props.layer.displayed,hovered:t===e.props.hoveredShape,selected:t===e.props.firstMeasuredShape||t===e.props.secondMeasuredShape,color:e.props.layer.color,widthOn:e.props.widthOn,displayLabels:e.props.displayLabels,zoomFactor:e.props.zoomFactor,onMouseOver:e.props.onMouseOver,onMouseOut:e.props.onMouseOut,onClick:e.props.onClick}):r.a.createElement(oe,{key:a,stage:e.props.stage,layer:e.props.layer,model:t,displayed:e.props.layer.displayed,hovered:t===e.props.hoveredShape,selected:t===e.props.firstMeasuredShape||t===e.props.secondMeasuredShape,color:e.props.layer.color,widthOn:e.props.widthOn,displayVertices:e.props.displayVertices,zoomFactor:e.props.zoomFactor,onMouseOver:e.props.onMouseOver,onMouseOut:e.props.onMouseOut,onClick:e.props.onClick})})}}]),t}(n.Component),ce=a(123),ue=a.n(ce),pe=function(e){var t=e.stage,a=e.shape,n=a.geom.center||a.geom,o=t.canvas.offsetLeft+t.W2C_X(n.x)+6,s=t.canvas.offsetTop+t.W2C_Y(n.y)-4;return o>t.canvas.offsetLeft&&o<t.canvas.offsetLeft+t.canvas.width&&s>t.canvas.offsetTop&&s<t.canvas.height?r.a.createElement("div",{style:{position:"absolute",left:o+"px",top:s+"px"},className:ue.a.LabelComponent},r.a.createElement("h5",null,a.label)):null},de=function(e){var t=e.stage,a=e.layer,n=e.displayLabels;return a.displayed&&n?a.shapes.map(function(e,a){return e.label&&""!==e.label.trim()?r.a.createElement(pe,{key:a,stage:t,shape:e}):null}):null},he={strokeStyle:1,stroke:"#FF0303",fill:"#FF0303",alpha:1},me=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(o.a)(this,e),this.geom=t,this.style=a||he,this.label=n}return Object(s.a)(e,[{key:"clone",value:function(){var t=new e(this.geom,this.style,this.label);return Object.assign(t,this)}},{key:"box",get:function(){return this.geom.box}}]),e}(),fe=function(){function e(t){Object(o.a)(this,e),this.stage=t,this.shapes=[],this.name="",this.color="",this.title="",this.displayed=!1,this.edited=!1,this.affected=!1}return Object(s.a)(e,[{key:"clone",value:function(){var t=new e(this.stage);return Object.assign(t,this)}},{key:"add",value:function(e){if(e instanceof me)this.shapes.push(e);else{var t=new me(e,{},e.label);this.shapes.push(t)}return this}},{key:"addShapesArray",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;this.add(s)}}catch(i){a=!0,n=i}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}return this}},{key:"toggleDisplayed",value:function(e){var t=!this.displayed;return Object.assign(this.clone(),{displayed:t,color:e})}},{key:"setAffected",value:function(e){return this.affected=e,this}},{key:"setEdited",value:function(e){return Object.assign(this.clone(),{edited:e})}},{key:"setNameAndTitle",value:function(e,t){return Object.assign(this.clone(),{name:e,title:t,edited:!1})}},{key:"setAlpha",value:function(){var e=!0,t=!1,a=void 0;try{for(var n,r=this.shapes[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){n.value.alpha=this.displayed?1:0}}catch(o){t=!0,a=o}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}return this.shapes}},{key:"toJSON",value:function(){return{name:this.name,title:this.title,shapes:JSON.stringify(this.shapes,null," ")}}},{key:"box",get:function(){var e=new R.a.Box,t=!0,a=!1,n=void 0;try{for(var r,o=this.shapes[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;e=e.merge(s.box)}}catch(i){a=!0,n=i}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}return e}},{key:"center",get:function(){var e=this.box;return new R.a.Point((e.xmin+e.xmax)/2,(e.ymin+e.ymax)/2)}}]),e}(),ye=["#FF0303","#4AA403","#540080","#FFFF40","#FF0080","#AED424","#545400","#FFA980","#A95480","#A9A9FF","#00FF00","#FFEE76","#A40576","#4385C8","#1CC826","#BDBD00","#48316E","#14616E","#8040BD","#DC7676","#924845","#A90000","#FFA900"],ve=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"newLayer",value:function(t,a){var n=new fe(t);return n.name=e.getNewName(a),0===a.length&&(n.displayed=!1,n.affected=!1),n}},{key:"getNewName",value:function(t){for(var a=e.defaultName,n=1,r=function(e){return e.name===a};t.find(r);)a=e.defaultName+n,n++;return a}},{key:"getAffected",value:function(e){return e.find(function(e){return e.affected})}},{key:"setAffected",value:function(t,a){var n=e.getAffected(t);n&&(n.affected=!1),a.affected=!0}},{key:"getNextColor",value:function(e){for(var t="",a=function(){var a=ye[n];if(!e.find(function(e){return e.displayed&&e.color===a}))return t=a,"break"},n=0;n<ye.length;n++){if("break"===a())break}return t}},{key:"delete",value:function(t,a){var n=t.findIndex(function(e){return e===a}),r=t.filter(function(e){return e!==a});return n>0&&(r[n-1].affected=!0,""===r[n-1].color&&(r[n-1].color=e.getNextColor(r)),r[n-1].displayed=!0),r}},{key:"sort",value:function(e){var t=e.slice();return t.sort(function(e,t){var a=e.name.toUpperCase(),n=t.name.toUpperCase();return a<n?-1:a>n?1:0}),t}},{key:"toJSON",value:function(e){return e.map(function(e){return e.toJSON()})}},{key:"defaultName",get:function(){return"layer"}}]),e}(),ge=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){if(this.props.layers.length>0&&this.props.stage){var e=ve.getAffected(this.props.layers);e&&this.props.setHomeView(this.props.stage,e)}}},{key:"render",value:function(){var e=this;return this.props.layers.map(function(t){return r.a.createElement(r.a.Fragment,{key:t.name},r.a.createElement(le,{stage:e.props.stage,layer:t,color:t.color,displayed:t.displayed,displayVertices:e.props.displayVertices,displayLabels:e.props.displayLabels,widthOn:e.props.widthOn,hoveredShape:e.props.hoveredShape,firstMeasuredShape:e.props.firstMeasuredShape,secondMeasuredShape:e.props.secondMeasuredShape,zoomFactor:e.props.zoomFactor,onMouseOver:e.props.onMouseOver,onMouseOut:e.props.onMouseOut,onClick:e.props.onClick}),r.a.createElement(de,{stage:e.props.stage,layer:t,displayed:t.displayed,displayLabels:e.props.displayLabels}))})}}]),t}(n.Component),Ee=function(e,t){return{type:"PAN_AND_ZOOM_TO_SHAPE",stage:e,shape:t}},Se=function(e){return{type:"TOGGLE_DISPLAY_LAYER_PRESSED",layer:e}},be=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).startX=void 0,a.startY=void 0,a.endX=void 0,a.endY=void 0,a.measureStarted=!1,a.measureCanvas=r.a.createRef(),a.handleMouseDown=function(e){e.preventDefault();var t=a.measureCanvas.current,n=a.props.stage;t.getContext("2d").clearRect(0,0,t.width,t.height);var r=e.offsetX||e.originalEvent.layerX,o=e.offsetY||e.originalEvent.layerY;a.measureStarted?(a.startX=void 0,a.startY=void 0,a.endX=void 0,a.endY=void 0,a.measureStarted=!1,t.style.cursor="auto"):(a.startX=n.C2W_X(r),a.startY=n.C2W_Y(o),a.measureStarted=!0,t.style.cursor="crosshair")},a.handleMouseMove=function(e){var t=a.props.stage,n=e.offsetX,r=e.offsetY;a.measureStarted&&(a.endX=t.C2W_X(n),a.endY=t.C2W_Y(r),a.draw())},a.handleMouseUp=function(e){},a.handleMouseWheel=function(e){e.preventDefault();var t=e.detail||e.wheelDelta;0!==t&&(a.props.handleMouseWheelMove(a.props.stage,e.offsetX,e.offsetY,t),a.draw())},a.handleMouseWheelFox=function(e){e.preventDefault(),0!==e.detail&&(a.props.handleMouseWheelMove(a.props.stage,e.layerX,e.layerY,-e.detail),a.draw())},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"draw",value:function(){var e=this.measureCanvas.current,t=e.getContext("2d"),a=this.props.stage;e.getContext("2d").clearRect(0,0,e.width,e.height);var n,r,o,s,i,l=Math.min(a.W2C_X(this.startX),a.W2C_X(this.endX)),c=Math.min(a.W2C_Y(this.startY),a.W2C_Y(this.endY)),u=Math.abs(a.W2C_Scalar(this.startX-this.endX)),p=Math.abs(a.W2C_Scalar(this.startY-this.endY));t.beginPath(),t.rect(l,c,u,p),t.moveTo(a.W2C_X(this.startX),a.W2C_Y(this.startY)),t.lineTo(a.W2C_X(this.endX),a.W2C_Y(this.endY)),t.lineWidth=1,t.strokeStyle="black",t.stroke();var d=this.measurement();t.font="12pt Arial",o=t.measureText(d).width,Math.abs(a.W2C_X(this.endX)-l)<=2?(t.textAlign="left",n=l+3,s=l):(t.textAlign="right",s=(n=l+u-3)-o-3),i=(r=Math.abs(a.W2C_Y(this.endY)-c)<=2?c-3:c+p+12+3)-12-3,t.fillStyle="white",t.globalAlpha=.4,t.fillRect(s,i,o+6,18),t.fillStyle="black",t.globalAlpha=1,t.fillText(this.measurement(),n,r)}},{key:"measurement",value:function(){var e=this.endX-this.startX,t=this.endY-this.startY,a=Math.sqrt(e*e+t*t);return"DX="+this.format(e)+",DY="+this.format(t)+",D="+this.format(a)}},{key:"format",value:function(e){return(e/this.props.divisor).toFixed(this.props.decimals)}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this.measureCanvas.current;e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("mousemove",this.handleMouseMove),e.addEventListener("mouseup",this.handleMouseUp),e.addEventListener("mousewheel",this.handleMouseWheel),e.addEventListener("DOMMouseScroll",this.handleMouseWheelFox)}},{key:"componentDidUpdate",value:function(){this.measureStarted&&this.draw()}},{key:"componentWillUnmount",value:function(){var e=this.measureCanvas.current;e.getContext("2d").clearRect(0,0,e.width,e.height)}},{key:"render",value:function(){var e=this.props.stage.canvas,t=e.width,a=e.height,n=e.offsetTop,o=e.offsetLeft;return r.a.createElement("canvas",{tabIndex:"1",ref:this.measureCanvas,width:t,height:a,style:{position:"absolute",top:n,left:o}})}}]),t}(n.Component),Oe=Object(h.b)(function(e){var t=e.app;return{stage:t.stage,divisor:t.divisor,decimals:t.decimals}},function(e){return{handleMouseWheelMove:function(t,a,n,r){return e(F(t,a,n,r))}}})(be),Ae=window.createjs,_e=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this))).segment=new Ae.Shape,e.stage.addChild(a.segment),a.labelShape=new Ae.Text,a.labelShape.x=0,a.labelShape.y=0,e.stage.addChild(a.labelShape),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"format",value:function(e){return(e/this.props.divisor).toFixed(this.props.decimals)}},{key:"redrawLabel",value:function(){if(this.labelShape){var e=this.props.stage,t=this.props.shortestSegment.box,a=(t.xmin+t.xmax)/2,n=(t.ymin+t.ymax)/2,r=6/(e.zoomFactor*e.resolution),o=4/(e.zoomFactor*e.resolution);t.ymin===t.ymax&&(r=0,o=-o),this.labelShape.text=this.format(this.props.shortestSegment.length);this.labelShape.font="".concat(14,"px Arial");var s=1/(e.zoomFactor*e.resolution),i=a+r,l=n+o;this.labelShape.setTransform(i,l,s,-s)}}},{key:"draw",value:function(){this.props.shortestSegment&&(this.segment.graphics=ee(this.props.shortestSegment),this.redrawLabel())}},{key:"componentDidMount",value:function(){this.draw()}},{key:"componentDidUpdate",value:function(){this.segment.graphics.clear(),this.props.firstMeasuredShape&&this.props.secondMeasuredShape&&this.props.firstMeasuredLayer.displayed&&this.props.secondMeasuredLayer.displayed&&(this.draw(),this.redrawLabel())}},{key:"componentWillUnmount",value:function(){this.props.stage.removeChild(this.segment),this.segment.graphics.clear(),this.props.stage.removeChild(this.labelShape),this.labelShape.text=""}},{key:"render",value:function(){return null}}]),t}(n.Component),Ce=function(e){var t=e.stage,a=e.coordX,n=e.coordY,o=e.divisor,s=e.decimals,i=function(e){return(e/o).toFixed(s)},l=t.canvas,c=l.offsetTop+10,u=l.offsetLeft+10,p=t.C2W_X(a),d=t.C2W_Y(n);return r.a.createElement("div",{style:{position:"absolute",top:c,left:u}},r.a.createElement("h5",{style:{margin:0,padding:3}},"X: ",i(p)," Y: ",i(d)))},Le=a(125),ke=a.n(Le),we=a(7),De=a.n(we),Te=document.getElementById("modal-root"),Me=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).el=document.createElement("div"),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){Te.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){Te.removeChild(this.el)}},{key:"render",value:function(){return De.a.createPortal(this.props.children,this.el)}}]),t}(n.Component),Ne=a(127),Ie=a.n(Ne),xe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onBackDropClicked=function(e){"backDrop"===e.target.id&&a.props.closePopup()},a.handleKeyDown=function(e){"Escape"===e.code&&a.props.closePopup()},a.elementDrag=function(e){e=e||window.event,a.offsetX=a.dragX-e.clientX,a.offsetY=a.dragY-e.clientY,a.dragX=e.clientX,a.dragY=e.clientY;var t=e.target;t.style.top=t.offsetTop-a.offsetY+"px",t.style.left=t.offsetLeft-a.offsetX+"px"},a.closeDragElement=function(e){e.target.onmouseup=null,e.target.onmousemove=null},a.dragMouseDown=function(e){e=e||window.event,a.dragX=e.clientX,a.dragY=e.clientY,e.target.onmouseup=a.closeDragElement,e.target.onmousemove=a.elementDrag},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return this.props.showPopup?r.a.createElement(Me,null,r.a.createElement("div",{id:"backDrop",className:Ie.a.BackDrop,onClick:this.onBackDropClicked},r.a.createElement("div",{className:Ie.a.ModalPopup,onMouseDown:this.dragMouseDown},this.props.children))):null}}]),t}(n.Component),Pe=function(e){return r.a.createElement(xe,{showPopup:e.showAboutPopup,closePopup:e.toggleAboutPopup},r.a.createElement("div",{className:ke.a.AboutPopup},r.a.createElement("h2",null,e.title," v",e.version),r.a.createElement("label",null,"Build date: "),r.a.createElement("span",null,"November 2018"),r.a.createElement("br",null),r.a.createElement("label",null,"Github depository: "),r.a.createElement("a",{href:"https://github.com/alexbol99/debug-viewer1"},"https://github.com/alexbol99/debug-viewer1"),r.a.createElement("br",null),r.a.createElement("label",null,"3d party graphics library: "),r.a.createElement("a",{href:"https://github.com/CreateJS/EaselJS/tree/2.0"},"https://github.com/CreateJS/EaselJS/tree/2.0"),r.a.createElement("br",null)))};function je(e){var t,a,n=[],r=!0,o=!1,s=void 0;try{for(var i,l=JSON.parse(e)[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value;if(c.geom instanceof Array){t=new R.a.Polygon;var u=!0,p=!1,d=void 0;try{for(var h,m=c.geom[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var f=h.value;t.addFace(f)}}catch(y){p=!0,d=y}finally{try{u||null==m.return||m.return()}finally{if(p)throw d}}}else t=R.a[c.geom.name](c.geom);a=new me(t,c.style,c.label),n.push(a)}}catch(y){o=!0,s=y}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}return n}var Re=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={done:!1},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){var e,t=this;if(this.props.stage&&!this.state.done){var a=this.props.stage;(e=this.props.match.params.id,y.get("/documents/"+e+".json")).then(function(e){var n=void 0,r=!0,o=!1,s=void 0;try{for(var i,l=e.data.layers[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value,u=new fe;u.shapes=je(c.shapes),u.name=c.name,n||(n=u),t.props.addNewLayer(u),t.props.asyncOperationEnded()}}catch(p){o=!0,s=p}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}t.props.updateDocument(t.props.match.params.id,e.data.name,"Alex Bol",e.data.lastUpdated),t.props.panAndZoomToShape(a,n),t.props.toggleLayer(n)}),this.setState({done:!0}),this.props.clearAll(),this.props.asyncOperationStarted()}}},{key:"render",value:function(){return null}}]),t}(n.Component),Be=Object(h.b)(function(e){return{layers:e.layers,stage:e.app.stage,document:e.cloudStorage.document}},function(e){return{panAndZoomToShape:function(t,a){return e(Ee(t,a))},asyncOperationStarted:function(){return e({type:"ASYNC_OPERATION_STARTED"})},asyncOperationEnded:function(){return e({type:"ASYNC_OPERATION_ENDED"})},addNewLayer:function(t){return e(function(e){return{type:"ADD_NEW_LAYER",layer:e}}(t))},toggleLayer:function(t){return e(Se(t))},clearAll:function(){return e({type:"CLEAR_ALL_BUTTON_CLICKED"})},updateDocument:function(t,a,n,r){return e(function(e,t,a){return{type:"REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED",id:e,name:t,owner:a}}(t,a,n))}}})(Re),Ue=a(129),Fe=a.n(Ue),Ye=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleFileSelect=function(e){if(File&&FileReader&&FileList){var t=e.target.files;a.props.handleFileSelect(t,a.props.stage,a.props.layers)}},a.setHomeView=function(){var e=ve.getAffected(a.props.layers);e&&a.props.setHomeView(a.props.stage,e)},a.onSaveDocumentButtonClicked=function(){if(0!==a.props.layers.length){var e={name:""===a.props.document.name?v(a.props.documentsList):a.props.document.name,layers:ve.toJSON(a.props.layers),dataURL:a.props.stage.toDataURL(),lastUpdated:(new Date).toLocaleDateString()+" "+(new Date).toLocaleTimeString()};a.props.document.id?g(a.props.document.id,e).then(function(e){a.props.updateDocumentState(Date.now()),a.props.asyncOperationEnded()}).catch(function(e){console.log(e)}):E(e).then(function(e){a.props.registerDocumentAddedToDatabase(e.data.name,Date.now()),a.props.asyncOperationEnded(),a.props.history.push("/documents/"+e.data.name)}).catch(function(e){console.log(e)}),a.props.asyncOperationStarted()}},a.clearCurrentDocument=function(){a.props.clearCurrentDocument(),a.props.clearAllLayers()},a.handleKeyDown=function(e){if("mainCanvas"===e.target.id)switch(e.code){case"KeyH":a.setHomeView();break;case"KeyW":a.props.toggleWidthMode();break;case"KeyE":a.props.toggleDisplayVertices()}},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.onresize=this.props.resizeStage,document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp),void 0===this.props.document.id?this.props.history.push("/"):this.props.history.push("/documents/"+this.props.document.id)}},{key:"render",value:function(){var e=this.props.stage?r.a.createElement(Ce,{key:"displayCoordinatedTool",stage:this.props.stage,units:this.props.units,divisor:this.props.divisor,decimals:this.props.decimals,coordX:this.props.mouse.x,coordY:this.props.mouse.y}):null,t=this.props.measurePointsActive?r.a.createElement(Oe,null):null,a=this.props.measureShapesTool.firstMeasuredShape&&this.props.measureShapesTool.secondMeasuredShape&&this.props.measureShapesTool.firstMeasuredLayer.displayed&&this.props.measureShapesTool.secondMeasuredLayer.displayed,n=this.props.measureShapesTool.distance&&this.props.measureShapesTool.shortestSegment&&a?r.a.createElement(_e,{key:"MeasureShapesTool",stage:this.props.stage,firstMeasuredShape:this.props.measureShapesTool.firstMeasuredShape,secondMeasuredShape:this.props.measureShapesTool.secondMeasuredShape,firstMeasuredLayer:this.props.measureShapesTool.firstMeasuredLayer,secondMeasuredLayer:this.props.measureShapesTool.secondMeasuredLayer,distance:this.props.measureShapesTool.distance,shortestSegment:this.props.measureShapesTool.shortestSegment,divisor:this.props.divisor,decimals:this.props.decimals}):null;return r.a.createElement("main",{className:Fe.a["Main-content"]},r.a.createElement(N,{measurePointsActive:this.props.measurePointsActive,units:this.props.units,showSkeletonRecognitionButton:this.props.showSkeletonRecognitionButton,onFileSelected:this.handleFileSelect,onHomeButtonPressed:this.setHomeView,onPanByDragPressed:this.props.togglePanByDrag,onMeasurePointsButtonPressed:this.props.toggleMeasureBetweenPoints,onMeasureBetweenShapesButtonPressed:this.props.toggleMeasureBetweenShapes,onToggleWidthModePressed:this.props.toggleWidthMode,onToggleVerticesPressed:this.props.toggleDisplayVertices,onToggleLabelsPressed:this.props.toggleDisplayLabels,onShowAboutPopupPressed:this.props.toggleAboutPopup,onSkeletonRecognitionButtonPressed:this.props.applySkeletonRecognition,onUnitClicked:this.props.toggleUnits,onSaveDocumentButtonClicked:this.onSaveDocumentButtonClicked,onClearAllButtonClicked:this.clearCurrentDocument}),r.a.createElement(W,null),this.props.stage?r.a.createElement(G,{stage:this.props.stage,onStageUnmounted:this.props.destroyStage},r.a.createElement(ge,{stage:this.props.stage,layers:this.props.layers,displayVertices:this.props.displayVertices,displayLabels:this.props.displayLabels,widthOn:this.props.widthOn,zoomFactor:this.props.zoomFactor,hoveredShape:this.props.measureShapesTool.hoveredShape,firstMeasuredShape:this.props.measureShapesTool.firstMeasuredShape,secondMeasuredShape:this.props.measureShapesTool.secondMeasuredShape,onMouseOver:this.props.handleMouseRollOverShape,onMouseOut:this.props.handleMouseRollOutShape,onClick:this.props.handleClickOnShape,setHomeView:this.props.setHomeView}),e,t,n):null,r.a.createElement(V,null),r.a.createElement(Pe,{showAboutPopup:this.props.showAboutPopup,toggleAboutPopup:this.props.toggleAboutPopup,title:this.props.title,version:this.props.version,build:this.props.build}),r.a.createElement(p.a,{path:"/documents/:id",component:Be}))}}]),t}(n.Component),We=Object(h.b)(function(e,t){return{stage:e.app.stage,title:e.app.title,version:e.app.version,build:e.app.build,displayVertices:e.app.displayVertices,displayLabels:e.app.displayLabels,widthOn:e.app.widthOn,zoomFactor:e.app.zoomFactor,units:e.app.units,showSkeletonRecognitionButton:e.app.showSkeletonRecognitionButton,divisor:e.app.divisor,decimals:e.app.decimals,measurePointsActive:e.app.measurePointsActive,showAboutPopup:e.app.showAboutPopup,layers:e.layers,mouse:e.mouse,measureShapesTool:e.measureShapesTool,document:e.cloudStorage.document,documentsList:e.cloudStorage.documentsList}},function(e){return{resizeStage:function(){return e({type:"STAGE_RESIZED"})},destroyStage:function(){return e({type:"STAGE_UNMOUNTED"})},handleFileSelect:function(t,a,n){return e(function(e,t,a){return{type:"FILENAME_LIST_SELECTED",files:e,stage:t,layers:a}}(t,a,n))},setHomeView:function(t,a){return e(Ee(t,a))},toggleUnits:function(){return e({type:"TOGGLE_UNITS_CLICKED"})},toggleWidthMode:function(){return e({type:"TOGGLE_WIDTH_MODE_CLICKED"})},toggleDisplayVertices:function(){return e({type:"TOGGLE_DISPLAY_VERTICES_CLICKED"})},toggleDisplayLabels:function(){return e({type:"TOGGLE_DISPLAY_LABELS_CLICKED"})},toggleAboutPopup:function(){return e({type:"TOGGLE_ABOUT_POPUP_CLICKED"})},toggleMeasureBetweenPoints:function(){return e({type:"MEASURE_POINTS_BUTTON_PRESSED"})},toggleMeasureBetweenShapes:function(){return e({type:"MEASURE_SHAPES_BUTTON_PRESSED"})},togglePanByDrag:function(){return e({type:"PAN_BY_DRAG_BUTTON_CLICKED"})},applySkeletonRecognition:function(){return e({type:"SKELETON_RECOGNITION_BUTTON_PRESSED"})},handleMouseRollOverShape:function(t){return e(function(e){return{type:"MOUSE_ROLL_OVER_SHAPE",shape:e}}(t))},handleMouseRollOutShape:function(){return e({type:"MOUSE_ROLL_OUT_SHAPE"})},handleClickOnShape:function(t,a){return e(function(e,t){return{type:"MOUSE_CLICKED_ON_SHAPE",shape:e,layer:t}}(t,a))},asyncOperationStarted:function(){return e({type:"ASYNC_OPERATION_STARTED"})},asyncOperationEnded:function(){return e({type:"ASYNC_OPERATION_ENDED"})},clearAllLayers:function(){return e({type:"CLEAR_ALL_BUTTON_CLICKED"})},registerDocumentAddedToDatabase:function(t,a){return e(function(e,t){return{type:"REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED",id:e,lastUpdated:t}}(t,a))},updateDocumentState:function(t){return e(function(e){return{type:"REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED",lastUpdated:e}}(t))},clearCurrentDocument:function(){return e({type:"CLEAR_ALL_BUTTON_CLICKED"})}}})(Ye),Xe=a(134),ze=a.n(Xe),Ve=function(e){return r.a.createElement("div",{className:ze.a["Layer-list-toolbar"]},r.a.createElement("button",{title:"Add layer",onClick:e.onAddLayerButtonClicked},r.a.createElement(A.a,{name:"plus",size:"2x",style:{color:"grey"}})),r.a.createElement("button",{title:"Edit selected layer's name and info",onClick:e.onEditLayerButtonClicked},r.a.createElement(A.a,{name:"pencil-alt",size:"2x",style:{color:"grey"}})),r.a.createElement("button",{title:"Delete selected layer",onClick:e.onDeleteLayerButtonClicked},r.a.createElement(A.a,{name:"times",size:"2x",style:{color:"grey"}})),r.a.createElement("button",{title:"Sort layer list",onClick:e.onSortLayersButtonClicked},r.a.createElement(A.a,{name:"sort-alpha-down",size:"2x",style:{color:"grey"}})))},Ge=a(136),Qe=a.n(Ge),He=function(e){var t=function(t){t.stopPropagation(),t.preventDefault();var a=t.target.parentElement,n=Object.assign({},e.layer,{name:a.layerName.value,title:a.layerTitle.value});return e.onSubmitLayerEditForm(n),!1},a=function(e){e.stopPropagation(),e.target.focus()};return r.a.createElement("form",{className:Qe.a["Layer-edit-form"],id:"layerEditForm",onSubmit:t},r.a.createElement("label",null,"Layer name:"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",id:"layer-name",name:"layerName",size:"80",defaultValue:e.layer.name,onClick:a}),r.a.createElement("br",null),r.a.createElement("label",null,"Layer info:"),r.a.createElement("br",null),r.a.createElement("textarea",{id:"layer-title",name:"layerTitle",cols:"78",rows:"3",defaultValue:e.layer.title,onClick:a}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){e.onEscapeLayerEditForm()}},"Cancel"),r.a.createElement("button",{onClick:t},"OK"))},Ze=a(138),Ke=a.n(Ze),Je=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){if("CANVAS"!==document.activeElement.nodeName){var e=this.refs.layerName;this.props.layer.affected&&e.focus()}}},{key:"rgba",value:function(e,t){var a,n,r,o;return e?(e=e.replace("#",""),a=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),o=t):(a=147,n=128,r=108,o=0),"rgba(".concat(a,",").concat(n,",").concat(r,",").concat(o/100,")")}},{key:"render",value:function(){var e=this.props.layer.displayed?"Layer-displayed":"Layer-undisplayed",t=e?this.rgba(this.props.layer.color,100):this.rgba(),a=e?this.rgba(this.props.layer.color,30):this.rgba(),n=this.props.layer.affected?1:0,o=0===this.props.layer.shapes.length?.6:1;return[r.a.createElement("li",{key:1,className:Ke.a.Layer,onClick:this.props.onLayerClicked,onDoubleClick:this.props.onLayerDoubleClicked},r.a.createElement("div",{className:Ke.a.LayerSelectionBox,onClick:this.props.onAffectedBoxClicked},r.a.createElement("h4",{className:Ke.a.LayerSelectionMark,style:{opacity:n,color:t}},"\u2713")),r.a.createElement("div",{className:Ke.a.LayerNameBox,style:{backgroundColor:a,opacity:o}},r.a.createElement("h4",{ref:"layerName",title:this.props.layer.name,tabIndex:"1"},this.props.layer.name))),r.a.createElement(xe,{key:2,showPopup:this.props.layer.edited,closePopup:this.props.onEscapeLayerEditForm},r.a.createElement(He,{layer:this.props.layer,onSubmitLayerEditForm:this.props.onSubmitLayerEditForm,onEscapeLayerEditForm:this.props.onEscapeLayerEditForm}))]}}]),t}(n.Component),qe=a(140),$e=a.n(qe),et=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).height=0,a.handleKeyDown=function(e){if(e.target.parentElement.parentElement&&e.target.parentElement.parentElement.parentElement&&e.target.parentElement.parentElement.parentElement.id&&"layersList"===e.target.parentElement.parentElement.parentElement.id)switch(e.code){case"ArrowRight":case"ArrowDown":a.props.setAffectedNextLayer();break;case"ArrowLeft":case"ArrowUp":a.props.setAffectedPrevLayer()}},a.onLayerListClicked=function(){a.forceUpdate()},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){this.height=this.refs.layersComponent.clientHeight}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:$e.a["App-layers"],ref:"layersComponent",onClick:this.onLayerListClicked},r.a.createElement(Ve,{onAddLayerButtonClicked:function(){return e.props.onAddLayerButtonClicked(e.props.stage)},onEditLayerButtonClicked:this.props.onEditLayerButtonClicked,onDeleteLayerButtonClicked:this.props.onDeleteLayerButtonClicked,onSortLayersButtonClicked:this.props.onSortLayersButtonClicked}),r.a.createElement("ul",{id:"layersList",style:{maxHeight:.82*(this.height-40)}},this.props.layers.map(function(t){return r.a.createElement(Je,{key:t.name,layer:t,onLayerClicked:function(){return e.props.onLayerClicked(t)},onAffectedBoxClicked:function(a){return e.props.onAffectedBoxClicked(a,t)},onSubmitLayerEditForm:e.props.onSubmitLayerEditForm,onEscapeLayerEditForm:e.props.onEscapeLayerEditForm})})))}}]),t}(n.Component),tt=Object(h.b)(function(e){return{layers:e.layers,stage:e.app.stage}},function(e){return{onAddLayerButtonClicked:function(t){return e(function(e){return{type:"ADD_LAYER_BUTTON_PRESSED",stage:e}}(t))},onEditLayerButtonClicked:function(){return e({type:"OPEN_LAYER_EDIT_FORM_PRESSED"})},onDeleteLayerButtonClicked:function(){return e({type:"DELETE_LAYER_BUTTON_PRESSED"})},onSortLayersButtonClicked:function(){return e({type:"SORT_LAYERS_BUTTON_PRESSED"})},onLayerClicked:function(t){return e(Se(t))},onAffectedBoxClicked:function(t,a){return e(function(e,t){return e.stopPropagation(),{type:"TOGGLE_AFFECTED_LAYER_PRESSED",layer:t}}(t,a))},onSubmitLayerEditForm:function(t){return e(function(e){return{type:"SUBMIT_LAYER_EDIT_FORM_PRESSED",newLayer:e}}(t))},onEscapeLayerEditForm:function(){return e({type:"ESCAPE_LAYER_EDIT_FORM_PRESSED"})},setAffectedNextLayer:function(){return e({type:"LAYERS_LIST_ARROW_DOWN_PRESSED"})},setAffectedPrevLayer:function(){return e({type:"LAYERS_LIST_ARROW_UP_PRESSED"})}}})(et),at=a(142),nt=a.n(at),rt=function(){return r.a.createElement("aside",{className:nt.a["App-aside"]},r.a.createElement("h5",null,"\xa0"))},ot=a(144),st=a.n(ot),it=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={name:""},a.handleChange=function(e){var t=e.target.value;a.setState({name:t}),a.props.updateDocumentName(t)},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:st.a.DocumentName},r.a.createElement("input",{type:"text",placeholder:"Document Name",value:this.state.name,onChange:this.handleChange}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{name:e.name}}}]),t}(n.Component),lt=Object(h.b)(function(e){e.app;return{document:e.cloudStorage.document}},function(e){return{pasteDataFromBuffer:function(t){return e({type:"DATA_FROM_BUFFER_PASTED",data:t.clipboardData})},updateDocumentName:function(t){return e(function(e){return{type:"DOCUMENT_NAME_UPDATED",name:e}}(t))}}})(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(it,{name:e.document.name,updateDocumentName:e.updateDocumentName}),r.a.createElement("div",{className:"App-body",onPaste:e.pasteDataFromBuffer},r.a.createElement(We,{history:e.history,onManageCloudStorageButtonClicked:e.onManageCloudStorageButtonClicked}),r.a.createElement(tt,null),r.a.createElement(rt,null)))}),ct=a(146),ut=a.n(ct),pt=a(148),dt=a.n(pt),ht=a(149),mt=a.n(ht),ft=function(){return r.a.createElement("div",{className:mt.a.Logo},r.a.createElement("img",{src:dt.a,alt:"Debug Viewer Logo"}))},yt=a(166),vt=a(151),gt=a.n(vt),Et=function(){return r.a.createElement("ul",{className:gt.a.Navigation},r.a.createElement("li",null,r.a.createElement(yt.a,{to:"/",exact:!0},r.a.createElement("h4",null,"Editor"))),r.a.createElement("li",null,r.a.createElement(yt.a,{to:"/documents"},r.a.createElement("h4",null,"Cloud Storage"))))},St=Object(d.a)(function(e){var t="/documents"===e.location.pathname?ut.a["App-header-documents-page"]:ut.a["App-header"];return r.a.createElement("header",{className:t},r.a.createElement(ft,null),r.a.createElement(Et,null),"/documents"===e.location.pathname?r.a.createElement("hr",null):null)}),bt=(a(155),R.a.Box),Ot=function(){function e(){Object(o.a)(this,e),this.filename="",this.title="",this.profiles=[],this.materials=[],this.shapes=[]}return Object(s.a)(e,[{key:"box",get:function(){var e=new bt,t=!0,a=!1,n=void 0;try{for(var r,o=this.profiles[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;e.merge(s.box)}}catch(E){a=!0,n=E}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}var i=!0,l=!1,c=void 0;try{for(var u,p=this.materials[Symbol.iterator]();!(i=(u=p.next()).done);i=!0){var d=u.value;e.merge(d.box)}}catch(E){l=!0,c=E}finally{try{i||null==p.return||p.return()}finally{if(l)throw c}}var h=!0,m=!1,f=void 0;try{for(var y,v=this.shapes[Symbol.iterator]();!(h=(y=v.next()).done);h=!0){var g=y.value;e.merge(g.box)}}catch(E){m=!0,f=E}finally{try{h||null==v.return||v.return()}finally{if(m)throw f}}return e}}]),e}(),At=R.a.Point,_t=R.a.Segment,Ct=R.a.Arc,Lt=R.a.Polygon,kt=R.a.vector,wt=1016e4,Dt=10160;function Tt(e){return Math.round(Number(e)*wt,0)}function Mt(e){return Math.round(Number(e)*Dt,0)}function Nt(e,t){for(var a,n,r=[],o=t,s=e[o],i=s.split(" "),l=new At(Tt(i[1]),Tt(i[2])),c=!1;;){switch((i=(s=e[o]).split(" "))[0]){case"OS":a=new At(Tt(i[1]),Tt(i[2])),r.push(new _t(l,a)),l=a.clone();break;case"OC":a=new At(Tt(i[1]),Tt(i[2])),n=new At(Tt(i[3]),Tt(i[4]));var u="Y"===i[5]?R.a.CW:R.a.CCW,p=kt(n,l).slope,d=kt(n,a).slope;R.a.Utils.EQ(p,d)&&(d+=2*Math.PI,u=!0);var h=kt(n,l).length;r.push(new Ct(n,h,p,d,u)),l=a.clone();break;case"OE":c=!0}if(c)break;o++}return r}function It(e,t){var a=e.split(" "),n=new At(Tt(a[1]),Tt(a[2])),r=new At(Tt(a[3]),Tt(a[4])),o=new _t(n,r),s=t[Number(a[5])];return o.aperture=s,o}function xt(e,t){var a=e.split(" "),n=new At(Tt(a[1]),Tt(a[2])),r=new At(Tt(a[3]),Tt(a[4])),o=new At(Tt(a[5]),Tt(a[6])),s="Y"===a[10]?R.a.CW:R.a.CCW,i=kt(o,n).slope,l=kt(o,r).slope;R.a.Utils.EQ(i,l)&&(l+=2*Math.PI,s=!0);var c=kt(o,n).length,u=new Ct(o,c,i,l,s),p=t[Number(a[7])];return u.aperture=p,u}function Pt(e,t){var a=new Ot;a.filename=e;for(var n,r=t.match(/[^\r\n]+/g),o=[],s=0;s<r.length;s++){var i=r[s],l=i.split(" ");if("$"!==l[0].substr(0,1))switch(l[0]){case"S":n=new Lt;var c=i.split(" ")[1];n.polarity=c;break;case"OB":var u=s,p=Nt(r,u);n.addFace(p),s=u+p.length+1;break;case"SE":a.shapes.push(n);break;case"L":var d=It(i,o);a.shapes.push(d);break;case"A":var h=xt(i,o);a.shapes.push(h)}else{var m=Number(l[0].substr(1)),f=Mt(l[1].substr(1));o[m]=f}}return a}var jt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={done:!1},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;if(this.props.stage&&!this.state.done){var t=this.props.stage,a=this.props.layers,n=ve.newLayer(t,a);n.color=ve.getNextColor(a),n.name="features",n.title="features",n.affected=!0,n.displayed=!0,f()("https://gist.githubusercontent.com/alexbol99/825fdf2dd508467cc852eb22aa36183d/raw/d10e853338afd8294eeb3ffdebe3bc380477a978/features").then(function(a){var r=Pt("features",a.data),o=!0,s=!1,i=void 0;try{for(var l,c=r.shapes[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value,p=new me(u,void 0,u.label);n.add(p)}}catch(d){s=!0,i=d}finally{try{o||null==c.return||c.return()}finally{if(s)throw i}}e.props.panAndZoomToShape(t,n),e.props.addNewLayer(n),e.props.asyncOperationEnded()}),this.setState({done:!0}),this.props.asyncOperationStarted()}}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return null}}]),t}(n.Component),Rt=Object(h.b)(function(e){return{layers:e.layers,stage:e.app.stage}},function(e){return{panAndZoomToShape:function(t,a){return e({type:"PAN_AND_ZOOM_TO_SHAPE",stage:t,shape:a})},addNewLayer:function(t){return e({type:"ADD_NEW_LAYER",layer:t})},asyncOperationStarted:function(){return e({type:"ASYNC_OPERATION_STARTED"})},asyncOperationEnded:function(){return e({type:"ASYNC_OPERATION_ENDED"})}}})(jt),Bt=a(157),Ut=a.n(Bt),Ft=R.a.point,Yt=R.a.arc,Wt=R.a.Polygon,Xt=Ut.a.subtract,zt=Ut.a.intersect,Vt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={done:!1},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){if(this.props.stage&&!this.state.done){var e=this.props.stage,t=this.props.layers,a=ve.newLayer(e,t);a.color=ve.getNextColor(t),a.name="features",a.title="features",a.affected=!0,a.displayed=!0;var n=new Wt;n.addFace([Ft(6,6),Ft(6,114),Ft(114,114),Ft(114,6)]),t[t.length]=ve.newLayer(e,t).add(n);var r=new Wt;r.addFace([Yt(Ft(0,0),84.5779281026111,0,2*Math.PI,R.a.CW)]),t[t.length]=ve.newLayer(e,t).add(r),n=zt(n,r),t[t.length]=ve.newLayer(e,t).add(n),(r=new Wt).addFace([Yt(Ft(0,0),84.49938828627135,0,2*Math.PI,R.a.CW)]),t[t.length]=ve.newLayer(e,t).add(r),n=Xt(n,r),t[t.length]=ve.newLayer(e,t).add(n),(r=new Wt).addFace([Yt(Ft(0,120),84.8710637077582,0,2*Math.PI,R.a.CW)]),t[t.length]=ve.newLayer(e,t).add(r),n=zt(n,r),t[t.length]=ve.newLayer(e,t).add(n),(r=new Wt).addFace([Yt(Ft(0,120),84.79252389141845,0,2*Math.PI,R.a.CW)]),t[t.length]=ve.newLayer(e,t).add(r),n=Xt(n,r),t[t.length]=ve.newLayer(e,t).add(n),(r=new Wt).addFace([Yt(Ft(120,120),85.20624291591454,0,2*Math.PI,R.a.CW)]),t[t.length]=ve.newLayer(e,t).add(r),n=zt(n,r),t[t.length]=ve.newLayer(e,t).add(n),(r=new Wt).addFace([Yt(Ft(120,120),85.1277030995748,0,2*Math.PI,R.a.CW)]),t[t.length]=ve.newLayer(e,t).add(r),t[0].color=ve.getNextColor(t),t[0].affected=!0,t[0].displayed=!0,this.props.panAndZoomToShape(e,t[0]),this.setState({done:!0})}}},{key:"render",value:function(){return null}}]),t}(n.Component),Gt=Object(h.b)(function(e){return{layers:e.layers,stage:e.app.stage}},function(e){return{panAndZoomToShape:function(t,a){return e({type:"PAN_AND_ZOOM_TO_SHAPE",stage:t,shape:a})},addNewLayer:function(t){return e({type:"ADD_NEW_LAYER",layer:t})}}})(Vt),Qt=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.applySkeletonRecognition()}},{key:"render",value:function(){return null}}]),t}(n.Component),Ht=Object(h.b)(function(e){return{layers:e.layers,stage:e.app.stage}},function(e){return{applySkeletonRecognition:function(){return e({type:"SKELETON_RECOGNITION_URI"})}}})(Qt),Zt=a(52),Kt=a(51),Jt=R.a.Vector,qt=R.a.Segment,$t=R.a.Arc,ea=R.a.Line,ta=R.a.Box,aa=R.a.Polygon,na=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"apply",value:function(t,a){for(var n=Number.POSITIVE_INFINITY,r=Object(Kt.a)(a.edges),o=0;o<r.length;o++){var s=r[o],i=e.edge2polygon(s,t);i<n&&(n=i)}return n}},{key:"edge2polygon",value:function(t,a){var n=t.shape.box,r=new ta(Number.NEGATIVE_INFINITY,n.ymin,Number.POSITIVE_INFINITY,n.ymax),o=Number.POSITIVE_INFINITY,s=a.edges.search(r),i=!0,l=!1,c=void 0;try{for(var u,p=s[Symbol.iterator]();!(i=(u=p.next()).done);i=!0){var d=u.value,h=void 0;d.shape instanceof qt&&t.shape instanceof qt?h=e.segment2segment(d.shape,t.shape):d.shape instanceof $t&&t.shape instanceof qt?h=e.segment2arc(t.shape,d.shape):d.shape instanceof qt&&t.shape instanceof $t?h=e.segment2arc(d.shape,t.shape):d.shape instanceof $t&&t.shape instanceof $t&&(h=e.arc2arc(d.shape,t.shape)),h<o&&(o=h)}}catch(m){l=!0,c=m}finally{try{i||null==p.return||p.return()}finally{if(l)throw c}}return o}},{key:"point2shape",value:function(e,t){var a=new ea(e,new Jt(0,1)).intersect(t),n=Number.POSITIVE_INFINITY,r=!0,o=!1,s=void 0;try{for(var i,l=a[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value,u=e.distanceTo(c),p=Object(Zt.a)(u,2),d=p[0];p[1];d<n&&(n=d)}}catch(h){o=!0,s=h}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}return n}},{key:"segment2segment",value:function(t,a){var n=Number.POSITIVE_INFINITY,r=!0,o=!1,s=void 0;try{for(var i,l=t.vertices[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value,u=e.point2shape(c,a);u<n&&(n=u)}}catch(g){o=!0,s=g}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}var p=!0,d=!1,h=void 0;try{for(var m,f=a.vertices[Symbol.iterator]();!(p=(m=f.next()).done);p=!0){var y=m.value,v=e.point2shape(y,t);v<n&&(n=v)}}catch(g){d=!0,h=g}finally{try{p||null==f.return||f.return()}finally{if(d)throw h}}return n}},{key:"segment2arc",value:function(t,a){for(var n,r=Number.POSITIVE_INFINITY,o=new Jt(t.start,t.end),s=[(o=o.normalize()).rotate90CCW().multiply(a.r),o.rotate90CW().multiply(a.r)],i=0;i<s.length;i++){var l=s[i],c=a.center.translate(l);c.on(a)&&(n=e.point2shape(c,t))<r&&(r=n)}var u=!0,p=!1,d=void 0;try{for(var h,m=a.vertices[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var f=h.value,y=e.point2shape(f,t);y<r&&(r=y)}}catch(_){p=!0,d=_}finally{try{u||null==m.return||m.return()}finally{if(p)throw d}}var v=!0,g=!1,E=void 0;try{for(var S,b=t.vertices[Symbol.iterator]();!(v=(S=b.next()).done);v=!0){var O=S.value,A=e.point2shape(O,a);A<r&&(r=A)}}catch(_){g=!0,E=_}finally{try{v||null==b.return||b.return()}finally{if(g)throw E}}return r}},{key:"arc2arc",value:function(t,a){var n,r=Number.POSITIVE_INFINITY,o=t.clone();if(o.r+=a.r,(n=e.point2shape(a.center,o))<r){var s=t.distanceTo(e.translateArc(a,new Jt(-n,0))),i=Object(Zt.a)(s,2),l=i[0];i[1];R.a.Utils.EQ_0(l)&&(r=n)}if(R.a.Utils.GE(t.r,a.r)){var c=t.clone();if(c.r-=a.r,(n=e.point2shape(a.center,c))<r){var u=t.distanceTo(e.translateArc(a,new Jt(-n,0))),p=Object(Zt.a)(u,2),d=p[0];p[1];R.a.Utils.EQ_0(d)&&(r=n)}}if(R.a.Utils.LT(t.r,a.r)){var h=a.clone();if(h.r-=t.r,(n=e.point2shape(t.center,h))<r){var m=t.distanceTo(e.translateArc(a,new Jt(-n,0))),f=Object(Zt.a)(m,2),y=f[0];f[1];R.a.Utils.EQ_0(y)&&(r=n)}}var v=!0,g=!1,E=void 0;try{for(var S,b=t.vertices[Symbol.iterator]();!(v=(S=b.next()).done);v=!0){var O=S.value,A=e.point2shape(O,a);A<r&&(r=A)}}catch(M){g=!0,E=M}finally{try{v||null==b.return||b.return()}finally{if(g)throw E}}var _=!0,C=!1,L=void 0;try{for(var k,w=a.vertices[Symbol.iterator]();!(_=(k=w.next()).done);_=!0){var D=k.value,T=e.point2shape(D,t);T<r&&(r=T)}}catch(M){C=!0,L=M}finally{try{_||null==w.return||w.return()}finally{if(C)throw L}}return r}},{key:"translateArc",value:function(e,t){var a=e.clone();return a.pc=a.pc.translate(t),a}},{key:"translate",value:function(e,t){var a=new aa,n=!0,r=!1,o=void 0;try{for(var s,i=e.faces[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var l=s.value,c=[],u=!0,p=!1,d=void 0;try{for(var h,m=l[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var f=h.value;if(f.shape instanceof qt)c.push(new qt(f.shape.ps.translate(t),f.shape.pe.translate(t)));else if(f.shape instanceof $t){var y=f.shape.clone();y.pc=f.shape.pc.translate(t),c.push(y)}}}catch(v){p=!0,d=v}finally{try{u||null==m.return||m.return()}finally{if(p)throw d}}a.addFace(c)}}catch(v){r=!0,o=v}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}}]),e}();na.Flatten=R.a;var ra=na,oa=R.a.vector,sa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={done:!1,data:[]},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;if(this.props.stage&&!this.state.done){var t=this.props.stage,a=this.props.layers,n=ve.newLayer(t,a);n.color=ve.getNextColor(a),n.name="collision_demo",n.title="collision_demo",n.affected=!0,n.displayed=!0,f()("https://gist.githubusercontent.com/alexbol99/81893d40ec5eaa00d0336c35e069dd73/raw/b9328a4c6d7d6a44f375c68b4ec207690f40fd19/Block_53388_2parts_Cont.txt").then(function(a){var r=e.props.parser.parseToPolygon(a.data);n.add(r);var o=oa(2*(r.box.xmax-r.box.xmin),0),s=r.translate(o);n.add(s);var i=ra.apply(s,r),l=s.translate(oa(-i,0));n.add(l),e.props.panAndZoomToShape(t,n),e.props.addNewLayer(n),e.props.applyCollisionDemo(),e.props.asyncOperationEnded()}),this.setState({done:!0}),this.props.asyncOperationStarted()}}},{key:"render",value:function(){return null}}]),t}(n.Component),ia=Object(h.b)(function(e){return{layers:e.layers,stage:e.app.stage,parser:e.app.parser}},function(e){return{panAndZoomToShape:function(t,a){return e({type:"PAN_AND_ZOOM_TO_SHAPE",stage:t,shape:a})},addNewLayer:function(t){return e({type:"ADD_NEW_LAYER",layer:t})},applyCollisionDemo:function(){return e({type:"COLLISION_DEMO_URI"})},asyncOperationStarted:function(){return e({type:"ASYNC_OPERATION_STARTED"})},asyncOperationEnded:function(){return e({type:"ASYNC_OPERATION_ENDED"})}}})(sa),la=a(158),ca=a.n(la),ua=function(){return r.a.createElement(Me,null,r.a.createElement("div",{className:ca.a.BackDrop},r.a.createElement("div",{className:ca.a.Loader},"Loading ...")))},pa=a(160),da=a.n(pa),ha=a(162),ma=a.n(ha),fa=a(153),ya=function(e){var t=e.id,a=e.document,n=e.deleteDocumentFromDatabase,o=e.documentSelectedFromList;return r.a.createElement("div",{className:ma.a.DocumentComponentCell},r.a.createElement(fa.a,{to:"/documents/"+t,onClick:function(){o({id:t,name:a.name,owner:a.owner,lastUpdated:a.lastUpdated})}},r.a.createElement("div",null,r.a.createElement("img",{src:a.dataURL,alt:a.name,width:"400px"}))),r.a.createElement("div",{className:ma.a.DocumentComponentCellBottom},r.a.createElement("div",null,r.a.createElement("h4",null,a.name),r.a.createElement("h6",null,"Last updated: ",a.lastUpdated)),r.a.createElement("button",{onClick:function(e){e.stopPropagation(),n(t)}},"Delete")))},va=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).deleteDocumentFromDatabase=function(e){S(e).then(function(t){a.props.deleteDocumentFromDatabaseSucceed(e),a.props.asyncOperationEnded()}),a.props.asyncOperationStarted()},a.componentDidMount=function(){b().then(function(e){a.props.requestFetchDocumentsFromDatabaseSucceed(e.data),a.props.asyncOperationEnded()}),0===a.props.documentsList.length&&a.props.asyncOperationStarted()},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:da.a.DocumentComponent},r.a.createElement("h2",null,"My Cloud Documents"),r.a.createElement("div",{className:da.a.DocumentComponentGrid},Object.keys(this.props.documentsList).map(function(t){var a=e.props.documentsList[t];return r.a.createElement(ya,{key:t,id:t,document:a,deleteDocumentFromDatabase:e.deleteDocumentFromDatabase,documentSelectedFromList:e.props.documentSelectedFromList})})))}}]),t}(n.Component),ga=Object(h.b)(function(e){return{documentsList:e.cloudStorage.documentsList}},function(e){return{asyncOperationStarted:function(){return e({type:"ASYNC_OPERATION_STARTED"})},asyncOperationEnded:function(){return e({type:"ASYNC_OPERATION_ENDED"})},requestFetchDocumentsFromDatabaseSucceed:function(t){return e(function(e){return{type:"REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED",documentsList:e}}(t))},deleteDocumentFromDatabaseSucceed:function(t){return e(function(e){return{type:"DELETE_DOCUMENT_FROM_DATABASE_SUCCEED",id:e}}(t))},documentSelectedFromList:function(t){return e(function(e){return{type:"DOCUMENT_SELECTED_FROM_LIST",document:e}}(t))}}})(va),Ea=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(St,{title:this.props.title,version:this.props.version}),r.a.createElement(u.a,null,r.a.createElement(p.a,{path:"/documents",exact:!0,component:ga}),r.a.createElement(p.a,{path:"/",component:lt}),r.a.createElement(p.a,{path:"/demo",component:Rt}),r.a.createElement(p.a,{path:"/boolean-test",component:Gt}),r.a.createElement(p.a,{path:"/skeleton",component:Ht}),r.a.createElement(p.a,{path:"/collision-distance",component:ia})),this.props.showSpinner?r.a.createElement(ua,null):null)}}]),t}(n.Component),Sa=Object(d.a)(Object(h.b)(function(e){var t=e.app,a=e.cloudStorage;return{title:t.title,version:t.version,showSpinner:t.showSpinner,document:a.document}},null)(Ea)),ba=a(30),Oa=a(169),Aa=R.a.Point,_a=R.a.Segment,Ca=R.a.Arc,La=R.a.Polygon,ka=R.a.vector,wa=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"parseToWatchArray",value:function(e){var t=e.match(/[^\r\n]+/g),a=[],n=!0,r=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var l=s.value;a.push(l.substring(l.indexOf("{")))}}catch(c){r=!0,o=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}},{key:"parseToSegment",value:function(e){var t=e.match(/\{([^)]+)\}/)[1].split(" "),a=t[0].split("=")[1].split(","),n=new Aa(parseInt(a[0],10),parseInt(a[1],10)),r=t[1].split("=")[1].split(","),o=new Aa(parseInt(r[0],10),parseInt(r[1],10));return new _a(n,o)}},{key:"parseToArc",value:function(e){var t=e.match(/\{([^)]+)\}/)[1].split(" "),a=t[0].split("=")[1].split(","),n=new Aa(parseInt(a[0],10),parseInt(a[1],10)),r=t[1].split("=")[1].split(","),o=new Aa(parseInt(r[0],10),parseInt(r[1],10)),s=t[2].split("=")[1].split(","),i=new Aa(parseInt(s[0],10),parseInt(s[1],10)),l="0"===t[3].split("=")[1],c=ka(i,n).slope,u=ka(i,o).slope;R.a.Utils.EQ(c,u)&&(u+=2*Math.PI);var p=ka(i,n).length;return new Ca(i,p,c,u,l)}},{key:"parseToPolygon",value:function(e){for(var t=new La,a=e.match(/[^\r\n]+/g),n=0;n<a.length;n++){var r=a[n];if(r.search("mat_cont_poly_struc")>=0){for(var o=r.match(/\{([^)]+)\}/)[1].split(" ")[0].split("=")[1],s=parseInt(o,10),i=[],l=n+2;l<n+2+s;l++)if((r=a[l]).search("mat_seg_struc")>=0){var c=this.parseToSegment(r);i.push(c)}else if(r.search("mat_curve_struc")>=0){var u=this.parseToArc(r);i.push(u)}t.addFace(i)}}return t}},{key:"parseToPoints",value:function(e){var t=[],a=e.match(/[^\r\n]+/g),n=!0,r=!1,o=void 0;try{for(var s,i=a[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var l=s.value;if(l.search("point_struc")>=0){var c=l.match(/\{([^)]+)\}/)[1].split("=")[1].split(","),u=new Aa(parseInt(c[0],10),parseInt(c[1],10));u.label=l.split(/\s+/)[1],t.push(u)}}}catch(p){r=!0,o=p}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return t}},{key:"parseToSegmentsArcs",value:function(e){var t=[],a=e.match(/[^\r\n]+/g),n=!0,r=!1,o=void 0;try{for(var s,i=a[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var l=s.value;if(l.search("mat_seg_struc")>=0){var c=this.parseToSegment(l);t.push(c)}else if(l.search("mat_curve_struc")>=0){var u=this.parseToArc(l);t.push(u)}}}catch(p){r=!0,o=p}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return t}},{key:"parse",value:function(e){var t=this.parseToPolygon(e);if(t.edges.size>0&&t.faces.size>0)return[t];var a=this.parseToPoints(e);if(a.length>0)return a;var n=this.parseToSegmentsArcs(e);return n.length>0?n:void 0}}]),e}(),Da=[{name:"pixels",decimals:0,divisor:1},{name:"inch",decimals:7,divisor:1016e4},{name:"mm",decimals:6,divisor:4e5}],Ta={title:"Debug Viewer",version:"2.0.0",build:"",units:"pixels",decimals:0,divisor:1,parser:new wa,widthOn:!0,displayVertices:!1,displayLabels:!0,measurePointsActive:!1,zoomFactor:void 0,originX:void 0,originY:void 0,showAboutPopup:!1,importDataToNewLayer:!0,showSkeletonRecognitionButton:!1,applySkeletonRecognition:!1,stage:null,showSpinner:!1},Ma=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ta,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_STAGE_CREATED":return Object.assign({},e,{stage:t.stage,zoomFactor:t.stage.zoomFactor*t.stage.resolution,originX:t.stage.origin.x,originY:t.stage.origin.y});case"STAGE_UNMOUNTED":return Object.assign({},e,{stage:null,zoomFactor:void 0,originX:void 0,originY:void 0});case"MOUSE_WHEEL_MOVE_ON_STAGE":case"PAN_AND_ZOOM_TO_SHAPE":return Object.assign({},e,{zoomFactor:t.stage.zoomFactor*t.stage.resolution,originX:t.stage.origin.x,originY:t.stage.origin.y});case"MOUSE_MOVED_ON_STAGE":return Object.assign({},e,{originX:t.stage.origin.x,originY:t.stage.origin.y});case"TOGGLE_UNITS_CLICKED":var a=Da.findIndex(function(t){return e.units===t.name}),n=Da[(a+1)%3];return Object.assign({},e,{units:n.name,decimals:n.decimals,divisor:n.divisor});case"TOGGLE_WIDTH_MODE_CLICKED":return Object.assign({},e,{widthOn:!e.widthOn,displayVertices:!!e.widthOn&&e.displayVertices});case"TOGGLE_DISPLAY_VERTICES_CLICKED":return e.displayVertices?Object.assign({},e,{displayVertices:!1}):Object.assign({},e,{widthOn:!1,displayVertices:!0});case"TOGGLE_DISPLAY_LABELS_CLICKED":return Object.assign({},e,{displayLabels:!e.displayLabels});case"TOGGLE_ABOUT_POPUP_CLICKED":return Object.assign({},e,{showAboutPopup:!e.showAboutPopup});case"PAN_BY_DRAG_BUTTON_CLICKED":return Object.assign({},e,{measurePointsActive:!1});case"MEASURE_POINTS_BUTTON_PRESSED":return Object.assign({},e,{measurePointsActive:!0});case"MEASURE_SHAPES_BUTTON_PRESSED":return Object.assign({},e,{measurePointsActive:!1});case"MOUSE_DOWN_ON_STAGE":return e.hoveredShape?e:Object.assign({},e,{measureShapesFirstClick:!0,firstMeasuredShape:null,firstMeasuredLayer:null,secondMeasuredShape:null,secondMeasuredLayer:null,distance:void 0,shortestSegment:null});case"SKELETON_RECOGNITION_URI":return Object.assign({},e,{showSkeletonRecognitionButton:!0});case"SKELETON_RECOGNITION_BUTTON_PRESSED":return Object.assign({},e,{applySkeletonRecognition:!0});case"ASYNC_OPERATION_STARTED":return Object.assign({},e,{showSpinner:!0});case"ASYNC_OPERATION_ENDED":return Object.assign({},e,{showSpinner:!1});case"AABB_TREE_NEXT_LEVEL":default:return e}},Na=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=t.find(function(e){return e.affected}),r=t.findIndex(function(e){return e.affected});switch(a.type){case"ADD_LAYER_BUTTON_PRESSED":return e=ve.newLayer(a.stage,t),Object(Kt.a)(t).concat([e]);case"ADD_NEW_LAYER":return Object(Kt.a)(t).concat([a.layer]);case"DELETE_LAYER_BUTTON_PRESSED":return n?ve.delete(t,n):t;case"CLEAR_ALL_BUTTON_CLICKED":return[];case"SORT_LAYERS_BUTTON_PRESSED":return ve.sort(t);case"TOGGLE_DISPLAY_LAYER_PRESSED":var o="";if(!a.layer.displayed&&""===(o=ve.getNextColor(t)))return;return t.map(function(e){if(e!==a.layer)return a.layer.displayed?e:e.setAffected(!1);var t=e.toggleDisplayed(o);return t.affected=t.displayed,t});case"TOGGLE_AFFECTED_LAYER_PRESSED":return t.map(function(e){return e!==a.layer?e.setAffected(!1):e.setAffected(!e.affected)});case"OPEN_LAYER_EDIT_FORM_PRESSED":return t.map(function(e){return e!==n?e:e.setEdited(!0)});case"SUBMIT_LAYER_EDIT_FORM_PRESSED":return t.map(function(e){return e.edited?e.setNameAndTitle(a.newLayer.name,a.newLayer.title):e});case"ESCAPE_LAYER_EDIT_FORM_PRESSED":return t.map(function(e){return e.edited?e.setEdited(!1):e});case"LAYERS_LIST_ARROW_DOWN_PRESSED":if(r===t.length-1)return t;var s=t[r+1];return t.map(function(e){if(e===n){var t=e.toggleDisplayed("");return t.affected=!1,t}if(e===s){var a=n.color,r=e.toggleDisplayed(a);return r.affected=!0,r}return e});case"LAYERS_LIST_ARROW_UP_PRESSED":if(0===r)return t;var i=t[r-1];return t.map(function(e){if(e===n){var t=e.toggleDisplayed("");return t.affected=!1,t}if(e===i){var a=e.toggleDisplayed(n.color);return a.displayed=!0,a.affected=!0,a}return e});default:return t}},Ia={x:0,y:0,startX:void 0,startY:void 0},xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOUSE_MOVED_ON_STAGE":return Object.assign({},e,{x:t.x,y:t.y});case"MOUSE_DOWN_ON_STAGE":return Object.assign({},e,{startX:t.x,startY:t.y});case"MOUSE_UP_ON_STAGE":return Object.assign({},e,{startX:void 0,startY:void 0});default:return e}},Pa={measureShapesActive:!1,measureShapesFirstClick:!0,hoveredShape:null,firstMeasuredShape:null,secondMeasuredShape:null,firstMeasuredLayer:null,secondMeasuredLayer:null,distance:void 0,shortestSegment:null},ja=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MEASURE_SHAPES_BUTTON_PRESSED":return Object.assign({},Pa,{measureShapesActive:!0});case"PAN_BY_DRAG_BUTTON_CLICKED":case"MEASURE_POINTS_BUTTON_PRESSED":return Object.assign({},Pa);case"MOUSE_ROLL_OVER_SHAPE":return Object.assign({},e,{hoveredShape:e.measureShapesActive?t.shape:null});case"MOUSE_ROLL_OUT_SHAPE":return Object.assign({},e,{hoveredShape:null});case"MOUSE_CLICKED_ON_SHAPE":if(!e.measureShapesActive)return e;if(e.measureShapesFirstClick)return Object.assign({},e,{firstMeasuredShape:t.shape,firstMeasuredLayer:t.layer,secondMeasuredShape:null,secondMeasuredLayer:null,measureShapesFirstClick:!1,distance:void 0,shortestSegment:null});if(t.shape===e.firstMeasuredShape)return e;var a,n,r=e.firstMeasuredShape.geom,o=t.shape.geom,s=R.a.Distance.distance(r,o),i=Object(Zt.a)(s,2);return a=i[0],n=i[1],Object.assign({},e,{secondMeasuredShape:t.shape,secondMeasuredLayer:t.layer,measureShapesFirstClick:!0,distance:a,shortestSegment:n});case"MOUSE_DOWN_ON_STAGE":return e.hoveredShape?e:Object.assign({},e,{measureShapesFirstClick:!0,firstMeasuredShape:null,firstMeasuredLayer:null,secondMeasuredShape:null,secondMeasuredLayer:null,distance:void 0,shortestSegment:null});case"DELETE_LAYER_BUTTON_PRESSED":return t.layer===e.firstMeasuredLayer||t.layer===e.secondMeasuredLayer?Object.assign({},Pa):e;case"TOGGLE_DISPLAY_LAYER_PRESSED":return!t.layer.displayed||t.layer!==e.firstMeasuredLayer&&t.layer!==e.secondMeasuredLayer?e:Object.assign({},Pa);default:return e}},Ra=a(164),Ba=a(165),Ua={id:void 0,name:"",owner:"Alex Bol",lastUpdated:void 0},Fa={document:Ua,documentsList:{}};var Ya=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED":case"REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED":return Object(Ba.a)({},e,{document:{id:t.id,name:t.name,owner:t.owner,lastUpdated:t.timestamp}});case"REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED":return Object(Ba.a)({},e,{document:Object(Ba.a)({},e.document,{lastUpdated:t.timestamp})});case"DOCUMENT_NAME_UPDATED":return Object(Ba.a)({},e,{document:Object(Ba.a)({},e.document,{name:t.name})});case"DELETE_DOCUMENT_FROM_DATABASE_SUCCEED":var a=e.documentsList,n=(a[t.id],Object(Ra.a)(a,[t.id]));return Object(Ba.a)({},e,{document:e.document.id===t.id?Ua:e.document,documentsList:n});case"DOCUMENT_SELECTED_FROM_LIST":return Object(Ba.a)({},e,{document:t.document});case"CLEAR_ALL_BUTTON_CLICKED":return Object(Ba.a)({},e,{document:Ua});case"REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED":return function(e,t){if(null===t||void 0===t)return!0;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var a in e)if(!t.hasOwnProperty(a)||e[a].lastUpdated===t[a].lastUpdated)return!1;return!0}(e.documentsList,t.documentsList)?e:Object(Ba.a)({},e,{documentsList:t.documentsList});default:return e}},Wa=Object(ba.c)({app:Ma,layers:Na,cloudStorage:Ya,measureShapesTool:ja,mouse:xa}),Xa=function(e){e.getState,e.dispatch;return function(e){return function(t){"MOUSE_MOVED_ON_STAGE"!==t.type&&console.log("ACTION: "+t.type,t),e(t)}}},za=R.a.Point,Va=R.a.Segment,Ga=R.a.Arc,Qa=R.a.Polygon,Ha=R.a.vector;function Za(e){for(var t=[],a=Array.from(e),n=0;n<a.length;n++){var r=a[n],o=r.getAttribute("type");if("segment"===o){var s=new za(parseInt(r.getAttribute("xs"),10),parseInt(r.getAttribute("ys"),10)),i=new za(parseInt(r.getAttribute("xe"),10),parseInt(r.getAttribute("ye"),10));t.push(new Va(s,i))}if("curve"===o){var l=new za(parseInt(r.getAttribute("xs"),10),parseInt(r.getAttribute("ys"),10)),c=new za(parseInt(r.getAttribute("xe"),10),parseInt(r.getAttribute("ye"),10)),u=new za(parseInt(r.getAttribute("xc"),10),parseInt(r.getAttribute("yc"),10)),p="no"===r.getAttribute("cw"),d=Ha(u,l).slope,h=Ha(u,c).slope;R.a.Utils.EQ(d,h)&&(h=p?h+2*Math.PI:h-2*Math.PI);var m=Ha(u,l).length;t.push(new Ga(u,m,d,h,p))}}return t}function Ka(e){var t=new Qa,a=e.getAttribute("color");t.style={stroke:a||void 0,fill:a||void 0,alpha:1};var n=e.getAttribute("label");t.label=n;for(var r=e.getElementsByTagName("island"),o=Array.from(r),s=0;s<o.length;s++){var i=o[s].getElementsByTagName("edge");t.addFace(Za(i))}for(var l=e.getElementsByTagName("hole"),c=Array.from(l),u=0;u<c.length;u++){var p=c[u].getElementsByTagName("edge");t.addFace(Za(p))}return t}function Ja(e){var t=new za(parseInt(e.getAttribute("xs"),10),parseInt(e.getAttribute("ys"),10)),a=new za(parseInt(e.getAttribute("xe"),10),parseInt(e.getAttribute("ye"),10)),n=new Va(t,a),r=e.getAttribute("label");return n.label=r,n}function qa(e){var t=new za(parseInt(e.getAttribute("xs"),10),parseInt(e.getAttribute("ys"),10)),a=new za(parseInt(e.getAttribute("xe"),10),parseInt(e.getAttribute("ye"),10)),n=new za(parseInt(e.getAttribute("xc"),10),parseInt(e.getAttribute("yc"),10)),r="yes"===e.getAttribute("cw"),o=Ha(n,t).slope,s=Ha(n,a).slope;R.a.Utils.EQ(o,s)&&(s=r?s+2*Math.PI:s-2*Math.PI);var i=Ha(n,t).length,l=new Ga(n,i,o,s,r),c=e.getAttribute("label");return l.label=c,l}function $a(e){var t=new za(parseInt(e.getAttribute("x"),10),parseInt(e.getAttribute("y"),10)),a=e.getAttribute("label");return t.label=a,t}var en=25.500025,tn=400,an=3.0303;function nn(e){var t=Number(e);return Math.round(t*en*tn,0)}var rn=R.a.point,on=400;function sn(e){return Math.round(Number(e)*on,0)}var ln=function(e,t,a,n,r,o){e.onload=function(e,t,a,n,r){return function(o){var s,i=o.target.result,l=e.name.split("."),c=l[l.length-1];s="xml"===c?function(e,t){var a=new Ot;a.filename=e;var n=(new DOMParser).parseFromString(t,"text/xml"),r=n.getElementsByTagName("title");r&&r.length>0&&(a.title=r[0].firstChild.nodeValue);for(var o=n.getElementsByTagName("profile"),s=Array.from(o),i=0;i<s.length;i++){var l=Ka(s[i]);a.profiles.push(l)}for(var c=n.getElementsByTagName("material"),u=Array.from(c),p=0;p<u.length;p++){var d=Ka(u[p]);a.materials.push(d)}for(var h=n.getElementsByTagName("segment"),m=Array.from(h),f=0;f<m.length;f++){var y=Ja(m[f]);a.shapes.push(y)}for(var v=n.getElementsByTagName("curve"),g=Array.from(v),E=0;E<g.length;E++){var S=qa(g[E]);a.shapes.push(S)}for(var b=n.getElementsByTagName("point"),O=Array.from(b),A=0;A<O.length;A++){var _=$a(O[A]);a.shapes.push(_)}return a}(e.name,i):"csv"===c?function(e,t){var a=new Ot;a.filename=e;for(var n=t.match(/[^\r\n]+/g),r=0;r<n.length;r++){var o=n[r].split(","),s=sn(o[0]),i=sn(o[1]),l=Number(o[2]),c=Number(o[3]),u=rn(s,i);u.nx=l,u.ny=c,a.shapes.push(u)}return a}(e.name,i):"txt"===c?function(e,t){var a=new Ot;a.filename=e;var n=(new wa).parse(t);if(n.length>0){var r=!0,o=!1,s=void 0;try{for(var i,l=n[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value;a.shapes.push(c)}}catch(u){o=!0,s=u}finally{try{r||null==l.return||l.return()}finally{if(o)throw s}}}return a}(e.name,i):Pt(e.name,i);var u=ve.newLayer(t,a);""!==e.name&&(u.name=e.name),u.title=s.title;var p=!0,d=!1,h=void 0;try{for(var m,f=s.profiles[Symbol.iterator]();!(p=(m=f.next()).done);p=!0){var y=m.value;if(y.edges.size>0&&y.faces.size>0){var v=new me(y,void 0,y.label);u.add(v)}}}catch(N){d=!0,h=N}finally{try{p||null==f.return||f.return()}finally{if(d)throw h}}var g=!0,E=!1,S=void 0;try{for(var b,O=s.materials[Symbol.iterator]();!(g=(b=O.next()).done);g=!0){var A=b.value;if(A.edges.size>0&&A.faces.size>0){var _=new me(A,void 0,A.label);u.add(_)}}}catch(N){E=!0,S=N}finally{try{g||null==O.return||O.return()}finally{if(E)throw S}}var C=!0,L=!1,k=void 0;try{for(var w,D=s.shapes[Symbol.iterator]();!(C=(w=D.next()).done);C=!0){var T=w.value,M=new me(T,void 0,T.label);u.add(M)}}catch(N){L=!0,k=N}finally{try{C||null==D.return||D.return()}finally{if(L)throw k}}e===r[0]&&(ve.setAffected(a,u),u.color=ve.getNextColor(a),u.displayed=!0,n({type:"PAN_AND_ZOOM_TO_SHAPE",stage:t,shape:u})),n({type:"ADD_NEW_LAYER",layer:u}),n({type:"ASYNC_OPERATION_ENDED"})}}(t,a,n,r,o),e.readAsText(t),r({type:"ASYNC_OPERATION_STARTED"})},cn=function(e,t,a,n,r,o){e.addEventListener("load",function(){var e=function(e){var t={},a=e.name.split("_"),n=a[0].substr(1),r=a[1]?a[1].substr(1):void 0,o=isNaN(r)?0:nn(r)+9e4,s=isNaN(n)?0:nn(n)-4e4;return t.center=new R.a.Point(o,s),t.width=an*tn*1e3,t.box=new R.a.Box(t.center.x-t.width/2,t.center.y-t.width/2,t.center.x+t.width/2,t.center.y+t.width/2),t}(t);e.uri=this.result;var s=new me(e),i=ve.newLayer(a,n);""!==t.name&&(i.name=t.name),i.add(s),t===o[0]&&(ve.setAffected(n,i),i.color=ve.getNextColor(n),i.displayed=!0,r({type:"PAN_AND_ZOOM_TO_SHAPE",stage:a,shape:i})),r({type:"ADD_NEW_LAYER",layer:i}),r({type:"ASYNC_OPERATION_ENDED"})},!1),e.readAsDataURL(t)},un=function(e,t,a,n,r){if(""===e.type||e.type.match("text.*")||e.type.match("application.*")||e.type.match("image.*")){var o=new FileReader;e.type.match("text.*")||e.type.match("application.*")||e.name.match("features*")?ln(o,e,t,a,n,r):e.type.match("image.*")&&cn(o,e,t,a,n,r)}},pn=function(e){var t=e.dispatch;e.getState;return function(e){return function(a){if("FILENAME_LIST_SELECTED"!==a.type)return e(a);for(var n=a.stage,r=a.layers,o=Array.from(a.files),s=0;s<o.length;s++){var i=o[s];un(i,n,r,t,a.files)}}}},dn=function(e){var t=e.dispatch,a=e.getState;return function(e){return function(n){if("DATA_FROM_BUFFER_PASTED"!==n.type)return e(n);var r=a(),o=r.app.stage,s=r.layers,i=r.app.parser,l=void 0;r.app.importDataToNewLayer?(l=ve.newLayer(o,s),s.push(l)):(l=s.find(function(e){return e.affected}))||(l=ve.newLayer(o,s),s.push(l));var c=!0,u=!1,p=void 0;try{for(var d,h=n.data.items[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){d.value.getAsString(function(e){var a=i.parse(e);if(a.length>0){var n=!0,r=!1,s=void 0;try{for(var c,u=a[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var p=c.value;l.add(p)}}catch(d){r=!0,s=d}finally{try{n||null==u.return||u.return()}finally{if(r)throw s}}}l.shapes.length>0&&(t({type:"PAN_AND_ZOOM_TO_SHAPE",shape:l,stage:o}),t({type:"TOGGLE_DISPLAY_LAYER_PRESSED",layer:l}))});break}}catch(m){u=!0,p=m}finally{try{c||null==h.return||h.return()}finally{if(u)throw p}}}}},hn=function(e){e.getState,e.dispatch;return function(e){return function(t){var a=t.stage;if(a)switch(t.type){case"STAGE_RESIZED":a.resize();break;case"MOUSE_DOWN_ON_STAGE":a.panByMouseStart();break;case"MOUSE_MOVED_ON_STAGE":void 0!==t.dx&&void 0!==t.dy&&a.panByMouseMove(t.dx,t.dy);break;case"MOUSE_UP_ON_STAGE":a.panByMouseStop();break;case"PAN_AND_ZOOM_TO_SHAPE":var n=t.shape.center,r=t.shape.box;if(isNaN(n.x)||isNaN(n.y))return;a.panToCoordinate(n.x,n.y),a.zoomToLimits(r.xmax-r.xmin,r.ymax-r.ymin);break;case"MOUSE_WHEEL_MOVE_ON_STAGE":var o=t.delta>0;a.zoomByMouse(t.x,t.y,o,1.2);break;case"CLEAR_ALL":a.removeAllChildren(),a.removeAllListeners()}e(t)}}},mn=R.a.point,fn=R.a.arc,yn=R.a.segment,vn=window.Algorithmia,gn=function(e){var t=e.dispatch,a=e.getState;return function(e){return function(n){if("SKELETON_RECOGNITION_BUTTON_PRESSED"===n.type){var r=a(),o=r.app.stage,s=r.layers,i=ve.getAffected(s),l=i.shapes.map(function(e){return[e.geom.x/400,e.geom.y/400,e.geom.nx,e.geom.ny]});vn.client("simby4RUwqQmtMDaHAPj5wsQwlD1").algo("alexbol99/SeketonRecognition").pipe(l).then(function(e){if(e.error)return console.error("error: "+e.error);var a=ve.newLayer(o,s);a.name="recognized",a.title="recognized";var n=!0,r=!1,l=void 0;try{for(var c,u=e.result[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var p=c.value,d=void 0;if(p[0]instanceof Array&&2===p[0].length){var h=mn(400*p[0][0],400*p[0][1]),m=400*p[1];d=fn(h,m,p[2],p[3],R.a.CCW)}else d=yn(mn(400*p[0],400*p[1]),mn(400*p[2],400*p[3]));p[4]&&(d.label=p[4]),a.add(d)}}catch(f){r=!0,l=f}finally{try{n||null==u.return||u.return()}finally{if(r)throw l}}s.push(a),t({type:"PAN_AND_ZOOM_TO_SHAPE",stage:o,shape:i})})}return e(n)}}},En=Object(ba.d)(Wa,Object(ba.a)(Xa,pn,dn,gn,hn));t.default=function(){return r.a.createElement(h.a,{store:En},r.a.createElement(Oa.a,{basename:""},r.a.createElement(Sa,null)))}},81:function(e,t,a){e.exports={Button:"Button_Button__2WHfP",IconTrigger:"Button_IconTrigger__eZ4eE",IconModeActive:"Button_IconModeActive__3w7Aa",IconModeNotActive:"Button_IconModeNotActive__2drRN"}},83:function(e,t,a){e.exports={ButtonSeparator:"ButtonSeparator_ButtonSeparator__126Ou",IconSeparator:"ButtonSeparator_IconSeparator__1IRG-"}},85:function(e,t,a){e.exports={"App-toolbar":"ToolbarComponent_App-toolbar__3_aag","App-toolbar-units":"ToolbarComponent_App-toolbar-units__18kdG"}},88:function(e,t,a){e.exports={"App-canvas":"CanvasComponent_App-canvas__3DP2s"}}}]);
//# sourceMappingURL=1.22c451cc.chunk.js.map