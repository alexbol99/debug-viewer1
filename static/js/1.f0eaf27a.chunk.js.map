{"version":3,"sources":["components/UI/ModalPopup/ModalPopup.module.css","components/AboutPopup/AboutPopup.module.css","containers/MainComponent/MainComponent.module.css","components/LayersList/LayerListToolbar/LayerListToolbar.module.css","components/LayersList/LayerEditForm/LayerEditForm.module.css","components/LayersList/LayerListElement/LayerListElement.module.css","containers/LayerList/LayersList.module.css","components/Layout/AsideComponent/AsideComponent.module.css","components/Layout/HeaderComponent/HeaderComponent.module.css","assets/images/debug-viewer-logo3-notext.png","components/Layout/Logo/Logo.module.css","components/MainComponent/ToolbarComponent/ToolbarComponent.js","models/stage.js","components/MainComponent/CanvasComponent/CanvasComponent.js","store/actions/stageActions.js","store/actionTypes.js","components/Layout/StatusComponent/StatusComponent.js","components/MainComponent/GraphicsEditor/stageComponent.js","models/graphics.js","models/utils.js","components/MainComponent/GraphicsEditor/graphics/shapeComponent.js","components/MainComponent/GraphicsEditor/graphics/imageComponent.js","components/MainComponent/GraphicsEditor/layerComponent.js","components/MainComponent/GraphicsEditor/layersComponent.js","models/model.js","models/layer.js","models/layers.js","tools/measurePointsTool.js","tools/measureShapesTool.js","tools/displayCoordsTool.js","components/UI/Modal.js","components/UI/ModalPopup/ModalPopup.js","components/AboutPopup/AboutPopup.js","containers/MainComponent/MainComponent.js","store/actions/appActions.js","components/LayersList/LayerListToolbar/LayerListToolbar.js","components/LayersList/LayerEditForm/LayerEditForm.js","components/LayersList/LayerListElement/LayerListElement.js","containers/LayerList/LayersList.js","store/actions/layersActions.js","components/Layout/AsideComponent/AsideComponent.js","AppBody.js","components/Layout/Logo/Logo.js","components/Layout/HeaderComponent/HeaderComponent.js","models/job.js","models/parserODB.js","components/Constructions/Demo.js","components/Constructions/BooleanTest.js","components/Constructions/SkeletonRecognition.js","models/collisionDistance.js","components/Constructions/CollisionDemo.js","App.js","models/parser.js","store/reducers/app.js","store/reducers/layers.js","store/reducers/mouse.js","store/reducers/measureShapesTool.js","store/reducer.js","middleware/log.js","models/parserXML.js","models/parsePGM.js","models/parseCSV.js","middleware/readFiles.js","models/parseTXT.js","middleware/pasteData.js","middleware/stageController.js","middleware/skeleton_recognition.js","Preloader.js","assets/icons/measureContour.png","assets/icons/measurePoints.png","assets/icons/WidthOn.png","assets/icons/editContourVertextOnOff.png","components/MainComponent/ToolbarComponent/ToolbarComponent.module.css","components/MainComponent/CanvasComponent/CanvasComponent.module.css","components/Layout/StatusComponent/StatusComponent.module.css"],"names":["module","exports","BackDrop","ModalPopup","AboutPopup","Main-content","Layer-list-toolbar","Layer-edit-form","Layer","LayerSelectionBox","LayerSelectionMark","LayerNameBox","Layer-displayed","Layer-undisplayed","App-layers","App-aside","App-header","Logo","App-logo-spin","ToolbarComponent","openJobButtonClicked","_this","refs","browseFiles","click","notImplemented","alert","react_default","a","createElement","className","styles","title","onClick","this","lib_default","name","size","style","color","fontSize","marginTop","marginBottom","display","type","id","ref","multiple","onChange","props","onFileSelected","onHomeButtonPressed","onPanByDragPressed","onMeasurePointsButtonPressed","src","measurePoints","alt","onMeasureBetweenShapesButtonPressed","measureShapes","onToggleWidthModePressed","width","onToggleVerticesPressed","vertices","onToggleLabelsPressed","showSkeletonRecognitionButton","onSkeletonRecognitionButtonPressed","onShowAboutPopupPressed","position","top","onUnitClicked","units","Component","createjs","window","Stage","canvas","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Touch","enable","assertThisInitialized","mouseMoveOutside","enableMouseOver","clientWidth","clientHeight","height","origin","x","y","oldOrigin","undefined","resolution","zoomFactor","stage","assign","shape","addChild","scalar","scalingFactor","canvasX","canvasY","worldX","worldY","point","W2C_X","W2C_Y","newOrigin","deltaX","deltaY","ratio","curRatio","Math","min","max","focusX","focusY","bIn","C2W_X","C2W_Y","zoomIn","zoomOut","newFocusX","newFocusY","panBy","zoom","dx","dy","tx","ty","minX","minY","maxX","maxY","Flatten","Box","CanvasComponent","canvasElement","React","createRef","handleMouseMove","event","focus","stageX","stageY","mouse","startX","startY","handleMouseDown","handleMouseUp","stopPropagation","preventDefault","panByMouseStop","handleMouseLeave","blur","document","body","handleMouseWheel","delta","detail","wheelDelta","handleMouseWheelMove","offsetX","offsetY","handleMouseWheelFox","layerX","layerY","current","on","addEventListener","registerStage","tabIndex","connect","state","app","dispatch","actions","StatusComponent","StageComponent","_Component","apply","arguments","inherits","createClass","key","value","getContext","setTransform","update","Fragment","children","Point","Segment","Circle","Arc","Polygon","graphics","length","radius","fill","Graphics","beginFill","command","circle","drawCircle","graphics_point","segment","strokeStyle","ignoreScale","stroke","setStrokeStyle","beginStroke","moveTo","ps","lineTo","pe","endStroke","graphics_segment","arc","pc","r","startAngle","endAngle","counterClockwise","graphics_arc","graphics_circle","box","drawRect","xmin","ymin","xmax","ymax","graphics_box","polygon","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","faces","Symbol","iterator","next","done","face","setGraphicsFace","err","return","graphics_polygon","setGraphicsEdge","edge","setGraphicsEdgeSegment","setGraphicsEdgeArc","first","start","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Utils","is_equal","obj1","obj2","equal","_arr","keys","_i","ShapeComponent","params","handleMouseOver","onMouseOver","model","handleMouseOut","onMouseOut","handleClick","layer","Shape","vertexShapes","labelShape","geom","vertex","vertexShape","mouseEnabled","push","label","trim","html","innerText","left","appendChild","DOMElement","alpha","isEmpty","showLabel","htmlElement","font","unscale","offsetLeft","offsetTop","hovered","selected","widthOn","aperture","displayVertices","displayed","redrawVertices","displayLabels","redrawLabels","redraw","nextProps","nextState","off","removeChild","clear","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","ImageComponent","bitmap","Bitmap","uri","image","naturalWidth","naturalHeight","scaleX","scaleY","center","regX","regY","LayerComponent","_PureComponent","shapes","map","index","imageComponent_ImageComponent","hoveredShape","firstMeasuredShape","secondMeasuredShape","shapeComponent_ShapeComponent","PureComponent","LayersComponent","layers","layerComponent_LayerComponent","defaultStyle","Model","get","edited","affected","newShape","add","clone","merge","colors","Layers","getNewName","defaultName","inc","comparator","find","lay","currentAffectedLayer","getAffected","_loop","col","findIndex","l","newLayers","filter","getNextColor","slice","sort","l1","l2","name1","toUpperCase","name2","MeasurePointsTool","_getPrototypeOf2","_len","args","Array","_key","concat","endX","endY","measureStarted","measureCanvas","clearRect","coordX","originalEvent","coordY","cursor","draw","onMouseWheelMove","onMousewheelMove","context","textX","textY","textWidth","backX","backY","pllX","pllY","abs","W2C_Scalar","beginPath","rect","lineWidth","text","measurement","measureText","textAlign","fillStyle","globalAlpha","fillRect","textHeight","fillText","dist","sqrt","format","num","divisor","toFixed","decimals","mainCanvas","MeasureShapesTool","Text","shortestSegment","redrawLabel","firstMeasuredLayer","secondMeasuredLayer","DisplayCoordsTool","margin","padding","modalRoot","getElementById","Modal","el","ReactDOM","createPortal","onBackDropClicked","ev","target","closePopup","handleKeyDown","code","elementDrag","dragX","clientX","dragY","clientY","element","closeDragElement","onmouseup","onmousemove","dragMouseDown","removeEventListener","showPopup","UI_Modal","classes","onMouseDown","version","MainComponent","handleFileSelect","File","FileReader","FileList","files","setHomeView","e","toggleWidthMode","toggleDisplayVertices","onresize","resizeStage","handleKeyUp","displayCoordsTool","displayCoordsTool_DisplayCoordsTool","measurePointsTool","measurePointsActive","measurePointsTool_MeasurePointsTool","measuredLayersDisplayed","measureShapesTool","distance","measureShapesTool_MeasureShapesTool","MainComponent_ToolbarComponent_ToolbarComponent","togglePanByDrag","toggleMeasureBetweenPoints","toggleMeasureBetweenShapes","toggleDisplayLabels","toggleAboutPopup","applySkeletonRecognition","toggleUnits","MainComponent_CanvasComponent_CanvasComponent","stageComponent_StageComponent","layersComponent","handleMouseRollOverShape","handleMouseRollOutShape","handleClickOnShape","Layout_StatusComponent_StatusComponent","UI_ModalPopup_ModalPopup","showAboutPopup","components_AboutPopup_AboutPopup","build","LayerListToolbar","onAddLayerButtonClicked","onEditLayerButtonClicked","onDeleteLayerButtonClicked","onSortLayersButtonClicked","LayerEditForm","onSubmitLayerEditForm","form","parentElement","newLayer","layerName","layerTitle","setFocus","onSubmit","defaultValue","cols","rows","onEscapeLayerEditForm","LayerListElement","activeElement","nodeName","elem","hex","opacity","g","b","percent","replace","parseInt","substring","rgba","bgcolor","layerNameOpacity","onLayerClicked","onDoubleClick","onLayerDoubleClicked","onAffectedBoxClicked","backgroundColor","LayersList_LayerEditForm_LayerEditForm","LayersList","setAffectedNextLayer","setAffectedPrevLayer","_this2","onLayerListClicked","LayersList_LayerListToolbar_LayerListToolbar","maxHeight","LayersList_LayerListElement_LayerListElement","AsideComponent","pasteDataFromBuffer","data","clipboardData","onPaste","containers_MainComponent_MainComponent","LayerList_LayersList","Layout_AsideComponent_AsideComponent","logo","logoImg","HeaderComponent","Job","filename","profiles","materials","vector","inch2pixels","mils2pixels","InchToPixels","str","round","Number","MilsToPixels","parsePolygon","lines","i","line","terms","split","end_of_face","CW","CCW","slope","EQ","PI","parseLine","apertures","ap_value","parseArc","parseODB","job","arrayOfLines","match","substr","polarity","addFace","odbLine","odbArc","ap_key","Demo","axios","then","resp","panAndZoomToShape","addNewLayer","setState","subtract","BooleanOp","intersect","BooleanTest","myPoly","myCircle","SkeletonRecognition","Vector","Line","CollisionDistance","polygon1","polygon2","collision_distance","POSITIVE_INFINITY","toConsumableArray","edges","edge2polygon","edge2","shapeBox","NEGATIVE_INFINITY","resp_edges","search","edge1","segment2segment","segment2arc","arc2arc","intersections","ip","_point$distanceTo","distanceTo","_point$distanceTo2","slicedToArray","segment1","segment2","point2shape","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","v_s","end","v_n","normalize","rotate90CCW","multiply","rotate90CW","_i2","v","tangent_point","translate","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","arc1","arc2","arc_enlarged","_arc1$distanceTo","translateArc","_arc1$distanceTo2","dist_tmp","EQ_0","GE","arc_reduced","_arc1$distanceTo3","_arc1$distanceTo4","LT","_arc1$distanceTo5","_arc1$distanceTo6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","vec","arc_tmp","newPolygon","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","arc_trans","CollisionDemo","parser","parseToPolygon","collision","polygon3","applyCollisionDemo","App","BrowserRouter","Layout_HeaderComponent_HeaderComponent","Route","path","component","AppBody","Parser","watchArray","indexOf","termArr","psArr","peArr","pcArr","nedgesStr","nedges","j","parseToSegment","parseToArc","points","pointArr","parseToPoints","parseToSegmentsArcs","unitsList","defaultAppState","process","originX","originY","importDataToNewLayer","action","curUnitsId","newUnits","measureShapesFirstClick","affectedLayer","affectedLayerId","delete","setAffected","toggleDisplayed","setEdited","setNameAndTitle","nextLayer","newCurLayer","newNextLayer","defaultMouseState","defaultMeasureShapesTool","measureShapesActive","shape1","shape2","_Flatten$Distance$dis","Distance","_Flatten$Distance$dis2","reducer","combineReducers","log","_ref","getState","console","parseEdges","edgesXML","getAttribute","polygonsXML","islands","getElementsByTagName","holes","parseSegment","segmentXML","parseCurve","curveXML","parsePoint","pointXML","pgmResolution","microns2pixels","sizeX","toPixels","micron2pixels","micronToPixels","readAsText","reader","file","onload","theFile","string","result","namesplitted","extension","xmlDoc","DOMParser","parseFromString","titles","firstChild","nodeValue","profilesXML","materialXML","segmentsXML","curvesXML","curve","pointsXML","parseXML","px","py","nx","ny","parseCSV","shapesArray","parse","parseTXT","readAsImage","yStr","xStr","isNaN","parseImage","readAsDataURL","readFile","readFiles","pasteData","items","getAsString","stageController","resize","panByMouseStart","panByMouseMove","panToCoordinate","zoomToLimits","zoomByMouse","Algorithmia","skeleton_recognition","currentLayer","input","client","algo","pipe","output","error","row","store","createStore","applyMiddleware","Preloader","es","src_App_0","App-toolbar","App-canvas","App-status-bar"],"mappings":"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","file":"static/js/1.f0eaf27a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"BackDrop\":\"ModalPopup_BackDrop__3-oG9\",\"ModalPopup\":\"ModalPopup_ModalPopup__1AvS-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AboutPopup\":\"AboutPopup_AboutPopup__1HH4R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Main-content\":\"MainComponent_Main-content__1w1St\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer-list-toolbar\":\"LayerListToolbar_Layer-list-toolbar__1SOXw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer-edit-form\":\"LayerEditForm_Layer-edit-form__1_dNQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer\":\"LayerListElement_Layer__1LybR\",\"LayerSelectionBox\":\"LayerListElement_LayerSelectionBox__11__5\",\"LayerSelectionMark\":\"LayerListElement_LayerSelectionMark__20kD0\",\"LayerNameBox\":\"LayerListElement_LayerNameBox__2w-wI\",\"Layer-displayed\":\"LayerListElement_Layer-displayed__1IqeA\",\"Layer-undisplayed\":\"LayerListElement_Layer-undisplayed__37KZD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-layers\":\"LayersList_App-layers__YRpy2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-aside\":\"AsideComponent_App-aside__3rrry\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-header\":\"HeaderComponent_App-header__2sYI1\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAACKTSURBVHhe7V1NrB1JdZ4dS5azZBWxieRNoiyi0Ugs8tztCYYkxIAIEwWBh+eBAUJkkZFifhTDCGIm42ePyAwmyIzHfm9ksjJZRFYiRZaiBEvZGCQkLxLpJSMRhwjJkwmiO99Xfe593VWnb3dV/9zudn3S0X3vVt+6davqq3Pq1KmqxyIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIgrkaXosO378VJ4k57L3JX+ffT75afaNJM++kryZP5++Rx6LiFg28p2dd+UnTjxpiJCm17IkuQty5BX5BOTSkWQXk7fziyeelCwiIuaP/Ikn3kEiQCs8ByJcgNyGPHTIoMnZpEIQQ5K99GF28fgpyT4iYj5Apz4yjwoi3Hc6vY98AIR4Ca8WSQxRLh5/Tr42ImJaaGUe9SW7mH/UkeRSekGKFBExPjqZR54ieV/G32fNd+L71ukfoyZxzS0hybX8O0+8Q4ocETEM0BH7NY9qBNrmHvK+Kd+zkz/11LulCBWYZ8qf+2jyP5h/3K8hye38myffKR+NiAjHWOYR8j1E/rfxeh7/Pw3y/YYUoRXwuQeV/EiYveTx7BLKq5IE77+88y75eETEZmzTPMpPdhvNkc+xcv5GQGiTBk0BMtyqIclhvpceM5lERKzADjUl86gr8D2nne8H8ST5Mc45QIYrNSR5AFNsRx6NeJQwF/OoK/C9VyrloeaDRpTkNUCG8ypJ9vD8Xvq0PBaxVNBUyT6V/CD7FBr9ZJqVO01fYojQo3nUB1CeigbE/3ckyQFIclojiZG99Kw8FrFEZL+f3it3lC6CUXkU86grUL7HnbJjDiXJKmhSGa2hkATvX5bHIpYEraO0kW2bR12B333S/k18T5Jrwck55x81JLkZ10oWiOy3039zOkuDiKa4LJP2xyWr2YDawvldLc0+unlBBn2tZC+9E9dKFgaaQdkz6c+cDuMhcyMMyltxPLD8ktQK4gbW10pInrhWsixkNzAJfV0a+IuQjycVAvjKlAlj1m7c8l6R5NYQN3DdWsmDuFayIOT7yePZASagB2hgkexa8q+0y2mOsMPbncpHpkQY40VzyxjsruUEXSUJQ+bjWslykB1gNCwRxMgbR14odmx2cNPReyIMCTiGy5dlN8QoyPEduzxdvW109WokMRLXSpaBbB+ju02QgyL0QkPPhLlLTdU3YZDnDvOu+U66dvn63/J4J5AI1BoqSS7V12PETGBsatvMOkjvS3IjpkQYfgZ5VFbK6wTPvUUiyUc7gSZVrRv4kv88J2JigJl1pUwQQ5LrYWsc2yKM8colyaGWzyZh/pJFJ8hayWENSW5FN/CMkd1IdxyCvNHPKrGJ8eKiIkZ2dMZOgY6bCIP372ifaSMktGTTCWatZFPI/N781o4iBNAihxWC8P8BVoh7J0yxqv9tO81HkMchNZ8UsROKtZL0tkoSrpW8NM0wnIgGYN5xoUwQQxJoFkkeDH0QBp9T3/cRfr8UqTOKtZL0mkoShsxfnleITgTAOYdDkIP0miSPBm/CJN0WN1eC71LD3ruABz+oJDFer+YYsIiJgd4riyAPtx2IJ5Pv0+jA3KPiTMLxXuX/LoK5SO8jO48Q0khCgTY5LY9FzAFc/ygTxMj+tBa8bML0YV6VZJDfysPo6tZKQJLz8ljE1MEVdJsgXGmX5EkCBPl3paMHCfKiW/rsIJoE8w7OP2pIcmXbmjqiJWBW3bFJwpgtSZ4coEWG2RqMOQnyvoW/eyMMPVjGk6WSJB4vNAtk+7CZLYLwPUmeHGhq2Z17COmLMKHHC8HUPUZztzCDk3Nm7WrCA9diwUp3CAKtIsmTAzrs0+WOHCoggPp+nZQJA/EKcZd9JXrIPDVMKWSepLCdJ2XJ9qF5SsGlESOgKcJ3Ssgu/NYT2QeT/y133hBBh/8XdPjKgXI+ws8ij5vQLs/h/0bCFGsl9ccL5d966gSIcc1pB0WMt3E/HiIxGgpVbjfE9CJTGW5uvEMvoJO8F2VUOm4boSaQLFfngPFAvJvUEvazbaUtYRjx65DkZXz+RpK5bbBZpu5QWQzM6NYhwndoFHa8Fc7B+z6UjtokRmtsCDPhfAPPnSWJhiIMQ+bLvyV7Da+luveSqEnGgabeQyN8+4RZU9DcpRdRvj/xIwk67T0SQLJuhZ4Jw7Wc02ZtZ3W80BWkW/XuI2Zgi3OS4TFkhG8IZGKr2uwVobn14WaioGNe6SO0pEfCHGafSf8Ok25v08qWaGqNgMLMGifCtwmyyHZPJQTE0SjUJs8nWXYSr+VOWJz0eMFXa/igE2H+FFKq704SXcDDgxrDrvgxInzLUCexIoYYq4m6nf55SKnzkRiS5ajwIUz2IjSfVd+hwq3UUoSIobDNCF85qO2O0/FFTBon68oz2TeVY1WTaUTPGsLISfl2GbNv4dWq71CZ8uLuokDvVaXiR4jwpVdHnYiz81NbyMHRfNXSs48m+3bn6/NQiD5ROlH/dp8Eid6skTBmhK/sxlM3GlE4D1ltNgI5jhmyuM8w0rd6gnuS3DVfMHFg8Lnp1HWoTCwKe7EYK8JXJuLqoQcUpK0jXo0DQYlnwnu3qCnK5BCCzOJkEXUwCpV9v/CXiA7AyDZohC86tnpZDQVpMLWq8wftefMc5iSca9gEgcxiNNXmfCFCs1iyjBgDQ0X4Svh3/UScGsE6CYSaRn32YuG1obfKIcjOfA6Vpna269pXeOayZBcxBoaI8DUTcc09y85emoiXIaaVsx7CeYs8op3g/kCSZoH8S8d/LbuW/NKu77bC6F7Jar5Ao/GomiJk+vg83HHqyBYQ0mAm4rx0xurkKzEEqDkhHZ9zDozG84erjUZcGWedVgiSpjfNh2cAxoQZB0PggqHxML4+8ysY0Gi11xBPGfSKuI3iV250cB7RWT8RJwFqXMj5xRNP1nxmvXCpneA+lwFIjk090n4gCTSJVd/1ku0n96YQK9cZbLByA65l4iQx5o0d4YtGkeSNENNo00T8sNzRbUgclkMsEkoeMWAdKnU7eW+OaD5n4TD/EH7jXzWTBO1woW5gmR1QEfVbRCdOEhDEO8LXTMRrtphSkOZMxG3gGSdIEeS4b3cKmlPl+sT/vZ91NQTscq/lIyDHGbzycqOr6Q84v8iup/cYDm9C4r+DdC4uLumqBXsS6ciESZJfT046BDmoj3HimVDoyLUTcabLo7Wgd0r9vCwYlsEJebkuOSpL0mSBMvKa7GofYNmhPQw5INmZo4VOalOnLkpOillDm0SqMlGSGFNpH52wQpDkUJLXKDY0QTNYDbkSpN1rc0at5OOaVspZUqi32c3takzCPDuFVyGHIcgz1cHA3ixmBqElmFj48W4j1slEG7cpwheNtXkizuM4WzYm8nK8XYZcyuehPU4rdTjZ4z3V8kKy34PZtIu/19rD9cJR8zr1smEONxugArQTOJ6GVtHPoJ0gSfKDE086BOH9ItQuNWfRUkgan0akXe3kUayP6C5gboCy62+qAYr6an+evS/5v/yT+LukPUAW5/cy0tmpG8zTJHm+ABHUe7q50jsnkmDeUY3wfT19Cw30Y7vRVoI0rwtk5J4NJZq3vi7s+uNcT5ImBbqiNTM7eyr9r/wZ/F0ih6Y9VkD9VBwf+N8xdWcHNBrPUSo34vpHzYkk0Bjn1wT5LhsHr4pwxEfDeYc92Da25FW7ci8nwlfqjIORJE8GKNcxtLlztBDeezM7nb5lkeNhvlvv3VM3kl088aQkzxN25aARKyPEXEhiInxvoPyvwl62G0nEjHABl8XU2NcPN+VVY7JMyvVp2lY/nf5B9kfp1TI5DEF2NxOc9eHUE0xcSZ4f0IiPK5XjemNmQBJG12aXk1/YDbQSkON8iFfFrJmQDG5+G7UQtYVTV6hHSd46zCq50qZ472H2/vSDRluUydGgPVZAXVXO+eX/kjQ/oDJ2nAqquRtvqiQpJuLuot1KQJqfhap5k7e2fRbmljxSCww01QBF1J0kbR3GtV+z9sX2z86gPkvkKAjS7koEMxBZ9VXnxJg8UCE8w7VaSRsusp8aSRpPFnkVciP9J3ncG5pNje8zezzkERXsgHb9oN4mEaAo5KjMO9dlpJt3Nz2mkOMw/2g77avHp01rvtoaaLRKiAn+fyhJtZgKSTAqOXu/V2Im6Fchq0l7QDQpRz3NtKKrVx6pxZQDFO02X4u0Hb1ULkH8yo5BpLLmxEFMkuYFjBiVkzZQea32U2yTJGYle9OGpsvpT/LX8feKHEb8yiRmm7vHY6+dFmAdKHWzdTMDbebOiyDoB2a9oqv2WAH15GwBqLtCYbKoMQNan1K4DZIwBsqYOHbliyDtfP59TD4DI3xXMPm4eR82mVYroF4qUbDogFvfIIVyuOZ0Ubb1Xn5ojzs2QUAab88bCLJj1x81viTPA6gcJ8TE1wwYiyQSWl4/EeeKeClQMCTCd4W6PR70kskjjSAhynVBwkjSVoAyqPeVGCJjoDTPfDI5aZOjHJDoA9HAlYGsjWNjUkAjOnE3IEirTlSGL0ny03geNi09JdluetvImeQ83julqXIzEa+5IoyCir9mr4j7RviuIF4r57tITnmkEfjdkwpQRNs4nkoK2v9uOeyFZLAJQtJIsjdMu1j12FYDTwKoODXERJK90IYk+XPQAor7sCzZLkadkkpXV2ZFzAhVM2E2Hb1FhK8NTUsZwniEpFALO3WASbskjwoOeGgXN4SEbYU2k8d61R4rqFsC5rRHBJV0x640SQrCRpJ8KLmKCj+0G6FOsk8n/5C9mP6zU8Ei6LR3mlbEfc/wVe1miucaCurA9RJtIUBRrqbWQkgelF351Npa29jh7L4wZrHlBcQANJ8T3hU7ubOfXiXJKdmB5inZZ/G6BylVcCHtzJW6CF9JrkDmOMoeD/8wCfv305SRpNFQN1jhPWqTijeN5q5T9xsCEn1AQlTqk4Tx0MZbAyvQqTwlxCQElcZ5L/J9JowglOwcXo8q9762Y28TnAjfmjN8NXsZjavu8dgEtV5HDlA0ISSW+17K8RBS0aB12kMLZw8BTSqnXuWssEkD8wI3kK7HjTwrkmR/iHztyveVb5jOeiVk5KlE+K5IYh3Br9rKbEhPMhKoR9dbNOIGKbNKbpnOJXHsfxDhrF3ffWkPgpNyp17nsBUXleUVYhKC7Omd99mVHyLZZ9KfSJbeaDrD1yw6eu7x2ARqC6deMVhI8uCA5lBDSCDugXe7+O2BAYk+ACGqW3FZ356aeXSgIasnbQywkAXVfb5c+Z2kQ6OBEHerBEEnkDN8bRtZGvBuaANyvlGpV2hRSRoc+G539yLLUGM6M3TdruemcPYQcIHQqeOpb8VFpQWFmPiA6xt2A4QK8gquUN5JUSaIIcmN5DSIcFppuI17PDaBtn+5Tk29jnSCO0lgf/em7x9LexDqVlzr7LBJQW1IjxCTtsh2QcJSA3SSgHCHFRio6BDkevJDQwar4Tjayce8gTrUtg4MHqCorrvwu2luySq5DWj34HD2EGAwqsS14f/pbsXl4pFSmb2fvI0Kd1dmQ6UDQQgeblYhyCt4LTVY0WjdQiG4IGrXK2TQAEW05SnlO9med+vIQQ+VXb/Gk+UZkOgDdcF3qltxSQanQgNCTJowFROLoEm1Jsh3IVZjGW3SMdoUGmTUAEVqLIi7Sk7zecPCJL1UTv16hrP7Apr5mFPnyjlikwDNKbtSh1jpzc9g1LAaIlie61a+dYTv62wY5GdLxxAIca9WOiv+H2yDFPI/ppKD608bvGbb0B4rYBCax1ZcVGI1xAQjjiT1iuyF5M/txggRNGAv4QnZfvI32bfcAx0wknXOH/U4WoCiWWOqCyFpMOmgPXoJZw8BBib3fLJAh8igGHqkk7UF4z41K+F2g3iI8aw8208l5q8kB3YDZZeTn/cRYapOlAcIUATpirs6rO8ybdrwfUMEJPpgFltxuRhoV26fIx3UZvWIzz00AmOqrIZpLbv9bLLhqni1YQrJrvYzT+AgU65T02FrJsmhkBAS/aAFK4REg+o06RDOHoJK32D9X5rYQXoMe3AquIdQCBNerm2zpDBU5Nk0cxqnQbKP47UH8pqyadtnv41XM3HvPtKj41bOlmJHlqReIHMc966OQhpNpG1rjxXQDu6mtyltxUXDuQtKHUNM6KHQOuBKkHYrf/7Eb6r2b41kf4C5wgn8zfJ1JIlm+2YvI/8b+Jsu35oI37YYI0DR1lBraVE3Q4Wzh4AWhtMWLa6bGA12RXNiJ0lB4MIafnTtXRtMl0cNaDLZDVWW7BPJ2/nv4O9SGY0EkqR2+ywvehG3r9lY1SE2COUbNEARbabf1dFycXfIcHZfiKVh7RGZ0FZcVGp1r0JgiEkxEYfKL/3QshiNUnNYWDGiHT9VuIFLQhekRAGXy7gWT5LIhh13++wr6Q9X5DgiSXgINgaZwU5w52928oagjlpFxA4dzh4C9Bt3K+4U9ojUhJh4mwI5j/jceLIITJouI3JPJNHsXUOY68d/3SHIQfiIyvlGuYwsuyR1AvLV7+rYEEJiQ9PY29IeK2DgdPaI8D1J3h7Uw8w8Qkxk193mk0V6itLsShKSWC2j7PHgMUAWQR5yMdF82APqoNNDgCJNNDtfybty0MImjBmQ6APR7NPbiqv56tuGmJiTRZom4j2sJ5QRShJZh1G2zx6FNtRF+Epya9R05G6r8hjI8Lv1VfKkfR0zdL1MDkOQAcLZQ2D6S7ltSJgOVkcvQAW7k70WqpoT7fKPKQt/2JBeiBCSaDYuGqSyx0ON8N33nyxiRNfCzIPte34WeWqr5IesC3msEVPVHiugPdytBtveimvUc7XSN4aYmJF40xGfgXdt+MKHJJp9a0YnxWFgR/ga8TzDF+XqLUDR/M6auzrw6kU6TMxHDWf3BfuW004w3yV5O0Bjtg4xYUdDgTcf8TmiSmxDEjGtWm+frUT4rgSmlyQ3os8ARbNKrvw+5g/xmtcZb6BLjlECEn1gD76m7bZlZqGytZts3X3KI07EfdFEEs3tzEaQjzvoeoYv5292OTjPk+TWMESrCyGpuatlE+ilcgkyocU4gWa6b6tv6RtrrMUsMxFX1g1WAnJ4XXo5BGpJ8pmijJXy0rRqOlzuAJ2pRBAj++3MGZLBKYdngKKQo/auDnmsNeaiPYhJbcVFZbuTSXQ2Seakyb0VSMR0tCn4qQUOST6MMr5ULbMpd4uLOrlAaBOERwVJ8kagDJ0DFPGZjXd1+ALaY2vh7CFAG01jK649SuF/M5nkCAsC1E/EWxzxuQ2USZJ9TSl3y/AF2rwhZ/gSrMNKnXqe4I7nN97V4YupBCT6QNuKG3IeWWeg0qvRpvS+TGwi7guSJP+CW/7spSTPP5J8XR5rBIMVywQppGFvhbJtgB1ekhuB5xvv6vAFyWATZOxwdl9o2xDY7yR5HDirve9HIV5If2IXbCVUc5PdUF8CXbfQcG85v+FTEP7OlmaKzxm+KyD/4ABF9bMQM2h5mmgrzFF7rIA2rG7FhdklSeMAFX90HM3HUIAX3W2nK0Fhb04icKwBxjTiOoxd/i/htdTp2pKEZlWFIA0RvjSDKt9DaRECUmmLkiC/1iEkNqYUzh4C9Dl3H9GYZr3xtvAQ6S9sIAZNrQlNxJtANez8hr9MfpF/AH/bHbAFSbIDzAdKBClIUu9iRYeuHryHDi5JtUA7tLqrwxdTCmcPwda34ma/mx5oE9mVTHUiXgfNbjXywvGPm85mdUAjDSTh9WwOQWoifB2TFUKNIskqOGfBM/pBCx02rE0xnD0EZoAutSX7pCQNj+zLyU/LX14WjsTy2CxgTCttj4eEKTgu4LI0kaRlhC/nGkr+tdq3rkyiTTp15CmGs4eA7We36WhbcaE9nB1/KFDl0su5QLNXDWFK86ZQkvCq6DJBDEmUCF/k3foEdxNCYpljFJID0mnVeOoBiT7Qtiegj3ovlAYh+2ryj/aX0wMkybMBiND6irQQkrSN8EW+9rliaoCixGq1vqvDF1MOZ/eFWAbb2YqrdaxJbZRvAYkR87oiLYQkMKvu2CQpR/hKp28VoAjitL6rwxdL0h4roJ/etNt3FI+qzs4J7ODygGaj4r3GK9J8SdIU4avuylQCFEEOr7s6fIGJ+aTD2UNAL6rdxqN5VkmI8hcbwjR0rqlAuyKN5W87h/IhCS/WMZPzEkGygyMXLj6jrYBXzFWSQHmm0dPVFnMKSPSBsRLsgRxaRZKHBU2q8hfLl28ntNgDddtnff3kPiQBIW6VCWLkjcIVS3Oq/Fn8XwlQVCN8+ZzHQQtNoJfKJci8TOY62FsWRhvIZ3fLj8DWfFLuOyGV1pYkmyJ80dFrAxRBDu+7OnyxVO2xAtrb2YpLD5ckDwtjs5e+GB1tmsfPCzSb1IwoHRY125DEzNkcM8t8pvYEd+QZdFeHL6A9ZhXO7gt1IB9rKy49PvaXT3UFnRVlyGCXt8MVaSu0IQmDFcsEMST5dPIXyvNcNAy6q8MXcw5I9IGxEEptDoKMsxVXjXnpocMNAdsWpfTpF28iSXYj3VEI8iPl+bpTSLwPWmgCyWATZOrh7CFgn7TbfpTocmM62DEvYy3GeKDGodD5ijQbzSRJ/oPXtamX7nwV8rnkZ9rnjTbx3HrbhEdFexC0apz6Hmu+jC+qLMaYjjeh8HZWjilTqYxGBvKH15LkE6ibi8nbTjksMUGgH4aUPov8evUOzj2cPQRbmy9rE9/RvAQNMBrOsj8pqKxBFzVtkmTn6rcFaGL2w38Wnyk+3zuR5x7OHgK0ubudYYzYwa16CRrAtQ2lbIdcC5FHBsOaJJ+vfr+XfC65Ktn1hqWEs/tC39JQXa8aDOh0lZ147ISStDWwQjTTaszjKPPn0/dkF9Nf2mVoK0OQeSnh7CEw9Vmt33G24mojNUyvrY1I4jxwDsbGe6NqNs2885XsUrt7O9pgiQGJPkB7bGcr7ta3OFoAEVx7k6PHiM4DXaWHSvL1YhDqKF9L7uRfxtymLHxPe3aBwsHGqduxliXQASfh7tXJivKMHCemkTTK9IRaXppsWNB8cQowsrtXvFbu9tktxIip9REsGOnV96P0IdJkw0J1944Vey/QOqUhzBhhBRaoQe2yhAp+l/p+lO6Cuh3HoURtoXz5aJNimlD295syjOHrVqDau4ESCTKMoM88ZL+RJhse9qiJhu10JXRb1O3xwHtb2RHHSkddvGmXJ1S6bGdeejj7rFB4C44a1jTuCCO4NlqDHJUr0saAWXtZDRJ71fJ0kg4xY0sPZ58VuPbhNvCw7t667bMsizwyOCTeyzkgoA/TCHkEh8U8SgGJs4Ft6nAkl6TeUXtF2ki+bfn+Hr1VVTG/rcNKOslgE2SJ4eyzgtpheg6XWAHfpW6fleTBYA4DuJReMJrK+v6y0NxCGb+npbWSDl7A7Aw0q0WOqD0mAJhU7oX7A7h70fHca3/ZYQcMHeCcpliRVbRWSZB+l/Ww+oxG5GYJN00f1YDEWcCMrtbISvtckntB3fZZkkYe6R30JCF/5TSUI0GZ7tcNBny/iVgUfkdXx8ajGM4+K6w9OUeN3useYHREZY/HMKEtdAKYjm99X1n4+0igpt9o5ix76WWNaNnLkFeT212jD6L2mAFMZ7E6QF97gDkBt/M2BOx5noOOvIN8nQt1yoJnoMWScyGdOr9y4lfy15AP5QbE7FPv7vHLz6A8Fjmy3f4igiN6gLoHuIdFO5CDV6S5E+Me5ziVtYwNwkl6V1I6hzg0XNPWhEc9nH1WsM0SEKTT5hSZ7LpXpPW0X6JuLcMWfl9fhz2Ys7EqBOk2T1jS6eyLhxlh7Q7WoWMZU8bKD4TpvOPOzAtarGXgmVvUYPKxXsAzeisEUa5GaIuoPWYG2vBKJwvyMtHssfMy+XUINGu9lkGHwEBnKJEQFYJAo0iSNzjPKJOjkO1tWotogDGJenD3imnV2/ZZ5tdyLQPfOeyqs33aIm/ClSQvxIDEmQKdrPMVCfiMfkWaZz5Eq7UMrkOMdFUXNIZzE64keYFrHC5BlnE6+6LBjuZ0QA+zqG77rK/J03Ytw7iQA4gXCu0Ow/LtU20QtceMoZ+Z1c6rUswR3NG+7ecJkhF5NK5l4JnzXRfoQqDePiX3hrQF46tcgox3tFFER6DzBR35iM+522eZV4sRvvVaBs23nhcYfaDdG5IftNeOMZx9ATCjs905G9y9nBzbnzEjfUOMUuu1DD7T01pGF5AMNkFIGkluhKY9Yjj7zKDNIzhZlmQHsi6hTKTrXZbt1zKgVbZ4oJ0NmlMOQZR71DXEcPaFgCYROm/rM7M0DYD31CvSZJ5yntrF/kxZ8MzdodYyuoAXfNoEaROPFQMSFwa705sOrXX4vXZXpPGz9DjZxLMFn70/9FpGV9gEyd5oPsMrhrMvDOuO/woa8irkNch+8vPsIDnkarJZD7iWntI6vG2O4ZnTkOa1jA1m3JTAOqgQ5GBzbFnUHgtE/tfJr2avJZWRUpPse3h9GbLu6EemGDVBoRGO0m0pCJaca+PpmgowUNyr1EFDPFYMZ18Y8uvo2PvouKVOsEkwSS00DU0rrqNg7oCO32ItA1poC2sZXeHGY9VPtGNA4sKguTHbSvZqcq3VWga9V1tcy+gKmlSV370hYDGGsy8I+fdPvtO2r30ke33zmVLQGjeHPKBhLHBSbv92Saogao+FwR4ZQyT7rksSapWuhxpMCWo8FgYXSV4jhrMvCNoCWIjAPl9P2jkPgdYY9Y6PMaDGY1kBizEgcWHI99OzTqMHSvbt5E26iSXrxaFNPBbXOFyCxHD22cLeCNRNkq9ItouE6si4frS4GbXHAmG7LrsIyPYjjLLPmY40o/WNtlDN0f0jjcn4KpcgMZx91sAE/abT6IGCvOz/7xf5J+eyG+mO7wajqUGNx4KJatJiOPsyobkuhxQQ5uE6ZAWjb3Z9Xl4u9/cUZ4hp2iOGsy8AtKHtRt+GcFUapLlWuFJhoinu0ynAjjTgHC6Gsy8YnCv4hJfUCfJ4qL3fRdD5TICkMdHoQfLc4joEaDZWynjj+N+aibhFkBiQuCDo7ktfKdydMJuOFfmxU8OU6oF8tph8YRqO7RBAp386+2L6n9nZ5EhT/HH6VvZs8ff6vRjOvjwU5k3RAX2laV9EMbmlixSkwfeANJWo2D6EeSLvQRwC+bNPvRud3r0/0BJokuLvqD2WBxOPFdBxOXcIHcFJGq5Oo2Nf6NPdvBJqr8IhkJwPdQigs5+146o2SbabvB1duwuFmY+wMymdTRPzbM/mjVlrMI4DapvkFiQ4iLJOkOddyBW6aDc5BLJPJqc1ErSR7JnlxKBFWOBIi1H9jta5KGZUHtE9yw5sOjI6NDv2prKFCokIuUViGoK+mLzHR3PYAk1yL66gLxyruQMnw0Wg3rTcrySpMZ2gyfp2CGR/hlel4/sI5iSd71mJiOgVnJybSXrhELgZ5BC4AlE6vK8YDRS1SMTUwXnSWhMa9/Bmh0B24ciN21Wy3eWF/Uc8InDWbMQhkH1F7+whEkPdIxYFzruyz6ZuXFWwxJ2EEQsDzKLbemcPkUiQiIUheza9rHd2f4mLhhGLA2OutM4eJKfnvQcmIsJB/tzJd6oRup6CPG5JlhERy4K2x8NHzBpI1B4RSwY0wBWt87cRxnFJNhERy0RhajWHuduCz8T9IBGPDtqGvGe7yQNO8OVjERGPDsymqd30mkYUTuiNORbP3o141MHgw/zMiSfXEncPRkRERERERERERERERERERERERERERERERERERERERERERMwXjz32/wCxdRWzIF1OAAAAAElFTkSuQmCC\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Logo\":\"Logo_Logo__2qfxq\",\"App-logo-spin\":\"Logo_App-logo-spin__143jm\"};","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport FontAwesome from 'react-fontawesome';\r\n\r\nimport measureShapes from '../../../assets/icons/measureContour.png';\r\nimport measurePoints from '../../../assets/icons/measurePoints.png';\r\nimport width from '../../../assets/icons/WidthOn.png';\r\nimport vertices from '../../../assets/icons/editContourVertextOnOff.png';\r\n\r\nimport styles from './ToolbarComponent.module.css';\r\nimport '@fortawesome/fontawesome-free/css/all.css';\r\n\r\nclass ToolbarComponent extends Component {\r\n    openJobButtonClicked = () => this.refs.browseFiles.click();\r\n\r\n    notImplemented = () => alert(\"Not implemented yet\");\r\n\r\n    render() {\r\n        return (\r\n            <div className={styles[\"App-toolbar\"]}>\r\n                {/*<h4>Toolbar</h4>*/}\r\n                <button title=\"Open file\" onClick={this.openJobButtonClicked}>\r\n                    {/*<img src={open} alt=\"open\" />*/}\r\n                    <FontAwesome\r\n                        name='folder-open'\r\n                        size='2x'\r\n                        style={{color:\"grey\"}}\r\n                    />\r\n                </button>\r\n\r\n                <input style={{fontSize: 16, marginTop: 5, marginBottom: 5, display: \"none\"}}\r\n                       type=\"file\" id=\"browseFiles\" ref=\"browseFiles\" name=\"files[]\" multiple\r\n                       onChange={this.props.onFileSelected}\r\n                />\r\n\r\n                <button title=\"Zoom and pan to home view\" onClick={this.props.onHomeButtonPressed}>\r\n                    {/*<img src={home} alt=\"home\" />*/}\r\n                    <FontAwesome\r\n                        name='home'\r\n                        size='2x'\r\n                        style={{color:\"grey\"}}\r\n                    />\r\n                </button>\r\n                <button title=\"Pan by drag\" onClick={this.props.onPanByDragPressed}>\r\n                    {/*<img src={pan} alt=\"panByDrag\" />*/}\r\n                    <FontAwesome\r\n                        name='arrows-alt'\r\n                        size='2x'\r\n                        style={{color:\"grey\"}}\r\n                    />\r\n                </button>\r\n                <button title=\"Measure distance between points\" onClick={this.props.onMeasurePointsButtonPressed}>\r\n                    <img src={measurePoints} alt=\"measurePoints\" />\r\n                </button>\r\n                <button title=\"Measure distance between shapes\" onClick={this.props.onMeasureBetweenShapesButtonPressed}>\r\n                    <img src={measureShapes} alt=\"measureShapes\" />\r\n                </button>\r\n                <button title=\"Display solid or wire\" onClick={this.props.onToggleWidthModePressed}>\r\n                    <img src={width} alt=\"width\" />\r\n                </button>\r\n                <button title=\"Display vertices on/off\" onClick={this.props.onToggleVerticesPressed}>\r\n                    <img src={vertices} alt=\"vertices\" />\r\n                </button>\r\n                <button title=\"Display labels on/off\" onClick={this.props.onToggleLabelsPressed}>\r\n                    {/*<img src={label} alt=\"labels\" />*/}\r\n                    <FontAwesome\r\n                        name='tag'\r\n                        size='2x'\r\n                        style={{color:\"grey\"}}\r\n                    />\r\n                </button>\r\n                {/*<button title=\"Settings\" onClick={this.notImplemented}>*/}\r\n                    {/*<img src={setting} alt=\"setting\" />*/}\r\n                {/*</button>*/}\r\n\r\n                {/*{this.props.showCollisionDemoToolButton ? (*/}\r\n                    {/*<button title=\"Collision Distance Demo\" onClick={this.props.onCollisionDemoButtonPressed}>*/}\r\n                        {/*<FontAwesome*/}\r\n                            {/*name='arrows-h'*/}\r\n                            {/*size='2x'*/}\r\n                            {/*style={{color: \"grey\"}}*/}\r\n                        {/*/>*/}\r\n                    {/*</button>*/}\r\n                {/*) : null}*/}\r\n\r\n                {this.props.showSkeletonRecognitionButton ? (\r\n                    <button title=\"Skeleton Recognition Demo\" onClick={this.props.onSkeletonRecognitionButtonPressed}>\r\n                        <FontAwesome\r\n                            name='tree'\r\n                            size='2x'\r\n                            style={{color: \"grey\"}}\r\n                        />\r\n                    </button>\r\n                ) : null}\r\n\r\n                <button title=\"About\" onClick={this.props.onShowAboutPopupPressed}>\r\n                    {/*<img src={about} alt=\"about\" />*/}\r\n                    <FontAwesome\r\n                        name='info'\r\n                        size='2x'\r\n                        style={{color:\"grey\"}}\r\n                    />\r\n                </button>\r\n\r\n                <button>\r\n                    <FontAwesome\r\n                        name='ellipsis-v'\r\n                        size='2x'\r\n                        style={{color:\"white\"}}\r\n                    />\r\n                </button>\r\n\r\n                <span style={{position:\"relative\", top:-3}}>\r\n                    Units:\r\n                </span>\r\n                <button\r\n                    style={{position:\"relative\", top:-3}}\r\n                    onClick={this.props.onUnitClicked}\r\n                >\r\n                    <h3>{this.props.units}</h3>\r\n                </button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ToolbarComponent;","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\nimport Flatten from 'flatten-js';\r\nlet createjs = window.createjs;\r\n\r\nclass Stage extends createjs.Stage {\r\n    constructor(canvas) {\r\n        super(canvas);\r\n\r\n        createjs.Touch.enable(this);\r\n        this.mouseMoveOutside = false;   // true;\r\n        // this.enableDOMEvents(false);\r\n        this.enableMouseOver(20);\r\n\r\n        if (this.canvas.clientWidth > 0 && this.canvas.clientHeight > 0) {\r\n            this.canvas.width = this.canvas.clientWidth;\r\n            this.canvas.height = this.canvas.clientHeight;\r\n            // this.updateViewport(this.canvas.width, this.canvas.height);\r\n        }\r\n        this.origin = {x: this.canvas.width / 2, y: this.canvas.height / 2};\r\n        this.oldOrigin = {x: undefined, y: undefined};   // used by pan\r\n        this.resolution = 0.00001;          // MM 2 Pixels when zoomFactor = 1;\r\n        this.zoomFactor = 1.0;\r\n    }\r\n\r\n    get box() {\r\n        let minX = this.C2W_X(0);\r\n        let minY = this.C2W_Y(this.canvas.height);\r\n        let maxX = this.C2W_X(this.canvas.width);\r\n        let maxY = this.C2W_Y(0);\r\n\r\n        return ( new Flatten.Box(minX, minY, maxX, maxY) );\r\n    }\r\n\r\n    clone() {\r\n        let stage = new Stage(this.canvas);\r\n        return Object.assign(stage, this);\r\n    }\r\n\r\n    add(shape) {\r\n        this.addChild(shape);\r\n        return this;\r\n    }\r\n\r\n    scalingFactor() {\r\n        return this.resolution * this.zoomFactor;\r\n    }\r\n\r\n    C2W_Scalar(scalar) {\r\n        return (scalar / this.scalingFactor());\r\n    }\r\n\r\n    W2C_Scalar(scalar) {\r\n        return (this.scalingFactor() * scalar);\r\n    }\r\n\r\n    C2W_X(canvasX) {\r\n        return ((canvasX - this.origin.x) / this.scalingFactor());\r\n    }\r\n\r\n    C2W_Y(canvasY) {\r\n        return ((this.origin.y - canvasY) / this.scalingFactor());\r\n    }\r\n\r\n    W2C_X(worldX) {\r\n        return (this.scalingFactor() * worldX + this.origin.x);\r\n    }\r\n\r\n    W2C_Y(worldY) {\r\n        return (this.origin.y - this.scalingFactor() * worldY);\r\n    }\r\n\r\n    W2C(point) {\r\n        return {x: this.W2C_X(point.x), y: this.W2C_Y(point.y)}\r\n    }\r\n\r\n    panTo(newOrigin) {\r\n        this.origin = {x: newOrigin.x, y: newOrigin.y}\r\n    }\r\n\r\n    panBy(deltaX, deltaY) {\r\n        this.origin = {\r\n            x: this.origin.x + deltaX,\r\n            y: this.origin.y + deltaY\r\n        }\r\n    }\r\n\r\n    // zoom by 10% each time\r\n    zoomIn(ratio) {\r\n        let curRatio = ratio || 1.1;\r\n        this.zoomFactor = Math.min(10000000, curRatio * this.zoomFactor);\r\n    }\r\n\r\n    zoomOut(ratio) {\r\n        let curRatio = ratio || 1.1;\r\n        this.zoomFactor = Math.max(0.001, this.zoomFactor / curRatio);\r\n    }\r\n\r\n    // ZoomIn/Out + \"Focus follows mouse\"\r\n    zoom(focusX, focusY, bIn, ratio) {\r\n        let worldX = this.C2W_X(focusX);    // world coordinate of mouse focus before zoom\r\n        let worldY = this.C2W_Y(focusY);\r\n\r\n        bIn ? this.zoomIn(ratio) : this.zoomOut(ratio);\r\n\r\n        let newFocusX = this.W2C_X(worldX); // canvas coordinate after zoom\r\n        let newFocusY = this.W2C_Y(worldY);\r\n\r\n        this.panBy(focusX - newFocusX, focusY - newFocusY);\r\n\r\n        return [newFocusX, newFocusY];\r\n    }\r\n\r\n    zoomByMouse(focusX, focusY, bIn, ratio) {\r\n        this.zoom(focusX, focusY, bIn, ratio);\r\n    }\r\n\r\n    zoomToLimits(width, height) {\r\n        // prevent zero division in case of single point box\r\n        if (width === 0) width = 400000;\r\n        if (height === 0) height = 400000;\r\n        let resolution = Math.min(this.canvas.width / (1.1*width), this.canvas.height / (1.1*height));\r\n        let zoomFactor = resolution / this.resolution;\r\n        let ratio = zoomFactor / this.zoomFactor;\r\n        let bIn = true; //ratio > 1;\r\n\r\n        let focusX = this.canvas.width/2;\r\n        let focusY = this.canvas.height/2;\r\n        this.zoom(focusX, focusY, bIn, ratio);\r\n    }\r\n\r\n    resize() {\r\n        // this.origin.x = this.canvas.width / 2;\r\n        // this.origin.y = this.canvas.height / 2;\r\n        if (this.canvas.clientWidth > 0 && this.canvas.clientHeight > 0) {\r\n            this.canvas.width = this.canvas.clientWidth;\r\n            this.canvas.height = this.canvas.clientHeight;\r\n        }\r\n    }\r\n\r\n    // drawSomething() {\r\n    //     let shape = new Shape();\r\n    //     shape.graphics.beginFill('red').drawRect(0, 0, 20, 20);\r\n    //     this.addChild(shape);\r\n    //     this.update();\r\n    // }\r\n\r\n    panByMouseStart() {\r\n        this.oldOrigin.x = this.origin.x;\r\n        this.oldOrigin.y = this.origin.y;\r\n    }\r\n\r\n    panByMouseMove(dx, dy) {\r\n        if (dx !== undefined && dy !== undefined &&\r\n            this.oldOrigin.x !== undefined && this.oldOrigin.y !== undefined) {\r\n            this.origin = {\r\n                    x: this.oldOrigin.x + dx,\r\n                    y: this.oldOrigin.y + dy\r\n                };\r\n        }\r\n    }\r\n\r\n    panByMouseStop() {\r\n        this.oldOrigin.x = undefined;\r\n        this.oldOrigin.y = undefined;\r\n        this.tx = undefined;\r\n        this.ty = undefined;\r\n    }\r\n\r\n    panToCoordinate(x, y) {\r\n        let canvasX = this.W2C_X(x);\r\n        let canvasY = this.W2C_Y(y);\r\n\r\n        let dx = this.canvas.width / 2 - canvasX;\r\n        let dy = this.canvas.height / 2 - canvasY;\r\n        this.panBy(dx, dy);\r\n    }\r\n}\r\n\r\nexport default Stage;\r\n","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport styles from \"./CanvasComponent.module.css\";\r\nimport Stage from '../../../models/stage';\r\nimport { connect } from \"react-redux\";\r\n// import * as ActionTypes from \"../../../store/actionTypes\";\r\nimport * as actions from '../../../store/actions/stageActions';\r\n\r\nclass CanvasComponent extends Component {\r\n    canvasElement = React.createRef();\r\n\r\n    handleMouseMove = (event) => {\r\n        this.props.stage.canvas.focus();\r\n        this.props.handleMouseMove(\r\n            this.props.stage,\r\n            event.stageX,\r\n            event.stageY,\r\n            this.props.mouse.startX ? event.stageX - this.props.mouse.startX : undefined,\r\n            this.props.mouse.startY ? event.stageY - this.props.mouse.startY : undefined\r\n        );\r\n    };\r\n\r\n    handleMouseDown = (event) => {\r\n        this.props.handleMouseDown(this.props.stage, event.stageX, event.stageY);\r\n    };\r\n\r\n    handleMouseUp = (event) => {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        this.props.stage.panByMouseStop();\r\n        this.props.handleMouseUp(this.props.stage, event.stageX, event.stageY);\r\n    };\r\n\r\n    handleMouseLeave = (event) => {   // nothing works except click\r\n        this.props.stage.canvas.blur();\r\n        document.body.focus();\r\n    };\r\n\r\n    handleMouseWheel = (event) => {\r\n        event.preventDefault();\r\n\r\n        let delta = event.detail || event.wheelDelta;\r\n        if (delta !== 0) {\r\n            this.props.handleMouseWheelMove(this.props.stage, event.offsetX, event.offsetY, delta);\r\n        }\r\n    };\r\n\r\n    handleMouseWheelFox = (event) => {\r\n        event.preventDefault();\r\n        if (event.detail !== 0) {\r\n            this.props.handleMouseWheelMove(this.props.stage, event.layerX, event.layerY, -event.detail);\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        let stage = new Stage(this.canvasElement.current);\r\n\r\n        // stage.setClearColor(\"#FFFFFF\");\r\n        // stage.update();\r\n\r\n        stage.on(\"stagemousemove\", this.handleMouseMove);\r\n        stage.on(\"stagemousedown\", this.handleMouseDown);\r\n        stage.on(\"stagemouseup\", this.handleMouseUp);\r\n        stage.on(\"mouseleave\", this.handleMouseLeave);\r\n        stage.canvas.addEventListener(\"mousewheel\", this.handleMouseWheel);\r\n        stage.canvas.addEventListener(\"DOMMouseScroll\", this.handleMouseWheelFox);\r\n\r\n        this.props.registerStage(stage);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <canvas tabIndex=\"1\" ref={this.canvasElement} id=\"mainCanvas\" className={styles[\"App-canvas\"]}>\r\n            </canvas>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        stage: state.app.stage,\r\n        mouse: state.mouse\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        registerStage: (stage) => dispatch(actions.registerStage(stage)),\r\n        handleMouseDown: (stage, x, y) => dispatch(actions.handleMouseDown(stage, x, y)),\r\n        handleMouseUp: (stage, x, y) => dispatch(actions.handleMouseUp(stage, x, y)),\r\n        handleMouseMove: (stage, x, y, dx, dy) => dispatch(actions.handleMouseMove(stage, x, y, dx, dy)),\r\n        handleMouseWheelMove: (stage, x, y, delta) => dispatch(actions.handleMouseWheelMove(stage, x, y, delta))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CanvasComponent);\r\n","import * as ActionTypes from '../actionTypes';\r\n\r\nexport const registerStage = (stage) => {\r\n    return {\r\n        type: ActionTypes.NEW_STAGE_CREATED,\r\n        stage: stage\r\n    }\r\n};\r\n\r\nexport const handleMouseDown = (stage, x, y) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_DOWN_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y\r\n    }\r\n};\r\n\r\nexport const handleMouseUp = (stage, x, y) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_UP_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y\r\n    }\r\n};\r\n\r\nexport const handleMouseMove = (stage, x, y, dx, dy) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_MOVED_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y,\r\n        dx: dx,\r\n        dy: dy\r\n    }\r\n};\r\n\r\nexport const handleMouseWheelMove = (stage, x, y, delta) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y,\r\n        delta: delta\r\n    }\r\n};\r\n","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\nexport const NEW_STAGE_CREATED = \"NEW_STAGE_CREATED\";\r\nexport const STAGE_RESIZED = \"STAGE_RESIZED\";\r\n\r\nexport const NEW_SHAPE_PASTED = \"NEW_SHAPE_PASTED\";\r\n\r\n/** Toolbar buttons **/\r\nexport const PAN_BY_DRAG_BUTTON_CLICKED = \"PAN_BY_DRAG_BUTTON_CLICKED\";\r\nexport const MEASURE_POINTS_BUTTON_PRESSED = \"MEASURE_POINTS_BUTTON_PRESSED\";\r\nexport const MEASURE_SHAPES_BUTTON_PRESSED = \"MEASURE_SHAPES_BUTTON_PRESSED\";\r\nexport const TOGGLE_ABOUT_POPUP_CLICKED = \"TOGGLE_ABOUT_POPUP_CLICKED\";\r\n// export const CLOSE_ABOUT_POPUP_BUTTON_PRESSED = \"CLOSE_ABOUT_POPUP_BUTTON_PRESSED\";\r\nexport const TOGGLE_UNITS_CLICKED = \"TOGGLE_UNITS_CLICKED\";\r\nexport const TOGGLE_WIDTH_MODE_CLICKED = \"TOGGLE_WIDTH_MODE_CLICKED\";\r\nexport const TOGGLE_DISPLAY_VERTICES_CLICKED = \"TOGGLE_DISPLAY_VERTICES_CLICKED\";\r\nexport const TOGGLE_DISPLAY_LABELS_CLICKED = \"TOGGLE_DISPLAY_LABELS_CLICKED\";\r\n\r\nexport const MOUSE_MOVED_ON_STAGE = \"MOUSE_MOVED_ON_STAGE\";\r\nexport const MOUSE_DOWN_ON_STAGE = \"MOUSE_DOWN_ON_STAGE\";\r\nexport const MOUSE_UP_ON_STAGE = \"MOUSE_UP_ON_STAGE\";\r\nexport const MOUSE_WHEEL_MOVE_ON_STAGE = \"MOUSE_WHEEL_MOVE_ON_STAGE\";\r\n\r\nexport const MOUSE_ROLL_OVER_SHAPE = \"MOUSE_ROLL_OVER_SHAPE\";\r\nexport const MOUSE_ROLL_OUT_SHAPE = \"MOUSE_ROLL_OUT_SHAPE\";\r\nexport const MOUSE_CLICKED_ON_SHAPE = \"MOUSE_CLICKED_ON_SHAPE\";\r\n\r\n// export const HOME_BUTTON_CLICKED = \"HOME_BUTTON_CLICKED\";\r\nexport const PAN_TO_COORDINATE = \"PAN_TO_COORDINATE\";\r\nexport const PAN_AND_ZOOM_TO_SHAPE = \"PAN_AND_ZOOM_TO_SHAPE\";\r\n\r\nexport const LAYER_LIST_PANEL_PRESSED = \"LAYER_LIST_PANEL_PRESSED\";\r\nexport const ADD_LAYER_BUTTON_PRESSED = \"ADD_LAYER_BUTTON_PRESSED\";\r\nexport const ADD_NEW_LAYER = \"ADD_NEW_LAYER\";\r\nexport const DELETE_LAYER_BUTTON_PRESSED = \"DELETE_LAYER_BUTTON_PRESSED\";\r\nexport const SORT_LAYERS_BUTTON_PRESSED = \"SORT_LAYERS_BUTTON_PRESSED\";\r\n\r\nexport const TOGGLE_DISPLAY_LAYER_PRESSED = \"TOGGLE_DISPLAY_LAYER_PRESSED\";\r\nexport const TOGGLE_AFFECTED_LAYER_PRESSED=\"TOGGLE_AFFECTED_LAYER_PRESSED\";\r\nexport const OPEN_LAYER_EDIT_FORM_PRESSED = \"OPEN_LAYER_EDIT_FORM_PRESSED\";\r\nexport const SUBMIT_LAYER_EDIT_FORM_PRESSED = \"SUBMIT_LAYER_EDIT_FORM_PRESSED\";\r\nexport const ESCAPE_LAYER_EDIT_FORM_PRESSED = \"ESCAPE_LAYER_EDIT_FORM_PRESSED\";\r\n\r\nexport const LAYERS_LIST_ARROW_DOWN_PRESSED = \"LAYERS_LIST_ARROW_DOWN_PRESSED\";\r\nexport const LAYERS_LIST_ARROW_UP_PRESSED = \"LAYERS_LIST_ARROW_UP_PRESSED\";\r\n\r\n// export const TOGGLE_WATCH_EXPAND_CLICKED = \"TOGGLE_WATCH_EXPAND_CLICKED\";\r\n\r\nexport const FILENAME_LIST_SELECTED = \"FILENAME_LIST_SELECTED\";\r\nexport const INPUT_FILE_LOADED = \"INPUT_FILE_LOADED\";\r\nexport const DATA_FROM_BUFFER_PASTED = \"DATA_FROM_BUFFER_PASTED\";\r\n\r\n\r\n\r\n/** AABB Distance Measurement Demo **/\r\nexport const AABB_DEMO_URI = \"AABB_DEMO_URI\";\r\nexport const AABB_DEMO_NEXT_DIST_STEP = \"AABB_DEMO_NEXT_DIST_STEP\";\r\nexport const AABB_TREE_NEXT_LEVEL = \"AABB_TREE_NEXT_LEVEL\";\r\n\r\n/** Collision demo **/\r\nexport const COLLISION_DEMO_URI = \"COLLISION_DEMO_URI\";\r\nexport const COLLISION_DEMO_BUTTON_PRESSED = \"COLLISION_DEMO_BUTTON_PRESSED\";\r\n\r\n/** Skeleton recognition demo **/\r\nexport const SKELETON_RECOGNITION_URI = \"SKELETON_RECOGNITION_URI\";\r\nexport const SKELETON_RECOGNITION_BUTTON_PRESSED=\"SKELETON_RECOGNITION_BUTTON_PRESSED\";","/**\r\n * Created by alexanderbol on 17/06/2017.\r\n */\r\nimport React from 'react';\r\nimport styles from './StatusComponent.module.css';\r\n\r\nconst StatusComponent = () => {\r\n    return (\r\n        <div className={styles[\"App-status-bar\"]}>\r\n            <div>\r\n                <h5>\r\n                    &nbsp;\r\n                </h5>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StatusComponent;","import React, {Component} from 'react';\r\n// import Utils from \"../utils\";\r\n\r\nexport class StageComponent extends Component {\r\n    // shouldComponentUpdate useless because always returns \"true\",\r\n    // Don't know why, maybe because of children?\r\n    // ----------------------------------------------------------\r\n    // shouldComponentUpdate(nextProps, nextState) {\r\n    //     if (Utils.is_equal(this.props, nextProps)) {\r\n    //         return false;\r\n    //     }\r\n    //     return true;\r\n    // }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.stage.canvas && this.props.stage.canvas.getContext('2d')) {\r\n\r\n            let origin = this.props.stage.origin;\r\n            let zoomFactor = this.props.stage.zoomFactor*this.props.stage.resolution;\r\n            this.props.stage.setTransform(origin.x, origin.y, zoomFactor, -zoomFactor);\r\n\r\n            this.props.stage.update();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                {this.props.children}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}","import Flatten from 'flatten-js';\r\n\r\n// import * as createjs from '@createjs/easeljs';\r\nlet createjs = window.createjs;\r\nlet {Point, Segment, Circle, Arc, Polygon, Box} = Flatten;\r\n\r\n/* Provide conversion methods from FlattenJS objects to CreateJS Graphics */\r\nexport function graphics(shape, style = undefined) {\r\n    if (shape instanceof Point) {\r\n        return graphics_point(shape, style);\r\n    }\r\n    if (shape instanceof Segment) {\r\n        return graphics_segment(shape, style);\r\n    }\r\n    if (shape instanceof Arc) {\r\n        return graphics_arc(shape, style);\r\n    }\r\n    if (shape instanceof Circle) {\r\n        return graphics_circle(shape, style);\r\n    }\r\n    if (shape instanceof Box) {\r\n        return graphics_box(shape, style);\r\n    }\r\n    if (shape instanceof Polygon) {\r\n        return graphics_polygon(shape, style);\r\n    }\r\n    return null;\r\n}\r\n\r\n// Point.prototype.graphics = function(style) {\r\nfunction graphics_point(point, style) {\r\n    let radius = (style && style.radius) ? style.radius : 3;\r\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\r\n    let graphics = new createjs.Graphics();\r\n    graphics.fill = graphics.beginFill(fill).command;\r\n    graphics.circle = graphics.drawCircle(point.x, point.y, radius).command;\r\n    return graphics;\r\n};\r\n\r\n// Segment.prototype.graphics = function(style) {\r\nfunction graphics_segment(segment, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle !== undefined ? style.strokeStyle : 2;\r\n    let ignoreScale = style && style.ignoreScale !== undefined ? style.ignoreScale : true;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,1,0,10,ignoreScale)\r\n        .beginStroke(stroke)\r\n        .moveTo(segment.ps.x, segment.ps.y)\r\n        .lineTo(segment.pe.x, segment.pe.y)\r\n        .endStroke();\r\n};\r\n\r\n// Arc.prototype.graphics = function(style) {\r\nfunction graphics_arc(arc, style) {\r\n    // let startAngle = 2 * Math.PI - this.startAngle;\r\n    // let endAngle =  2 * Math.PI - this.endAngle;\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 2;\r\n    let ignoreScale = style && style.ignoreScale !== undefined ? style.ignoreScale : true;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,1,0,10,ignoreScale)\r\n        .beginStroke(stroke)\r\n        .arc(arc.pc.x, arc.pc.y, arc.r, arc.startAngle, arc.endAngle, !arc.counterClockwise)\r\n        .endStroke();\r\n};\r\n\r\n// Circle.prototype.graphics = function(style) {\r\nfunction graphics_circle(circle, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 2;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    // graphics.setStrokeStyle(2).beginStroke(\"black\").beginFill(\"red\").drawCircle(pcx, pcy, r);\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,0,0,10,true)\r\n        .beginStroke(stroke)\r\n        .drawCircle(circle.pc.x, circle.pc.y, circle.r)\r\n        .endStroke();\r\n};\r\n\r\n// Box.prototype.graphics = function(style) {\r\nfunction graphics_box(box, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    // graphics.setStrokeStyle(2).beginStroke(\"black\").beginFill(\"red\").drawCircle(pcx, pcy, r);\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,0,0,10,true)\r\n        .beginStroke(stroke)\r\n        .drawRect(box.xmin, box.ymin, box.xmax-box.xmin, box.ymax-box.ymin);\r\n};\r\n\r\nfunction setGraphicsEdgeSegment(graphics, segment) {\r\n    graphics.lineTo(segment.pe.x, segment.pe.y);\r\n}\r\n\r\nfunction setGraphicsEdgeArc(graphics, arc) {\r\n    // let startAngle = 2 * Math.PI - arc.startAngle;\r\n    // let endAngle = 2 * Math.PI - arc.endAngle;\r\n    graphics.arc(arc.pc.x, arc.pc.y, arc.r, arc.startAngle, arc.endAngle, !arc.counterClockwise);\r\n}\r\n\r\nfunction setGraphicsEdge(graphics, edge) {\r\n    if (edge.shape instanceof Segment) {\r\n        setGraphicsEdgeSegment(graphics, edge.shape);\r\n    }\r\n    else if (edge.shape instanceof Arc) {\r\n        setGraphicsEdgeArc(graphics, edge.shape);\r\n    }\r\n}\r\n\r\nfunction setGraphicsFace(graphics, face) {\r\n    let ps = face.first.start;\r\n    graphics.moveTo(ps.x, ps.y);\r\n\r\n    for (let edge of face) {\r\n        setGraphicsEdge(graphics, edge);\r\n    }\r\n}\r\n\r\n// Polygon.prototype.graphics = function(style) {\r\nfunction graphics_polygon(polygon, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\r\n    let stroke = style && style.stroke ? style.stroke : \"#FF0303\";\r\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\r\n    graphics.setStrokeStyle(strokeStyle,0,0,10,true);\r\n    graphics.stroke = graphics.beginStroke(stroke).command;\r\n    graphics.fill = graphics.beginFill(fill).command;\r\n\r\n    for (let face of polygon.faces) {\r\n        setGraphicsFace(graphics, face);\r\n    }\r\n\r\n    graphics.endStroke();\r\n    return graphics;\r\n};\r\n\r\n","const Utils = {\r\n    is_equal: (obj1, obj2) => {\r\n        let equal = true;\r\n        for (let key of Object.keys(obj2)) {\r\n            if (obj2[key] !== obj1[key]) {\r\n                equal = false;\r\n                break;\r\n            }\r\n        }\r\n        return equal;\r\n    }\r\n};\r\n\r\nexport default Utils;","/**\r\n * Created by alexanderbol on 19/06/2017.\r\n */\r\n\r\nimport {Component} from 'react';\r\n// import * as createjs from '@createjs/easeljs';\r\nimport {graphics} from '../../../../models/graphics';\r\nimport Utils from '../../../../models/utils';\r\n\r\nlet createjs = window.createjs;\r\nexport class ShapeComponent extends Component {\r\n    constructor(params) {\r\n        super();\r\n\r\n        this.shape = new createjs.Shape();\r\n        params.stage.addChild(this.shape);\r\n\r\n        this.vertexShapes = [];\r\n        this.labelShape = undefined;\r\n\r\n        for (let vertex of params.model.geom.vertices) {\r\n            let vertexShape = new createjs.Shape();\r\n            vertexShape.geom = vertex;   // augment Shape with geom struct\r\n            vertexShape.mouseEnabled = false;\r\n            params.stage.addChild(vertexShape);\r\n            this.vertexShapes.push(vertexShape);\r\n        }\r\n\r\n        if (params.model.label && params.model.label.trim() !== \"\") {\r\n            var html = document.createElement('div');\r\n            html.innerText = params.model.label;\r\n            html.style.position = \"absolute\";\r\n            html.style.top = 0;\r\n            html.style.left = 0;\r\n\r\n            document.body.appendChild(html);\r\n\r\n            this.labelShape = new createjs.DOMElement(html);\r\n\r\n            this.labelShape.geom = params.model.geom;     // augment label Shape with geom struct\r\n            params.stage.addChild(this.labelShape);\r\n        }\r\n\r\n    }\r\n\r\n    handleMouseOver = (event) => {\r\n        this.props.onMouseOver(this.props.model);\r\n    };\r\n\r\n    handleMouseOut = (event) => {\r\n        this.props.onMouseOut();\r\n    };\r\n\r\n    handleClick = (event) => {\r\n        this.props.onClick(this.props.model, this.props.layer);\r\n    };\r\n\r\n    redrawVertices(stroke, fill, alpha) {\r\n        let stage = this.props.stage;\r\n\r\n        for (let vertexShape of this.vertexShapes) {\r\n            let vertex = vertexShape.geom;\r\n            if (vertexShape.graphics.isEmpty()) {\r\n                vertexShape.graphics = graphics(vertex,   // vertex.graphics({\r\n                    {\r\n                        stroke: stroke,     // this.props.color,\r\n                        fill: fill,\r\n                        radius: 3. / (stage.zoomFactor * stage.resolution)\r\n                    });\r\n            }\r\n            else {\r\n                vertexShape.graphics.circle.radius = 3. / (stage.zoomFactor * stage.resolution);\r\n                vertexShape.graphics.fill.style = fill;\r\n            }\r\n            vertexShape.alpha = alpha;\r\n        }\r\n    }\r\n\r\n    redrawLabels(showLabel) {\r\n        if (!this.labelShape) return;\r\n\r\n        let stage = this.props.stage;\r\n\r\n        this.labelShape.htmlElement.style.display = showLabel ? \"block\" : \"none\";\r\n\r\n        let box = this.props.model.geom.box;\r\n        let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\r\n        let dx = 6. / (stage.zoomFactor * stage.resolution);\r\n        let dy = 4. / (stage.zoomFactor * stage.resolution);\r\n\r\n        this.labelShape.htmlElement.style.font = \"16px Arial\";\r\n        let unscale = 1. / (stage.zoomFactor * stage.resolution);\r\n        let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n        let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n        this.labelShape.setTransform(tx, ty, unscale, -unscale);\r\n    }\r\n\r\n    redraw() {\r\n        // Draw shape\r\n        let stage = this.props.stage;\r\n        let color = (this.props.hovered || this.props.selected) ? \"black\" : this.props.color;\r\n        let alpha = (this.props.hovered || this.props.selected) ? 1.0 : 0.6;\r\n        let widthOn = this.props.widthOn;\r\n\r\n        let strokeStyle = this.props.model.geom.aperture ? this.props.model.geom.aperture : undefined;\r\n        let fill = (widthOn && !this.props.displayVertices) ? this.props.color : \"white\";\r\n\r\n        if (this.shape.graphics.isEmpty()) {\r\n            this.shape.graphics = graphics(this.props.model.geom,{\r\n                strokeStyle: strokeStyle,\r\n                ignoreScale: true,\r\n                stroke: color,\r\n                fill: fill,\r\n                radius: 3. / (stage.zoomFactor * stage.resolution)\r\n            });\r\n\r\n            // this.skeletonShape = new createjs.Shape();\r\n            // this.skeletonShape.graphics = this.props.model.geom.graphics({\r\n            //     strokeStyle: 1,\r\n            //     ignoreScale: true,\r\n            //     stroke: color,\r\n            //     fill: fill,\r\n            //     radius: 3. / (stage.zoomFactor * stage.resolution)\r\n            // });\r\n            // this.skeletonShape.alpha = 1;\r\n            // this.props.stage.addChild(this.skeletonShape);\r\n        }\r\n        else {\r\n            if (this.shape.graphics.stroke) this.shape.graphics.stroke.style = color;\r\n            if (this.shape.graphics.fill) this.shape.graphics.fill.style = fill;\r\n            if (this.shape.graphics.circle) this.shape.graphics.circle.radius =\r\n                3. / (stage.zoomFactor * stage.resolution);\r\n        }\r\n        this.shape.alpha = this.props.displayed ? alpha : 0.0;\r\n\r\n        // let box = this.props.model.geom.box;\r\n        // this.shape.cache(box.xmin, box.ymin, box.xmax - box.xmin, box.ymax - box.ymin);\r\n\r\n        // Draw vertices\r\n        alpha = this.props.displayed && this.props.displayVertices ? 1.0 : 0.0;\r\n        this.redrawVertices(color, color, alpha);\r\n\r\n        // Draw labels\r\n        let showLabel = this.props.displayed && this.props.displayLabels;\r\n        this.redrawLabels(showLabel);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.shape.on(\"mouseover\", this.handleMouseOver);\r\n        this.shape.on(\"mouseout\", this.handleMouseOut);\r\n        this.shape.on(\"click\", this.handleClick);\r\n\r\n        // this.shape.mouseEnabled = false;\r\n\r\n        this.redraw();\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if (Utils.is_equal(this.props, nextProps)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.redraw();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.shape.off(\"mouseover\", this.handleMouseOver);\r\n        this.shape.off(\"mouseout\", this.handleMouseOut);\r\n        this.shape.off(\"click\", this.handleClick);\r\n        this.props.stage.removeChild(this.shape);\r\n        this.shape.graphics.clear();\r\n        this.props.stage.removeChild(this.labelShape);\r\n        this.labelShape = undefined;\r\n        for (let vertexShape of this.vertexShapes) {\r\n            this.props.stage.removeChild(vertexShape);\r\n        }\r\n        this.vertexShapes = [];\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * Created by alexanderbol on 19/06/2017.\r\n */\r\n\r\nimport {Component} from 'react';\r\n// import * as createjs from '@createjs/easeljs';\r\nimport '../../../../models/graphics';\r\nimport Utils from '../../../../models/utils';\r\n\r\nlet createjs = window.createjs;\r\n\r\nexport class ImageComponent extends Component {\r\n    constructor(params) {\r\n        super();\r\n\r\n        this.bitmap = new createjs.Bitmap(params.model.geom.uri);\r\n        params.stage.addChild(this.bitmap);\r\n\r\n        this.labelShape = undefined;\r\n\r\n        if (params.model.label && params.model.label.trim() !== \"\") {\r\n            var html = document.createElement('div');\r\n            html.innerText = params.model.label;\r\n            html.style.position = \"absolute\";\r\n            html.style.top = 0;\r\n            html.style.left = 0;\r\n\r\n            document.body.appendChild(html);\r\n\r\n            this.labelShape = new createjs.DOMElement(html);\r\n\r\n            this.labelShape.geom = params.model.geom;     // augment label Shape with geom struct\r\n            params.stage.addChild(this.labelShape);\r\n        }\r\n    }\r\n\r\n    handleMouseOver = (event) => {\r\n        this.props.onMouseOver(this.props.model);\r\n    };\r\n\r\n    handleMouseOut = (event) => {\r\n        this.props.onMouseOut();\r\n    };\r\n\r\n    handleClick = (event) => {\r\n        this.props.onClick(this.props.model, this.props.layer);\r\n    };\r\n\r\n    redrawLabels(showLabel) {\r\n        if (!this.labelShape) return;\r\n\r\n        let stage = this.props.stage;\r\n\r\n        this.labelShape.htmlElement.style.display = showLabel ? \"block\" : \"none\";\r\n\r\n        let box = this.props.model.geom.box;\r\n        let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\r\n        let dx = 6. / (stage.zoomFactor * stage.resolution);\r\n        let dy = 4. / (stage.zoomFactor * stage.resolution);\r\n\r\n        this.labelShape.htmlElement.style.font = \"16px Arial\";\r\n        let unscale = 1. / (stage.zoomFactor * stage.resolution);\r\n        let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n        let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n        this.labelShape.setTransform(tx, ty, unscale, -unscale);\r\n\r\n    }\r\n\r\n    redraw() {\r\n        // Draw shape\r\n\r\n        let alpha = 0.5; // (this.props.hovered || this.props.selected) ? 1.0 : 0.6;\r\n\r\n        this.bitmap.alpha = this.props.displayed ? alpha : 0.0;\r\n\r\n        let width = this.props.model.geom.width;\r\n\r\n        let ratio = this.bitmap.image.naturalWidth/this.bitmap.image.naturalHeight;\r\n        let scaleX = width/this.bitmap.image.naturalWidth; // 1. / (stage.zoomFactor * stage.resolution);\r\n        let scaleY = width/(this.bitmap.image.naturalHeight*ratio);\r\n        let tx = this.props.model.geom.center.x; // stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n        let ty = this.props.model.geom.center.y; // -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n\r\n        this.bitmap.setTransform(tx, ty, scaleX, -scaleY);\r\n\r\n        this.bitmap.regX = this.bitmap.image.naturalWidth/2;\r\n        this.bitmap.regY = this.bitmap.image.naturalHeight/2;\r\n\r\n        // let box = this.state.polygon.geom.box;\r\n        // this.shape.cache(box.xmin, box.ymin, box.xmax - box.xmin, box.ymax - box.ymin);\r\n\r\n        // Draw labels\r\n        let showLabel = this.props.displayed && this.props.displayLabels;\r\n        this.redrawLabels(showLabel);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.bitmap.on(\"mouseover\", this.handleMouseOver);\r\n        this.bitmap.on(\"mouseout\", this.handleMouseOut);\r\n        this.bitmap.on(\"click\", this.handleClick);\r\n\r\n        // this.shape.mouseEnabled = false;\r\n\r\n        this.redraw();\r\n    }\r\n\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if (Utils.is_equal(this.props, nextProps)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.redraw();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.bitmap.off(\"mouseover\", this.handleMouseOver);\r\n        this.bitmap.off(\"mouseout\", this.handleMouseOut);\r\n        this.bitmap.off(\"click\", this.handleClick);\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n","import React, {PureComponent} from 'react';\r\nimport {ShapeComponent} from './graphics/shapeComponent';\r\nimport {ImageComponent} from \"./graphics/imageComponent\";\r\n\r\nexport class LayerComponent extends PureComponent {\r\n    render() {\r\n        return (\r\n            this.props.layer.shapes.map((shape, index) => {\r\n                return shape.geom.uri ? (\r\n                    <ImageComponent\r\n                        key={index}\r\n                        stage={this.props.stage}\r\n                        layer={this.props.layer}\r\n                        model={shape}\r\n                        displayed={this.props.layer.displayed}\r\n                        hovered={shape === this.props.hoveredShape}\r\n                        selected={\r\n                            shape === this.props.firstMeasuredShape ||\r\n                            shape === this.props.secondMeasuredShape\r\n                        }\r\n                        color={this.props.layer.color}\r\n                        widthOn={this.props.widthOn}\r\n                        displayLabels={this.props.displayLabels}\r\n                        zoomFactor={this.props.zoomFactor}\r\n                        onMouseOver={this.props.onMouseOver}\r\n                        onMouseOut={this.props.onMouseOut}\r\n                        onClick={this.props.onClick}\r\n                    />\r\n                    ) : (\r\n                    <ShapeComponent\r\n                        key={index}\r\n                        stage={this.props.stage}\r\n                        layer={this.props.layer}\r\n                        model={shape}\r\n                        displayed={this.props.layer.displayed}\r\n                        hovered={shape === this.props.hoveredShape}\r\n                        selected={\r\n                            shape === this.props.firstMeasuredShape ||\r\n                            shape === this.props.secondMeasuredShape\r\n                        }\r\n                        color={this.props.layer.color}\r\n                        widthOn={this.props.widthOn}\r\n                        displayVertices={this.props.displayVertices}\r\n                        displayLabels={this.props.displayLabels}\r\n                        zoomFactor={this.props.zoomFactor}\r\n                        onMouseOver={this.props.onMouseOver}\r\n                        onMouseOut={this.props.onMouseOut}\r\n                        onClick={this.props.onClick}\r\n                    /> )\r\n                }\r\n            )\r\n        )\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport {LayerComponent} from \"./layerComponent\";\r\n\r\nclass LayersComponent extends Component {\r\n\r\n    render() {\r\n        return this.props.layers.map((layer) =>\r\n            <LayerComponent\r\n                key={layer.name}\r\n                stage={this.props.stage}\r\n                layer={layer}\r\n                color={layer.color}\r\n                displayed={layer.displayed}\r\n                displayVertices={this.props.displayVertices}\r\n                displayLabels={this.props.displayLabels}\r\n                widthOn={this.props.widthOn}\r\n                hoveredShape={this.props.hoveredShape}\r\n                firstMeasuredShape={this.props.firstMeasuredShape}\r\n                secondMeasuredShape={this.props.secondMeasuredShape}\r\n                zoomFactor={this.props.zoomFactor}\r\n                onMouseOver={this.props.onMouseOver}\r\n                onMouseOut={this.props.onMouseOut}\r\n                onClick={this.props.onClick}\r\n            />)\r\n    }\r\n}\r\n\r\nexport default LayersComponent;\r\n","\r\nlet defaultStyle = {\r\n    strokeStyle: 1,\r\n    stroke: \"#FF0303\",\r\n    fill: \"#FF0303\",\r\n    alpha: 1.0\r\n};\r\n\r\n/* Class Model represents data model that will be added to layer */\r\nexport class Model {\r\n    constructor(geom = undefined, style = undefined, label = \"\") {\r\n        this.geom = geom;\r\n        this.style = style || defaultStyle;\r\n        this.label = label;\r\n    }\r\n\r\n    clone() {\r\n        let model = new Model(this.geom, this.style, this.label);\r\n        return Object.assign(model, this);\r\n    }\r\n\r\n    get box() {\r\n        return this.geom.box;\r\n    }\r\n/*\r\n    static transformPoint(pt, stage) {\r\n        return new Flatten.Point(stage.W2C_X(pt.x), stage.W2C_Y(pt.y));\r\n    }\r\n\r\n    static transformSegment(segment, stage) {\r\n        return new Flatten.Segment(\r\n            Model.transformPoint(segment.ps, stage),\r\n            Model.transformPoint(segment.pe, stage)\r\n        )\r\n    }\r\n\r\n    static transformArc(arc, stage) {\r\n        return new Flatten.Arc(\r\n            Model.transformPoint(arc.pc, stage),\r\n            stage.W2C_Scalar(arc.r),\r\n            arc.startAngle,\r\n            arc.endAngle,\r\n            arc.counterClockwise\r\n        )\r\n    }\r\n\r\n    static transformEdge(shape, stage) {\r\n        if (shape instanceof Flatten.Segment) {\r\n            return Model.transformSegment(shape, stage);\r\n        }\r\n        else if (shape instanceof Flatten.Arc) {\r\n            return Model.transformArc(shape, stage);\r\n        }\r\n    }\r\n\r\n    static transformFace(face, stage) {\r\n        // Get shapes of face as array\r\n        let shapes = [];\r\n        for (let edge of face) {\r\n            shapes.push(edge.shape);\r\n        }\r\n\r\n        // Transform array of edges\r\n        return shapes.map(shape => Model.transformEdge(shape, stage));\r\n    }\r\n\r\n    static transformPolygon(polygon, stage) {\r\n        let newPolygon = new Flatten.Polygon();\r\n        let shapes = [];\r\n        for (let face of polygon.faces) {\r\n            shapes = Model.transformFace(face, stage);\r\n            newPolygon.addFace(shapes);\r\n        }\r\n        return newPolygon;\r\n    }\r\n*/\r\n}\r\n","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport Flatten from 'flatten-js';\r\n// import { Shape } from '../models/shape';\r\nimport { Model } from './model';\r\n\r\nexport class Layer {\r\n    constructor(stage) {\r\n        // super();\r\n        // cannot define Layer as extension of PlanarSet due to bug in compiler ?\r\n        this.stage = stage;\r\n        this.shapes = [];         // new Flatten.PlanarSet();\r\n        this.name = \"\";\r\n        this.color = \"\";\r\n        this.title = \"\";\r\n        this.displayed = false;\r\n        this.edited = false;\r\n        this.affected = false;\r\n    }\r\n\r\n    clone() {\r\n        let layer = new Layer(this.stage);\r\n        return Object.assign(layer, this);\r\n    }\r\n\r\n    add(shape) {\r\n        if (shape instanceof Model) {\r\n            this.shapes.push(shape);       // add(shape)\r\n        }\r\n        else {\r\n            let geom = shape;\r\n            let newShape = new Model(geom, {}, shape.label) // , this.stage);\r\n            this.shapes.push(newShape);     // add(newShape);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    addShapesArray(shapes) {\r\n        for (let shape of shapes) {\r\n            this.add(shape);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    get box() {\r\n        let box = new Flatten.Box();\r\n        for (let shape of this.shapes) {\r\n            box = box.merge(shape.box);\r\n        }\r\n        return box;\r\n    }\r\n\r\n    get center() {\r\n        let box = this.box;\r\n        return new Flatten.Point((box.xmin + box.xmax)/2, (box.ymin + box.ymax)/2);\r\n    }\r\n\r\n    toggleDisplayed(color) {\r\n        let displayed = !this.displayed;\r\n        return Object.assign(this.clone(),\r\n            {\r\n                displayed : displayed,\r\n                color: color\r\n            });\r\n    }\r\n\r\n    setAffected(affected) {\r\n        this.affected = affected;\r\n        return this;\r\n        // return Object.assign(this.clone(),\r\n        //     {\r\n        //         affected : affected\r\n        //     });\r\n    }\r\n\r\n    setEdited(edited) {\r\n        return Object.assign(this.clone(),\r\n            {\r\n                edited : edited\r\n            });\r\n    }\r\n\r\n    setNameAndTitle(name,title) {\r\n        return Object.assign(this.clone(),\r\n            {\r\n                name : name,\r\n                title: title,\r\n                edited: false\r\n            });\r\n    }\r\n\r\n    setAlpha() {\r\n        for(let shape of this.shapes) {\r\n            shape.alpha = this.displayed ? 1 : 0;\r\n        }\r\n        return this.shapes;\r\n    }\r\n\r\n    // toggleExpanded(shapeToggle) {\r\n    //     for(let shape of this.shapes) {\r\n    //         if (shape === shapeToggle) {\r\n    //             shape.expanded = !shape.expanded;\r\n    //         }\r\n    //     }\r\n    //     return this;\r\n    // }\r\n}","/**\r\n * Created by alexanderbol on 20/04/2017.\r\n */\r\n\r\nimport { Layer } from '../models/layer';\r\n\r\nconst colors = [\r\n    \"#FF0303\",\r\n    \"#4AA403\",\r\n    \"#540080\",\r\n    \"#FFFF40\",\r\n    \"#FF0080\",\r\n    \"#AED424\",\r\n    \"#545400\",\r\n    \"#FFA980\",\r\n    \"#A95480\",\r\n    \"#A9A9FF\",\r\n    \"#00FF00\",\r\n    \"#FFEE76\",\r\n    \"#A40576\",\r\n    \"#4385C8\",\r\n    \"#1CC826\",\r\n    \"#BDBD00\",\r\n    \"#48316E\",\r\n    \"#14616E\",\r\n    \"#8040BD\",\r\n    \"#DC7676\",\r\n    \"#924845\",\r\n    \"#A90000\",\r\n    \"#FFA900\"\r\n];\r\n\r\nexport class Layers {\r\n\r\n    static newLayer(stage, layers) {\r\n        let layer = new Layer(stage);\r\n        layer.name = Layers.getNewName(layers);\r\n        if (layers.length === 0) { // first layer\r\n            // layer.color = Layers.getNextColor(layers);\r\n            layer.displayed = false;\r\n            layer.affected = false;\r\n        }\r\n        return layer;\r\n    }\r\n\r\n    static get defaultName() {\r\n        return \"layer\";\r\n    }\r\n\r\n    static getNewName(layers) {\r\n        let name = Layers.defaultName;\r\n        let inc = 1;\r\n        let comparator = (layer) => layer.name === name;\r\n        while (layers.find(comparator) ) {\r\n            name = Layers.defaultName + inc;\r\n            inc++;\r\n        }\r\n        return name;\r\n    }\r\n\r\n    static getAffected(layers) {\r\n        return layers.find((lay) => lay.affected);\r\n    }\r\n\r\n    static setAffected(layers, layer) {\r\n        let currentAffectedLayer = Layers.getAffected(layers);\r\n        if (currentAffectedLayer) {\r\n            currentAffectedLayer.affected = false;\r\n        }\r\n        layer.affected = true;\r\n    }\r\n\r\n    static getNextColor(layers) {\r\n        let color = \"\";\r\n        for (let col of colors) {\r\n            if (!layers.find((layer) =>\r\n                layer.displayed && layer.color === col)) {\r\n                color = col;\r\n                break;\r\n            }\r\n        }\r\n        return color;\r\n    }\r\n\r\n    static delete(layers, layer) {\r\n        let index = layers.findIndex((l) => l === layer);\r\n        let newLayers = layers.filter(l => l !== layer);\r\n        if (index > 0) {\r\n            newLayers[index-1].affected = true;\r\n            if (newLayers[index-1].color === \"\") {\r\n                newLayers[index - 1].color = Layers.getNextColor(newLayers);\r\n            }\r\n            newLayers[index-1].displayed = true;\r\n        }\r\n        return newLayers;\r\n        // another option to delete from array:\r\n        // const newLayers = [...layers]\r\n        // return newLayers.splice( index, 1);\r\n    }\r\n\r\n    static sort(layers) {\r\n        let newLayers = layers.slice();\r\n        newLayers.sort( function(l1, l2) {\r\n            let name1 = l1.name.toUpperCase();\r\n            let name2 = l2.name.toUpperCase();\r\n            if (name1 < name2) {\r\n                return -1;\r\n            }\r\n            if (name1 > name2) {\r\n                return 1;\r\n            }\r\n            return 0;\r\n        });\r\n        return newLayers;\r\n    }\r\n}","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\n\r\nexport class MeasurePointsTool extends Component {\r\n    startX = undefined;\r\n    startY = undefined;\r\n    endX = undefined;\r\n    endY = undefined;\r\n    measureStarted = false;\r\n\r\n    handleMouseDown = (event) => {\r\n        event.preventDefault();\r\n\r\n        let canvas = this.refs.measureCanvas;\r\n        let stage = this.props.stage;\r\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        let coordX = event.offsetX || event.originalEvent.layerX;    // layerX for Firefox\r\n        let coordY = event.offsetY || event.originalEvent.layerY;    // layery for Firefox\r\n\r\n        if (this.measureStarted) {   // second click - clear measurement\r\n            this.startX = undefined;\r\n            this.startY = undefined;\r\n            this.endX = undefined;\r\n            this.endY = undefined;\r\n            this.measureStarted = false;\r\n            canvas.style.cursor = \"auto\";\r\n        }\r\n        else {                       // first click - start measurment\r\n            this.startX = stage.C2W_X(coordX);\r\n            this.startY = stage.C2W_Y(coordY);\r\n            this.measureStarted = true;\r\n            canvas.style.cursor = \"crosshair\";\r\n        }\r\n    };\r\n\r\n\r\n    handleMouseMove = (event) => {\r\n        let stage = this.props.stage;\r\n\r\n        let coordX = event.offsetX /*|| event.originalEvent ? event.originalEvent.layerX : undefined*/;    // layerX for Firefox\r\n        let coordY = event.offsetY /*|| event.originalEvent ? event.originalEvent.layerY : undefined*/;    // layerY for Firefox\r\n\r\n        if (this.measureStarted) {\r\n            this.endX = stage.C2W_X(coordX);\r\n            this.endY = stage.C2W_Y(coordY);\r\n\r\n            this.draw();\r\n        }\r\n    };\r\n\r\n    handleMouseUp = (event) => {}\r\n\r\n    handleMouseWheel = (event) => {\r\n        event.preventDefault();\r\n\r\n        let delta = event.detail || event.wheelDelta;\r\n        if (delta !== 0) {\r\n            this.props.onMouseWheelMove(event.offsetX, event.offsetY, delta);\r\n        }\r\n    };\r\n\r\n    handleMouseWheelFox = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (event.detail !== 0) {\r\n            this.props.onMousewheelMove(event.layerX, event.layerY, -event.detail);\r\n        }\r\n    };\r\n\r\n    draw() {\r\n        let canvas = this.refs.measureCanvas;\r\n        let context = canvas.getContext('2d');\r\n        let stage = this.props.stage;\r\n\r\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        // Draw rectangle\r\n        let pllX = Math.min(stage.W2C_X(this.startX), stage.W2C_X(this.endX));\r\n        let pllY = Math.min(stage.W2C_Y(this.startY), stage.W2C_Y(this.endY));\r\n        let width = Math.abs(stage.W2C_Scalar(this.startX - this.endX));\r\n        let height = Math.abs(stage.W2C_Scalar(this.startY - this.endY));\r\n\r\n        context.beginPath();\r\n        context.rect(pllX, pllY, width, height);\r\n\r\n        // Draw segment\r\n        context.moveTo(stage.W2C_X(this.startX), stage.W2C_Y(this.startY));\r\n        context.lineTo(stage.W2C_X(this.endX), stage.W2C_Y(this.endY));\r\n\r\n        context.lineWidth = 1;\r\n        context.strokeStyle = 'black';\r\n        context.stroke();\r\n\r\n        // Draw text\r\n        let textX, textY, textHeight, textWidth;\r\n        let backX, backY;                      // background rectangle\r\n        let text = this.measurement();\r\n\r\n        context.font = \"12pt Arial\";\r\n\r\n        textHeight = 12;         /* font size*/\r\n        textWidth = context.measureText(text).width;\r\n\r\n        // Rectangle to the right of current point, text aligned left\r\n        if (Math.abs(stage.W2C_X(this.endX) - pllX) <= 2) {\r\n            context.textAlign = \"left\";\r\n            textX = pllX + 3;\r\n            backX = pllX;\r\n        }\r\n        // Rectangle to the left of current point, text aligned right\r\n        else {\r\n            context.textAlign = \"right\";\r\n            textX = pllX + width - 3;\r\n            backX = textX - textWidth - 3;\r\n        }\r\n\r\n        if (Math.abs(stage.W2C_Y(this.endY) - pllY) <= 2) {\r\n            textY = pllY - 3;\r\n        }\r\n        else {\r\n            textY = pllY + height + textHeight + 3;\r\n        }\r\n        backY = textY - textHeight - 3;\r\n\r\n        context.fillStyle = 'white';\r\n        context.globalAlpha = 0.4;\r\n        context.fillRect(backX, backY, textWidth + 6, textHeight + 6);\r\n\r\n        context.fillStyle = \"black\";\r\n        context.globalAlpha = 1;\r\n        context.fillText(this.measurement(), textX, textY);\r\n    }\r\n\r\n    measurement() {\r\n        let dx = this.endX - this.startX;\r\n        let dy = this.endY - this.startY;\r\n        let dist = Math.sqrt(dx * dx + dy * dy);\r\n        let message = \"DX=\" + this.format(dx) + \",DY=\" + this.format(dy) + \",D=\" + this.format(dist);\r\n        return message;\r\n    }\r\n\r\n    format(num) {\r\n        return (num/this.props.divisor).toFixed(this.props.decimals);\r\n    }\r\n\r\n    componentWillMount() {\r\n        // this.dispatch = this.props.store.dispatch;\r\n        // this.setState(this.props.store.getState());\r\n    }\r\n\r\n    componentDidMount() {\r\n        let canvas = this.refs.measureCanvas;\r\n        canvas.addEventListener(\"mousedown\", this.handleMouseDown);\r\n        canvas.addEventListener(\"mousemove\", this.handleMouseMove);\r\n        canvas.addEventListener(\"mouseup\", this.handleMouseUp);\r\n\r\n        canvas.addEventListener(\"mousewheel\", this.handleMouseWheel);\r\n        canvas.addEventListener(\"DOMMouseScroll\", this.handleMouseWheelFox);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.measureStarted) {\r\n            this.draw();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        let canvas = this.refs.measureCanvas;\r\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n\r\n    render() {\r\n        let mainCanvas = this.props.stage.canvas;\r\n        let width = mainCanvas.width;\r\n        let height = mainCanvas.height;\r\n        let top = mainCanvas.offsetTop;\r\n        let left = mainCanvas.offsetLeft;\r\n        return (\r\n            <canvas tabIndex=\"1\" ref=\"measureCanvas\" id=\"measurePoints\"\r\n                    width={width}\r\n                    height={height}\r\n                    style={{position:'absolute',top:top,left:left}}\r\n            >\r\n            </canvas>\r\n        )\r\n    }\r\n}\r\n","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\n\r\nimport {Component} from 'react';\r\n// import createjs from 'easel-js';\r\n// import * as createjs from '@createjs/easeljs';\r\nimport {graphics} from '../models/graphics';\r\n// import '../../public/styles/App.css';\r\nlet createjs = window.createjs;\r\nexport class MeasureShapesTool extends Component {\r\n    constructor(params) {\r\n        super();\r\n        this.segment = new createjs.Shape();\r\n        params.stage.addChild(this.segment);\r\n\r\n        this.labelShape = new createjs.Text();\r\n        this.labelShape.x = 0;\r\n        this.labelShape.y = 0;\r\n        params.stage.addChild(this.labelShape);\r\n\r\n        // var html = document.createElement('div');\r\n        // html.innerText = \"\"; // params.model.label;\r\n        // html.style.position = \"absolute\";\r\n        // html.style.top = 0;\r\n        // html.style.left = 0;\r\n        //\r\n        // document.body.appendChild(html);\r\n        // this.labelShape = new createjs.DOMElement(html);\r\n        // params.stage.addChild(this.labelShape);\r\n    }\r\n\r\n    // redrawLabel() {\r\n    //     if (!this.labelShape) return;\r\n    //\r\n    //     let stage = this.props.stage;\r\n    //\r\n    //     this.labelShape.htmlElement.style.display = \"block\";\r\n    //\r\n    //     let box = this.props.shortestSegment.box;\r\n    //     let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\r\n    //     let dx = 6. / (stage.zoomFactor * stage.resolution);\r\n    //     let dy = 4. / (stage.zoomFactor * stage.resolution);\r\n    //\r\n    //     this.labelShape.htmlElement.style.font = \"16px Arial\";\r\n    //     this.labelShape.htmlElement.innerText = this.props.shortestSegment.length;\r\n    //\r\n    //     let unscale = 1. / (stage.zoomFactor * stage.resolution);\r\n    //     let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n    //     let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n    //     this.labelShape.setTransform(tx, ty, unscale, -unscale);\r\n    // }\r\n\r\n    format(num) {\r\n        return (num/this.props.divisor).toFixed(this.props.decimals);\r\n    }\r\n\r\n    redrawLabel() {\r\n        if (!this.labelShape) return;\r\n\r\n        let stage = this.props.stage;\r\n\r\n        let box = this.props.shortestSegment.box;\r\n        let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\r\n        let dx = 6. / (stage.zoomFactor * stage.resolution);\r\n        let dy = 4. / (stage.zoomFactor * stage.resolution);\r\n\r\n        if (box.ymin === box.ymax) {\r\n            dx = 0;\r\n            dy = -dy;\r\n        }\r\n\r\n        // this.labelShape.htmlElement.style.display = \"block\";\r\n        // this.labelShape.htmlElement.style.font = \"16px Arial\";\r\n        // this.labelShape.htmlElement.innerText = this.props.shortestSegment.length;\r\n\r\n        this.labelShape.text = this.format(this.props.shortestSegment.length);\r\n\r\n        let fontSize = 14.; // / (stage.zoomFactor * stage.resolution);\r\n        this.labelShape.font = `${fontSize}px Arial`;\r\n\r\n        let unscale = 1. / (stage.zoomFactor * stage.resolution);\r\n        // let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n        // let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n        let tx = point.x + dx;\r\n        let ty = point.y + dy;\r\n        this.labelShape.setTransform(tx, ty, unscale, -unscale);\r\n    }\r\n\r\n    draw() {\r\n        if (this.props.shortestSegment) {\r\n            this.segment.graphics = graphics(this.props.shortestSegment);\r\n            this.redrawLabel();\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.draw();\r\n    }\r\n    componentDidUpdate() {\r\n        this.segment.graphics.clear();\r\n        if (this.props.firstMeasuredShape && this.props.secondMeasuredShape &&\r\n            this.props.firstMeasuredLayer.displayed &&\r\n            this.props.secondMeasuredLayer.displayed) {\r\n\r\n            this.draw();\r\n            this.redrawLabel();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.stage.removeChild(this.segment);\r\n        this.segment.graphics.clear();\r\n        this.props.stage.removeChild(this.labelShape);\r\n        this.labelShape.text = \"\";\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\nimport React from 'react';\r\nexport const DisplayCoordsTool = (props) => {\r\n    const format = (num) => {\r\n        return (num/props.divisor).toFixed(props.decimals);\r\n    }\r\n\r\n    let mainCanvas = props.stage.canvas;\r\n    let top = mainCanvas.offsetTop + 10;\r\n    let left = mainCanvas.offsetLeft + 10;\r\n    let x = props.stage.C2W_X(props.coordX);\r\n    let y = props.stage.C2W_Y(props.coordY);\r\n    return (\r\n        <div style={{position: 'absolute', top: top, left: left}}>\r\n            <h5 style={{margin: 0, padding: 3}}>\r\n                X: {format(x)} Y: {format(y)}\r\n            </h5>\r\n        </div>\r\n    )\r\n}\r\n","import {Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst modalRoot = document.getElementById('modal-root');\r\n\r\n// A Modal component that is an abstraction around the portal API.\r\nclass Modal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // Create a div that we'll render the modal into. Because each\r\n        // Modal component has its own element, we can render multiple\r\n        // modal components into the modal container.\r\n        this.el = document.createElement('div');\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Append the element into the DOM on mount. We'll render\r\n        // into the modal container element (see the HTML tab).\r\n        modalRoot.appendChild(this.el);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // Remove the element from the DOM when we unmount\r\n        modalRoot.removeChild(this.el);\r\n    }\r\n\r\n    render() {\r\n        // Use a portal to render the children into the element\r\n        return ReactDOM.createPortal(\r\n            // Any valid React child: JSX, strings, arrays, etc.\r\n            this.props.children,\r\n            // A DOM element\r\n            this.el,\r\n        );\r\n    }\r\n}\r\n\r\nexport default Modal;","import React, {Component} from 'react';\r\nimport Modal from '../Modal';\r\nimport classes from './ModalPopup.module.css';\r\n\r\nclass ModalPopup extends Component {\r\n    offsetX;\r\n    offsetY;\r\n    dragX;\r\n    dragY;\r\n\r\n    onBackDropClicked = (ev) => {\r\n        if (ev.target.id === \"backDrop\") {\r\n            this.props.closePopup();\r\n        }\r\n    };\r\n\r\n    handleKeyDown = (ev) => {\r\n        if (ev.code === \"Escape\") {\r\n            this.props.closePopup();\r\n        }\r\n    };\r\n\r\n    elementDrag = (ev) => {\r\n        ev = ev || window.event;\r\n        // calculate the new cursor position:\r\n        this.offsetX = this.dragX - ev.clientX;\r\n        this.offsetY = this.dragY - ev.clientY;\r\n        this.dragX = ev.clientX;\r\n        this.dragY = ev.clientY;\r\n        // set the element's new position:\r\n        let element = ev.target;\r\n        element.style.top = (element.offsetTop - this.offsetY) + \"px\";\r\n        element.style.left = (element.offsetLeft - this.offsetX) + \"px\";\r\n    };\r\n\r\n    closeDragElement = (ev) => {\r\n        /* stop moving when mouse button is released:*/\r\n        ev.target.onmouseup = null;\r\n        ev.target.onmousemove = null;\r\n    };\r\n\r\n    dragMouseDown = (ev) => {\r\n        ev = ev || window.event;\r\n        // get the mouse cursor position at startup:\r\n        this.dragX = ev.clientX;\r\n        this.dragY = ev.clientY;\r\n        ev.target.onmouseup = this.closeDragElement;\r\n        // call a function whenever the cursor moves:\r\n        ev.target.onmousemove = this.elementDrag;\r\n    };\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    render() {\r\n        return this.props.showPopup ? (\r\n            <Modal>\r\n                <div\r\n                    id=\"backDrop\"\r\n                    className={classes.BackDrop}\r\n                    onClick={this.onBackDropClicked}\r\n                >\r\n                    <div className={classes.ModalPopup}\r\n                         onMouseDown={this.dragMouseDown}\r\n                    >\r\n                        {this.props.children}\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        ) : null;\r\n    }\r\n}\r\n\r\nexport default ModalPopup;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport classes from './AboutPopup.module.css';\r\n\r\nconst AboutPopup = (props) => {\r\n    return (\r\n        <div className={classes.AboutPopup}>\r\n            <h2>{props.title} v{props.version}</h2>\r\n            <h4>Build October 2018</h4>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default AboutPopup;","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport ToolbarComponent from '../../components/MainComponent/ToolbarComponent/ToolbarComponent';\r\nimport CanvasComponent from '../../components/MainComponent/CanvasComponent/CanvasComponent';\r\nimport StatusComponent from '../../components/Layout/StatusComponent/StatusComponent';\r\n\r\nimport {StageComponent} from \"../../components/MainComponent/GraphicsEditor/stageComponent\";\r\nimport LayersComponent from '../../components/MainComponent/GraphicsEditor/layersComponent';\r\n\r\nimport * as actions from '../../store/actions/appActions';\r\n\r\nimport {Layers} from '../../models/layers';\r\nimport {MeasurePointsTool} from '../../tools/measurePointsTool';\r\nimport {MeasureShapesTool} from \"../../tools/measureShapesTool\";\r\nimport {DisplayCoordsTool} from \"../../tools/displayCoordsTool\";\r\n\r\nimport ModalPopup from \"../../components/UI/ModalPopup/ModalPopup\";\r\nimport AboutPopup from \"../../components/AboutPopup/AboutPopup\";\r\n\r\nimport styles from './MainComponent.module.css';\r\nimport { connect } from \"react-redux\";\r\n\r\nclass MainComponent extends Component {\r\n    handleFileSelect = (event) => {\r\n        if (!(File && FileReader && FileList)) return;\r\n        let files = event.target.files; // FileList object\r\n        this.props.handleFileSelect(files, this.props.stage, this.props.layers);\r\n    };\r\n\r\n    setHomeView = () => {\r\n        let layer = Layers.getAffected(this.props.layers);\r\n        if (!layer) return;\r\n        this.props.setHomeView(this.props.stage, layer);\r\n    };\r\n\r\n    handleKeyDown = (e) => {\r\n        // let ctrl = e.ctrlKey;\r\n        if (e.target.id !== \"mainCanvas\")\r\n            return;\r\n        switch (e.code) {\r\n            case \"KeyH\":\r\n                this.setHomeView();\r\n                break;\r\n\r\n            case \"KeyW\":\r\n                this.props.toggleWidthMode();     // toggle width On/Off in graphics model\r\n                break;\r\n\r\n            case \"KeyE\":\r\n                this.props.toggleDisplayVertices();  // toggle vertices On/Off\r\n                break;\r\n\r\n            case \"ArrowRight\":\r\n                break;\r\n\r\n            case \"ArrowLeft\":\r\n                break;\r\n            case \"ArrowUp\":\r\n                break;\r\n            case \"ArrowDown\":\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        window.onresize = this.props.resizeStage;\r\n        // Keyboard event\r\n        // var _keydown = _.throttle(this.keydown, 100);\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n        // var _keyup = _.throttle(this.keyup, 500);\r\n        document.addEventListener('keyup', this.handleKeyUp);\r\n    }\r\n\r\n    render() {\r\n        let displayCoordsTool = this.props.stage ? (\r\n            <DisplayCoordsTool\r\n                key=\"displayCoordinatedTool\"\r\n                stage={this.props.stage}\r\n                units={this.props.units}\r\n                divisor={this.props.divisor}\r\n                decimals={this.props.decimals}\r\n                coordX={this.props.mouse.x}\r\n                coordY={this.props.mouse.y}\r\n            />\r\n        ) : null;\r\n\r\n        let measurePointsTool =\r\n            this.props.measurePointsActive ? (\r\n                <MeasurePointsTool\r\n                    stage={this.props.stage}\r\n                    divisor={this.props.divisor}\r\n                    decimals={this.props.decimals}\r\n                    onMouseWheelMove={this.handleMouseWheelMove}\r\n                />\r\n            ) : null;\r\n\r\n        let measuredLayersDisplayed = this.props.measureShapesTool.firstMeasuredShape &&\r\n            this.props.measureShapesTool.secondMeasuredShape &&\r\n            this.props.measureShapesTool.firstMeasuredLayer.displayed &&\r\n            this.props.measureShapesTool.secondMeasuredLayer.displayed;\r\n\r\n        let measureShapesTool = this.props.measureShapesTool.distance &&\r\n        this.props.measureShapesTool.shortestSegment && measuredLayersDisplayed ? (\r\n            <MeasureShapesTool\r\n                key=\"MeasureShapesTool\"\r\n                stage={this.props.stage}\r\n                firstMeasuredShape={this.props.measureShapesTool.firstMeasuredShape}\r\n                secondMeasuredShape={this.props.measureShapesTool.secondMeasuredShape}\r\n                firstMeasuredLayer={this.props.measureShapesTool.firstMeasuredLayer}\r\n                secondMeasuredLayer={this.props.measureShapesTool.secondMeasuredLayer}\r\n                distance={this.props.measureShapesTool.distance}\r\n                shortestSegment={this.props.measureShapesTool.shortestSegment}\r\n                divisor={this.props.divisor}\r\n                decimals={this.props.decimals}\r\n            />\r\n        ) : null;\r\n\r\n        return (\r\n            <main className={styles[\"Main-content\"]}>\r\n                <ToolbarComponent\r\n                    units={this.props.units}\r\n                    showSkeletonRecognitionButton={this.props.showSkeletonRecognitionButton}\r\n                    onFileSelected={this.handleFileSelect}\r\n                    onHomeButtonPressed={this.setHomeView}\r\n                    onPanByDragPressed={this.props.togglePanByDrag}\r\n                    onMeasurePointsButtonPressed={this.props.toggleMeasureBetweenPoints}\r\n                    onMeasureBetweenShapesButtonPressed={this.props.toggleMeasureBetweenShapes}\r\n                    onToggleWidthModePressed={this.props.toggleWidthMode}\r\n                    onToggleVerticesPressed={this.props.toggleDisplayVertices}\r\n                    onToggleLabelsPressed={this.props.toggleDisplayLabels}\r\n                    onShowAboutPopupPressed={this.props.toggleAboutPopup}\r\n                    onSkeletonRecognitionButtonPressed={this.props.applySkeletonRecognition}\r\n                    onUnitClicked={this.props.toggleUnits}\r\n                />\r\n\r\n                <CanvasComponent />\r\n\r\n                <StageComponent\r\n                    stage={this.props.stage}\r\n                >\r\n                    <LayersComponent\r\n                        stage={this.props.stage}\r\n                        layers={this.props.layers}\r\n                        displayVertices={this.props.displayVertices}\r\n                        displayLabels={this.props.displayLabels}\r\n                        widthOn={this.props.widthOn}\r\n                        zoomFactor={this.props.zoomFactor}\r\n                        hoveredShape={this.props.measureShapesTool.hoveredShape}\r\n                        firstMeasuredShape={this.props.measureShapesTool.firstMeasuredShape}\r\n                        secondMeasuredShape={this.props.measureShapesTool.secondMeasuredShape}\r\n                        onMouseOver={this.props.handleMouseRollOverShape}\r\n                        onMouseOut={this.props.handleMouseRollOutShape}\r\n                        onClick={this.props.handleClickOnShape}\r\n                    />\r\n                    {displayCoordsTool}\r\n                    {measurePointsTool}\r\n                    {measureShapesTool}\r\n                </StageComponent>\r\n\r\n                <StatusComponent />\r\n\r\n                <ModalPopup\r\n                    showPopup={this.props.showAboutPopup}\r\n                    closePopup={this.props.toggleAboutPopup}\r\n                >\r\n                    <AboutPopup\r\n                        title={this.props.title}\r\n                        version={this.props.version}\r\n                        build={this.props.build}\r\n                        // onCloseAboutPopupPressed={this.closeAboutPopup}\r\n                    />\r\n                </ModalPopup>\r\n\r\n            </main>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        stage: state.app.stage,\r\n        title: state.app.title,\r\n        version: state.app.version,\r\n        build: state.app.build,\r\n        displayVertices: state.app.displayVertices,\r\n        displayLabels: state.app.displayLabels,\r\n        widthOn: state.app.widthOn,\r\n        zoomFactor: state.app.zoomFactor,\r\n        units: state.app.units,\r\n        showSkeletonRecognitionButton: state.app.showSkeletonRecognitionButton,\r\n        divisor: state.app.divisor,\r\n        decimals: state.app.decimals,\r\n        measurePointsActive: state.app.measurePointsActive,\r\n        showAboutPopup: state.app.showAboutPopup,\r\n        layers: state.layers,\r\n        mouse: state.mouse,\r\n        measureShapesTool: state.measureShapesTool,\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        resizeStage: () => dispatch(actions.resizeStage()),\r\n        handleFileSelect: (files, stage, layers) => dispatch(actions.handleFileSelect(files, stage, layers)),\r\n        setHomeView: (stage, shape) => dispatch(actions.setHomeView(stage, shape)),\r\n        toggleUnits: () => dispatch(actions.toggleUnits()),\r\n        toggleWidthMode: () => dispatch(actions.toggleWidthMode()),\r\n        toggleDisplayVertices: () => dispatch(actions.toggleDisplayVertices()),\r\n        toggleDisplayLabels: () => dispatch(actions.toggleDisplayLabels()),\r\n        toggleAboutPopup: () => dispatch(actions.toggleAboutPopup()),\r\n        toggleMeasureBetweenPoints: () => dispatch(actions.toggleMeasureBetweenPoints()),\r\n        toggleMeasureBetweenShapes: () => dispatch(actions.toggleMeasureBetweenShapes()),\r\n        togglePanByDrag: () => dispatch(actions.togglePanByDrag()),\r\n        applySkeletonRecognition: () => dispatch(actions.applySkeletonRecognition()),\r\n        handleMouseRollOverShape: (shape) => dispatch(actions.handleMouseRollOverShape(shape)),\r\n        handleMouseRollOutShape: () => dispatch(actions.handleMouseRollOutShape()),\r\n        handleClickOnShape: (shape, layer) => dispatch(actions.handleClickOnShape(shape, layer)),\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainComponent);\r\n","import * as ActionTypes from '../actionTypes';\r\n\r\n/* not in use ?*/\r\nexport const resizeStage = () => {\r\n    return {\r\n        type: ActionTypes.STAGE_RESIZED\r\n    }\r\n};\r\n\r\nexport const toggleUnits = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_UNITS_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleWidthMode = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_WIDTH_MODE_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleDisplayVertices = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_DISPLAY_VERTICES_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleDisplayLabels = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_DISPLAY_LABELS_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleAboutPopup = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_ABOUT_POPUP_CLICKED\r\n    }\r\n};\r\n\r\n// export const closeAboutPopup = () => {\r\n//     return {\r\n//         type: ActionTypes.CLOSE_ABOUT_POPUP_BUTTON_PRESSED\r\n//     }\r\n// };\r\n\r\nexport const toggleMeasureBetweenPoints = () => {\r\n    return {\r\n        type: ActionTypes.MEASURE_POINTS_BUTTON_PRESSED\r\n    }\r\n};\r\n\r\nexport const toggleMeasureBetweenShapes = () => {\r\n    return {\r\n        type: ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED\r\n    }\r\n};\r\n\r\nexport const applySkeletonRecognition = () => {\r\n    return {\r\n        type: ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED\r\n    }\r\n};\r\n\r\nexport const handleFileSelect = (files, stage, layers) => {\r\n    return {\r\n        type: ActionTypes.FILENAME_LIST_SELECTED,\r\n        files: files,\r\n        stage: stage,\r\n        layers: layers\r\n    }\r\n};\r\n\r\nexport const setHomeView = (stage, shape) => {\r\n    return {\r\n        type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n        stage: stage,\r\n        shape: shape\r\n    }\r\n};\r\n\r\nexport const togglePanByDrag = () => {\r\n    return {\r\n        type: ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED\r\n    }\r\n};\r\n\r\nexport const handleMouseRollOverShape = (shape) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_ROLL_OVER_SHAPE,\r\n        shape: shape\r\n    }\r\n};\r\n\r\nexport const handleMouseRollOutShape = () => {\r\n    return {\r\n        type: ActionTypes.MOUSE_ROLL_OUT_SHAPE\r\n    }\r\n};\r\n\r\nexport const handleClickOnShape = (shape, layer) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_CLICKED_ON_SHAPE,\r\n        shape: shape,\r\n        layer: layer\r\n    }\r\n};\r\n","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\nimport React from 'react';\r\nimport FontAwesome from 'react-fontawesome';\r\n\r\nimport styles from './LayerListToolbar.module.css';\r\nimport '@fortawesome/fontawesome-free/css/all.css';\r\n\r\nconst LayerListToolbar = (props) => {\r\n    return (\r\n        <div className={styles[\"Layer-list-toolbar\"]}>\r\n            <button title=\"Add layer\" onClick={props.onAddLayerButtonClicked}>\r\n                <FontAwesome\r\n                    name='plus'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n            <button title=\"Edit selected layer's name and info\" onClick={props.onEditLayerButtonClicked}>\r\n                <FontAwesome\r\n                    name='pencil-alt'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n            <button title=\"Delete selected layer\" onClick={props.onDeleteLayerButtonClicked}>\r\n                <FontAwesome\r\n                    name='times'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n            <button title=\"Sort layer list\" onClick={props.onSortLayersButtonClicked}>\r\n                <FontAwesome\r\n                    name='sort-alpha-down'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default LayerListToolbar;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport styles from './LayerEditForm.module.css';\r\n\r\nconst LayerEditForm = (props) => {\r\n    let onSubmitLayerEditForm = (ev) => {\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n        let form = ev.target.parentElement;\r\n        let newLayer = Object.assign({}, props.layer, {\r\n            name: form.layerName.value,\r\n            title: form.layerTitle.value\r\n        });\r\n        props.onSubmitLayerEditForm(newLayer);\r\n        return false;\r\n    };\r\n\r\n    let setFocus = (ev) => {\r\n        ev.stopPropagation();\r\n        ev.target.focus();\r\n    };\r\n\r\n    let onCancelLayerEditForm = () => {\r\n        props.onEscapeLayerEditForm();\r\n    };\r\n\r\n    return (\r\n        <form className={styles[\"Layer-edit-form\"]}\r\n              id=\"layerEditForm\"\r\n              onSubmit={onSubmitLayerEditForm}\r\n        >\r\n            <label>Layer name:</label><br/>\r\n            <input type=\"text\" id=\"layer-name\" name=\"layerName\" size=\"80\" defaultValue={props.layer.name}\r\n                   onClick={setFocus}/><br/>\r\n            <label>Layer info:</label><br/>\r\n            <textarea id=\"layer-title\" name=\"layerTitle\" cols=\"78\" rows=\"3\" defaultValue={props.layer.title}\r\n                      onClick={setFocus}></textarea><br/>\r\n            <button onClick={onCancelLayerEditForm}>Cancel</button>\r\n            <button onClick={onSubmitLayerEditForm}>OK</button>\r\n        </form>\r\n    )\r\n};\r\n\r\nexport default LayerEditForm;","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport ModalPopup from \"../../UI/ModalPopup/ModalPopup\";\r\nimport LayerEditForm from \"../LayerEditForm/LayerEditForm\";\r\nimport styles from './LayerListElement.module.css';\r\n\r\nclass LayerListElement extends Component {\r\n    componentDidUpdate() {\r\n        if (document.activeElement.nodeName === \"CANVAS\")\r\n            return;\r\n        let elem = this.refs.layerName;\r\n        if (this.props.layer.affected) {\r\n            elem.focus();\r\n        }\r\n    }\r\n\r\n    rgba(hex, opacity) {\r\n        let r, g, b, percent;\r\n        if (hex) {\r\n            hex = hex.replace('#', '');\r\n            r = parseInt(hex.substring(0, 2), 16);\r\n            g = parseInt(hex.substring(2, 4), 16);\r\n            b = parseInt(hex.substring(4, 6), 16);\r\n            percent = opacity;\r\n        }\r\n        else {\r\n            r = 147;\r\n            g = 128;\r\n            b = 108;\r\n            percent = 0;\r\n        }\r\n        let result = `rgba(${r},${g},${b},${percent / 100})`;\r\n\r\n        return result;\r\n    }\r\n\r\n    render() {\r\n        // let style = this.props.layer.displayed ?\r\n        //     styleSheet.displayed : styleSheet.undisplayed;\r\n\r\n        let displayed = this.props.layer.displayed ? \"Layer-displayed\" : \"Layer-undisplayed\";\r\n        let color = displayed ? this.rgba(this.props.layer.color, 100) : this.rgba();\r\n        let bgcolor = displayed ? this.rgba(this.props.layer.color, 30) : this.rgba();\r\n        let alpha = this.props.layer.affected ? 1 : 0;\r\n        let layerNameOpacity = this.props.layer.shapes.length === 0 ? 0.6 : 1.0;\r\n        return [\r\n            <li key={1}\r\n                className={styles.Layer}\r\n                onClick={this.props.onLayerClicked}\r\n                onDoubleClick={this.props.onLayerDoubleClicked}>\r\n\r\n                <div className={styles.LayerSelectionBox}\r\n                     onClick={this.props.onAffectedBoxClicked}\r\n                >\r\n                    <h4 className={styles.LayerSelectionMark}\r\n                        style={{opacity: alpha, color: color}}>\r\n                        ✓\r\n                    </h4>\r\n                </div>\r\n\r\n                <div className={styles.LayerNameBox}\r\n                     style={{backgroundColor: bgcolor, opacity: layerNameOpacity}}>\r\n                    <h4 ref=\"layerName\"\r\n                        title={this.props.layer.name}\r\n                        tabIndex='1'\r\n                    >\r\n                        {this.props.layer.name}\r\n                    </h4>\r\n                </div>\r\n\r\n            </li>,\r\n\r\n            <ModalPopup\r\n                key={2}\r\n                showPopup={this.props.layer.edited}\r\n                closePopup={this.props.onEscapeLayerEditForm}\r\n            >\r\n                <LayerEditForm\r\n                    layer={this.props.layer}\r\n                    onSubmitLayerEditForm={this.props.onSubmitLayerEditForm}\r\n                    onEscapeLayerEditForm={this.props.onEscapeLayerEditForm}\r\n                />\r\n            </ModalPopup>\r\n        ]\r\n    }\r\n}\r\n\r\nexport default LayerListElement;\r\n","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport LayerListToolbar from \"../../components/LayersList/LayerListToolbar/LayerListToolbar\";\r\nimport LayerListElement from '../../components/LayersList/LayerListElement/LayerListElement';\r\nimport * as actions from '../../store/actions/layersActions';\r\nimport { connect } from 'react-redux';\r\nimport styles from './LayersList.module.css';\r\n\r\nclass LayersList extends Component {\r\n    height = 0;\r\n\r\n    handleKeyDown = (e) => {\r\n        // e.stopPropagation();\r\n        // e.preventDefault();\r\n\r\n        if (e.target.parentElement.parentElement &&\r\n            e.target.parentElement.parentElement.parentElement &&\r\n            e.target.parentElement.parentElement.parentElement.id &&\r\n            e.target.parentElement.parentElement.parentElement.id === \"layersList\") {\r\n\r\n\r\n            switch (e.code) {\r\n                case \"ArrowRight\":\r\n                case \"ArrowDown\":\r\n                    this.props.setAffectedNextLayer();\r\n                    // this.dispatch({\r\n                    //     type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\r\n                    // });\r\n                    break;\r\n                case \"ArrowLeft\":\r\n                case \"ArrowUp\":\r\n                    this.props.setAffectedPrevLayer();\r\n                    // this.dispatch({\r\n                    //     type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\r\n                    // });\r\n                    break;\r\n                /* tab does not work properly\r\n            case \"Tab\":\r\n                if (e.shiftKey) {\r\n                    this.dispatch({\r\n                        type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\r\n                    });\r\n                }\r\n                else {\r\n                    this.dispatch({\r\n                        type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\r\n                    });\r\n                }\r\n                break;\r\n                */\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    componentDidMount() {\r\n        // Keyboard event\r\n        // var _keydown = _.throttle(this.keydown, 100);\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n        // var _keyup = _.throttle(this.keyup, 500);\r\n        // document.addEventListener('keyup', this.handleKeyUp);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.height = this.refs.layersComponent.clientHeight;\r\n        // let container = this.refs.watchContainer;\r\n        // let parentHeight = container.parentElement.clientHeight;\r\n        // container.style.maxHeight = 0.7*parentHeight;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={styles[\"App-layers\"]}\r\n                 ref=\"layersComponent\"\r\n                 onClick={this.props.onLayerListClicked}\r\n            >\r\n                {/*<h5>Layers</h5>*/}\r\n                <LayerListToolbar\r\n                    onAddLayerButtonClicked={() => this.props.onAddLayerButtonClicked(this.props.stage)}\r\n                    onEditLayerButtonClicked={this.props.onEditLayerButtonClicked}\r\n                    onDeleteLayerButtonClicked={this.props.onDeleteLayerButtonClicked}\r\n                    onSortLayersButtonClicked={this.props.onSortLayersButtonClicked}\r\n                />\r\n                <ul style={{maxHeight:0.82*(this.height-40)}}>\r\n                { this.props.layers.map((layer) =>\r\n                    <LayerListElement\r\n                        key={layer.name}\r\n                        layer={layer}\r\n                        onLayerClicked={() => this.props.onLayerClicked(layer)}\r\n                        onAffectedBoxClicked={(event) => this.props.onAffectedBoxClicked(event, layer)}\r\n                        onSubmitLayerEditForm={this.props.onSubmitLayerEditForm}\r\n                        onEscapeLayerEditForm={this.props.onEscapeLayerEditForm}\r\n                    />)\r\n                }\r\n                </ul>\r\n                {/*{addLayer}*/}\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onAddLayerButtonClicked: (stage) => dispatch(actions.addEmptyLayer(stage)),\r\n        onEditLayerButtonClicked: () => dispatch(actions.openAffectedLayerEditForm()),\r\n        onDeleteLayerButtonClicked: () => dispatch(actions.deleteAffectedLayer()),\r\n        onSortLayersButtonClicked: () => dispatch(actions.sortLayers()),\r\n        onLayerClicked: (layer) => dispatch(actions.toggleDisplayLayer(layer)),\r\n        onAffectedBoxClicked: (event, layer) => dispatch(actions.toggleAffectedLayer(event, layer)),\r\n        onSubmitLayerEditForm: (newLayer) => dispatch(actions.updateLayer(newLayer)),\r\n        onEscapeLayerEditForm: () => dispatch(actions.closeEditLayerForm()),\r\n        onLayerListClicked: () => dispatch(actions.refreshLayerList()),\r\n        setAffectedNextLayer: () => dispatch(actions.setAffectedNextLayer()),\r\n        setAffectedPrevLayer: () => dispatch(actions.setAffectedPrevLayer())\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LayersList);\r\n\r\n// export default LayersList;","import * as ActionTypes from '../actionTypes';\r\n\r\nexport const addEmptyLayer = (stage) => {\r\n    return {\r\n        type: ActionTypes.ADD_LAYER_BUTTON_PRESSED,\r\n        stage: stage\r\n    }\r\n};\r\n\r\nexport const addNewLayer = (layer) => {\r\n    return {\r\n        type: ActionTypes.ADD_NEW_LAYER,\r\n        stage: layer\r\n    }\r\n};\r\n\r\nexport const deleteAffectedLayer = () => {\r\n    return {\r\n        type: ActionTypes.DELETE_LAYER_BUTTON_PRESSED\r\n    };\r\n};\r\n\r\nexport const sortLayers = () => {\r\n    return {\r\n        type: ActionTypes.SORT_LAYERS_BUTTON_PRESSED\r\n    };\r\n};\r\n\r\nexport const toggleDisplayLayer = (layer) => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED,\r\n        layer: layer\r\n    }\r\n};\r\n\r\nexport const toggleAffectedLayer = (event, layer) => {\r\n    event.stopPropagation();\r\n    return {\r\n        type: ActionTypes.TOGGLE_AFFECTED_LAYER_PRESSED,\r\n        layer: layer\r\n    };\r\n};\r\n\r\nexport const updateLayer = (newLayer) => {\r\n    return {\r\n        type: ActionTypes.SUBMIT_LAYER_EDIT_FORM_PRESSED,\r\n        newLayer: newLayer\r\n    };\r\n};\r\n\r\nexport const closeEditLayerForm = () => {\r\n    return {\r\n        type: ActionTypes.ESCAPE_LAYER_EDIT_FORM_PRESSED\r\n    };\r\n};\r\n\r\nexport const openAffectedLayerEditForm = () => {\r\n    return {\r\n        type: ActionTypes.OPEN_LAYER_EDIT_FORM_PRESSED,\r\n    }\r\n};\r\n\r\nexport const refreshLayerList = () => {\r\n    return {\r\n        type: ActionTypes.LAYER_LIST_PANEL_PRESSED\r\n    }\r\n};\r\n\r\nexport const setAffectedNextLayer = () => {\r\n    return {\r\n        type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\r\n    }\r\n};\r\n\r\nexport const setAffectedPrevLayer = () => {\r\n    return {\r\n        type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\r\n    }\r\n};\r\n\r\n\r\n","/**\r\n * Created by alexanderbol on 06/05/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport styles from './AsideComponent.module.css';\r\n\r\nconst AsideComponent = () => {\r\n    return (\r\n        <aside className={styles[\"App-aside\"]}>\r\n            <h5>&nbsp;</h5>\r\n        </aside>\r\n    )\r\n};\r\n\r\nexport default AsideComponent;\r\n","import React from 'react';\r\nimport MainComponent from \"./containers/MainComponent/MainComponent\";\r\nimport LayersList from \"./containers/LayerList/LayersList\";\r\nimport AsideComponent from \"./components/Layout/AsideComponent/AsideComponent\";\r\nimport * as ActionTypes from \"./store/actionTypes\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst appBody = (props) => {\r\n    return (\r\n        <div className=\"App-body\" onPaste={props.pasteDataFromBuffer}>\r\n            <MainComponent />\r\n            <LayersList />\r\n            <AsideComponent />\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        pasteDataFromBuffer: (event) => dispatch({\r\n            type: ActionTypes.DATA_FROM_BUFFER_PASTED,\r\n            data: event.clipboardData\r\n        })\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(appBody);\r\n","import React from 'react';\r\nimport logoImg from \"../../../assets/images/debug-viewer-logo3-notext.png\";\r\nimport classes from \"./Logo.module.css\";\r\n\r\nconst logo = () => {\r\n    return (\r\n        <div className={classes.Logo}>\r\n            <img src={logoImg} alt=\"Debug Viewer Logo\" height=\"70px\" />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default logo;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport classes from './HeaderComponent.module.css';\r\nimport Logo from '../Logo/Logo';\r\n\r\nconst HeaderComponent = (props) => {\r\n    return (\r\n        <header className={classes[\"App-header\"]}>\r\n            <Logo />\r\n            <h2>{props.title} v{props.version}</h2>\r\n        </header>\r\n    )\r\n};\r\n\r\nexport default HeaderComponent;","import Flatten from 'flatten-js';\r\n\r\nlet {Box} = Flatten;\r\n\r\nexport class Job {\r\n    constructor() {\r\n        this.filename = \"\";\r\n        this.title = \"\";\r\n        this.profiles = [];   // array of FlattenJS Polygons\r\n        this.materials = [];  // array of FlattenJS Polygons\r\n        this.shapes = [];     // array of other FlattenJS shapes\r\n    }\r\n\r\n    get box() {\r\n        let b = new Box();\r\n        for (let shape of this.profiles) {\r\n            b.merge(shape.box);\r\n        }\r\n        for (let shape of this.materials) {\r\n            b.merge(shape.box);\r\n        }\r\n        for (let shape of this.shapes) {\r\n            b.merge(shape.box);\r\n        }\r\n        return b;\r\n    }\r\n}","import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nlet {Point, Segment, Arc, Polygon} = Flatten;\r\nlet { vector } = Flatten;\r\n\r\nconst inch2pixels = 10160000;\r\nconst mils2pixels = 10160;\r\nfunction InchToPixels(str) {\r\n    return Math.round(Number(str)*inch2pixels,0);\r\n}\r\nfunction MilsToPixels(str) {\r\n    return Math.round(Number(str)*mils2pixels,0);\r\n}\r\n\r\nfunction parsePolygon(lines, start) {\r\n    let shapes = [];\r\n    let i = start;\r\n    let line = lines[i];\r\n    let terms = line.split(' ');\r\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n    let pe;\r\n    let pc;\r\n    let end_of_face = false;\r\n    while(true) {\r\n        line = lines[i];\r\n        terms = line.split(' ');\r\n        switch (terms[0]) {\r\n            case 'OS':\r\n                pe = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n                shapes.push( new Segment(ps, pe));\r\n\r\n                ps = pe.clone();\r\n                break;\r\n            case 'OC':\r\n                pe = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n                pc = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\r\n\r\n                let cwStr = terms[5];\r\n                let counterClockwise = cwStr === 'Y' ? Flatten.CW : Flatten.CCW; /* sic ! */\r\n\r\n                let startAngle = vector(pc,ps).slope;\r\n                let endAngle = vector(pc, pe).slope;\r\n                if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n                    endAngle += 2*Math.PI;\r\n                    counterClockwise = true;\r\n                }\r\n                let r = vector(pc, ps).length;\r\n\r\n                shapes.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\r\n\r\n                ps = pe.clone();\r\n                break;\r\n            case 'OE':\r\n                end_of_face = true;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (end_of_face) {\r\n            break;\r\n        }\r\n\r\n        i++;\r\n    }\r\n    return shapes;\r\n}\r\n\r\nfunction parseLine(str, apertures) {\r\n    let terms = str.split(' ');\r\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n    let pe = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\r\n    let segment = new Segment(ps, pe);\r\n    let ap_key = Number(terms[5]);\r\n    let ap_value = apertures[ap_key];\r\n    segment.aperture = ap_value;     // augmentation\r\n    return segment;\r\n}\r\n\r\nfunction parseArc(str, apertures) {\r\n    let terms = str.split(' ');\r\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n    let pe = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\r\n    let pc = new Point( InchToPixels(terms[5]), InchToPixels(terms[6]) );\r\n\r\n    let cwStr = terms[10];\r\n    let counterClockwise = cwStr === 'Y' ? Flatten.CW : Flatten.CCW; /* sic ! */\r\n\r\n    let startAngle = vector(pc,ps).slope;\r\n    let endAngle = vector(pc, pe).slope;\r\n    if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n        endAngle += 2*Math.PI;\r\n        counterClockwise = true;\r\n    }\r\n    let r = vector(pc, ps).length;\r\n\r\n    let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\r\n\r\n    let ap_key = Number(terms[7]);\r\n    let ap_value = apertures[ap_key];\r\n    arc.aperture = ap_value;     // augmentation\r\n\r\n    return arc;\r\n}\r\n\r\nexport function parseODB(filename, str) {\r\n    let job = new Job();\r\n    job.filename = filename;\r\n\r\n    let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n    let polygon;\r\n\r\n    let apertures = [];\r\n\r\n    for (let i=0; i < arrayOfLines.length; i++) {\r\n        let line = arrayOfLines[i];\r\n        let terms = line.split(' ');\r\n\r\n        if (terms[0].substr(0,1) === '$') {\r\n            let ap_key = Number(terms[0].substr(1));\r\n            let ap_value = MilsToPixels(terms[1].substr(1));\r\n            apertures[ap_key] = ap_value;\r\n            continue;\r\n        }\r\n\r\n        switch (terms[0]) {\r\n            case 'S':                  // surface started\r\n                polygon = new Polygon();\r\n                let termArr = line.split(' ');\r\n                let polarity = termArr[1];      // consider later\r\n                polygon.polarity = polarity;\r\n                break;\r\n            case 'OB':                  // polygon started\r\n                let start = i;\r\n                let shapes = parsePolygon(arrayOfLines, start);\r\n                polygon.addFace(shapes);\r\n                i = start + shapes.length + 1;\r\n                break;\r\n            case 'SE':     // surface ended\r\n                job.shapes.push(polygon);\r\n                break;\r\n            case 'L':                  // line\r\n                let odbLine = parseLine(line, apertures);\r\n                job.shapes.push(odbLine);\r\n                break;\r\n            case 'A':                  // Arc\r\n                let odbArc = parseArc(line, apertures);\r\n                job.shapes.push(odbArc);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    return job;\r\n}","import /*React,*/ {Component} from 'react';\r\nimport axios from \"axios\";\r\n\r\nimport {Layers} from \"../../models/layers\";\r\nimport {parseODB} from \"../../models/parserODB\";\r\nimport {Model} from \"../../models/model\";\r\nimport * as ActionTypes from \"../../store/actionTypes\";\r\nimport { connect } from 'react-redux';\r\n\r\nclass Demo extends Component {\r\n    state={\r\n        done:false\r\n    };\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n            let layers = this.props.layers;\r\n\r\n            let layer = Layers.newLayer(stage, layers);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.name = \"features\";\r\n            layer.title = \"features\";\r\n            layer.affected = true;\r\n            layer.displayed = true;\r\n\r\n            axios(\"https://gist.githubusercontent.com/alexbol99/825fdf2dd508467cc852eb22aa36183d/raw/d10e853338afd8294eeb3ffdebe3bc380477a978/features\")\r\n                .then( (resp) => {\r\n                    let job = parseODB(\"features\", resp.data);\r\n\r\n                    for (let shape of job.shapes) {\r\n                        let model = new Model(shape, undefined, shape.label);\r\n                        layer.add(model);\r\n                    }\r\n\r\n                    this.props.panAndZoomToShape(stage, layer);\r\n                    this.props.addNewLayer(layer);\r\n                });\r\n            this.setState({done:true})\r\n        }\r\n    }\r\n    componentDidMount() {\r\n\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch({\r\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n            stage: stage,\r\n            shape: layer\r\n        }),\r\n        addNewLayer: (layer) => dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        })\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Demo);\r\n","import /*React,*/ {Component} from 'react';\r\nimport Flatten from 'flatten-js';\r\nimport BooleanOp from 'flatten-boolean-op';\r\nimport {Layers} from \"../../models/layers\";\r\nimport * as ActionTypes from '../../store/actionTypes';\r\nimport { connect } from 'react-redux';\r\n\r\nlet {point, arc, Polygon} = Flatten;\r\nlet {subtract, intersect} = BooleanOp;\r\n\r\nclass BooleanTest extends Component {\r\n    state={\r\n        done:false\r\n    };\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n            let layers = this.props.layers;\r\n\r\n            let layer = Layers.newLayer(stage, layers);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.name = \"features\";\r\n            layer.title = \"features\";\r\n            layer.affected = true;\r\n            layer.displayed = true;\r\n\r\n            let myPoly = new Polygon();\r\n            myPoly.addFace([point(6, 6), point(6,114), point(114, 114), point(114, 6)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);  // 0\r\n\r\n            let myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,0),84.5779281026111, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 1\r\n\r\n            myPoly = intersect(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 2\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,0),84.49938828627135, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 3\r\n\r\n            myPoly = subtract(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 4\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,120),84.8710637077582, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 5\r\n\r\n            myPoly = intersect(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 6\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,120),84.79252389141845, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 7\r\n\r\n            myPoly = subtract(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 8\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(120,120),85.20624291591454, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 9\r\n\r\n            myPoly = intersect(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 10\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(120,120), 85.1277030995748, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 11\r\n\r\n            layers[0].color = Layers.getNextColor(layers);\r\n            layers[0].affected = true;\r\n            layers[0].displayed = true;\r\n\r\n            this.props.panAndZoomToShape(stage, layers[0]);\r\n\r\n            this.setState({done:true});\r\n        }\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch({\r\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n            stage: stage,\r\n            shape: layer\r\n        }),\r\n        addNewLayer: (layer) => dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        })\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BooleanTest);\r\n","import /*React,*/ {Component} from 'react';\r\nimport * as ActionTypes from \"../../store/actionTypes\";\r\nimport { connect } from 'react-redux';\r\n\r\nclass SkeletonRecognition extends Component {\r\n    componentDidMount() {\r\n        this.props.applySkeletonRecognition();\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        applySkeletonRecognition: () => dispatch({type: ActionTypes.SKELETON_RECOGNITION_URI})\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SkeletonRecognition);\r\n","import Flatten from \"flatten-js\";\r\n// let Flatten = require('flatten-js');\r\n\r\nlet {Vector, Segment, Arc, Line, Box, Polygon} = Flatten;\r\n\r\nclass CollisionDistance {\r\n    static apply(polygon1, polygon2) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        for (let edge of [...polygon2.edges]) {\r\n            let distance = CollisionDistance.edge2polygon(edge, polygon1);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static edge2polygon(edge2, polygon1) {\r\n        let shapeBox = edge2.shape.box;\r\n        let box = new Box(\r\n            Number.NEGATIVE_INFINITY,\r\n            shapeBox.ymin,\r\n            Number.POSITIVE_INFINITY,\r\n            shapeBox.ymax\r\n        );\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        let resp_edges =  polygon1.edges.search(box);\r\n        for (let edge1 of resp_edges) {\r\n            let distance;\r\n            if (edge1.shape instanceof Segment && edge2.shape instanceof Segment) {\r\n                distance = CollisionDistance.segment2segment(edge1.shape, edge2.shape);\r\n            }\r\n            else if (edge1.shape instanceof Arc && edge2.shape instanceof Segment) {\r\n                distance = CollisionDistance.segment2arc(edge2.shape, edge1.shape);\r\n            }\r\n            else if (edge1.shape instanceof Segment && edge2.shape instanceof Arc) {\r\n                distance = CollisionDistance.segment2arc(edge1.shape, edge2.shape);\r\n            }\r\n            else if (edge1.shape instanceof Arc && edge2.shape instanceof Arc) {\r\n                distance = CollisionDistance.arc2arc(edge1.shape, edge2.shape);\r\n            }\r\n\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static point2shape(point, shape) {\r\n        let line = new Line(point, new Vector(0,1));\r\n        let intersections = line.intersect(shape);          // segment or arc\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        for (let ip of intersections) {\r\n            // eslint-disable-next-line\r\n            let [distance, shortest_segment] = point.distanceTo(ip);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static segment2segment(segment1, segment2) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        for (let point of segment1.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, segment2);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        for (let point of segment2.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, segment1);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static segment2arc(segment, arc) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        let v_s = new Vector(segment.start, segment.end);\r\n        v_s = v_s.normalize();\r\n\r\n        let v_n = [v_s.rotate90CCW().multiply(arc.r), v_s.rotate90CW().multiply(arc.r)];\r\n        let distance;\r\n\r\n        // Distance between tangent point and segment\r\n        for (let v of v_n) {\r\n            let tangent_point = arc.center.translate(v);  // tangent point in direction of the normal vector\r\n            if (tangent_point.on(arc)) {\r\n                distance = CollisionDistance.point2shape(tangent_point, segment);\r\n                if (distance < collision_distance) {\r\n                    collision_distance = distance;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let point of arc.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, segment);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        for (let point of segment.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, arc);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static arc2arc(arc1, arc2) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        let distance;\r\n\r\n        // test translation of arc2.center to arc1 enlarged by r2\r\n        let arc_enlarged = arc1.clone();\r\n        arc_enlarged.r += arc2.r;\r\n        distance = CollisionDistance.point2shape(arc2.center, arc_enlarged);\r\n        if (distance < collision_distance) {\r\n            // additional check that transformed arc actually touching\r\n            // eslint-disable-next-line\r\n            let [dist_tmp, shortest_segment_tmp] =\r\n                arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\r\n            if (Flatten.Utils.EQ_0(dist_tmp)) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n\r\n        // test translation of arc2.center to arc1 reduced by r2\r\n        if (Flatten.Utils.GE(arc1.r, arc2.r)) {\r\n            let arc_reduced = arc1.clone();\r\n            arc_reduced.r -= arc2.r;\r\n            distance = CollisionDistance.point2shape(arc2.center, arc_reduced);\r\n            if (distance < collision_distance) {\r\n                // additional check that transformed arc actually touching\r\n                // eslint-disable-next-line\r\n                let [dist_tmp, shortest_segment_tmp] =\r\n                    arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\r\n                if (Flatten.Utils.EQ_0(dist_tmp)) {\r\n                    collision_distance = distance;\r\n                }\r\n            }\r\n        }\r\n\r\n        // test translation of arc1.center to arc2 reduced by r1\r\n        if (Flatten.Utils.LT(arc1.r, arc2.r)) {\r\n            let arc_reduced = arc2.clone();\r\n            arc_reduced.r -= arc1.r;\r\n            distance = CollisionDistance.point2shape(arc1.center, arc_reduced);\r\n            if (distance < collision_distance) {\r\n                // additional check that transformed arc actually touching\r\n                // eslint-disable-next-line\r\n                let [dist_tmp, shortest_segment_tmp] =\r\n                    arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\r\n                if (Flatten.Utils.EQ_0(dist_tmp)) {\r\n                    collision_distance = distance;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let point of arc1.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, arc2);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        for (let point of arc2.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, arc1);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static translateArc(arc, vec) {\r\n        let arc_tmp = arc.clone();\r\n        arc_tmp.pc = arc_tmp.pc.translate(vec);\r\n        return arc_tmp;\r\n    }\r\n\r\n    static translate(polygon, vec) {\r\n        let newPolygon = new Polygon();\r\n        for (let face of polygon.faces) {\r\n            let shapes = [];\r\n            for (let edge of face) {\r\n                if (edge.shape instanceof Segment) {\r\n                    shapes.push(\r\n                        new Segment(edge.shape.ps.translate(vec), edge.shape.pe.translate(vec))\r\n                    )\r\n                }\r\n                else if (edge.shape instanceof  Arc) {\r\n                    let arc_trans = edge.shape.clone();\r\n                    arc_trans.pc = edge.shape.pc.translate(vec);\r\n                    shapes.push(arc_trans);\r\n                }\r\n            }\r\n            newPolygon.addFace(shapes);\r\n        }\r\n        return newPolygon;\r\n    }\r\n\r\n};\r\n\r\nCollisionDistance.Flatten = Flatten;\r\n\r\nexport default CollisionDistance;\r\n","import /*React,*/ {Component} from 'react';\r\nimport Flatten from 'flatten-js';\r\nimport CollisionDistance from \"../../models/collisionDistance\";\r\nimport axios from \"axios\";\r\nimport {Layers} from \"../../models/layers\";\r\n// import {Model} from \"../../models/model\";\r\nimport * as ActionTypes from \"../../store/actionTypes\";\r\nimport { connect } from \"react-redux\";\r\n\r\nlet {vector} = Flatten;\r\n\r\nclass CollisionDemo extends Component {\r\n    state={\r\n        done:false,\r\n        data:[]\r\n    };\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n            let layers = this.props.layers;\r\n\r\n            let layer = Layers.newLayer(stage, layers);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.name = \"collision_demo\";\r\n            layer.title = \"collision_demo\";\r\n            layer.affected = true;\r\n            layer.displayed = true;\r\n\r\n            axios(\"https://gist.githubusercontent.com/alexbol99/81893d40ec5eaa00d0336c35e069dd73/raw/b9328a4c6d7d6a44f375c68b4ec207690f40fd19/Block_53388_2parts_Cont.txt\")\r\n                .then( (resp) => {\r\n                    let parser = this.props.parser;\r\n                    let polygon1 = parser.parseToPolygon(resp.data);\r\n                    layer.add(polygon1);\r\n\r\n                    let vec = vector( 2*(polygon1.box.xmax - polygon1.box.xmin), 0 );\r\n                    let polygon2 = polygon1.translate(vec);\r\n                    layer.add(polygon2);\r\n\r\n                    let collision = CollisionDistance.apply(polygon2, polygon1);\r\n                    let polygon3 = polygon2.translate(vector(-collision, 0));\r\n                    layer.add(polygon3);\r\n\r\n                    // layers.push(layer);\r\n\r\n                    this.props.panAndZoomToShape(stage, layer);\r\n                    this.props.addNewLayer(layer);\r\n                    this.props.applyCollisionDemo();\r\n                });\r\n            this.setState({done:true})\r\n        }\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage,\r\n        parser: state.app.parser\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch({\r\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n            stage: stage,\r\n            shape: layer\r\n        }),\r\n        addNewLayer: (layer) => dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        }),\r\n        applyCollisionDemo: () => dispatch({\r\n            type: ActionTypes.COLLISION_DEMO_URI\r\n        })\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CollisionDemo);\r\n","import React, {Component} from 'react';\r\nimport { BrowserRouter, Route/*, Switch*/ } from 'react-router-dom';\r\n\r\nimport AppBody from './AppBody';\r\n\r\nimport HeaderComponent from './components/Layout/HeaderComponent/HeaderComponent';\r\n// import MainComponent from './containers/MainComponent/MainComponent';\r\n// import LayersList from './containers/LayerList/LayersList';\r\n// import AsideComponent from './components/Layout/AsideComponent/AsideComponent';\r\n//\r\n// import * as ActionTypes from './store/actionTypes';\r\nimport { connect } from 'react-redux';\r\n\r\nimport './App.css';\r\n\r\nimport Demo from './components/Constructions/Demo';\r\nimport BooleanTest from './components/Constructions/BooleanTest';\r\nimport SkeletonRecognition from './components/Constructions/SkeletonRecognition';\r\nimport CollisionDemo from \"./components/Constructions/CollisionDemo\";\r\n\r\nclass App extends Component {\r\n    render() {\r\n        return (\r\n            <BrowserRouter>\r\n                <div className=\"App\">\r\n                    <HeaderComponent\r\n                        title={this.props.title}\r\n                        version={this.props.version}\r\n                    />\r\n\r\n                    <Route path=\"/\" component={AppBody} />\r\n\r\n                    <Route path=\"/demo\" component={Demo} />\r\n                    <Route path=\"/boolean-test\" component={BooleanTest} />\r\n                    <Route path=\"/skeleton\" component={SkeletonRecognition} />\r\n                    <Route path=\"/collision-distance\" component={CollisionDemo} />\r\n\r\n                </div>\r\n            </BrowserRouter>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        title: state.app.title,\r\n        version: state.app.version\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {}\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","/**\r\n * Created by alexanderbol on 01/05/2017.\r\n */\r\n\r\nimport Flatten from 'flatten-js';\r\nlet {Point, Segment, Arc, Polygon} = Flatten;\r\nlet { vector } = Flatten;\r\n\r\n/*\r\nlet debug_str = `+\t\t[0]\t{nrec=27 nalloc=27 h_ind_id=-1 ...} mat_cont_hdr_struc\tmat_cont_struc\r\n    +\t\t[1]\t{pmin=59146400,5973200 pmax=59606001,6438000} mat_cont_lim_struc\tmat_cont_struc\r\n+\t\t[2]\t{nedge=23 nalloc=25 ntop=2 ...} mat_cont_poly_struc\tmat_cont_struc\r\n+\t\t[3]\t{pmin=59146400,5973200 pmax=59606001,6438000} mat_cont_lim_struc\tmat_cont_struc\r\n+\t\t[4]\t{ps=59192738,6363124 pe=59216000,6372800 pc=59216000,6340000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[5]\t{ps=59216000,6372800 pe=59267652,6372800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[6]\t{ps=59267652,6372800 pe=59267652,6307200 pc=59360000,6340000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[7]\t{ps=59267652,6307200 pe=59229586,6307200} mat_seg_struc\tmat_cont_struc\r\n+\t\t[8]\t{ps=59229586,6307200 pe=59212000,6289614} mat_seg_struc\tmat_cont_struc\r\n+\t\t[9]\t{ps=59212000,6289614 pe=59212000,6056386} mat_seg_struc\tmat_cont_struc\r\n+\t\t[10]\t{ps=59212000,6056386 pe=59229586,6038800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[11]\t{ps=59229586,6038800 pe=59469614,6038800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[12]\t{ps=59469614,6038800 pe=59487200,6056386} mat_seg_struc\tmat_cont_struc\r\n+\t\t[13]\t{ps=59487200,6056386 pe=59487200,6100500} mat_seg_struc\tmat_cont_struc\r\n+\t\t[14]\t{ps=59487200,6100500 pe=59434000,6180000 pc=59520000,6180000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[15]\t{ps=59434000,6180000 pe=59552800,6100500 pc=59520000,6180000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[16]\t{ps=59552800,6100500 pe=59552800,6042800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[17]\t{ps=59552800,6042800 pe=59543124,6019538 pc=59520000,6042800 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[18]\t{ps=59543124,6019538 pe=59506462,5982876} mat_seg_struc\tmat_cont_struc\r\n+\t\t[19]\t{ps=59506462,5982876 pe=59483200,5973200 pc=59483200,6006000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[20]\t{ps=59483200,5973200 pe=59216000,5973200} mat_seg_struc\tmat_cont_struc\r\n+\t\t[21]\t{ps=59216000,5973200 pe=59192738,5982876 pc=59216000,6006000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[22]\t{ps=59192738,5982876 pe=59156076,6019538} mat_seg_struc\tmat_cont_struc\r\n+\t\t[23]\t{ps=59156076,6019538 pe=59146400,6042800 pc=59179200,6042800 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[24]\t{ps=59146400,6042800 pe=59146400,6303200} mat_seg_struc\tmat_cont_struc\r\n+\t\t[25]\t{ps=59146400,6303200 pe=59156076,6326462 pc=59179200,6303200 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[26]\t{ps=59156076,6326462 pe=59192738,6363124} mat_seg_struc\tmat_cont_struc\r\n`;\r\n*/\r\n\r\nexport class Parser {\r\n    parseToWatchArray(str) {\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n        let watchArray = [];\r\n        for (let line of arrayOfLines) {\r\n            watchArray.push(line.substring(line.indexOf('{')));\r\n        }\r\n        return watchArray;\r\n    }\r\n\r\n    parseToSegment(line) {\r\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\r\n\r\n        let psArr = termArr[0].split('=')[1].split(',');\r\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n\r\n        let peArr = termArr[1].split('=')[1].split(',');\r\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n\r\n        return new Segment(ps, pe);\r\n    }\r\n\r\n    parseToArc(line) {\r\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\r\n\r\n        let psArr = termArr[0].split('=')[1].split(',');\r\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n\r\n        let peArr = termArr[1].split('=')[1].split(',');\r\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n\r\n        let pcArr = termArr[2].split('=')[1].split(',');\r\n        let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\r\n\r\n        let cwStr = termArr[3].split('=')[1];\r\n        let counterClockwise = cwStr === '0' ? true : false;\r\n\r\n        let startAngle = vector(pc,ps).slope;\r\n        let endAngle = vector(pc, pe).slope;\r\n\r\n        if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n            endAngle += 2*Math.PI;\r\n        }\r\n        let r = vector(pc, ps).length;\r\n\r\n        return new Arc(pc, r, startAngle, endAngle, counterClockwise);\r\n    }\r\n\r\n    parseToPolygon(str) {\r\n        let polygon = new Polygon();\r\n        // let mulitystr = debug_str;\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n\r\n        for (let i=0; i < arrayOfLines.length; i++) {\r\n            let line = arrayOfLines[i];\r\n            if (line.search('mat_cont_poly_struc') >= 0) {\r\n                let parenth = line.match(/\\{([^)]+)\\}/)[1];       // string inside {..}\r\n                let termArr = parenth.split(' ');                 // array of terms \"attr=value\"\r\n                let nedgesTerm = termArr[0];                      // \"nedge=nn\"\r\n                let nedgesStr = nedgesTerm.split('=')[1];\r\n                let nedges = parseInt(nedgesStr,10);\r\n\r\n                // Create new face from next #nedges of segments and arcs\r\n                let edges = [];\r\n                for (let j=i+2; j < i+2+nedges; j++) {\r\n                    line = arrayOfLines[j];\r\n                    // let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n                    // let termArr = parenth.split(' ');             // array of terms \"attr=value\"\r\n\r\n                    if (line.search('mat_seg_struc') >= 0) {\r\n                        let segment = this.parseToSegment(line);\r\n                        edges.push(segment);\r\n\r\n                        // let psArr = termArr[0].split('=')[1].split(',');\r\n                        // let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n                        //\r\n                        // let peArr = termArr[1].split('=')[1].split(',');\r\n                        // let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n                        //\r\n                        // edges.push(new Segment(ps, pe));\r\n                    }\r\n                    else if (line.search('mat_curve_struc') >= 0) {\r\n                        let arc = this.parseToArc(line);\r\n                        edges.push(arc);\r\n\r\n                        // let psArr = termArr[0].split('=')[1].split(',');\r\n                        // let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n                        //\r\n                        // let peArr = termArr[1].split('=')[1].split(',');\r\n                        // let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n                        //\r\n                        // let pcArr = termArr[2].split('=')[1].split(',');\r\n                        // let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\r\n                        //\r\n                        // let cwStr = termArr[3].split('=')[1];\r\n                        // let counterClockwise = cwStr === '0' ? true : false;\r\n                        //\r\n                        // let startAngle = vector(pc,ps).slope;\r\n                        // let endAngle = vector(pc, pe).slope;\r\n                        //\r\n                        // if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n                        //     endAngle += 2*Math.PI;\r\n                        // }\r\n                        // let r = vector(pc, ps).length;\r\n                        //\r\n                        // edges.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\r\n                    }\r\n                }\r\n                polygon.addFace(edges);\r\n            }\r\n        }\r\n        return polygon;\r\n    }\r\n\r\n    parseToPoints(str) {\r\n        let points = [];\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n        for (let line of arrayOfLines) {\r\n            if (line.search('point_struc') >= 0) {\r\n                let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n                let pointArr = parenth.split('=')[1].split(',');\r\n                let point = new Point(parseInt(pointArr[0],10), parseInt(pointArr[1],10));\r\n                point.label = line.split(/\\s+/)[1];\r\n                points.push(point);\r\n            }\r\n        }\r\n        return points;\r\n    }\r\n\r\n    parseToSegmentsArcs(str) {\r\n        let shapes = [];\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n        for (let line of arrayOfLines) {\r\n            if (line.search('mat_seg_struc') >= 0) {\r\n                let segment = this.parseToSegment(line);\r\n                shapes.push(segment);\r\n            }\r\n            else if (line.search('mat_curve_struc') >= 0) {\r\n                let arc = this.parseToArc(line);\r\n                shapes.push(arc);\r\n            }\r\n        }\r\n        return shapes;\r\n    }\r\n\r\n    parse(str) {\r\n        /* try polygon */\r\n        let polygon = this.parseToPolygon(str);\r\n        if (polygon.edges.size > 0 && polygon.faces.size > 0) {\r\n            return [polygon];\r\n        }\r\n\r\n        /* try array of points */\r\n        let points = this.parseToPoints(str);\r\n        if (points.length > 0) {\r\n            return points;\r\n        }\r\n\r\n        /* try array of segments and arcs */\r\n        let shapes = this.parseToSegmentsArcs(str);\r\n        if (shapes.length > 0) {\r\n            return shapes;\r\n        }\r\n    }\r\n}\r\n\r\n","import * as ActionTypes from \"../actionTypes\";\r\nimport {Parser} from \"../../models/parser\";\r\n\r\nconst unitsList = [\r\n    {\r\n        name: \"pixels\",\r\n        decimals: 0,\r\n        divisor: 1\r\n    },\r\n    {\r\n        name: \"inch\",\r\n        decimals: 7,\r\n        divisor: 10160000\r\n    },\r\n    {\r\n        name: \"mm\",\r\n        decimals: 6,\r\n        divisor: 400000\r\n    }];\r\n\r\nconst defaultAppState = {\r\n    title: \"Debug Viewer\",\r\n    version: process.env.REACT_APP_VERSION,\r\n    build: \"\",\r\n    units: \"pixels\",\r\n    decimals: 0,\r\n    divisor: 1,\r\n    // bg: \"#F1F1F1\",\r\n    parser: new Parser(),\r\n    widthOn: true,\r\n    displayVertices: false,\r\n    displayLabels: true,\r\n    measurePointsActive: false,\r\n    zoomFactor: undefined,\r\n    originX: undefined,\r\n    originY: undefined,\r\n    showAboutPopup: false,\r\n    importDataToNewLayer: true,       // if false, import data to affected layer\r\n    showSkeletonRecognitionButton: false,\r\n    applySkeletonRecognition: false,\r\n    stage: null\r\n};\r\n\r\nconst app = (state = defaultAppState, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.NEW_STAGE_CREATED:\r\n            return Object.assign({}, state, {\r\n                stage: action.stage,\r\n                zoomFactor: action.stage.zoomFactor * action.stage.resolution,\r\n                originX: action.stage.origin.x,\r\n                originY: action.stage.origin.y,\r\n            });\r\n\r\n        case ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE:\r\n        case ActionTypes.PAN_AND_ZOOM_TO_SHAPE:\r\n            return Object.assign({}, state, {\r\n                zoomFactor: action.stage.zoomFactor * action.stage.resolution,\r\n                originX: action.stage.origin.x,\r\n                originY: action.stage.origin.y,\r\n            });\r\n        case ActionTypes.MOUSE_MOVED_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                originX: action.stage.origin.x,\r\n                originY: action.stage.origin.y\r\n            });\r\n        case ActionTypes.TOGGLE_UNITS_CLICKED:\r\n            let curUnitsId = unitsList.findIndex(units => state.units === units.name);\r\n            let newUnits = unitsList[(curUnitsId + 1) % 3];\r\n            return Object.assign({}, state, {\r\n                units: newUnits.name,\r\n                decimals: newUnits.decimals,\r\n                divisor: newUnits.divisor\r\n            });\r\n        case ActionTypes.TOGGLE_WIDTH_MODE_CLICKED:\r\n            return Object.assign({}, state, {\r\n                widthOn: !state.widthOn,\r\n                displayVertices: state.widthOn ? state.displayVertices : false\r\n            });\r\n        case ActionTypes.TOGGLE_DISPLAY_VERTICES_CLICKED:\r\n            if (state.displayVertices) {\r\n                return Object.assign({}, state, {\r\n                    displayVertices: false\r\n                });\r\n            }\r\n            else {\r\n                return Object.assign({}, state, {\r\n                    widthOn: false,\r\n                    displayVertices: true\r\n                });\r\n            }\r\n\r\n        case ActionTypes.TOGGLE_DISPLAY_LABELS_CLICKED:\r\n            return Object.assign({}, state, {\r\n                displayLabels: !state.displayLabels\r\n            });\r\n\r\n        case ActionTypes.TOGGLE_ABOUT_POPUP_CLICKED:\r\n            return Object.assign({}, state, {\r\n                showAboutPopup: !state.showAboutPopup\r\n            });\r\n\r\n        // case ActionTypes.CLOSE_ABOUT_POPUP_BUTTON_PRESSED:\r\n        //     return Object.assign({}, state, {\r\n        //         showAboutPopup: false\r\n        //     });\r\n\r\n        case ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED:\r\n            return Object.assign({}, state, {\r\n                measurePointsActive: false\r\n            });\r\n\r\n        case ActionTypes.MEASURE_POINTS_BUTTON_PRESSED:\r\n            return Object.assign({}, state, {\r\n                measurePointsActive: true\r\n            });\r\n        case ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED:\r\n            return Object.assign({}, state, {\r\n                measurePointsActive: false\r\n            });\r\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n            if (state.hoveredShape) {\r\n                return state\r\n            }\r\n            else {\r\n                return Object.assign({}, state, {\r\n                    measureShapesFirstClick: true,\r\n                    firstMeasuredShape: null,\r\n                    firstMeasuredLayer: null,\r\n                    secondMeasuredShape: null,\r\n                    secondMeasuredLayer: null,\r\n                    distance: undefined,\r\n                    shortestSegment: null\r\n                });\r\n            }\r\n        case ActionTypes.SKELETON_RECOGNITION_URI:\r\n            return Object.assign({}, state, {\r\n                showSkeletonRecognitionButton: true\r\n            });\r\n        case ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED:\r\n            return Object.assign({}, state, {\r\n                applySkeletonRecognition: true\r\n            });\r\n        case ActionTypes.LAYER_LIST_PANEL_PRESSED:\r\n            return state;  // only to cause refresh of layers list component\r\n        case ActionTypes.AABB_TREE_NEXT_LEVEL:\r\n            return state;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default app;","import * as ActionTypes from \"../actionTypes\";\r\nimport {Layers} from \"../../models/layers\";\r\n\r\nconst layers = (state = [], action) => {\r\n    let affectedLayer = state.find(layer => layer.affected);\r\n    let affectedLayerId = state.findIndex(layer => layer.affected);\r\n    let newLayer;\r\n\r\n    switch (action.type) {\r\n        case ActionTypes.ADD_LAYER_BUTTON_PRESSED:\r\n            newLayer = Layers.newLayer(action.stage, state);\r\n            return [...state, newLayer];\r\n\r\n        case ActionTypes.ADD_NEW_LAYER:\r\n            return [...state, action.layer];\r\n\r\n        case ActionTypes.DELETE_LAYER_BUTTON_PRESSED:\r\n            if (affectedLayer) {\r\n                return Layers.delete(state, affectedLayer);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n\r\n        case ActionTypes.SORT_LAYERS_BUTTON_PRESSED:\r\n            return Layers.sort(state);\r\n\r\n        case ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED:\r\n            let color = \"\";\r\n            if (!action.layer.displayed) {\r\n                color = Layers.getNextColor(state);\r\n                if (color === \"\") return;  // no free colors\r\n            }\r\n            return state.map((layer) => {\r\n                if (layer !== action.layer) {\r\n                    // if action.layer will be undisplayed,\r\n                    // it cannot become affected, then\r\n                    // keep affected on this layer\r\n                    if (action.layer.displayed) {\r\n                        return layer;\r\n                    }\r\n                    else {\r\n                        return layer.setAffected(false);\r\n                    }\r\n                }\r\n                else {\r\n                    let newLayer = layer.toggleDisplayed(color);\r\n                    newLayer.affected = newLayer.displayed;\r\n                    return newLayer;\r\n                }\r\n                // return layer.toggleDisplayed(color);\r\n            });\r\n\r\n        case ActionTypes.TOGGLE_AFFECTED_LAYER_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer !== action.layer) {\r\n                    return layer.setAffected(false);\r\n                }\r\n                else {\r\n                    return layer.setAffected(!layer.affected);\r\n                }\r\n            });\r\n\r\n        // case ActionTypes.NEW_SHAPE_PASTED:\r\n        //     return state.map((layer) => {\r\n        //         if (layer.affected) {\r\n        //             return layer.addShapesArray(action.shapesArray);\r\n        //         }\r\n        //         else {\r\n        //             return layer;\r\n        //         }\r\n        //     });\r\n\r\n        case ActionTypes.OPEN_LAYER_EDIT_FORM_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer !== affectedLayer) {\r\n                    return layer;\r\n                }\r\n                else {\r\n                    return layer.setEdited(true);\r\n                }\r\n            });\r\n\r\n        case ActionTypes.SUBMIT_LAYER_EDIT_FORM_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer.edited) {\r\n                    return layer.setNameAndTitle(action.newLayer.name, action.newLayer.title);\r\n                }\r\n                else {\r\n                    return layer;\r\n                }\r\n            });\r\n\r\n        case ActionTypes.ESCAPE_LAYER_EDIT_FORM_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer.edited) {             // !== action.layer) {\r\n                    return layer.setEdited(false);\r\n                }\r\n                else {\r\n                    return layer;\r\n                }\r\n            });\r\n\r\n        case ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED:\r\n            if (affectedLayerId === state.length - 1) {\r\n                return state;\r\n            }\r\n            else {\r\n\r\n                let nextLayer = state[affectedLayerId + 1];\r\n\r\n                return state.map(layer => {\r\n                    if (layer === affectedLayer) {\r\n                        let newCurLayer = layer.toggleDisplayed(\"\");\r\n                        newCurLayer.affected = false;\r\n                        return newCurLayer;\r\n                    }\r\n                    else if (layer === nextLayer) {\r\n                        let color = affectedLayer.color;\r\n                        let newNextLayer = layer.toggleDisplayed(color);\r\n                        newNextLayer.affected = true;\r\n                        return newNextLayer;\r\n                    }\r\n                    else {\r\n                        return layer;\r\n                    }\r\n                });\r\n            }\r\n\r\n        case ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED:\r\n            if (affectedLayerId === 0) {\r\n                return state;\r\n            }\r\n            else {\r\n                let nextLayer = state[affectedLayerId - 1];\r\n\r\n                return state.map(layer => {\r\n                    if (layer === affectedLayer) {\r\n                        let newCurLayer = layer.toggleDisplayed(\"\");\r\n                        newCurLayer.affected = false;\r\n                        return newCurLayer;\r\n                    }\r\n                    else if (layer === nextLayer) {\r\n                        let newNextLayer = layer.toggleDisplayed(affectedLayer.color);\r\n                        newNextLayer.displayed = true;\r\n                        newNextLayer.affected = true;\r\n                        return newNextLayer;\r\n                    }\r\n                    else {\r\n                        return layer;\r\n                    }\r\n                });\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default layers;","import * as ActionTypes from \"../actionTypes\";\r\n\r\nconst defaultMouseState = {\r\n    x: 0,\r\n    y: 0,\r\n    startX: undefined,\r\n    startY: undefined\r\n};\r\n\r\nconst mouse = (state = defaultMouseState, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.MOUSE_MOVED_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                x: action.x,\r\n                y: action.y\r\n            });\r\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                startX: action.x,\r\n                startY: action.y\r\n            });\r\n        case ActionTypes.MOUSE_UP_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                startX: undefined,\r\n                startY: undefined\r\n            });\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default mouse;","import * as ActionTypes from \"../actionTypes\";\r\nimport Flatten from \"flatten-js\";\r\n\r\nconst defaultMeasureShapesTool = {\r\n    measureShapesActive: false,\r\n    measureShapesFirstClick: true,\r\n    hoveredShape: null,\r\n    firstMeasuredShape: null,\r\n    secondMeasuredShape: null,\r\n    firstMeasuredLayer: null,\r\n    secondMeasuredLayer: null,\r\n    distance: undefined,\r\n    shortestSegment: null\r\n};\r\n\r\nconst measureShapesTool = (state = defaultMeasureShapesTool, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED:\r\n            return Object.assign({}, defaultMeasureShapesTool, {\r\n                measureShapesActive: true\r\n            });\r\n        case ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED:\r\n            return Object.assign({}, defaultMeasureShapesTool);\r\n\r\n        case ActionTypes.MEASURE_POINTS_BUTTON_PRESSED:\r\n            return Object.assign({}, defaultMeasureShapesTool);\r\n\r\n        case ActionTypes.MOUSE_ROLL_OVER_SHAPE:\r\n            return Object.assign({}, state, {\r\n                hoveredShape: state.measureShapesActive ? action.shape : null\r\n            });\r\n        case ActionTypes.MOUSE_ROLL_OUT_SHAPE:\r\n            return Object.assign({}, state, {\r\n                hoveredShape: null\r\n            });\r\n        case ActionTypes.MOUSE_CLICKED_ON_SHAPE:\r\n            if (!state.measureShapesActive) {\r\n                return state;\r\n            }\r\n            // measureShapesActive\r\n\r\n            if (state.measureShapesFirstClick) {\r\n                return Object.assign({}, state, {\r\n                    firstMeasuredShape: action.shape,\r\n                    firstMeasuredLayer: action.layer,\r\n                    secondMeasuredShape: null,\r\n                    secondMeasuredLayer: null,\r\n                    measureShapesFirstClick: false,\r\n                    distance: undefined,\r\n                    shortestSegment: null\r\n                })\r\n            }\r\n            else {    // second click\r\n                if (action.shape === state.firstMeasuredShape) {\r\n                    return state;  // second click on the same shape\r\n                }\r\n\r\n                let shape1 = state.firstMeasuredShape.geom;\r\n                let shape2 = action.shape.geom;\r\n                let distance, shortestSegment;\r\n                // if (shape1 instanceof Flatten.Polygon && shape2 instanceof Flatten.Polygon) {\r\n                //     [distance, shortestSegment] = Flatten.Distance.polygon2polygon(shape1, shape2);\r\n                // }\r\n                // else {\r\n                [distance, shortestSegment] = Flatten.Distance.distance(shape1, shape2);\r\n                // }\r\n\r\n\r\n                return Object.assign({}, state, {\r\n                    secondMeasuredShape: action.shape,\r\n                    secondMeasuredLayer: action.layer,\r\n                    measureShapesFirstClick: true,\r\n                    distance: distance,\r\n                    shortestSegment: shortestSegment\r\n                });\r\n            }\r\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n            if (state.hoveredShape) {\r\n                return state\r\n            }\r\n            else {\r\n                return Object.assign({}, state, {\r\n                    measureShapesFirstClick: true,\r\n                    firstMeasuredShape: null,\r\n                    firstMeasuredLayer: null,\r\n                    secondMeasuredShape: null,\r\n                    secondMeasuredLayer: null,\r\n                    distance: undefined,\r\n                    shortestSegment: null\r\n                });\r\n            }\r\n\r\n        case ActionTypes.DELETE_LAYER_BUTTON_PRESSED:\r\n            if (action.layer === state.firstMeasuredLayer ||\r\n                action.layer === state.secondMeasuredLayer) {\r\n                return Object.assign({}, defaultMeasureShapesTool);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n\r\n        case ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED:\r\n            if (action.layer.displayed &&\r\n                (action.layer === state.firstMeasuredLayer ||\r\n                    action.layer === state.secondMeasuredLayer)) {\r\n                return Object.assign({}, defaultMeasureShapesTool);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default measureShapesTool;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport app from \"./reducers/app\";\r\nimport layers from \"./reducers/layers\";\r\nimport mouse from \"./reducers/mouse\";\r\nimport measureShapesTool from \"./reducers/measureShapesTool\";\r\n\r\nconst reducer = combineReducers({\r\n    app,\r\n    layers,\r\n    measureShapesTool,\r\n    mouse\r\n});\r\n\r\nexport default reducer;\r\n","import * as ActionTypes from '../store/actionTypes';\r\n\r\nconst log = ({ getState, dispatch }) => next => action => {\r\n\r\n    if(action.type !== ActionTypes.MOUSE_MOVED_ON_STAGE) {\r\n        console.log('ACTION: ' + action.type, action);\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\nexport default log;","import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nlet {Point, Segment, Arc, Polygon} = Flatten;\r\nlet { vector } = Flatten;\r\n\r\nfunction parseEdges(edgesXML) {\r\n    let edges = [];\r\n\r\n    for (let edge of edgesXML) {\r\n        let type = edge.getAttribute('type');\r\n\r\n        if (type === \"segment\") {\r\n            let ps = new Point(parseInt(edge.getAttribute('xs'),10), parseInt(edge.getAttribute('ys'),10));\r\n            let pe = new Point(parseInt(edge.getAttribute('xe'),10), parseInt(edge.getAttribute('ye'),10));\r\n\r\n            edges.push(new Segment(ps, pe));\r\n        }\r\n\r\n        if (type === \"curve\") {\r\n            let ps = new Point(parseInt(edge.getAttribute('xs'),10), parseInt(edge.getAttribute('ys'),10));\r\n            let pe = new Point(parseInt(edge.getAttribute('xe'),10), parseInt(edge.getAttribute('ye'),10));\r\n            let pc = new Point(parseInt(edge.getAttribute('xc'),10), parseInt(edge.getAttribute('yc'),10));\r\n\r\n            let counterClockwise = edge.getAttribute('cw') === 'no' ? true : false;\r\n\r\n            let startAngle = vector(pc,ps).slope;\r\n            let endAngle = vector(pc, pe).slope;\r\n\r\n            if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n                endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\r\n            }\r\n\r\n            let r = vector(pc, ps).length;\r\n\r\n            edges.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\r\n        }\r\n    }\r\n\r\n    return edges;\r\n}\r\n\r\nfunction parsePolygon(polygonsXML) {\r\n    let polygon = new Polygon();\r\n\r\n    // let nedges = parseInt(profile.getAttribute(\"n_edges\"), 10);\r\n\r\n    // Augment Flatten object with style\r\n    let color = polygonsXML.getAttribute(\"color\");\r\n    polygon.style = {\r\n        stroke: color || undefined,\r\n        fill: color || undefined,\r\n        alpha: 1.0\r\n    };\r\n\r\n    // Augment Flatten object with label\r\n    let label = polygonsXML.getAttribute(\"label\");\r\n    polygon.label = label;\r\n\r\n    // Add islands\r\n    let islands = polygonsXML.getElementsByTagName('island');\r\n    for (let island of islands) {\r\n        let edgesXML = island.getElementsByTagName('edge');\r\n        polygon.addFace(parseEdges(edgesXML));\r\n    }\r\n\r\n    // Add holes\r\n    let holes = polygonsXML.getElementsByTagName('hole');\r\n    for (let hole of holes) {\r\n        let edgesXML = hole.getElementsByTagName('edge');\r\n        polygon.addFace(parseEdges(edgesXML));\r\n    }\r\n\r\n    return polygon;\r\n}\r\n\r\nfunction parseSegment(segmentXML) {\r\n    let ps = new Point(parseInt(segmentXML.getAttribute('xs'),10), parseInt(segmentXML.getAttribute('ys'),10));\r\n    let pe = new Point(parseInt(segmentXML.getAttribute('xe'),10), parseInt(segmentXML.getAttribute('ye'),10));\r\n\r\n    let segment = new Segment(ps, pe);\r\n\r\n    // Augment Flatten object with label property\r\n    let label = segmentXML.getAttribute(\"label\");\r\n    segment.label = label;\r\n\r\n    return segment;\r\n}\r\n\r\nfunction parseCurve(curveXML) {\r\n    let ps = new Point(parseInt(curveXML.getAttribute('xs'),10), parseInt(curveXML.getAttribute('ys'),10));\r\n    let pe = new Point(parseInt(curveXML.getAttribute('xe'),10), parseInt(curveXML.getAttribute('ye'),10));\r\n    let pc = new Point(parseInt(curveXML.getAttribute('xc'),10), parseInt(curveXML.getAttribute('yc'),10));\r\n\r\n    let counterClockwise = curveXML.getAttribute('cw') === 'yes' ? true : false;\r\n\r\n    let startAngle = vector(pc,ps).slope;\r\n    let endAngle = vector(pc, pe).slope;\r\n\r\n    if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n        endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\r\n    }\r\n\r\n    let r = vector(pc, ps).length;\r\n\r\n    let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\r\n\r\n    // Augment Flatten object with label property\r\n    let label = curveXML.getAttribute(\"label\");\r\n    arc.label = label;\r\n\r\n    return arc;\r\n}\r\n\r\nfunction parsePoint(pointXML) {\r\n    let point = new Point(parseInt(pointXML.getAttribute('x'),10), parseInt(pointXML.getAttribute('y'),10));\r\n\r\n    // Augment Flatten object with label property\r\n    let label = pointXML.getAttribute(\"label\");\r\n    point.label = label;\r\n\r\n    return point;\r\n}\r\nexport function parseXML(filename, str) {\r\n    let job = new Job();\r\n\r\n    job.filename = filename;\r\n\r\n    let parser = new DOMParser();\r\n    let xmlDoc = parser.parseFromString(str, \"text/xml\");\r\n\r\n    // Parse document title\r\n    let titles = xmlDoc.getElementsByTagName('title');\r\n    if (titles && titles.length > 0) {\r\n        job.title = titles[0].firstChild.nodeValue;          // take the first title if more than one\r\n    }\r\n\r\n    // Parse profiles and add polygons to the job\r\n    let profilesXML = xmlDoc.getElementsByTagName('profile');\r\n    for (let profileXML of profilesXML) {\r\n        let polygon = parsePolygon(profileXML);\r\n        job.profiles.push(polygon);\r\n    }\r\n\r\n    // Parse materials and add polygons to the job\r\n    let materialXML = xmlDoc.getElementsByTagName('material');\r\n    for (let shapeXML of materialXML) {\r\n        let polygon = parsePolygon(shapeXML);\r\n        job.materials.push(polygon);\r\n    }\r\n\r\n    // Parse segments\r\n    let segmentsXML = xmlDoc.getElementsByTagName('segment');\r\n    for (let segmentXML of segmentsXML) {\r\n        let segment = parseSegment(segmentXML);\r\n        job.shapes.push(segment);\r\n    }\r\n\r\n    // Parse segments\r\n    let curvesXML = xmlDoc.getElementsByTagName('curve');\r\n    for (let curveXML of curvesXML) {\r\n        let curve = parseCurve(curveXML);\r\n        job.shapes.push(curve);\r\n    }\r\n\r\n    // Parse points\r\n    let pointsXML = xmlDoc.getElementsByTagName('point');\r\n    for (let pointXML of pointsXML) {\r\n        let point = parsePoint(pointXML);\r\n        job.shapes.push(point);\r\n    }\r\n    return job;\r\n}\r\n","import Flatten from 'flatten-js';\r\n\r\nconst pgmResolution = 25.500025;\r\nconst microns2pixels = 400;\r\n// const inch2pixels = 10160;\r\n// const offsetX = 12.322830;\r\n// const offsetY = 8.326776;\r\nconst sizeX = 3.0303;\r\n\r\nfunction toPixels(str) {\r\n    let num = Number(str);\r\n    return Math.round(num*pgmResolution*microns2pixels,0);\r\n}\r\n\r\nexport function parseImage(file) {\r\n    let image = {};          // TODO: to be Flatten.Image\r\n\r\n    let terms = file.name.split('_');\r\n    let yStr = terms[0].substr(1);\r\n    let xStr = terms[1] ? terms[1].substr(1) : undefined;\r\n\r\n    let x = isNaN(xStr) ? 0 : toPixels(xStr) + 90000;\r\n    let y = isNaN(yStr) ? 0 : toPixels(yStr) - 40000;\r\n\r\n    image.center = new Flatten.Point(x,y);\r\n    image.width = sizeX*microns2pixels*1000;    // 2 mm\r\n    image.box = new Flatten.Box(\r\n        image.center.x - image.width/2,\r\n        image.center.y - image.width/2,\r\n        image.center.x + image.width/2,\r\n        image.center.y + image.width/2,\r\n    );\r\n\r\n    return image;\r\n}","import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nlet {point} = Flatten;\r\n\r\nconst micron2pixels = 400;\r\nfunction micronToPixels(str) {\r\n    return Math.round(Number(str)*micron2pixels,0);\r\n}\r\n\r\nexport function parseCSV(filename, str) {\r\n    let job = new Job();\r\n    job.filename = filename;\r\n\r\n    let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n\r\n    for (let i = 0; i < arrayOfLines.length; i++) {\r\n        let line = arrayOfLines[i];\r\n        let terms = line.split(',');\r\n\r\n        let px = micronToPixels(terms[0]);\r\n        let py = micronToPixels(terms[1]);\r\n        let nx = Number(terms[2]);\r\n        let ny = Number(terms[3]);\r\n        let shape = point(px,py);\r\n        shape.nx = nx\r\n        shape.ny = ny;\r\n        job.shapes.push(shape)\r\n    }\r\n\r\n    return job\r\n}","import * as ActionTypes from '../store/actionTypes';\r\nimport { Layers } from '../models/layers';\r\n// import { Shape } from '../models/shape';\r\nimport { Model } from \"../models/model\";\r\nimport { parseXML } from '../models/parserXML';\r\nimport { parseODB } from \"../models/parserODB\";\r\nimport { parseImage } from \"../models/parsePGM\";\r\nimport { parseCSV } from \"../models/parseCSV\";\r\nimport { parseTXT } from \"../models/parseTXT\";\r\n\r\nconst readAsText = (reader, file, stage, layers, dispatch, files) => {\r\n\r\n    // Closure to capture file information and parameters\r\n    reader.onload = (function(theFile, stage, layers, dispatch, files) {\r\n        return (event) => {\r\n            let string = event.target.result;\r\n\r\n            let namesplitted = theFile.name.split('.');\r\n            let extension = namesplitted[namesplitted.length-1];\r\n            let job;\r\n            if (extension === 'xml') {\r\n                job = parseXML(theFile.name, string);\r\n            }\r\n            else if (extension === 'csv') {\r\n                job = parseCSV(theFile.name, string);\r\n            }\r\n            else if (extension === 'txt') {\r\n                job = parseTXT(theFile.name, string);\r\n            }\r\n            else {\r\n                job = parseODB(theFile.name, string);\r\n            }\r\n            let layer = Layers.newLayer(stage, layers);\r\n            if (theFile.name !== \"\") {\r\n                layer.name = theFile.name;\r\n            }\r\n            layer.title = job.title;\r\n\r\n            for (let polygon of job.profiles) {\r\n                if (polygon.edges.size > 0 && polygon.faces.size > 0) {\r\n                    // let watch = undefined; //  parser.parseToWatchArray(string);\r\n                    // let shape = new Shape(polygon, stage, polygon.style, watch);\r\n                    let shape = new Model(polygon, undefined, polygon.label);\r\n\r\n                    layer.add(shape);\r\n                }\r\n            }\r\n\r\n            for (let polygon of job.materials) {\r\n                if (polygon.edges.size > 0 && polygon.faces.size > 0) {\r\n                    // let watch = undefined; //  parser.parseToWatchArray(string);\r\n                    // let shape = new Shape(polygon, stage, polygon.style, watch);\r\n                    let shape = new Model(polygon, undefined, polygon.label);\r\n\r\n                    layer.add(shape);\r\n                }\r\n            }\r\n\r\n            for (let shape of job.shapes) {\r\n                let model = new Model(shape, undefined, shape.label);\r\n                layer.add(model);\r\n            }\r\n\r\n            // layers.push(layer);\r\n\r\n            if (theFile === files[0]) {\r\n                Layers.setAffected(layers, layer);\r\n                layer.color = Layers.getNextColor(layers);\r\n                layer.displayed = true;\r\n                dispatch({\r\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                    stage: stage,\r\n                    shape: layer\r\n                });\r\n            }\r\n            dispatch({\r\n                type: ActionTypes.ADD_NEW_LAYER,\r\n                layer: layer\r\n            })\r\n\r\n        }\r\n    })(file, stage, layers, dispatch, files);\r\n\r\n    reader.readAsText(file);\r\n};\r\n\r\nconst readAsImage = (reader, file, stage, layers, dispatch, files) => {\r\n    reader.addEventListener(\"load\", function () {\r\n        // let image = {};          // TODO: to be Flatten.Image\r\n        // image.uri = this.result;\r\n        // image.center = new Flatten.Point(0,0);\r\n        // image.width = 2*400000;    // 2 micron\r\n        // image.box = new Flatten.Box(\r\n        //     image.center.x - image.width/2,\r\n        //     image.center.y - image.width/2,\r\n        //     image.center.x + image.width/2,\r\n        //     image.center.y + image.width/2,\r\n        // );\r\n\r\n        let image = parseImage(file);\r\n        image.uri = this.result;\r\n\r\n        let model = new Model(image);\r\n\r\n        let layer = Layers.newLayer(stage, layers);\r\n        if (file.name !== \"\") {\r\n            layer.name = file.name;\r\n        }\r\n\r\n        layer.add(model);\r\n\r\n        layers.push(layer);\r\n\r\n        if (file === files[0]) {\r\n            Layers.setAffected(layers, layer);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.displayed = true;\r\n            dispatch({\r\n                type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                stage: stage,\r\n                shape: layer\r\n            });\r\n        }\r\n\r\n        dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        })\r\n\r\n\r\n    }, false);\r\n\r\n    reader.readAsDataURL(file);\r\n};\r\n\r\nconst readFile = (file, stage, layers, dispatch, files) => {\r\n    if (file.type !== \"\" &&\r\n        !(file.type.match('text.*') || file.type.match('application.*') ||\r\n        file.type.match('image.*')) ) return;   // validate type is text\r\n\r\n    let reader = new FileReader();\r\n\r\n    if (file.type.match('text.*') || file.type.match('application.*') || file.name.match('features*')) {\r\n        readAsText(reader, file, stage, layers, dispatch, files);\r\n    }\r\n\r\n    else if (file.type.match('image.*')) {\r\n        readAsImage(reader, file, stage, layers, dispatch, files);\r\n    }\r\n\r\n};\r\n\r\nconst readFiles = ({ dispatch, getState }) => next => action => {\r\n\r\n    if (action.type !== ActionTypes.FILENAME_LIST_SELECTED) {\r\n        return next(action);\r\n    }\r\n\r\n    let stage = action.stage;\r\n    let layers = action.layers;\r\n\r\n    // Load and parse files\r\n    for (let file of action.files) {\r\n        readFile(file, stage, layers, dispatch, action.files);\r\n    }\r\n};\r\n\r\nexport default readFiles;\r\n\r\n","import { Job } from '../models/job';\r\nimport {Parser} from '../models/parser';\r\n\r\nexport function parseTXT(filename, str) {\r\n    let job = new Job();\r\n    job.filename = filename;\r\n\r\n    let parser = new Parser();\r\n\r\n    let shapesArray = parser.parse(str);\r\n\r\n    if (shapesArray.length > 0) {\r\n        for (let shape of shapesArray) {\r\n            job.shapes.push(shape)\r\n        }\r\n    }\r\n\r\n    return job\r\n}","import * as ActionTypes from \"../store/actionTypes\";\r\nimport {Layers} from \"../models/layers\";\r\n\r\nconst pasteData = ({ dispatch, getState }) => next => action => {\r\n\r\n    if (action.type !== ActionTypes.DATA_FROM_BUFFER_PASTED) {\r\n        return next(action);\r\n    }\r\n\r\n    let state = getState();\r\n    let stage = state.app.stage;\r\n    let layers = state.layers;\r\n    let parser = state.app.parser;\r\n\r\n    let layer = undefined;\r\n    if (state.app.importDataToNewLayer) {   // import data to new layer\r\n        layer = Layers.newLayer(stage, layers);\r\n        layers.push(layer);\r\n    }\r\n    else {                                  // import data to affected layer\r\n        layer = layers.find((lay) => lay.affected);\r\n        if (!layer) {                       // if no layer affected, add new\r\n            layer = Layers.newLayer(stage, layers);\r\n            layers.push(layer);\r\n        }\r\n    }\r\n\r\n    // Paste data from ClipBoard\r\n    for (let item of action.data.items) {\r\n        item.getAsString((string) => {\r\n            let shapesArray = parser.parse(string);\r\n\r\n            // TODO: add something like poly.valid()\r\n\r\n            if (shapesArray.length > 0) {\r\n                for (let shape of shapesArray) {\r\n                    layer.add(shape);\r\n                }\r\n            }\r\n\r\n            if (layer.shapes.length > 0) {\r\n                dispatch({\r\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                    shape: layer,\r\n                    stage: stage\r\n                });\r\n                dispatch({\r\n                    type: ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED,\r\n                    layer: layer\r\n                })\r\n            }\r\n\r\n        });\r\n\r\n        break;\r\n    }\r\n\r\n};\r\n\r\nexport default pasteData;\r\n","import * as ActionTypes from '../store/actionTypes';\r\n\r\nconst stageController = ({ getState, dispatch }) => next => action => {\r\n\r\n    // let state = getState();\r\n    let stage = action.stage;\r\n\r\n    if (stage) {\r\n        switch (action.type) {\r\n            case ActionTypes.STAGE_RESIZED:\r\n                stage.resize();\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n                stage.panByMouseStart();\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_MOVED_ON_STAGE:\r\n                if (action.dx !== undefined && action.dy !== undefined) {\r\n                    stage.panByMouseMove(action.dx, action.dy);\r\n                }\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_UP_ON_STAGE:\r\n                stage.panByMouseStop();\r\n                break;\r\n\r\n            case ActionTypes.PAN_AND_ZOOM_TO_SHAPE:\r\n                let center = action.shape.center;\r\n                let box = action.shape.box;\r\n                if (isNaN(center.x) || isNaN(center.y)) return;\r\n                stage.panToCoordinate(center.x, center.y);\r\n                stage.zoomToLimits(box.xmax - box.xmin, box.ymax - box.ymin);\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE:\r\n                let bIn = action.delta > 0;\r\n                // stage.zoomByMouse(action.x, action.y, bIn, 1 + Math.abs(action.delta)/100.);\r\n                stage.zoomByMouse(action.x, action.y, bIn, 1.2);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\nexport default stageController;","import * as ActionTypes from '../store/actionTypes';\r\nimport {Layers} from \"../models/layers\";\r\n\r\nimport Flatten from 'flatten-js';\r\nlet {point, arc, segment} = Flatten;\r\nlet Algorithmia = window.Algorithmia;\r\n\r\n// function zoomHome(shape, stage) {\r\n//     let box = shape.box;\r\n//     let x = (box.xmin + box.xmax)/2;\r\n//     let y = (box.ymin + box.ymax)/2;\r\n//     stage.panToCoordinate(x, y);\r\n//     stage.zoomToLimits(box.xmax - box.xmin, box.ymax - box.ymin);\r\n// }\r\n\r\nconst skeleton_recognition = ({dispatch, getState}) => next => action => {\r\n\r\n    if (action.type === ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED) {\r\n\r\n        let state = getState();\r\n        let stage = state.app.stage;\r\n\r\n        let layers = state.layers;\r\n        let currentLayer = Layers.getAffected(layers);\r\n        let shapes = currentLayer.shapes;\r\n        let input = shapes.map(shape =>\r\n            [shape.geom.x / 400., shape.geom.y / 400., shape.geom.nx, shape.geom.ny]\r\n        );\r\n\r\n        let client = Algorithmia.client(\"simby4RUwqQmtMDaHAPj5wsQwlD1\");\r\n        let algorithm = \"alexbol99/SeketonRecognition\";\r\n\r\n        client.algo(algorithm)\r\n            .pipe(input)\r\n            .then(function (output) {\r\n                if (output.error) return console.error(\"error: \" + output.error);\r\n\r\n                let newLayer = Layers.newLayer(stage, layers);\r\n                newLayer.name = \"recognized\";\r\n                newLayer.title = \"recognized\";\r\n                // newLayer.displayed = true;\r\n\r\n                for (let row of output.result) {\r\n                    let shape;\r\n                    if (row[0] instanceof Array && row[0].length === 2) {\r\n                        let pc = point(row[0][0] * 400, row[0][1] * 400);\r\n                        let r = row[1] * 400;\r\n                        /********center radius startAng endAng **********/\r\n                        shape = arc(pc, r, row[2], row[3], Flatten.CCW)\r\n                    }\r\n                    else {\r\n                        shape = segment(\r\n                            point(row[0] * 400, row[1] * 400),\r\n                            point(row[2] * 400, row[3] * 400))\r\n                    }\r\n                    if (row[4]) {\r\n                        shape.label = row[4]\r\n                    }\r\n                    newLayer.add(shape)\r\n                }\r\n                layers.push(newLayer);\r\n\r\n                dispatch({\r\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                    stage: stage,\r\n                    shape: currentLayer\r\n                })\r\n            });\r\n    }\r\n\r\n    return next(action);\r\n};\r\n\r\n\r\nexport default skeleton_recognition;\r\n","import React from 'react';\r\nimport './index.css';\r\n\r\nimport App from './App';\r\nimport {createStore, applyMiddleware} from 'redux';\r\nimport {Provider} from 'react-redux';\r\n\r\nimport reducer from './store/reducer';\r\n\r\nimport log from './middleware/log';\r\nimport readFiles from './middleware/readFiles';\r\nimport pasteData from './middleware/pasteData';\r\nimport stageController from './middleware/stageController'\r\nimport skeleton_recognition from './middleware/skeleton_recognition'\r\n\r\nconst store = createStore(reducer,\r\n    applyMiddleware(log, readFiles, pasteData, skeleton_recognition, stageController));\r\n\r\nconst Preloader = () => {\r\n    return (\r\n        <Provider store={store}>\r\n            <App />\r\n        </Provider>\r\n    );\r\n};\r\n\r\nexport default Preloader;\r\n\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAACWUExURezp2L3CsAAAAH91jbamy9Sx1NXVxL2u0MvA2yEeEZy460hBJUU/JAC+ACQhE4qi2Zaw5JCp3se72Ap3Hsi82cq+2qK/8XeKtWNfTb+x0nSEsG19pH6QtWFfU8S31nt1Wpax5Xp0WoeeynBrVMm92WhkVsGz02JfU21oU5m06Mq/2se62MS21bmqzsW517ipzbyu0P///wUDcXkAAAAydFJOU/////////////////////////////////////////////////////////////////8ADVCY7wAAAO1JREFUeNpiMMQCAAKIAZsgQABhFQQIIAZDeW5uZTgXwgEIIAZFKX5+aQk2iBiUAxBADDwCClyCfIwQQSgHIICAglxigny8wmAI4TACBBCDhoymkrg6KwMIsEI4jAABxGCoyskpy8gEFmSCcNgAAojBkI2RkZENqhLIMWRkMwQIIKg7YSohACCAoIIwlRAAEEBYVQIEEFaVAAHEwIwJDAECiIGZg4NJSAiE5OSYJCWZWFiYGAECCCgowi6qwi6iza6jxs6uywISBAggoKCoFoeoioiemoE+CxgwMQIEEAMzEwZgBAggBkNGTAAQYABIRSX4H75PxQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAABOUExURezp2AAAAH91jb3CsE9PT83C3CQhE7amy9Sx1ImFdL2u0AC+AMq+2si82Qp3Hsm92cvA28Gz07ipzcq/2se62LmqzsS21cW517yu0P///44+OfEAAAAadFJOU/////////////////////////////////8AFCIA2gAAAMxJREFUeNpikMQCAAKIAZsgQABhFQQIIAYWFklJTjYoD8oBCCAGIAMuJgnlAAQQUDsLG5JOMAcggBiAykGaoADCAQggBqByDhYWbj4w5GTjAJkLEEAg2xkZEIARpB4ggECCHEiCHCBBgADCqhIggLCqBAggrCoBAgirSoAAYmDCBJIAAcTAxMrKiIy4uBiZAQIIKMjLxcPPxSvCJSbIxSXKzs7OyAwQQAxMAjzCAjz8vOKCEkLsYMDIDBBADEyMGIAZIIAYJJkxAUCAAQCiZRN3sUCgAwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MEYwOEQ4MDMwMzJFNDExOUZGN0MyRjAwQkZFNDkwMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4NkNFODE2MzMyM0QxMUU0OTc2NkEyNzVGRDRDQUREMiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NkNFODE2MjMyM0QxMUU0OTc2NkEyNzVGRDRDQUREMiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM3Q0UwRDg3MzgzMkU0MTE5RkY3QzJGMDBCRkU0OTAxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjcwRjA4RDgwMzAzMkU0MTE5RkY3QzJGMDBCRkU0OTAxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+nXk3UAAAAjtJREFUeNrU1ktIVFEcx/FRhExEei0kULQkiijMKduo0RNCEHuQRohgggsVJbRSNy2qRSK4qIjohRARk5YgGvmoVSEWRe9EzHJVkFZEoInT9w+/gXGasjngwgMf7uDcOeee/+Nco/x+v2cuR7RnjkdM4MPh+jOBj+moxVYsxnvcQhO+Bf/48umjEe+gAHcxgM1YgkNIxGOsjHQHUYEcsIP1XHqQg7dIk36Mo8JugxfTf5swdFfBO6jDSU1+CvdRrRDdwFn8wB7XJG9XrFejCOvQhgnkoxE+3ee0gMX7E1bgmfLRgG0qBrvuwiKnKmJ8xCol0ybLxBaUoBcH8QqjrjvwKZGf8QAJeI0NWsRC9Ut/b3SpIgvRUyX6Es4rD7sxhevqgyOqtj71yz+rKThEY9iJOziAVtX9S31vE5ZhEjvwSCU9gi8K4+3QEg5ttEFYP1zBRnzVwtYHVZp8IZoRiyTE4Y2+f4KU2c6iKdV9qXaSgYfoVPwvahEr57VYjmTtxh6sW/fNzEGYM2lGrnAOWYjHGizFBZWuR6EtxFV8IAcnIjlN7SnKdbXfLECL+sXK+Ttytah1/D6X49omH1a8LVzZCmUHjqt/NuEdUl3fB2MKxXMtaP1ioWhXTuwBlqk4nBawA3CvwnVPlWRHygtcUxXuV8n+0Qf/M27qfCpGnp7WynlIrMRr9LIKX0XhRkhlpakUu1RZg3oh2ZMfQ6UdO4FOdnknDwU1ocX+p15KXh2SvrBn0bz9r+K3AAMAvVSdlmlN6ucAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAB3RJTUUH1AgfBgU3vDbVaQAAAAlwSFlzAAAPPAAADzwBFzqfWQAAAwBQTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Bz0LCAAAAAJ0Uk5T/wDltzBKAAAARUlEQVR42mNgxAIYsPEYkMUZoGwGJNVwNoLAUIWmngHVNFQ2iitQnQQTZACqRkfYVaJrg1qFUE20IMnehGtFNZhIQSAAABhlAUeIwcHOAAAAAElFTkSuQmCC\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-toolbar\":\"ToolbarComponent_App-toolbar__3_aag\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-canvas\":\"CanvasComponent_App-canvas__3DP2s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-status-bar\":\"StatusComponent_App-status-bar__1PC6i\"};"],"sourceRoot":""}