{"version":3,"sources":["components/UI/Button/Button.module.css","components/UI/ButtonSeparator/ButtonSeparator.module.css","components/MainComponent/ToolbarComponent/ToolbarComponent.module.css","components/MainComponent/CanvasComponent/CanvasComponent.module.css","components/Layout/StatusComponent/StatusComponent.module.css","components/MainComponent/GraphicsComponent/LabelsLayerComponent/labelsLayer.module.css","components/AboutPopup/AboutPopup.module.css","components/UI/ModalPopup/ModalPopup.module.css","containers/MainComponent/MainComponent.module.css","components/LayersList/LayerListToolbar/LayerListToolbar.module.css","components/LayersList/LayerEditForm/LayerEditForm.module.css","components/LayersList/LayerListElement/LayerListElement.module.css","containers/LayerList/LayersList.module.css","components/Layout/AsideComponent/AsideComponent.module.css","components/MainComponent/DocumentName/DocumentName.module.css","components/Layout/HeaderComponent/HeaderComponent.module.css","assets/images/debug-viewer-logo3.png","components/Layout/HeaderComponent/Logo/Logo.module.css","components/Layout/HeaderComponent/Navigation/Navigation.module.css","components/UI/Spinner/Spinner.module.css","containers/Auth/SignUp/Signup.module.css","containers/Auth/Login/Login.module.css","containers/DocumentsComponent/DocumentsComponent.module.css","components/Documents/DocumentComponentCell.module.css","store/reducers/auth.js","store/actionTypes.js","dataParsers/parser.js","store/reducers/app.js","models/model.js","models/layer.js","models/layers.js","store/reducers/layers.js","store/reducers/mouse.js","store/reducers/measureShapesTool.js","store/reducers/cloudStorage.js","store/reducer.js","axios-database.js","store/actions/cloudStorageActions.js","components/UI/Button/Button.js","components/UI/ButtonSeparator/ButtonSeparator.js","components/MainComponent/ToolbarComponent/ToolbarComponent.js","models/stage.js","store/actions/stageActions.js","components/MainComponent/CanvasComponent/CanvasComponent.js","components/Layout/StatusComponent/StatusComponent.js","components/MainComponent/GraphicsComponent/stageComponent.js","models/graphics.js","models/utils.js","components/MainComponent/GraphicsComponent/graphics/shapeComponent.js","components/MainComponent/GraphicsComponent/graphics/imageComponent.js","components/MainComponent/GraphicsComponent/layerComponent.js","components/MainComponent/GraphicsComponent/domelements/labelComponent.js","components/MainComponent/GraphicsComponent/LabelsLayerComponent/labelsLayerComponent.js","components/MainComponent/GraphicsComponent/layersComponent.js","store/actions/appActions.js","store/actions/layersActions.js","tools/measurePointsTool.js","tools/measureShapesTool.js","tools/displayCoordsTool.js","components/UI/Modal.js","components/UI/ModalPopup/ModalPopup.js","components/AboutPopup/AboutPopup.js","dataParsers/parseJSON.js","components/Constructions/CloudDocument.js","containers/MainComponent/MainComponent.js","components/LayersList/LayerListToolbar/LayerListToolbar.js","components/LayersList/LayerEditForm/LayerEditForm.js","components/LayersList/LayerListElement/LayerListElement.js","containers/LayerList/LayersList.js","components/Layout/AsideComponent/AsideComponent.js","components/MainComponent/DocumentName/DocumentName.js","AppBody.js","components/Layout/HeaderComponent/Logo/Logo.js","components/Layout/HeaderComponent/Navigation/Navigation.js","components/Layout/HeaderComponent/HeaderComponent.js","store/actions/auth.js","components/UI/Spinner/Spinner.js","containers/Auth/SignUp/Signup.js","containers/Auth/Login/Login.js","containers/Auth/Logout.js","models/job.js","dataParsers/parserODB.js","components/Constructions/Demo.js","components/Constructions/BooleanTest.js","components/Constructions/SkeletonRecognition.js","models/collisionDistance.js","components/Constructions/CollisionDemo.js","components/Documents/DocumentComponentCell.js","containers/DocumentsComponent/DocumentsComponent.js","App.js","middleware/log.js","dataParsers/parserXML.js","dataParsers/parsePGM.js","dataParsers/parseCSV.js","middleware/readFiles.js","dataParsers/parseTXT.js","middleware/pasteData.js","middleware/stageController.js","middleware/skeleton_recognition.js","Preloader.js"],"names":["module","exports","Button","IconTrigger","IconModeActive","IconModeNotActive","DrawerButton","ButtonSeparator","IconSeparator","App-toolbar","App-toolbar-units","App-canvas","App-status-bar","LabelsLayer","LabelComponent","AboutPopup","BackDrop","ModalPopup","fadeIn","Main-content","Layer-list-toolbar","Layer-edit-form","Layer","LayerSelectionBox","LayerSelectionMark","LayerNameBox","Layer-displayed","Layer-undisplayed","App-layers","App-layers-displayed","Open","Close","App-aside","DocumentName","App-header","App-header-documents-page","Logo","App-logo-spin","Navigation","active","Loader","load2","AuthForm","DocumentComponent","DocumentComponentGrid","DocumentComponentCell","DocumentComponentCellBottom","initialState","token","userId","username","error","loading","auth","state","arguments","length","undefined","action","type","Object","objectSpread","Point","Flatten","Segment","Arc","Polygon","vector","Parser","classCallCheck","this","createClass","key","value","str","arrayOfLines","match","watchArray","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","line","push","substring","indexOf","err","return","termArr","split","psArr","ps","parseInt","peArr","pe","pcArr","pc","counterClockwise","startAngle","slope","endAngle","Utils","EQ","Math","PI","r","polygon","i","search","nedgesStr","nedges","edges","j","segment","parseToSegment","arc","parseToArc","addFace","points","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","pointArr","point","label","shapes","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","parseToPolygon","size","faces","parseToPoints","parseToSegmentsArcs","unitsList","name","decimals","divisor","defaultAppState","title","version","process","build","units","parser","widthOn","displayVertices","displayLabels","measurePointsActive","zoomFactor","originX","originY","showAboutPopup","importDataToNewLayer","showSkeletonRecognitionButton","applySkeletonRecognition","stage","showSpinner","showLayerList","app","assign","resolution","origin","x","y","curUnitsId","findIndex","newUnits","defaultStyle","strokeStyle","stroke","fill","alpha","Model","geom","style","model","box","color","displayed","edited","affected","layer","shape","newShape","add","clone","JSON","stringify","Box","merge","xmin","xmax","ymin","ymax","colors","Layers","layers","getNewName","defaultName","inc","comparator","find","lay","currentAffectedLayer","getAffected","_loop","col","_i","index","l","newLayers","filter","getNextColor","slice","sort","l1","l2","name1","toUpperCase","name2","map","toJSON","newLayer","affectedLayer","affectedLayerId","toConsumableArray","concat","delete","setAffected","toggleDisplayed","setEdited","setNameAndTitle","nextLayer","newCurLayer","newNextLayer","defaultMouseState","startX","startY","touchPoints","mouse","x1","y1","x2","y2","defaultMeasureShapesTool","measureShapesActive","measureShapesFirstClick","hoveredShape","firstMeasuredShape","secondMeasuredShape","firstMeasuredLayer","secondMeasuredLayer","distance","shortestSegment","is_mobile","window","mobilecheck","measureShapesTool","shape1","shape2","_Flatten$Distance$dis","Distance","_Flatten$Distance$dis2","slicedToArray","documentDefaultState","id","owner","lastUpdated","cloudStorageDefaultState","document","documentsList","cloudStorage","_state$documentsList","newList","objectWithoutProperties","stateDocumentsList","actionDocumentsList","keys","hasOwnProperty","isUpToDate","reducer","combineReducers","instance","axios","create","baseURL","documents","values","updateDocumentInDatabase","payload","put","addDocumentToDatabase","post","deleteDocumentFromDatabase","fetchDocumentsFromDatabase","queryParams","get","button","props","iconStyle","classes","buttonStyle","mobileOnly","react_default","a","createElement","onClick","className","lib_default","iconName","buttonSeparator","ToolbarComponent","openJobButtonClicked","_this","refs","browseFiles","click","onLayerListButtonClicked","fontSize","marginTop","marginBottom","display","ref","multiple","onChange","onFileSelected","onSaveDocumentButtonClicked","onClearAllButtonClicked","onHomeButtonPressed","onPanByDragPressed","onMeasurePointsButtonPressed","onMeasureBetweenShapesButtonPressed","onToggleWidthModePressed","onToggleVerticesPressed","onToggleLabelsPressed","onSkeletonRecognitionButtonPressed","onUnitClicked","onShowAboutPopupPressed","Component","createjs","Stage","canvas","possibleConstructorReturn","getPrototypeOf","call","Touch","enable","assertThisInitialized","mouseMoveOutside","enableMouseOver","clientWidth","clientHeight","width","height","oldOrigin","oldZoomFactor","pinchAnchorX","pinchAnchorY","pinchStarted","addChild","scalar","scalingFactor","canvasX","canvasY","worldX","worldY","W2C_X","W2C_Y","newOrigin","deltaX","deltaY","ratio","curRatio","min","max","focusX","focusY","bIn","C2W_X","C2W_Y","zoomIn","zoomOut","newFocusX","newFocusY","panBy","zoom","zoomByPinchStop","dx","dy","panByMouseStop","getContext","clearRect","minX","minY","maxX","maxY","handleMouseWheelMove","delta","CanvasComponent","canvasElement","React","createRef","handleMouseMove","event","focus","nativeEvent","touches","clientX","clientY","handlePinchMove","stageX","stageY","handleMouseDown","handlePinchDown","handleMouseUp","stopPropagation","preventDefault","handlePinchUp","handleMouseLeave","blur","body","handleMouseWheel","detail","wheelDelta","offsetX","offsetY","handleMouseWheelFox","layerX","layerY","current","on","addEventListener","passive","registerStage","tabIndex","styles","connect","dispatch","actions","StatusComponent","StageComponent","setTransform","update","onStageUnmounted","Fragment","children","Circle","graphics","radius","Graphics","beginFill","command","circle","drawCircle","graphics_point","ignoreScale","setStrokeStyle","beginStroke","moveTo","lineTo","endStroke","graphics_segment","graphics_arc","graphics_circle","drawRect","graphics_box","face","setGraphicsFace","graphics_polygon","setGraphicsEdge","edge","setGraphicsEdgeSegment","setGraphicsEdgeArc","first","start","is_equal","obj1","obj2","equal","_arr","ShapeComponent","_Component","params","handleMouseOver","onMouseOver","handleMouseOut","onMouseOut","handleClick","Shape","vertexShapes","vertices","vertex","vertexShape","mouseEnabled","inherits","isEmpty","hovered","selected","aperture","redrawVertices","redraw","nextProps","nextState","off","removeChild","clear","ImageComponent","_getPrototypeOf2","_len","args","Array","_key","apply","bitmap","image","naturalWidth","naturalHeight","scaleX","scaleY","tx","center","ty","regX","regY","_this2","img","Image","onload","Bitmap","src","uri","LayerComponent","imageComponent_ImageComponent","shapeComponent_ShapeComponent","labelComponent","_ref","left","offsetLeft","top","offsetTop","position","labelsLayerComponent","trim","domelements_labelComponent","LayersComponent","setHomeView","layerComponent_LayerComponent","LabelsLayerComponent_labelsLayerComponent","toggleDisplayLayer","MeasurePointsTool","measureCanvas","measureStage","endX","endY","measureStarted","setState","cursor","draw","context","textX","textY","textWidth","backX","backY","pllX","pllY","abs","W2C_Scalar","beginPath","rect","lineWidth","text","measurement","font","measureText","textAlign","fillStyle","globalAlpha","fillRect","textHeight","fillText","dist","sqrt","format","num","toFixed","removeAllChildren","removeAllEventListeners","mainCanvas","MeasureShapesTool","labelShape","Text","unscale","redrawLabel","DisplayCoordsTool","coordX","coordY","margin","padding","modalRoot","getElementById","Modal","el","appendChild","ReactDOM","createPortal","onBackDropClicked","ev","target","closePopup","handleKeyDown","code","elementDrag","dragX","dragY","element","closeDragElement","onmouseup","onmousemove","dragMouseDown","removeEventListener","showPopup","UI_Modal","onMouseDown","UI_ModalPopup_ModalPopup","toggleAboutPopup","href","parseJSON","models","parse","faceArray","CloudDocument","then","response","firstLayer","data","layerData","addNewLayer","asyncOperationEnded","updateDocument","panAndZoomToShape","toggleLayer","catch","console","log","clearAll","asyncOperationStarted","layerActions","cloudActions","MainComponent","handleFileSelect","File","FileReader","FileList","files","forceUpdate","dataURL","toDataURL","Date","toLocaleDateString","toLocaleTimeString","updateDocumentState","now","registerDocumentAddedToDatabase","history","clearCurrentDocument","clearAllLayers","e","toggleWidthMode","toggleDisplayVertices","onresize","resizeStage","handleKeyUp","displayCoordsTool","tools_displayCoordsTool","measurePointsTool","tools_measurePointsTool","measuredLayersDisplayed","tools_measureShapesTool","MainComponent_ToolbarComponent_ToolbarComponent","togglePanByDrag","toggleMeasureBetweenPoints","toggleMeasureBetweenShapes","toggleDisplayLabels","toggleUnits","toggleLayerList","MainComponent_CanvasComponent_CanvasComponent","stageComponent","destroyStage","layersComponent","handleMouseRollOverShape","handleMouseRollOutShape","handleClickOnShape","Layout_StatusComponent_StatusComponent","components_AboutPopup_AboutPopup","Route","path","component","ownProps","timestamp","LayerListToolbar","onAddLayerButtonClicked","onEditLayerButtonClicked","onDeleteLayerButtonClicked","onSortLayersButtonClicked","LayerEditForm","onSubmitLayerEditForm","form","parentElement","layerName","layerTitle","setFocus","onSubmit","defaultValue","cols","rows","onEscapeLayerEditForm","LayerListElement","activeElement","nodeName","elem","hex","opacity","g","b","percent","replace","rgba","bgcolor","layerNameOpacity","onLayerClicked","onDoubleClick","onLayerDoubleClicked","onAffectedBoxClicked","backgroundColor","LayersList_LayerEditForm_LayerEditForm","LayersList","setAffectedNextLayer","setAffectedPrevLayer","onLayerListClicked","LayersList_LayerListToolbar_LayerListToolbar","maxHeight","LayersList_LayerListElement_LayerListElement","AsideComponent","handleChange","updateDocumentName","shareDocument","navigator","share","url","location","resp","placeholder","prevState","withRouter","pasteDataFromBuffer","clipboardData","MainComponent_DocumentName_DocumentName","onPaste","containers_MainComponent_MainComponent","onManageCloudStorageButtonClicked","LayerList_LayersList","Layout_AsideComponent_AsideComponent","logo","logoImg","alt","navigation","NavLink","to","exact","isAuthenticated","pathname","authSucceed","authFailed","logout","localStorage","removeItem","checkAuthTimeout","expirationTime","setTimeout","spinner","Signup","email","password","submitForm","signUp","controlChanged","updatedState","defineProperty","Spinner","message","Redirect","isSignUp","authData","returnSecureToken","expirationDate","getTime","expiresIn","setItem","idToken","localId","user","authActions","Login","logIn","authSetUsername","Logout","onLogout","Job","filename","profiles","materials","inch2pixels","mils2pixels","InchToPixels","round","Number","MilsToPixels","parsePolygon","lines","terms","end_of_face","CW","CCW","parseLine","apertures","ap_value","parseArc","parseODB","job","substr","polarity","odbLine","odbArc","ap_key","Demo","subtract","BooleanOp","intersect","BooleanTest","myPoly","myCircle","SkeletonRecognition","Vector","Line","CollisionDistance","polygon1","polygon2","collision_distance","POSITIVE_INFINITY","edge2polygon","edge2","shapeBox","NEGATIVE_INFINITY","resp_edges","edge1","segment2segment","segment2arc","arc2arc","intersections","ip","_point$distanceTo","distanceTo","_point$distanceTo2","segment1","segment2","point2shape","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","v_s","end","v_n","normalize","rotate90CCW","multiply","rotate90CW","_i2","v","tangent_point","translate","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","arc1","arc2","arc_enlarged","_arc1$distanceTo","translateArc","_arc1$distanceTo2","dist_tmp","EQ_0","GE","arc_reduced","_arc1$distanceTo3","_arc1$distanceTo4","LT","_arc1$distanceTo5","_arc1$distanceTo6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","vec","arc_tmp","newPolygon","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","arc_trans","CollisionDemo","collision","polygon3","applyCollisionDemo","documentComponentCell","documentSelectedFromList","Link","DocumentsComponent","updated","deleteDocumentFromDatabaseSucceed","componentDidMount","requestFetchDocumentsFromDatabaseSucceed","App","authCheckState","Layout_HeaderComponent_HeaderComponent","Switch","AppBody","getItem","timeLeft","getState","parseEdges","edgesXML","from","getAttribute","polygonsXML","islands","getElementsByTagName","_arr2","holes","_arr3","_i3","parseSegment","segmentXML","parseCurve","curveXML","parsePoint","pointXML","pgmResolution","microns2pixels","sizeX","toPixels","micron2pixels","micronToPixels","readAsText","reader","file","theFile","string","result","namesplitted","extension","xmlDoc","DOMParser","parseFromString","titles","firstChild","nodeValue","profilesXML","_arr4","_i4","materialXML","_arr5","_i5","segmentsXML","_arr6","_i6","curvesXML","_arr7","_i7","curve","pointsXML","_arr8","_i8","parseXML","px","py","nx","ny","parseCSV","shapesArray","parseTXT","readAsImage","yStr","xStr","isNaN","parseImage","readAsDataURL","readFile","readFiles","pasteData","items","getAsString","stageController","resize","panByMouseStart","panByMouseMove","panToCoordinate","zoomToLimits","zoomByMouse","removeAllListeners","zoomByPinchStart","distStart","zoomByPinchMove","Algorithmia","skeleton_recognition","currentLayer","input","client","algo","pipe","output","row","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","Preloader","es","BrowserRouter","basename","src_App_0"],"mappings":"6EACAA,EAAAC,QAAA,CAAkBC,OAAA,uBAAAC,YAAA,4BAAAC,eAAA,+BAAAC,kBAAA,kCAAAC,aAAA,mDCAlBN,EAAAC,QAAA,CAAkBM,gBAAA,yCAAAC,cAAA,6DCAlBR,EAAAC,QAAA,CAAkBQ,cAAA,sCAAAC,oBAAA,4CAAAJ,aAAA,6DCAlBN,EAAAC,QAAA,CAAkBU,aAAA,0DCAlBX,EAAAC,QAAA,CAAkBW,iBAAA,8DCAlBZ,EAAAC,QAAA,CAAkBY,YAAA,iCAAAC,eAAA,0DCAlBd,EAAAC,QAAA,CAAkBc,WAAA,qDCAlBf,EAAAC,QAAA,CAAkBe,SAAA,6BAAAC,WAAA,+BAAAC,OAAA,iDCAlBlB,EAAAC,QAAA,CAAkBkB,eAAA,0DCAlBnB,EAAAC,QAAA,CAAkBmB,qBAAA,mECAlBpB,EAAAC,QAAA,CAAkBoB,kBAAA,6DCAlBrB,EAAAC,QAAA,CAAkBqB,MAAA,gCAAAC,kBAAA,4CAAAC,mBAAA,6CAAAC,aAAA,uCAAAC,kBAAA,0CAAAC,oBAAA,kECAlB3B,EAAAC,QAAA,CAAkB2B,aAAA,+BAAAC,uBAAA,yCAAAX,OAAA,2BAAAY,KAAA,yBAAAC,MAAA,gDCAlB/B,EAAAC,QAAA,CAAkB+B,YAAA,wDCAlBhC,EAAAC,QAAA,CAAkBgC,aAAA,yDCAlBjC,EAAAC,QAAA,CAAkBiC,aAAA,oCAAAC,4BAAA,uECDlBnC,EAAAC,QAAA,0vSCCAD,EAAAC,QAAA,CAAkBmC,KAAA,mBAAAC,gBAAA,kDCAlBrC,EAAAC,QAAA,CAAkBqC,WAAA,+BAAAC,OAAA,iDCAlBvC,EAAAC,QAAA,CAAkBe,SAAA,0BAAAwB,OAAA,wBAAAC,MAAA,6CCAlBzC,EAAAC,QAAA,CAAkByC,SAAA,+CCAlB1C,EAAAC,QAAA,CAAkByC,SAAA,oECAlB1C,EAAAC,QAAA,CAAkB0C,kBAAA,8CAAAC,sBAAA,wECAlB5C,EAAAC,QAAA,CAAkB4C,sBAAA,qDAAAC,4BAAA,yKCCZC,EAAe,CACjBC,MAAO,KACPC,OAAQ,KACRC,SAAU,KACVC,MAAO,KACPC,SAAS,GA8CEC,EA3CF,WAAgC,IAA/BC,EAA+BC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAzBR,EAAcW,EAAWH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACzC,OAAQC,EAAOC,MACX,IC8E8B,yBD7E1B,OAAOC,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIH,MAAO,KACPC,SAAS,IAEjB,ICyE8B,yBDxE1B,OAAOQ,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIH,MAAO,KACPH,MAAOU,EAAOV,MACdC,OAAQS,EAAOT,OACfC,SAAUQ,EAAOR,SACjBE,SAAS,IAEjB,ICiE6B,wBDhEzB,OAAOQ,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIH,MAAOO,EAAOP,MACdH,MAAO,KACPC,OAAQ,KACRC,SAAU,KACVE,SAAS,IAEjB,ICyD6B,wBDxDzB,OAAOQ,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIN,MAAO,KACPC,OAAQ,KACRC,SAAU,OAElB,ICmDmC,6BDlD/B,OAAOU,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIJ,SAAUQ,EAAOR,WAEzB,QACI,OAAOI,mCE5CdQ,EAAgCC,IAAhCD,MAAOE,EAAyBD,IAAzBC,QAASC,EAAgBF,IAAhBE,IAAKC,EAAWH,IAAXG,QACpBC,EAAWJ,IAAXI,OAiCOC,EAAb,oBAAAA,IAAAR,OAAAS,EAAA,EAAAT,CAAAU,KAAAF,GAAA,OAAAR,OAAAW,EAAA,EAAAX,CAAAQ,EAAA,EAAAI,IAAA,oBAAAC,MAAA,SACsBC,GACd,IAAIC,EAAeD,EAAIE,MAAM,aACzBC,EAAa,GAFEC,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IAGnB,QAAAwB,EAAAC,EAAiBP,EAAjBQ,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA+B,KAAtBS,EAAsBN,EAAAR,MAC3BI,EAAWW,KAAKD,EAAKE,UAAUF,EAAKG,QAAQ,QAJ7B,MAAAC,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,GAMnB,OAAOH,IAPf,CAAAL,IAAA,iBAAAC,MAAA,SAUmBc,GACX,IACIM,EADUN,EAAKX,MAAM,eAAe,GAClBkB,MAAM,KAExBC,EAAQF,EAAQ,GAAGC,MAAM,KAAK,GAAGA,MAAM,KACvCE,EAAK,IAAIlC,EAAMmC,SAASF,EAAM,GAAG,IAAKE,SAASF,EAAM,GAAG,KAExDG,EAAQL,EAAQ,GAAGC,MAAM,KAAK,GAAGA,MAAM,KACvCK,EAAK,IAAIrC,EAAMmC,SAASC,EAAM,GAAG,IAAKD,SAASC,EAAM,GAAG,KAE5D,OAAO,IAAIlC,EAAQgC,EAAIG,KApB/B,CAAA3B,IAAA,aAAAC,MAAA,SAuBec,GACP,IACIM,EADUN,EAAKX,MAAM,eAAe,GAClBkB,MAAM,KAExBC,EAAQF,EAAQ,GAAGC,MAAM,KAAK,GAAGA,MAAM,KACvCE,EAAK,IAAIlC,EAAMmC,SAASF,EAAM,GAAG,IAAKE,SAASF,EAAM,GAAG,KAExDG,EAAQL,EAAQ,GAAGC,MAAM,KAAK,GAAGA,MAAM,KACvCK,EAAK,IAAIrC,EAAMmC,SAASC,EAAM,GAAG,IAAKD,SAASC,EAAM,GAAG,KAExDE,EAAQP,EAAQ,GAAGC,MAAM,KAAK,GAAGA,MAAM,KACvCO,EAAK,IAAIvC,EAAMmC,SAASG,EAAM,GAAG,IAAKH,SAASG,EAAM,GAAG,KAGxDE,EAA6B,MADrBT,EAAQ,GAAGC,MAAM,KAAK,GAG9BS,EAAapC,EAAOkC,EAAGL,GAAIQ,MAC3BC,EAAWtC,EAAOkC,EAAIF,GAAIK,MAE1BzC,IAAQ2C,MAAMC,GAAGJ,EAAYE,KAC7BA,GAAY,EAAEG,KAAKC,IAEvB,IAAIC,EAAI3C,EAAOkC,EAAIL,GAAIxC,OAEvB,OAAO,IAAIS,EAAIoC,EAAIS,EAAGP,EAAYE,EAAUH,KA/CpD,CAAA9B,IAAA,iBAAAC,MAAA,SAkDmBC,GAKX,IAJA,IAAIqC,EAAU,IAAI7C,EAEdS,EAAeD,EAAIE,MAAM,aAEpBoC,EAAE,EAAGA,EAAIrC,EAAanB,OAAQwD,IAAK,CACxC,IAAIzB,EAAOZ,EAAaqC,GACxB,GAAIzB,EAAK0B,OAAO,wBAA0B,EAAG,CASzC,IARA,IAGIC,EAHU3B,EAAKX,MAAM,eAAe,GAClBkB,MAAM,KACH,GACEA,MAAM,KAAK,GAClCqB,EAASlB,SAASiB,EAAU,IAG5BE,EAAQ,GACHC,EAAEL,EAAE,EAAGK,EAAIL,EAAE,EAAEG,EAAQE,IAK5B,IAJA9B,EAAOZ,EAAa0C,IAIXJ,OAAO,kBAAoB,EAAG,CACnC,IAAIK,EAAUhD,KAAKiD,eAAehC,GAClC6B,EAAM5B,KAAK8B,QAUV,GAAI/B,EAAK0B,OAAO,oBAAsB,EAAG,CAC1C,IAAIO,EAAMlD,KAAKmD,WAAWlC,GAC1B6B,EAAM5B,KAAKgC,GAyBnBT,EAAQW,QAAQN,IAGxB,OAAOL,IAjHf,CAAAvC,IAAA,gBAAAC,MAAA,SAoHkBC,GACV,IAAIiD,EAAS,GACThD,EAAeD,EAAIE,MAAM,aAFdgD,GAAA,EAAAC,GAAA,EAAAC,OAAArE,EAAA,IAGf,QAAAsE,EAAAC,EAAiBrD,EAAjBQ,OAAAC,cAAAwC,GAAAG,EAAAC,EAAA3C,QAAAC,MAAAsC,GAAA,EAA+B,KAAtBrC,EAAsBwC,EAAAtD,MAC3B,GAAIc,EAAK0B,OAAO,gBAAkB,EAAG,CACjC,IACIgB,EADU1C,EAAKX,MAAM,eAAe,GACjBkB,MAAM,KAAK,GAAGA,MAAM,KACvCoC,EAAQ,IAAIpE,EAAMmC,SAASgC,EAAS,GAAG,IAAKhC,SAASgC,EAAS,GAAG,KACrEC,EAAMC,MAAQ5C,EAAKO,MAAM,OAAO,GAChC6B,EAAOnC,KAAK0C,KATL,MAAAvC,GAAAkC,GAAA,EAAAC,EAAAnC,EAAA,YAAAiC,GAAA,MAAAI,EAAApC,QAAAoC,EAAApC,SAAA,WAAAiC,EAAA,MAAAC,GAYf,OAAOH,IAhIf,CAAAnD,IAAA,sBAAAC,MAAA,SAmIwBC,GAChB,IAAI0D,EAAS,GACTzD,EAAeD,EAAIE,MAAM,aAFRyD,GAAA,EAAAC,GAAA,EAAAC,OAAA9E,EAAA,IAGrB,QAAA+E,EAAAC,EAAiB9D,EAAjBQ,OAAAC,cAAAiD,GAAAG,EAAAC,EAAApD,QAAAC,MAAA+C,GAAA,EAA+B,KAAtB9C,EAAsBiD,EAAA/D,MAC3B,GAAIc,EAAK0B,OAAO,kBAAoB,EAAG,CACnC,IAAIK,EAAUhD,KAAKiD,eAAehC,GAClC6C,EAAO5C,KAAK8B,QAEX,GAAI/B,EAAK0B,OAAO,oBAAsB,EAAG,CAC1C,IAAIO,EAAMlD,KAAKmD,WAAWlC,GAC1B6C,EAAO5C,KAAKgC,KAVC,MAAA7B,GAAA2C,GAAA,EAAAC,EAAA5C,EAAA,YAAA0C,GAAA,MAAAI,EAAA7C,QAAA6C,EAAA7C,SAAA,WAAA0C,EAAA,MAAAC,GAarB,OAAOH,IAhJf,CAAA5D,IAAA,QAAAC,MAAA,SAmJUC,GAEF,IAAIqC,EAAUzC,KAAKoE,eAAehE,GAClC,GAAIqC,EAAQK,MAAMuB,KAAO,GAAK5B,EAAQ6B,MAAMD,KAAO,EAC/C,MAAO,CAAC5B,GAIZ,IAAIY,EAASrD,KAAKuE,cAAcnE,GAChC,GAAIiD,EAAOnE,OAAS,EAChB,OAAOmE,EAIX,IAAIS,EAAS9D,KAAKwE,oBAAoBpE,GACtC,OAAI0D,EAAO5E,OAAS,EACT4E,OADX,MAlKRhE,EAAA,GCpCM2E,EAAY,CACd,CACIC,KAAM,SACNC,SAAU,EACVC,QAAS,GAEb,CACIF,KAAM,OACNC,SAAU,EACVC,QAAS,QAEb,CACIF,KAAM,KACNC,SAAU,EACVC,QAAS,MAGXC,EAAkB,CACpBC,MAAO,eACPC,QAASC,QACTC,MAAO,GACPC,MAAO,SACPP,SAAU,EACVC,QAAS,EAETO,OAAQ,IAAIrF,EACZsF,SAAS,EACTC,iBAAiB,EACjBC,eAAe,EACfC,qBAAqB,EACrBC,gBAAYrG,EACZsG,aAAStG,EACTuG,aAASvG,EACTwG,gBAAgB,EAChBC,sBAAsB,EACtBC,+BAA+B,EAC/BC,0BAA0B,EAC1BC,MAAO,KACPC,aAAa,EACbC,eAAe,GAoHJC,EAjHH,WAAqC,IAApClH,EAAoCC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA5B4F,EAAiBzF,EAAWH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAC7C,OAAQC,EAAOC,MACX,IF5CyB,oBE6CrB,OAAOC,OAAO6G,OAAO,GAAInH,EAAO,CAC5B+G,MAAO3G,EAAO2G,MACdP,WAAYpG,EAAO2G,MAAMP,WAAapG,EAAO2G,MAAMK,WACnDX,QAASrG,EAAO2G,MAAMM,OAAOC,EAC7BZ,QAAStG,EAAO2G,MAAMM,OAAOE,IAGrC,IFhDuB,kBEiDnB,OAAOjH,OAAO6G,OAAO,GAAInH,EAAO,CAC5B+G,MAAO,KACPP,gBAAYrG,EACZsG,aAAStG,EACTuG,aAASvG,IAGjB,IFpCiC,4BEqCjC,IFzB6B,wBE0B7B,IF/B4B,uBEgCxB,OAAOG,OAAO6G,OAAO,GAAInH,EAAO,CAC5BwG,WAAYpG,EAAO2G,MAAMP,WAAapG,EAAO2G,MAAMK,WACnDX,QAASrG,EAAO2G,MAAMM,OAAOC,EAC7BZ,QAAStG,EAAO2G,MAAMM,OAAOE,IAErC,IF/C4B,uBEgDxB,OAAOjH,OAAO6G,OAAO,GAAInH,EAAO,CAC5ByG,QAASrG,EAAO2G,MAAMM,OAAOC,EAC7BZ,QAAStG,EAAO2G,MAAMM,OAAOE,IAErC,IF1D4B,uBE2DxB,IAAIC,EAAa/B,EAAUgC,UAAU,SAAAvB,GAAK,OAAIlG,EAAMkG,QAAUA,EAAMR,OAChEgC,EAAWjC,GAAW+B,EAAa,GAAK,GAC5C,OAAOlH,OAAO6G,OAAO,GAAInH,EAAO,CAC5BkG,MAAOwB,EAAShC,KAChBC,SAAU+B,EAAS/B,SACnBC,QAAS8B,EAAS9B,UAE1B,IFjEiC,4BEkE7B,OAAOtF,OAAO6G,OAAO,GAAInH,EAAO,CAC5BoG,SAAUpG,EAAMoG,QAChBC,kBAAiBrG,EAAMoG,SAAUpG,EAAMqG,kBAE/C,IFrEuC,kCEsEnC,OAAIrG,EAAMqG,gBACC/F,OAAO6G,OAAO,GAAInH,EAAO,CAC5BqG,iBAAiB,IAId/F,OAAO6G,OAAO,GAAInH,EAAO,CAC5BoG,SAAS,EACTC,iBAAiB,IAI7B,IFjFqC,gCEkFjC,OAAO/F,OAAO6G,OAAO,GAAInH,EAAO,CAC5BsG,eAAgBtG,EAAMsG,gBAG9B,IF3FkC,6BE4F9B,OAAOhG,OAAO6G,OAAO,GAAInH,EAAO,CAC5B2G,gBAAiB3G,EAAM2G,iBAQ/B,IF3GkC,6BE4G9B,OAAOrG,OAAO6G,OAAO,GAAInH,EAAO,CAC5BuG,qBAAqB,IAG7B,IF5GqC,gCE6GjC,OAAOjG,OAAO6G,OAAO,GAAInH,EAAO,CAC5BuG,qBAAqB,IAE7B,IF/GqC,gCEgHjC,OAAOjG,OAAO6G,OAAO,GAAInH,EAAO,CAC5BuG,qBAAqB,IAE7B,IFzDgC,2BE0D5B,OAAOjG,OAAO6G,OAAO,GAAInH,EAAO,CAC5B6G,+BAA+B,IAEvC,IF5DyC,sCE6DrC,OAAOvG,OAAO6G,OAAO,GAAInH,EAAO,CAC5B8G,0BAA0B,IAElC,IF9D+B,0BE+D3B,OAAOxG,OAAO6G,OAAO,GAAInH,EAAO,CAC5BgH,aAAa,IAErB,IFjE6B,wBEkEzB,OAAO1G,OAAO6G,OAAO,GAAInH,EAAO,CAC5BgH,aAAa,IAErB,IFhF4B,uBEiFxB,OAAOhH,EACX,IF9HsC,iCE+HlC,OAAOM,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIiH,eAAgBjH,EAAMiH,gBAE9B,QACI,OAAOjH,YCzJf2H,EAAe,CACfC,YAAa,EACbC,OAAQ,UACRC,KAAM,UACNC,MAAO,GAyEIC,aApEX,SAAAA,IAA6D,IAAjDC,EAAiDhI,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,QAA1CE,EAAW+H,EAA+BjI,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,QAAvBE,EAAW0E,EAAY5E,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAAIK,OAAAS,EAAA,EAAAT,CAAAU,KAAAgH,GACzDhH,KAAKiH,KAAOA,EACZjH,KAAKkH,MAAQA,GAASP,EACtB3G,KAAK6D,MAAQA,sDAIb,IAAIsD,EAAQ,IAAIH,EAAMhH,KAAKiH,KAAMjH,KAAKkH,MAAOlH,KAAK6D,OAClD,OAAOvE,OAAO6G,OAAOgB,EAAOnH,kCAI5B,OAAOA,KAAKiH,KAAKG,aCgGVpK,aA7GX,SAAAA,EAAY+I,GAAQzG,OAAAS,EAAA,EAAAT,CAAAU,KAAAhD,GAGhBgD,KAAK+F,MAAQA,EACb/F,KAAK8D,OAAS,GACd9D,KAAK0E,KAAO,GACZ1E,KAAKqH,MAAQ,GACbrH,KAAK8E,MAAQ,GACb9E,KAAKsH,WAAY,EACjBtH,KAAKuH,QAAS,EACdvH,KAAKwH,UAAW,sDAIhB,IAAIC,EAAQ,IAAIzK,EAAMgD,KAAK+F,OAC3B,OAAOzG,OAAO6G,OAAOsB,EAAOzH,kCAG5B0H,GACA,GAAIA,aAAiBV,EACjBhH,KAAK8D,OAAO5C,KAAKwG,OAEhB,CACD,IACIC,EAAW,IAAIX,EADRU,EACoB,GAAIA,EAAM7D,OACzC7D,KAAK8D,OAAO5C,KAAKyG,GAErB,OAAO3H,4CAGI8D,GAAQ,IAAAtD,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IACnB,QAAAwB,EAAAC,EAAkBkD,EAAlBjD,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA0B,KAAjBkH,EAAiB/G,EAAAR,MACtBH,KAAK4H,IAAIF,IAFM,MAAArG,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,GAInB,OAAOV,6CAgBKqH,GACZ,IAAIC,GAAatH,KAAKsH,UACtB,OAAOhI,OAAO6G,OAAOnG,KAAK6H,QACtB,CACIP,UAAYA,EACZD,MAAOA,wCAIPG,GAER,OADAxH,KAAKwH,SAAWA,EACTxH,uCAODuH,GACN,OAAOjI,OAAO6G,OAAOnG,KAAK6H,QACtB,CACIN,OAASA,4CAIL7C,EAAKI,GACjB,OAAOxF,OAAO6G,OAAOnG,KAAK6H,QACtB,CACInD,KAAOA,EACPI,MAAOA,EACPyC,QAAQ,uCAIT,IAAAjE,GAAA,EAAAC,GAAA,EAAAC,OAAArE,EAAA,IACP,QAAAsE,EAAAC,EAAiB1D,KAAK8D,OAAtBjD,OAAAC,cAAAwC,GAAAG,EAAAC,EAAA3C,QAAAC,MAAAsC,GAAA,EAA8B,CAAAG,EAAAtD,MACpB4G,MAAQ/G,KAAKsH,UAAY,EAAI,GAFhC,MAAAjG,GAAAkC,GAAA,EAAAC,EAAAnC,EAAA,YAAAiC,GAAA,MAAAI,EAAApC,QAAAoC,EAAApC,SAAA,WAAAiC,EAAA,MAAAC,GAIP,OAAOxD,KAAK8D,wCAaZ,MAAO,CACHY,KAAM1E,KAAK0E,KACXI,MAAO9E,KAAK8E,MACZhB,OAAQgE,KAAKC,UAAU/H,KAAK8D,OAAQ,KAAM,kCAlE9C,IAAIsD,EAAM,IAAI3H,IAAQuI,IADhBjE,GAAA,EAAAC,GAAA,EAAAC,OAAA9E,EAAA,IAEN,QAAA+E,EAAAC,EAAkBnE,KAAK8D,OAAvBjD,OAAAC,cAAAiD,GAAAG,EAAAC,EAAApD,QAAAC,MAAA+C,GAAA,EAA+B,KAAtB2D,EAAsBxD,EAAA/D,MAC3BiH,EAAMA,EAAIa,MAAMP,EAAMN,MAHpB,MAAA/F,GAAA2C,GAAA,EAAAC,EAAA5C,EAAA,YAAA0C,GAAA,MAAAI,EAAA7C,QAAA6C,EAAA7C,SAAA,WAAA0C,EAAA,MAAAC,GAKN,OAAOmD,iCAIP,IAAIA,EAAMpH,KAAKoH,IACf,OAAO,IAAI3H,IAAQD,OAAO4H,EAAIc,KAAOd,EAAIe,MAAM,GAAIf,EAAIgB,KAAOhB,EAAIiB,MAAM,YClD1EC,EAAS,CACX,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WA4FWC,wGAvFKxC,EAAOyC,GACnB,IAAIf,EAAQ,IAAIzK,EAAM+I,GAOtB,OANA0B,EAAM/C,KAAO6D,EAAOE,WAAWD,GACT,IAAlBA,EAAOtJ,SAEPuI,EAAMH,WAAY,EAClBG,EAAMD,UAAW,GAEdC,qCAOOe,GAId,IAHA,IAAI9D,EAAO6D,EAAOG,YACdC,EAAM,EACNC,EAAa,SAACnB,GAAD,OAAWA,EAAM/C,OAASA,GACpC8D,EAAOK,KAAKD,IACflE,EAAO6D,EAAOG,YAAcC,EAC5BA,IAEJ,OAAOjE,sCAGQ8D,GACf,OAAOA,EAAOK,KAAK,SAACC,GAAD,OAASA,EAAItB,+CAGjBgB,EAAQf,GACvB,IAAIsB,EAAuBR,EAAOS,YAAYR,GAC1CO,IACAA,EAAqBvB,UAAW,GAEpCC,EAAMD,UAAW,uCAGDgB,GAEhB,IADA,IAAInB,EAAQ,GADY4B,EAAA,WAEnB,IAAIC,EAAOZ,EAAJa,GACR,IAAKX,EAAOK,KAAK,SAACpB,GAAD,OACbA,EAAMH,WAAaG,EAAMJ,QAAU6B,IAEnC,OADA7B,EAAQ6B,EACR,SAJRC,EAAA,EAAAA,EAAgBb,EAAhBpJ,OAAAiK,IAAwB,cAAAF,IAIhB,MAGR,OAAO5B,iCAGGmB,EAAQf,GAClB,IAAI2B,EAAQZ,EAAO/B,UAAU,SAAC4C,GAAD,OAAOA,IAAM5B,IACtC6B,EAAYd,EAAOe,OAAO,SAAAF,GAAC,OAAIA,IAAM5B,IAQzC,OAPI2B,EAAQ,IACRE,EAAUF,EAAM,GAAG5B,UAAW,EACG,KAA7B8B,EAAUF,EAAM,GAAG/B,QACnBiC,EAAUF,EAAQ,GAAG/B,MAAQkB,EAAOiB,aAAaF,IAErDA,EAAUF,EAAM,GAAG9B,WAAY,GAE5BgC,+BAMCd,GACR,IAAIc,EAAYd,EAAOiB,QAYvB,OAXAH,EAAUI,KAAM,SAASC,EAAIC,GACzB,IAAIC,EAAQF,EAAGjF,KAAKoF,cAChBC,EAAQH,EAAGlF,KAAKoF,cACpB,OAAID,EAAQE,GACA,EAERF,EAAQE,EACD,EAEJ,IAEJT,iCAGGd,GACV,OAAOA,EAAOwB,IAAK,SAAAvC,GAAK,OAAIA,EAAMwC,+CAvElC,MAAO,iBCoHAzB,EA/JA,WAAwB,IAG/B0B,EAHQlL,EAAuBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAf,GAAIG,EAAWH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAC/BgL,EAAgBnL,EAAM6J,KAAK,SAAApB,GAAK,OAAIA,EAAMD,WAC1C4C,EAAkBpL,EAAMyH,UAAU,SAAAgB,GAAK,OAAIA,EAAMD,WAGrD,OAAQpI,EAAOC,MACX,INiCgC,2BM/B5B,OADA6K,EAAW3B,EAAO2B,SAAS9K,EAAO2G,MAAO/G,GAClCM,OAAA+K,EAAA,EAAA/K,CAAIN,GAAXsL,OAAA,CAAkBJ,IAEtB,IN8BqB,gBM7BjB,OAAO5K,OAAA+K,EAAA,EAAA/K,CAAIN,GAAXsL,OAAA,CAAkBlL,EAAOqI,QAE7B,IN4BmC,8BM3B/B,OAAI0C,EACO5B,EAAOgC,OAAOvL,EAAOmL,GAGrBnL,EAGf,IN+DgC,2BM9D5B,MAAO,GAEX,INkBkC,6BMjB9B,OAAOuJ,EAAOmB,KAAK1K,GAEvB,INkBoC,+BMjBhC,IAAIqI,EAAQ,GACZ,IAAKjI,EAAOqI,MAAMH,WAEA,MADdD,EAAQkB,EAAOiB,aAAaxK,IACV,OAEtB,OAAOA,EAAMgL,IAAI,SAACvC,GACd,GAAIA,IAAUrI,EAAOqI,MAIjB,OAAIrI,EAAOqI,MAAMH,UACNG,EAGAA,EAAM+C,aAAY,GAI7B,IAAIN,EAAWzC,EAAMgD,gBAAgBpD,GAErC,OADA6C,EAAS1C,SAAW0C,EAAS5C,UACtB4C,IAKnB,INPmC,gCMQ/B,OAAOlL,EAAMgL,IAAI,SAACvC,GACd,OAAIA,IAAUrI,EAAOqI,MACVA,EAAM+C,aAAY,GAGlB/C,EAAM+C,aAAa/C,EAAMD,YAc5C,IN1BoC,+BM2BhC,OAAOxI,EAAMgL,IAAI,SAACvC,GACd,OAAIA,IAAU0C,EACH1C,EAGAA,EAAMiD,WAAU,KAInC,INnCsC,iCMoClC,OAAO1L,EAAMgL,IAAI,SAACvC,GACd,OAAIA,EAAMF,OACCE,EAAMkD,gBAAgBvL,EAAO8K,SAASxF,KAAMtF,EAAO8K,SAASpF,OAG5D2C,IAInB,IN5CsC,iCM6ClC,OAAOzI,EAAMgL,IAAI,SAACvC,GACd,OAAIA,EAAMF,OACCE,EAAMiD,WAAU,GAGhBjD,IAInB,INpDsC,iCMqDlC,GAAI2C,IAAoBpL,EAAME,OAAS,EACnC,OAAOF,EAIP,IAAI4L,EAAY5L,EAAMoL,EAAkB,GAExC,OAAOpL,EAAMgL,IAAI,SAAAvC,GACb,GAAIA,IAAU0C,EAAe,CACzB,IAAIU,EAAcpD,EAAMgD,gBAAgB,IAExC,OADAI,EAAYrD,UAAW,EAChBqD,EAEN,GAAIpD,IAAUmD,EAAW,CAC1B,IAAIvD,EAAQ8C,EAAc9C,MACtByD,EAAerD,EAAMgD,gBAAgBpD,GAEzC,OADAyD,EAAatD,UAAW,EACjBsD,EAGP,OAAOrD,IAKvB,IN7EoC,+BM8EhC,GAAwB,IAApB2C,EACA,OAAOpL,EAGP,IAAI4L,EAAY5L,EAAMoL,EAAkB,GAExC,OAAOpL,EAAMgL,IAAI,SAAAvC,GACb,GAAIA,IAAU0C,EAAe,CACzB,IAAIU,EAAcpD,EAAMgD,gBAAgB,IAExC,OADAI,EAAYrD,UAAW,EAChBqD,EAEN,GAAIpD,IAAUmD,EAAW,CAC1B,IAAIE,EAAerD,EAAMgD,gBAAgBN,EAAc9C,OAGvD,OAFAyD,EAAaxD,WAAY,EACzBwD,EAAatD,UAAW,EACjBsD,EAGP,OAAOrD,IAKvB,QACI,OAAOzI,IC5Jb+L,EAAoB,CACtBzE,EAAG,EACHC,EAAG,EACHyE,YAAQ7L,EACR8L,YAAQ9L,EACR+L,iBAAa/L,GAmDFgM,EAhDD,WAAuC,IAAtCnM,EAAsCC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA9B8L,EAAmB3L,EAAWH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACjD,OAAQC,EAAOC,MACX,IPY4B,uBOXxB,OAAOC,OAAO6G,OAAO,GAAInH,EAAO,CAC5BsH,EAAGlH,EAAOkH,EACVC,EAAGnH,EAAOmH,IAElB,IPQ2B,sBOPvB,OAAOjH,OAAO6G,OAAO,GAAInH,EAAO,CAC5BgM,OAAQ5L,EAAOkH,EACf2E,OAAQ7L,EAAOmH,IAEvB,IPIyB,oBOHrB,OAAOjH,OAAO6G,OAAO,GAAInH,EAAO,CAC5BgM,YAAQ7L,EACR8L,YAAQ9L,IAGhB,IPK2B,sBOJvB,OAAOG,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIkM,YAAa,CACT,CAAC5E,EAAGlH,EAAOgM,GAAI7E,EAAGnH,EAAOiM,IACzB,CAAC/E,EAAGlH,EAAOkM,GAAI/E,EAAGnH,EAAOmM,OAarC,IPXyB,oBOYrB,OAAOjM,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIkM,iBAAa/L,IAIrB,QACI,OAAOH,YCnDbwM,EAA2B,CAC7BC,qBAAqB,EACrBC,yBAAyB,EACzBC,aAAc,KACdC,mBAAoB,KACpBC,oBAAqB,KACrBC,mBAAoB,KACpBC,oBAAqB,KACrBC,cAAU7M,EACV8M,gBAAiB,MAGfC,EAAYC,OAAOC,cAuGVC,EArGW,WAA8C,IAA7CrN,EAA6CC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAArCuM,EAA0BpM,EAAWH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACpE,OAAQC,EAAOC,MACX,IRJqC,gCQKjC,OAAOC,OAAO6G,OAAO,GAAIqF,EAA0B,CAC/CC,qBAAqB,IAE7B,IRbkC,6BQgBlC,IRZqC,gCQajC,OAAOnM,OAAO6G,OAAO,GAAIqF,GAE7B,IRA6B,wBQCzB,OAAOlM,OAAO6G,OAAO,GAAInH,EAAO,CAC5B2M,aAAc3M,EAAMyM,oBAAsBrM,EAAOsI,MAAQ,OAEjE,IRH4B,uBQIxB,OAAOpI,OAAO6G,OAAO,GAAInH,EAAO,CAC5B2M,aAAc,OAEtB,IRN8B,yBQO1B,IAAK3M,EAAMyM,oBACP,OAAOzM,EAIX,GAAIA,EAAM0M,wBACN,OAAOpM,OAAO6G,OAAO,GAAInH,EAAO,CAC5B4M,mBAAoBxM,EAAOsI,MAC3BoE,mBAAoB1M,EAAOqI,MAC3BoE,oBAAqB,KACrBE,oBAAqB,KACrBL,yBAAyB,EACzBM,cAAU7M,EACV8M,gBAAiB,OAIrB,GAAI7M,EAAOsI,QAAU1I,EAAM4M,mBACvB,OAAO5M,EAGX,IAEIgN,EAAUC,EAFVK,EAAStN,EAAM4M,mBAAmB3E,KAClCsF,EAASnN,EAAOsI,MAAMT,KANzBuF,EAY6B/M,IAAQgN,SAAST,SAASM,EAAQC,GAZ/DG,EAAApN,OAAAqN,EAAA,EAAArN,CAAAkN,EAAA,GAgBD,OAJCR,EAZAU,EAAA,GAYUT,EAZVS,EAAA,GAgBMpN,OAAO6G,OAAO,GAAInH,EAAO,CAC5B6M,oBAAqBzM,EAAOsI,MAC5BqE,oBAAqB3M,EAAOqI,MAC5BiE,yBAAyB,EACzBM,SAAUA,EACVC,gBAAiBA,IAG7B,IRrD2B,sBQsDvB,OAAIjN,EAAM2M,cAAgBO,EACflN,EAGAM,OAAO6G,OAAO,GAAInH,EAAO,CAC5B0M,yBAAyB,EACzBE,mBAAoB,KACpBE,mBAAoB,KACpBD,oBAAqB,KACrBE,oBAAqB,KACrBC,cAAU7M,EACV8M,gBAAiB,OAI7B,IRlDmC,8BQmD/B,OAAI7M,EAAOqI,QAAUzI,EAAM8M,oBACvB1M,EAAOqI,QAAUzI,EAAM+M,oBAChBzM,OAAO6G,OAAO,GAAIqF,GAGlBxM,EAGf,IRvDoC,+BQwDhC,OAAII,EAAOqI,MAAMH,WACZlI,EAAOqI,QAAUzI,EAAM8M,oBACpB1M,EAAOqI,QAAUzI,EAAM+M,oBAIpB/M,EAHAM,OAAO6G,OAAO,GAAIqF,GAMjC,QACI,OAAOxM,aChHb4N,EAAuB,CACzBC,QAAI1N,EACJuF,KAAM,GACNoI,MAAO,WACPC,iBAAa5N,GAGX6N,EAA2B,CAC7BC,SAAUL,EACVM,cAAe,IAkBnB,IA2EeC,EA3EM,WAA8C,IAA7CnO,EAA6CC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAArC+N,EAA0B5N,EAAWH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAC/D,OAAQC,EAAOC,MACX,ITiDgD,2CStChD,ITwCoD,+CSvChD,OAAOC,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIiO,SAAU,CACNJ,GAAIzN,EAAOyN,GACXnI,KAAMtF,EAAOsF,KACboI,MAAO1N,EAAO0N,MACdC,YAAa3N,EAAO2N,eAIhC,IT4BmD,8CS3B/C,OAAOzN,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIiO,SAAS3N,OAAAC,EAAA,EAAAD,CAAA,GACFN,EAAMiO,SADL,CAEJF,YAAa3N,EAAO2N,gBAIhC,ITwB6B,wBSvBzB,OAAOzN,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIiO,SAAS3N,OAAAC,EAAA,EAAAD,CAAA,GACFN,EAAMiO,SADL,CAEJvI,KAAMtF,EAAOsF,SAIzB,ITa6C,wCSb7C,IAAA0I,EACgDpO,EAAMkO,cAAlBG,GADpCD,EACWhO,EAAOyN,IADlBvN,OAAAgO,EAAA,EAAAhO,CAAA8N,EAAA,CACWhO,EAAOyN,MACd,OAAOvN,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIiO,SAAUjO,EAAMiO,SAASJ,KAAOzN,EAAOyN,GAAKD,EAAuB5N,EAAMiO,SACzEC,cAAeG,IAGvB,ITMmC,8BSL/B,OAAO/N,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIiO,SAAU7N,EAAO6N,WAGzB,ITEgC,2BSD5B,OAAO3N,OAAAC,EAAA,EAAAD,CAAA,GACAN,EADP,CAEIiO,SAAUL,IAGlB,ITRqD,gDSSjD,OA9EZ,SAAoBW,EAAoBC,GACpC,GAA4B,OAAxBA,QAAwDrO,IAAxBqO,EAChC,OAAO,EAEX,GAAIlO,OAAOmO,KAAKF,GAAoBrO,SAAWI,OAAOmO,KAAKD,GAAqBtO,OAC5E,OAAO,EACX,IAAK,IAAIgB,KAAOqN,EACZ,IAAMC,EAAoBE,eAAexN,IAASqN,EAAmBrN,GAAK6M,cAAgBS,EAAoBtN,GAAK6M,YAC/G,OAAO,EAIf,OAAO,EAkEQY,CAAW3O,EAAMkO,cAAe9N,EAAO8N,eAC1ClO,EADGM,OAAAC,EAAA,EAAAD,CAAA,GAGAN,EAHA,CAIHkO,cAAe9N,EAAO8N,gBAG9B,QACI,OAAOlO,IC9EJ4O,EATCC,YAAgB,CAC5B9O,OACAmH,MACAsC,SACA2E,eACAd,oBACAlB,2ECbW2C,EAJEC,IAAMC,OAAO,CAC1BC,QAAS,yCCEAxF,EAAa,SAACyF,GAIvB,IAHA,IAAIxJ,EAHY,WAIZiE,EAAM,EACNC,EAAa,SAACqE,GAAD,OAAcA,EAASvI,OAASA,GACzCpF,OAAO6O,OAAOD,GAAWrF,KAAKD,IAClClE,EAPY,WAOSiE,EACrBA,IAEJ,OAAOjE,GAUE0J,EAA2B,SAAEvB,EAAIwB,GAC1C,OAAON,EAAMO,IAAN,cAAAhE,OAAwBuC,EAAxB,SAAmCwB,IAGjCE,GAAwB,SAAEF,GACnC,OAAON,EAAMS,KAAK,kBAAmBH,IAO5BI,GAA6B,SAAC5B,GACvC,OAAOkB,EAAMxD,OAAO,cAAgBsC,EAAK,UAGhC6B,GAA6B,SAAChQ,EAAOC,GAC9C,IAAMgQ,EAAc,SAAWjQ,EAAQ,8BAAgCC,EAAS,IAChF,OAAOoP,EAAMa,IAAI,kBAAoBD,6CCX1BE,GA1BA,SAACC,GACZ,IAAIC,EACJ,OAAQD,EAAMzP,MACV,IAAK,UACD0P,EAAYC,KAAQnT,YACpB,MACJ,IAAK,OACDkT,EAAYD,EAAM7Q,OAAS+Q,KAAQlT,eAAiBkT,KAAQjT,kBAC5D,MACJ,QACIgT,EAAYC,KAAQnT,YAI5B,IAAIoT,EAAcH,EAAMI,WAAaF,KAAO,aAA4BA,KAAO,OAC/E,OACIG,EAAAC,EAAAC,cAAA,UAAQvK,MAAOgK,EAAMhK,MAAOwK,QAASR,EAAMQ,QAASC,UAAWN,GAC3DE,EAAAC,EAAAC,cAACG,GAAAJ,EAAD,CACI1K,KAAMoK,EAAMW,SACZpL,KAAK,KACLkL,UAAWR,2BCRZW,GAZS,WACpB,OACIP,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQ/S,iBACpBkT,EAAAC,EAAAC,cAACG,GAAAJ,EAAD,CACI1K,KAAK,aACLL,KAAK,KACLkL,UAAWP,KAAQ9S,uCCmGpByT,qNAjGXC,qBAAuB,kBAAMC,EAAKC,KAAKC,YAAYC,iFAG/C,OACIb,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQ,gBACpBG,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,UAAU6P,YAAU,EAACpK,MAAM,mBAAmB2K,SAAS,OAAOH,QAAStP,KAAK8O,MAAMmB,2BAG/Fd,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,UAAUyF,MAAM,aAAa2K,SAAS,cAC3CH,QAAStP,KAAK4P,uBAYtBT,EAAAC,EAAAC,cAAA,SAAOnI,MAAO,CAACgJ,SAAU,GAAIC,UAAW,EAAGC,aAAc,EAAGC,QAAS,QAC9DhR,KAAK,OAAOwN,GAAG,cAAcyD,IAAI,cAAc5L,KAAK,UAAU6L,UAAQ,EACtEC,SAAUxQ,KAAK8O,MAAM2B,iBAG5BtB,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,UAAUyF,MAAM,yBAAyB2K,SAAS,OACvDH,QAAStP,KAAK8O,MAAM4B,8BAG5BvB,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,UAAUyF,MAAM,yBAAyB2K,SAAS,QACvDH,QAAStP,KAAK8O,MAAM6B,0BAG5BxB,EAAAC,EAAAC,cAACpT,GAAD,MAEAkT,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,UAAUyF,MAAM,4BAA4B2K,SAAS,OAC1DH,QAAStP,KAAK8O,MAAM8B,sBAG5BzB,EAAAC,EAAAC,cAACpT,GAAD,MAEAkT,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,OAAOyF,MAAM,cAAc2K,SAAS,aACzCxR,QAAS+B,KAAK8O,MAAMvJ,oBACpB+J,QAAStP,KAAK8O,MAAM+B,qBAG5B1B,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,OAAOyF,MAAM,mBAAmB2K,SAAS,cAC9CxR,OAAQ+B,KAAK8O,MAAMvJ,oBACnB+J,QAAStP,KAAK8O,MAAMgC,+BAG5B3B,EAAAC,EAAAC,cAACpT,GAAD,MAEAkT,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,UAAUyF,MAAM,kCAAkC2K,SAAS,QAChEH,QAAStP,KAAK8O,MAAMiC,sCAG5B5B,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,UAAUyF,MAAM,wBAAwB2K,SAAS,YACtDH,QAAStP,KAAK8O,MAAMkC,2BAG5B7B,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,UAAUyF,MAAM,0BAA0B2K,SAAS,eACxDH,QAAStP,KAAK8O,MAAMmC,0BAG5B9B,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,UAAUyF,MAAM,wBAAwB2K,SAAS,MACtDH,QAAStP,KAAK8O,MAAMoC,wBAG3BlR,KAAK8O,MAAMjJ,8BACRsJ,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,UAAUyF,MAAM,4BAA4B2K,SAAS,OAC1DH,QAAStP,KAAK8O,MAAMqC,qCAE5B,KAEJhC,EAAAC,EAAAC,cAACpT,GAAD,MAEAkT,EAAAC,EAAAC,cAAA,UAAQE,UAAWP,KAAQ,qBACnBM,QAAStP,KAAK8O,MAAMsC,eAEvBpR,KAAK8O,MAAM5J,OAGhBiK,EAAAC,EAAAC,cAACpT,GAAD,MAEAkT,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,UAAUyF,MAAM,QAAQ2K,SAAS,OACtCH,QAAStP,KAAK8O,MAAMuC,0BAG5BlC,EAAAC,EAAAC,cAACpT,GAAD,cA3FeqV,2CCP3BC,GAAWpF,OAAOoF,SAiNPC,eA9MX,SAAAA,EAAYC,GAAQ,IAAA5B,EAAA,OAAAvQ,OAAAS,EAAA,EAAAT,CAAAU,KAAAwR,GAChB3B,EAAAvQ,OAAAoS,EAAA,EAAApS,CAAAU,KAAAV,OAAAqS,EAAA,EAAArS,CAAAkS,GAAAI,KAAA5R,KAAMyR,IAENF,GAASM,MAAMC,OAAfxS,OAAAyS,GAAA,EAAAzS,QAAAyS,GAAA,EAAAzS,CAAAuQ,KACAA,EAAKmC,kBAAmB,EAExBnC,EAAKoC,gBAAgB,IAEjBpC,EAAK4B,OAAOS,YAAc,GAAKrC,EAAK4B,OAAOU,aAAe,IAC1DtC,EAAK4B,OAAOW,MAAQvC,EAAK4B,OAAOS,YAChCrC,EAAK4B,OAAOY,OAASxC,EAAK4B,OAAOU,cAGrCtC,EAAKxJ,OAAS,CAACC,EAAGuJ,EAAK4B,OAAOW,MAAQ,EAAG7L,EAAGsJ,EAAK4B,OAAOY,OAAS,GACjExC,EAAKzJ,WAAa,KAClByJ,EAAKrK,WAAa,EAElBqK,EAAKyC,UAAY,CAAChM,OAAGnH,EAAWoH,OAAGpH,GAEnC0Q,EAAK0C,mBAAgBpT,EACrB0Q,EAAK2C,kBAAerT,EACpB0Q,EAAK4C,kBAAetT,EACpB0Q,EAAK6C,cAAe,EAtBJ7C,uEAmChB,IAAI9J,EAAQ,IAAIyL,EAAMxR,KAAKyR,QAC3B,OAAOnS,OAAO6G,OAAOJ,EAAO/F,kCAG5B0H,GAEA,OADA1H,KAAK2S,SAASjL,GACP1H,6CAIP,OAAOA,KAAKoG,WAAapG,KAAKwF,8CAGvBoN,GACP,OAAQA,EAAS5S,KAAK6S,mDAGfD,GACP,OAAQ5S,KAAK6S,gBAAkBD,gCAG7BE,GACF,OAASA,EAAU9S,KAAKqG,OAAOC,GAAKtG,KAAK6S,8CAGvCE,GACF,OAAS/S,KAAKqG,OAAOE,EAAIwM,GAAW/S,KAAK6S,8CAGvCG,GACF,OAAQhT,KAAK6S,gBAAkBG,EAAShT,KAAKqG,OAAOC,gCAGlD2M,GACF,OAAQjT,KAAKqG,OAAOE,EAAIvG,KAAK6S,gBAAkBI,8BAG/CrP,GACA,MAAO,CAAC0C,EAAGtG,KAAKkT,MAAMtP,EAAM0C,GAAIC,EAAGvG,KAAKmT,MAAMvP,EAAM2C,kCAGlD6M,GACFpT,KAAKqG,OAAS,CAACC,EAAG8M,EAAU9M,EAAGC,EAAG6M,EAAU7M,iCAG1C8M,EAAQC,GACVtT,KAAKqG,OAAS,CACVC,EAAGtG,KAAKqG,OAAOC,EAAI+M,EACnB9M,EAAGvG,KAAKqG,OAAOE,EAAI+M,kCAKpBC,GACH,IAAIC,EAAWD,GAAS,IACxBvT,KAAKwF,WAAalD,KAAKmR,IAAI,IAAUD,EAAWxT,KAAKwF,4CAGjD+N,GACJ,IAAIC,EAAWD,GAAS,IACxBvT,KAAKwF,WAAalD,KAAKoR,IAAI,KAAO1T,KAAKwF,WAAagO,gCAInDG,EAAQC,EAAQC,EAAKN,GACtB,IAAIP,EAAShT,KAAK8T,MAAMH,GACpBV,EAASjT,KAAK+T,MAAMH,GAExBC,EAAM7T,KAAKgU,OAAOT,GAASvT,KAAKiU,QAAQV,GAExC,IAAIW,EAAYlU,KAAKkT,MAAMF,GACvBmB,EAAYnU,KAAKmT,MAAMF,GAI3B,OAFAjT,KAAKoU,MAAMT,EAASO,EAAWN,EAASO,GAEjC,CAACD,EAAWC,uCAGXR,EAAQC,EAAQC,EAAKN,GAC7BvT,KAAKqU,KAAKV,EAAQC,EAAQC,EAAKN,wCAGtBnB,EAAOC,GAEF,IAAVD,IAAaA,EAAQ,KACV,IAAXC,IAAcA,EAAS,KAC3B,IAEIkB,EAFajR,KAAKmR,IAAIzT,KAAKyR,OAAOW,OAAS,IAAIA,GAAQpS,KAAKyR,OAAOY,QAAU,IAAIA,IACvDrS,KAAKoG,WACVpG,KAAKwF,WAG1BmO,EAAS3T,KAAKyR,OAAOW,MAAM,EAC3BwB,EAAS5T,KAAKyR,OAAOY,OAAO,EAChCrS,KAAKqU,KAAKV,EAAQC,GAJR,EAIqBL,oCAM3BvT,KAAKyR,OAAOS,YAAc,GAAKlS,KAAKyR,OAAOU,aAAe,IAC1DnS,KAAKyR,OAAOW,MAAQpS,KAAKyR,OAAOS,YAChClS,KAAKyR,OAAOY,OAASrS,KAAKyR,OAAOU,wDAYrCnS,KAAKsS,UAAUhM,EAAItG,KAAKqG,OAAOC,EAC/BtG,KAAKsS,UAAU/L,EAAIvG,KAAKqG,OAAOE,EAC/BvG,KAAKsU,yDAGMC,EAAIC,GACXxU,KAAK0S,mBACEvT,IAAPoV,QAA2BpV,IAAPqV,QACCrV,IAArBa,KAAKsS,UAAUhM,QAAwCnH,IAArBa,KAAKsS,UAAU/L,IACjDvG,KAAKqG,OAAS,CACNC,EAAGtG,KAAKsS,UAAUhM,EAAIiO,EACtBhO,EAAGvG,KAAKsS,UAAU/L,EAAIiO,6CAMlCxU,KAAKsS,UAAUhM,OAAInH,EACnBa,KAAKsS,UAAU/L,OAAIpH,0CAGPmH,EAAGC,GACf,IAAIuM,EAAU9S,KAAKkT,MAAM5M,GACrByM,EAAU/S,KAAKmT,MAAM5M,GAErBgO,EAAKvU,KAAKyR,OAAOW,MAAQ,EAAIU,EAC7B0B,EAAKxU,KAAKyR,OAAOY,OAAS,EAAIU,EAClC/S,KAAKoU,MAAMG,EAAIC,4CAGF1B,EAASC,GACtB/S,KAAKuS,cAAgBvS,KAAKwF,WAC1BxF,KAAKwS,aAAexS,KAAK8T,MAAMhB,GAC/B9S,KAAKyS,aAAezS,KAAK+T,MAAMhB,GAC/B/S,KAAK0S,cAAe,EACpB1S,KAAKyU,yDAGO3B,EAASC,EAASQ,GAC9BvT,KAAKwF,WAAa+N,EAAQvT,KAAKuS,cAC/BvS,KAAKqG,OAAS,CACVC,EAAGwM,EAAU9S,KAAK6S,gBAAkB7S,KAAKwS,aACzCjM,EAAGwM,EAAU/S,KAAK6S,gBAAkB7S,KAAKyS,wDAK7CzS,KAAKuS,mBAAgBpT,EACrBa,KAAKwS,kBAAerT,EACpBa,KAAKyS,kBAAetT,EACpBa,KAAK0S,cAAe,kCAIpB1S,KAAKyR,OAAOiD,WAAW,MAAMC,UAAU,EAAG,EAAG3U,KAAKyR,OAAOW,MAAOpS,KAAKyR,OAAOY,oCAhL5E,IAAIuC,EAAO5U,KAAK8T,MAAM,GAClBe,EAAO7U,KAAK+T,MAAM/T,KAAKyR,OAAOY,QAC9ByC,EAAO9U,KAAK8T,MAAM9T,KAAKyR,OAAOW,OAC9B2C,EAAO/U,KAAK+T,MAAM,GAEtB,OAAS,IAAItU,IAAQuI,IAAI4M,EAAMC,EAAMC,EAAMC,UAhC/BxD,GAASC,OCgChBwD,GAAuB,SAACjP,EAAOO,EAAGC,EAAG0O,GAC9C,MAAO,CACH5V,KjBbiC,4BiBcjC0G,MAAOA,EACPO,EAAGA,EACHC,EAAGA,EACH0O,MAAOA,ICjCTC,8MACFC,cAAgBC,IAAMC,cAEtBC,gBAAkB,SAACC,GAEf,GADA1F,EAAKf,MAAM/I,MAAM0L,OAAO+D,QACnBD,EAAME,YAAYC,SAAgD,IAArCH,EAAME,YAAYC,QAAQxW,QASvD,GAAIqW,EAAME,YAAYC,SAAgD,IAArCH,EAAME,YAAYC,QAAQxW,OAAc,CAC1E,IAAIgM,EAAc,CACd,CAAC5E,EAAGiP,EAAME,YAAYC,QAAQ,GAAGC,QAASpP,EAAGgP,EAAME,YAAYC,QAAQ,GAAGE,SAC1E,CAACtP,EAAGiP,EAAME,YAAYC,QAAQ,GAAGC,QAASpP,EAAGgP,EAAME,YAAYC,QAAQ,GAAGE,UAE9E/F,EAAKf,MAAM+G,gBAAgBhG,EAAKf,MAAM/I,MAAOmF,SAb7C2E,EAAKf,MAAMwG,gBACPzF,EAAKf,MAAM/I,MACXwP,EAAMO,OACNP,EAAMQ,OACNlG,EAAKf,MAAM3D,MAAMH,OAASuK,EAAMO,OAASjG,EAAKf,MAAM3D,MAAMH,YAAS7L,EACnE0Q,EAAKf,MAAM3D,MAAMF,OAASsK,EAAMQ,OAASlG,EAAKf,MAAM3D,MAAMF,YAAS9L,MAyB/E6W,gBAAkB,SAACT,GAEf,GAAKA,EAAME,YAAYC,SAAgD,IAArCH,EAAME,YAAYC,QAAQxW,QAGvD,GAAIqW,EAAME,YAAYC,SAAgD,IAArCH,EAAME,YAAYC,QAAQxW,OAAc,CAC1E,IAAIgM,EAAc,CACd,CAAC5E,EAAGiP,EAAME,YAAYC,QAAQ,GAAGC,QAASpP,EAAGgP,EAAME,YAAYC,QAAQ,GAAGE,SAC1E,CAACtP,EAAGiP,EAAME,YAAYC,QAAQ,GAAGC,QAASpP,EAAGgP,EAAME,YAAYC,QAAQ,GAAGE,UAE9E/F,EAAKf,MAAMmH,gBAAgBpG,EAAKf,MAAM/I,MAAOmF,SAP7C2E,EAAKf,MAAMkH,gBAAgBnG,EAAKf,MAAM/I,MAAOwP,EAAMO,OAAQP,EAAMQ,WAWzEG,cAAgB,SAACX,GACbA,EAAMY,kBACNZ,EAAMa,iBACDb,EAAME,YAAYC,SAAgD,IAArCH,EAAME,YAAYC,QAAQxW,OAGnDqW,EAAME,YAAYC,SAAgD,IAArCH,EAAME,YAAYC,QAAQxW,QAC5D2Q,EAAKf,MAAMuH,cAAcxG,EAAKf,MAAM/I,OAHpC8J,EAAKf,MAAMoH,cAAcrG,EAAKf,MAAM/I,UAO5CuQ,iBAAmB,SAACf,GAChB1F,EAAKf,MAAM/I,MAAM0L,OAAO8E,OACxBtJ,SAASuJ,KAAKhB,WAGlBiB,iBAAmB,SAAClB,GAGhB,IAAIN,EAAQM,EAAMmB,QAAUnB,EAAMoB,WACpB,IAAV1B,GACApF,EAAKf,MAAMkG,qBAAqBnF,EAAKf,MAAM/I,MAAOwP,EAAMqB,QAASrB,EAAMsB,QAAS5B,MAIxF6B,oBAAsB,SAACvB,GAEE,IAAjBA,EAAMmB,QACN7G,EAAKf,MAAMkG,qBAAqBnF,EAAKf,MAAM/I,MAAOwP,EAAMwB,OAAQxB,EAAMyB,QAASzB,EAAMmB,4FAKzF,IAAI3Q,EAAQ,IAAIyL,GAAMxR,KAAKmV,cAAc8B,SAKzClR,EAAMmR,GAAG,iBAAkBlX,KAAKgW,iBAChCjQ,EAAMmR,GAAG,iBAAkBlX,KAAKsV,iBAEhCvP,EAAMmR,GAAG,eAAgBlX,KAAKkW,eAC9BnQ,EAAMmR,GAAG,aAAclX,KAAKsW,kBAC5BvQ,EAAM0L,OAAO0F,iBAAiB,aAAcnX,KAAKyW,iBAAkB,CAACW,SAAS,IAC7ErR,EAAM0L,OAAO0F,iBAAiB,iBAAkBnX,KAAK8W,oBAAqB,CAACM,SAAS,IAEpFpX,KAAK8O,MAAMuI,cAActR,oCAIzB,OACIoJ,EAAAC,EAAAC,cAAA,UACIiI,SAAS,IACThH,IAAKtQ,KAAKmV,cACVtI,GAAG,aACH0C,UAAWgI,KAAO,cAClBnF,MAAM,MACNC,OAAO,eA3GOf,aAsIfkG,eApBS,SAAAxY,GACpB,MAAO,CACH+G,MAAO/G,EAAMkH,IAAIH,MACjBoF,MAAOnM,EAAMmM,QAIM,SAAAsM,GACvB,MAAO,CACHJ,cAAe,SAACtR,GAAD,OAAW0R,EDpIL,SAAC1R,GAC1B,MAAO,CACH1G,KjBDyB,oBiBEzB0G,MAAOA,GCiI4B2R,CAAsB3R,KACzDiQ,gBAAiB,SAACjQ,EAAOO,EAAGC,GAAX,OAAiBkR,ED9HX,SAAC1R,EAAOO,EAAGC,GACtC,MAAO,CACHlH,KjBc2B,sBiBb3B0G,MAAOA,EACPO,EAAGA,EACHC,EAAGA,GCyHwCmR,CAAwB3R,EAAOO,EAAGC,KAC7E2P,cAAe,SAACnQ,EAAOO,EAAGC,GAAX,OAAiBkR,EDtHX,SAAC1R,EAAOO,EAAGC,GACpC,MAAO,CACHlH,KjBMyB,oBiBLzB0G,MAAOA,EACPO,EAAGA,EACHC,EAAGA,GCiHsCmR,CAAsB3R,EAAOO,EAAGC,KACzE+O,gBAAiB,SAACvP,EAAOO,EAAGC,EAAGgO,EAAIC,GAAlB,OAAyBiD,ED9GnB,SAAC1R,EAAOO,EAAGC,EAAGgO,EAAIC,GAC7C,MAAO,CACHnV,KjBL4B,uBiBM5B0G,MAAOA,EACPO,EAAGA,EACHC,EAAGA,EACHgO,GAAIA,EACJC,GAAIA,GCuG+CkD,CAAwB3R,EAAOO,EAAGC,EAAGgO,EAAIC,KAC5FQ,qBAAsB,SAACjP,EAAOO,EAAGC,EAAG0O,GAAd,OAAwBwC,EAASC,GAA6B3R,EAAOO,EAAGC,EAAG0O,KACjGgB,gBAAiB,SAAClQ,EAAOmF,GAAR,OAAwBuM,ED3FlB,SAAC1R,EAAOmF,GACnC,MAAO,CACH7L,KjBjB2B,sBiBkB3B0G,MAAOA,EACPqF,GAAIF,EAAY,GAAG5E,EACnB+E,GAAIH,EAAY,GAAG3E,EACnB+E,GAAIJ,EAAY,GAAG5E,EACnBiF,GAAIL,EAAY,GAAG3E,GCoF+BmR,CAAwB3R,EAAOmF,KACjF2K,gBAAiB,SAAC9P,EAAOmF,GAAR,OAAwBuM,EDjFlB,SAAC1R,EAAOmF,GACnC,MAAO,CACH7L,KjB3B4B,uBiB4B5B0G,MAAOA,EACPqF,GAAIF,EAAY,GAAG5E,EACnB+E,GAAIH,EAAY,GAAG3E,EACnB+E,GAAIJ,EAAY,GAAG5E,EACnBiF,GAAIL,EAAY,GAAG3E,GC0E+BmR,CAAwB3R,EAAOmF,KACjFmL,cAAe,SAACtQ,GAAD,OAAW0R,EDvEL,SAAC1R,GAC1B,MAAO,CACH1G,KjBrCyB,oBiBsCzB0G,SCoEmC2R,CAAsB3R,OAIlDyR,CAA6CtC,yBC/H7CyC,GAZS,WACpB,OACIxI,EAAAC,EAAAC,cAAA,OAAKE,UAAWgI,KAAO,mBACnBpI,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,qBC4BDuI,gMAvBP,GAAI5X,KAAK8O,MAAM/I,MAAM0L,QAAUzR,KAAK8O,MAAM/I,MAAM0L,OAAOiD,WAAW,MAAO,CAErE,IAAIrO,EAASrG,KAAK8O,MAAM/I,MAAMM,OAC1Bb,EAAaxF,KAAK8O,MAAM/I,MAAMP,WAAWxF,KAAK8O,MAAM/I,MAAMK,WAC9DpG,KAAK8O,MAAM/I,MAAM8R,aAAaxR,EAAOC,EAAGD,EAAOE,EAAGf,GAAaA,GAE/DxF,KAAK8O,MAAM/I,MAAM+R,yDAKrB9X,KAAK8O,MAAMiJ,oDAIX,OACI5I,EAAAC,EAAAC,cAACF,EAAAC,EAAM4I,SAAP,KACKhY,KAAK8O,MAAMmJ,iBA7BC3G,aCAzBC,GAAWpF,OAAOoF,SACjB/R,GAA6CC,IAA7CD,MAAOE,GAAsCD,IAAtCC,QAASwY,GAA6BzY,IAA7ByY,OAAQvY,GAAqBF,IAArBE,IAAKC,GAAgBH,IAAhBG,QAASoI,GAAOvI,IAAPuI,IAGpC,SAASmQ,GAASzQ,GAA0B,IAAnBR,EAAmBjI,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,QAAXE,EACpC,OAAIuI,aAAiBlI,GAsBzB,SAAwBoE,EAAOsD,GAC3B,IAAIkR,EAAUlR,GAASA,EAAMkR,OAAUlR,EAAMkR,OAAS,EAClDtR,EAAOI,GAASA,EAAMJ,KAAOI,EAAMJ,KAAO,UAC1CqR,EAAW,IAAI5G,GAAS8G,SAG5B,OAFAF,EAASrR,KAAOqR,EAASG,UAAUxR,GAAMyR,QACzCJ,EAASK,OAASL,EAASM,WAAW7U,EAAM0C,EAAG1C,EAAM2C,EAAG6R,GAAQG,QACzDJ,EA3BIO,CAAehR,EAAOR,GAE7BQ,aAAiBhI,GA6BzB,SAA0BsD,EAASkE,GAC/B,IAAIiR,EAAW,IAAI5G,GAAS8G,SACxBzR,EAAcM,QAA+B/H,IAAtB+H,EAAMN,YAA4BM,EAAMN,YAAc,EAC7E+R,GAAczR,QAA+B/H,IAAtB+H,EAAMyR,aAA4BzR,EAAMyR,YAC/D9R,EAASK,GAASA,EAAML,OAASK,EAAML,OAAS,QACpD,OAAOsR,EACFS,eAAehS,EAAY,EAAE,EAAE,GAAG+R,GAClCE,YAAYhS,GACZiS,OAAO9V,EAAQtB,GAAG4E,EAAGtD,EAAQtB,GAAG6E,GAChCwS,OAAO/V,EAAQnB,GAAGyE,EAAGtD,EAAQnB,GAAG0E,GAChCyS,YAtCMC,CAAiBvR,EAAOR,GAE/BQ,aAAiB/H,GAwCzB,SAAsBuD,EAAKgE,GAGvB,IAAIiR,EAAW,IAAI5G,GAAS8G,SACxBzR,EAAcM,GAASA,EAAMN,YAAcM,EAAMN,YAAc,EAC/D+R,GAAczR,QAA+B/H,IAAtB+H,EAAMyR,aAA4BzR,EAAMyR,YAC/D9R,EAASK,GAASA,EAAML,OAASK,EAAML,OAAS,QACpD,OAAOsR,EACFS,eAAehS,EAAY,EAAE,EAAE,GAAG+R,GAClCE,YAAYhS,GACZ3D,IAAIA,EAAInB,GAAGuE,EAAGpD,EAAInB,GAAGwE,EAAGrD,EAAIV,EAAGU,EAAIjB,WAAYiB,EAAIf,UAAWe,EAAIlB,kBAClEgX,YAlDME,CAAaxR,EAAOR,GAE3BQ,aAAiBwQ,GAoDzB,SAAyBM,EAAQtR,GAC7B,IAAIiR,EAAW,IAAI5G,GAAS8G,SACxBzR,EAAcM,GAASA,EAAMN,YAAcM,EAAMN,YAAc,EAC/DC,EAASK,GAASA,EAAML,OAASK,EAAML,OAAS,QAEpD,OAAOsR,EACFS,eAAehS,EAAY,EAAE,EAAE,IAAG,GAClCiS,YAAYhS,GACZ4R,WAAWD,EAAOzW,GAAGuE,EAAGkS,EAAOzW,GAAGwE,EAAGiS,EAAOhW,GAC5CwW,YA5DMG,CAAgBzR,EAAOR,GAE9BQ,aAAiBM,GA8DzB,SAAsBZ,EAAKF,GACvB,IAAIiR,EAAW,IAAI5G,GAAS8G,SACxBzR,EAAcM,GAASA,EAAMN,YAAcM,EAAMN,YAAc,EAC/DC,EAASK,GAASA,EAAML,OAASK,EAAML,OAAS,QAEpD,OAAOsR,EACFS,eAAehS,EAAY,EAAE,EAAE,IAAG,GAClCiS,YAAYhS,GACZuS,SAAShS,EAAIc,KAAMd,EAAIgB,KAAMhB,EAAIe,KAAKf,EAAIc,KAAMd,EAAIiB,KAAKjB,EAAIgB,MArEvDiR,CAAa3R,EAAOR,GAE3BQ,aAAiB9H,GAmGzB,SAA0B6C,EAASyE,GAC/B,IAAIiR,EAAW,IAAI5G,GAAS8G,SACxBzR,EAAcM,GAASA,EAAMN,YAAcM,EAAMN,YAAc,EAC/DC,EAASK,GAASA,EAAML,OAASK,EAAML,OAAS,UAChDC,EAAOI,GAASA,EAAMJ,KAAOI,EAAMJ,KAAO,UAC9CqR,EAASS,eAAehS,EAAY,EAAE,EAAE,IAAG,GAC3CuR,EAAStR,OAASsR,EAASU,YAAYhS,GAAQ0R,QAC/CJ,EAASrR,KAAOqR,EAASG,UAAUxR,GAAMyR,QAPH,IAAAjV,GAAA,EAAAC,GAAA,EAAAC,OAAArE,EAAA,IAStC,QAAAsE,EAAAC,EAAiBjB,EAAQ6B,MAAzBzD,OAAAC,cAAAwC,GAAAG,EAAAC,EAAA3C,QAAAC,MAAAsC,GAAA,EAAgC,KAAvBgW,EAAuB7V,EAAAtD,MAC5BoZ,GAAgBpB,EAAUmB,IAVQ,MAAAjY,GAAAkC,GAAA,EAAAC,EAAAnC,EAAA,YAAAiC,GAAA,MAAAI,EAAApC,QAAAoC,EAAApC,SAAA,WAAAiC,EAAA,MAAAC,GActC,OADA2U,EAASa,YACFb,EAhHIqB,CAAiB9R,EAAOR,GAE5B,KA6EX,SAASuS,GAAgBtB,EAAUuB,GAC3BA,EAAKhS,iBAAiBhI,GAX9B,SAAgCyY,EAAUnV,GACtCmV,EAASY,OAAO/V,EAAQnB,GAAGyE,EAAGtD,EAAQnB,GAAG0E,GAWrCoT,CAAuBxB,EAAUuB,EAAKhS,OAEjCgS,EAAKhS,iBAAiB/H,IAVnC,SAA4BwY,EAAUjV,GAGlCiV,EAASjV,IAAIA,EAAInB,GAAGuE,EAAGpD,EAAInB,GAAGwE,EAAGrD,EAAIV,EAAGU,EAAIjB,WAAYiB,EAAIf,UAAWe,EAAIlB,kBAQvE4X,CAAmBzB,EAAUuB,EAAKhS,OAI1C,SAAS6R,GAAgBpB,EAAUmB,GAC/B,IAAI5X,EAAK4X,EAAKO,MAAMC,MACpB3B,EAASW,OAAOpX,EAAG4E,EAAG5E,EAAG6E,GAFY,IAAA/F,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IAIrC,QAAAwB,EAAAC,EAAiB0Y,EAAjBzY,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAuB,CACnBiZ,GAAgBtB,EADGxX,EAAAR,QAJc,MAAAkB,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,IChHzC,IAae0B,GAbD,CACV2X,SAAU,SAACC,EAAMC,GAEb,IADA,IAAIC,GAAQ,EADUC,EAEN7a,OAAOmO,KAAKwM,GAA5B9Q,EAAA,EAAAA,EAAAgR,EAAAjb,OAAAiK,IAAmC,CAA9B,IAAIjJ,EAAGia,EAAAhR,GACR,GAAI8Q,EAAK/Z,KAAS8Z,EAAK9Z,GAAM,CACzBga,GAAQ,EACR,OAGR,OAAOA,ICAX3I,GAAWpF,OAAOoF,SACT6I,GAAb,SAAAC,GACI,SAAAD,EAAYE,GAAQ,IAAAzK,EAAAvQ,OAAAS,EAAA,EAAAT,CAAAU,KAAAoa,IAChBvK,EAAAvQ,OAAAoS,EAAA,EAAApS,CAAAU,KAAAV,OAAAqS,EAAA,EAAArS,CAAA8a,GAAAxI,KAAA5R,QAgBJua,gBAAkB,SAAChF,GACf1F,EAAKf,MAAM0L,YAAY3K,EAAKf,MAAM3H,QAlBlB0I,EAqBpB4K,eAAiB,SAAClF,GACd1F,EAAKf,MAAM4L,cAtBK7K,EAyBpB8K,YAAc,SAACpF,GACX1F,EAAKf,MAAMQ,QAAQO,EAAKf,MAAM3H,MAAO0I,EAAKf,MAAMrH,QAvBhDoI,EAAKnI,MAAQ,IAAI6J,GAASqJ,MAC1BN,EAAOvU,MAAM4M,SAAS9C,EAAKnI,OAE3BmI,EAAKgL,aAAe,GANJ,IAAAra,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IAQhB,QAAAwB,EAAAC,EAAmB0Z,EAAOnT,MAAMF,KAAK6T,SAArCja,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA+C,KAAtCua,EAAsCpa,EAAAR,MACvC6a,EAAc,IAAIzJ,GAASqJ,MAC/BI,EAAY/T,KAAO8T,EACnBC,EAAYC,cAAe,EAC3BX,EAAOvU,MAAM4M,SAASqI,GACtBnL,EAAKgL,aAAa3Z,KAAK8Z,IAbX,MAAA3Z,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,GAAA,OAAAmP,EADxB,OAAAvQ,OAAA4b,EAAA,EAAA5b,CAAA8a,EAAAC,GAAA/a,OAAAW,EAAA,EAAAX,CAAA8a,EAAA,EAAAla,IAAA,iBAAAC,MAAA,SA8BmB0G,EAAQC,EAAMC,GACzB,IAAIhB,EAAQ/F,KAAK8O,MAAM/I,MADSzC,GAAA,EAAAC,GAAA,EAAAC,OAAArE,EAAA,IAGhC,QAAAsE,EAAAC,EAAwB1D,KAAK6a,aAA7Bha,OAAAC,cAAAwC,GAAAG,EAAAC,EAAA3C,QAAAC,MAAAsC,GAAA,EAA2C,KAAlC0X,EAAkCvX,EAAAtD,MACnC4a,EAASC,EAAY/T,KACrB+T,EAAY7C,SAASgD,UACrBH,EAAY7C,SAAWA,GAAS4C,EAC5B,CACIlU,OAAQA,EACRC,KAAMA,EACNsR,OAAQ,GAAMrS,EAAMP,WAAaO,EAAMK,eAI/C4U,EAAY7C,SAASK,OAAOJ,OAAS,GAAMrS,EAAMP,WAAaO,EAAMK,YACpE4U,EAAY7C,SAASrR,KAAKI,MAAQJ,GAEtCkU,EAAYjU,MAAQA,GAjBQ,MAAA1F,GAAAkC,GAAA,EAAAC,EAAAnC,EAAA,YAAAiC,GAAA,MAAAI,EAAApC,QAAAoC,EAAApC,SAAA,WAAAiC,EAAA,MAAAC,MA9BxC,CAAAtD,IAAA,SAAAC,MAAA,WAqDQ,IAAI4F,EAAQ/F,KAAK8O,MAAM/I,MACnBsB,EAASrH,KAAK8O,MAAMsM,SAAWpb,KAAK8O,MAAMuM,SAAY,QAAUrb,KAAK8O,MAAMzH,MAC3EN,EAAS/G,KAAK8O,MAAMsM,SAAWpb,KAAK8O,MAAMuM,SAAY,EAAM,GAC5DjW,EAAUpF,KAAK8O,MAAM1J,QAErBwB,EAAc5G,KAAK8O,MAAM3H,MAAMF,KAAKqU,SAAWtb,KAAK8O,MAAM3H,MAAMF,KAAKqU,cAAWnc,EAChF2H,EAAQ1B,IAAYpF,KAAK8O,MAAMzJ,gBAAmBrF,KAAK8O,MAAMzH,MAAQ,QAErErH,KAAK0H,MAAMyQ,SAASgD,UACpBnb,KAAK0H,MAAMyQ,SAAWA,GAASnY,KAAK8O,MAAM3H,MAAMF,KAAK,CACjDL,YAAaA,EACb+R,aAAa,EACb9R,OAAQQ,EACRP,KAAMA,EACNsR,OAAQ,GAAMrS,EAAMP,WAAaO,EAAMK,eAevCpG,KAAK0H,MAAMyQ,SAAStR,SAAQ7G,KAAK0H,MAAMyQ,SAAStR,OAAOK,MAAQG,GAC/DrH,KAAK0H,MAAMyQ,SAASrR,OAAM9G,KAAK0H,MAAMyQ,SAASrR,KAAKI,MAAQJ,GAC3D9G,KAAK0H,MAAMyQ,SAASK,SAAQxY,KAAK0H,MAAMyQ,SAASK,OAAOJ,OACvD,GAAMrS,EAAMP,WAAaO,EAAMK,cAEvCpG,KAAK0H,MAAMX,MAAQ/G,KAAK8O,MAAMxH,UAAYP,EAAQ,EAMlDA,EAAQ/G,KAAK8O,MAAMxH,WAAatH,KAAK8O,MAAMzJ,gBAAkB,EAAM,EACnErF,KAAKub,eAAelU,EAAOA,EAAON,KA9F1C,CAAA7G,IAAA,oBAAAC,MAAA,WAkGQH,KAAK0H,MAAMwP,GAAG,YAAalX,KAAKua,iBAChCva,KAAK0H,MAAMwP,GAAG,WAAYlX,KAAKya,gBAC/Bza,KAAK0H,MAAMwP,GAAG,QAASlX,KAAK2a,aAI5B3a,KAAKwb,WAxGb,CAAAtb,IAAA,wBAAAC,MAAA,SA2G0Bsb,EAAWC,GAC7B,OAAItZ,GAAM2X,SAAS/Z,KAAK8O,MAAO2M,KA5GvC,CAAAvb,IAAA,qBAAAC,MAAA,WAmHQH,KAAKwb,WAnHb,CAAAtb,IAAA,uBAAAC,MAAA,WAuHQH,KAAK0H,MAAMiU,IAAI,YAAa3b,KAAKua,iBACjCva,KAAK0H,MAAMiU,IAAI,WAAY3b,KAAKya,gBAChCza,KAAK0H,MAAMiU,IAAI,QAAS3b,KAAK2a,aAC7B3a,KAAK8O,MAAM/I,MAAM6V,YAAY5b,KAAK0H,OAClC1H,KAAK0H,MAAMyQ,SAAS0D,QALD,IAAA9X,GAAA,EAAAC,GAAA,EAAAC,OAAA9E,EAAA,IAMnB,QAAA+E,EAAAC,EAAwBnE,KAAK6a,aAA7Bha,OAAAC,cAAAiD,GAAAG,EAAAC,EAAApD,QAAAC,MAAA+C,GAAA,EAA2C,KAAlCiX,EAAkC9W,EAAA/D,MACvCH,KAAK8O,MAAM/I,MAAM6V,YAAYZ,IAPd,MAAA3Z,GAAA2C,GAAA,EAAAC,EAAA5C,EAAA,YAAA0C,GAAA,MAAAI,EAAA7C,QAAA6C,EAAA7C,SAAA,WAAA0C,EAAA,MAAAC,GASnBjE,KAAK6a,aAAe,KA/H5B,CAAA3a,IAAA,SAAAC,MAAA,WAmIQ,OAAO,SAnIfia,EAAA,CAAoC9I,aCDhCC,GAAWpF,OAAOoF,SAETuK,GAAb,SAAAzB,GAAA,SAAAyB,IAAA,IAAAC,EAAAlM,EAAAvQ,OAAAS,EAAA,EAAAT,CAAAU,KAAA8b,GAAA,QAAAE,EAAA/c,UAAAC,OAAA+c,EAAA,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAF,EAAAE,GAAAld,UAAAkd,GAAA,OAAAtM,EAAAvQ,OAAAoS,EAAA,EAAApS,CAAAU,MAAA+b,EAAAzc,OAAAqS,EAAA,EAAArS,CAAAwc,IAAAlK,KAAAwK,MAAAL,EAAA,CAAA/b,MAAAsK,OAAA2R,MACI1B,gBAAkB,SAAChF,GACf1F,EAAKf,MAAM0L,YAAY3K,EAAKf,MAAM3H,QAF1C0I,EAKI4K,eAAiB,SAAClF,GACd1F,EAAKf,MAAM4L,cANnB7K,EASI8K,YAAc,SAACpF,GACX1F,EAAKf,MAAMQ,QAAQO,EAAKf,MAAM3H,MAAO0I,EAAKf,MAAMrH,QAVxDoI,EAAA,OAAAvQ,OAAA4b,EAAA,EAAA5b,CAAAwc,EAAAzB,GAAA/a,OAAAW,EAAA,EAAAX,CAAAwc,EAAA,EAAA5b,IAAA,SAAAC,MAAA,WAgBQH,KAAKqc,OAAOtV,MAAQ/G,KAAK8O,MAAMxH,UADnB,EACuC,EAEnD,IAAI8K,EAAQpS,KAAK8O,MAAM3H,MAAMF,KAAKmL,MAC9BmB,EAAQvT,KAAKqc,OAAOC,MAAMC,aAAavc,KAAKqc,OAAOC,MAAME,cACzDC,EAASrK,EAAMpS,KAAKqc,OAAOC,MAAMC,aACjCG,EAAStK,GAAOpS,KAAKqc,OAAOC,MAAME,cAAcjJ,GAChDoJ,EAAK3c,KAAK8O,MAAM3H,MAAMF,KAAK2V,OAAOtW,EAClCuW,EAAK7c,KAAK8O,MAAM3H,MAAMF,KAAK2V,OAAOrW,EAEtCvG,KAAKqc,OAAOxE,aAAa8E,EAAIE,EAAIJ,GAASC,GAE1C1c,KAAKqc,OAAOS,KAAO9c,KAAKqc,OAAOC,MAAMC,aAAa,EAClDvc,KAAKqc,OAAOU,KAAO/c,KAAKqc,OAAOC,MAAME,cAAc,IA5B3D,CAAAtc,IAAA,oBAAAC,MAAA,WAkCwB,IAAA6c,EAAAhd,KACVid,EAAM,IAAIC,MAChBD,EAAIE,OAAS,WACTH,EAAKX,OAAS,IAAI9K,GAAS6L,OAAOH,GAClCD,EAAKlO,MAAM/I,MAAM4M,SAASqK,EAAKX,QAO/BW,EAAKxB,UAETyB,EAAII,IAAMrd,KAAK8O,MAAM3H,MAAMF,KAAKqW,MA/CxC,CAAApd,IAAA,wBAAAC,MAAA,SAmD0Bsb,EAAWC,GAC7B,OAAItZ,GAAM2X,SAAS/Z,KAAK8O,MAAO2M,KApDvC,CAAAvb,IAAA,qBAAAC,MAAA,WA2DQH,KAAKwb,WA3Db,CAAAtb,IAAA,uBAAAC,MAAA,WAmEQH,KAAK8O,MAAM/I,MAAM6V,YAAY5b,KAAKqc,UAnE1C,CAAAnc,IAAA,SAAAC,MAAA,WAuEQ,OAAO,SAvEf2b,EAAA,CAAoCxK,aCPvBiM,GAAb,SAAAlD,GAAA,SAAAkD,IAAA,OAAAje,OAAAS,EAAA,EAAAT,CAAAU,KAAAud,GAAAje,OAAAoS,EAAA,EAAApS,CAAAU,KAAAV,OAAAqS,EAAA,EAAArS,CAAAie,GAAAnB,MAAApc,KAAAf,YAAA,OAAAK,OAAA4b,EAAA,EAAA5b,CAAAie,EAAAlD,GAAA/a,OAAAW,EAAA,EAAAX,CAAAie,EAAA,EAAArd,IAAA,SAAAC,MAAA,WACa,IAAA0P,EAAA7P,KACL,OACIA,KAAK8O,MAAMrH,MAAM3D,OAAOkG,IAAI,SAACtC,EAAO0B,GAChC,OAAO1B,EAAMT,KAAKqW,IACdnO,EAAAC,EAAAC,cAACmO,GAAD,CACItd,IAAKkJ,EACLrD,MAAO8J,EAAKf,MAAM/I,MAClB0B,MAAOoI,EAAKf,MAAMrH,MAClBN,MAAOO,EACPJ,UAAWuI,EAAKf,MAAMrH,MAAMH,UAC5B8T,QAAS1T,IAAUmI,EAAKf,MAAMnD,aAC9B0P,SACI3T,IAAUmI,EAAKf,MAAMlD,oBACrBlE,IAAUmI,EAAKf,MAAMjD,oBAEzBxE,MAAOwI,EAAKf,MAAMrH,MAAMJ,MACxBjC,QAASyK,EAAKf,MAAM1J,QACpBE,cAAeuK,EAAKf,MAAMxJ,cAC1BE,WAAYqK,EAAKf,MAAMtJ,WACvBgV,YAAa3K,EAAKf,MAAM0L,YACxBE,WAAY7K,EAAKf,MAAM4L,WACvBpL,QAASO,EAAKf,MAAMQ,UAGxBH,EAAAC,EAAAC,cAACoO,GAAD,CACIvd,IAAKkJ,EACLrD,MAAO8J,EAAKf,MAAM/I,MAClB0B,MAAOoI,EAAKf,MAAMrH,MAClBN,MAAOO,EACPJ,UAAWuI,EAAKf,MAAMrH,MAAMH,UAC5B8T,QAAS1T,IAAUmI,EAAKf,MAAMnD,aAC9B0P,SACI3T,IAAUmI,EAAKf,MAAMlD,oBACrBlE,IAAUmI,EAAKf,MAAMjD,oBAEzBxE,MAAOwI,EAAKf,MAAMrH,MAAMJ,MACxBjC,QAASyK,EAAKf,MAAM1J,QACpBC,gBAAiBwK,EAAKf,MAAMzJ,gBAC5BG,WAAYqK,EAAKf,MAAMtJ,WACvBgV,YAAa3K,EAAKf,MAAM0L,YACxBE,WAAY7K,EAAKf,MAAM4L,WACvBpL,QAASO,EAAKf,MAAMQ,gBA1C5CiO,EAAA,CAAoCjM,kCCarBoM,GAdQ,SAAAC,GAAsB,IAAnB5X,EAAmB4X,EAAnB5X,MAAO2B,EAAYiW,EAAZjW,MACzBkV,EAASlV,EAAMT,KAAK2V,QAAUlV,EAAMT,KACpC2W,EAAO7X,EAAM0L,OAAOoM,WAAa9X,EAAMmN,MAAM0J,EAAOtW,GAAK,EACzDwX,EAAM/X,EAAM0L,OAAOsM,UAAYhY,EAAMoN,MAAMyJ,EAAOrW,GAAK,EAI3D,OAHaqX,EAAO7X,EAAM0L,OAAOoM,YAAcD,EAAO7X,EAAM0L,OAAOoM,WAAa9X,EAAM0L,OAAOW,OACzF0L,EAAM/X,EAAM0L,OAAOsM,WAAaD,EAAM/X,EAAM0L,OAAOY,OAGnDlD,EAAAC,EAAAC,cAAA,OAAKnI,MAAO,CAAC8W,SAAS,WAAYJ,KAAKA,EAAK,KAAME,IAAKA,EAAI,MAAOvO,UAAWP,KAAQxS,gBACjF2S,EAAAC,EAAAC,cAAA,UAAK3H,EAAM7D,QAEf,MCGOoa,GAdc,SAAAN,GAAmC,IAAjC5X,EAAiC4X,EAAjC5X,MAAO0B,EAA0BkW,EAA1BlW,MAAOnC,EAAmBqY,EAAnBrY,cACzC,OAAQmC,EAAMH,WAAahC,EACvBmC,EAAM3D,OAAOkG,IAAI,SAACtC,EAAO0B,GACjB,OAAQ1B,EAAM7D,OAAgC,KAAvB6D,EAAM7D,MAAMqa,OAC/B/O,EAAAC,EAAAC,cAAC8O,GAAD,CACIje,IAAKkJ,EACLrD,MAAOA,EACP2B,MAAOA,IACL,OAGlB,MC+BO0W,+LAtCP,GAAIpe,KAAK8O,MAAMtG,OAAOtJ,OAAS,GAAKc,KAAK8O,MAAM/I,MAAO,CAClD,IAAIoE,EAAgB5B,EAAOS,YAAYhJ,KAAK8O,MAAMtG,QAC9C2B,GACAnK,KAAK8O,MAAMuP,YAAYre,KAAK8O,MAAM/I,MAAOoE,qCAI5C,IAAA0F,EAAA7P,KACL,OAAOA,KAAK8O,MAAMtG,OAAOwB,IAAI,SAACvC,GAAD,OACzB0H,EAAAC,EAAAC,cAACF,EAAAC,EAAM4I,SAAP,CAAgB9X,IAAKuH,EAAM/C,MACvByK,EAAAC,EAAAC,cAACiP,GAAD,CACIvY,MAAO8J,EAAKf,MAAM/I,MAClB0B,MAAOA,EACPJ,MAAOI,EAAMJ,MACbC,UAAWG,EAAMH,UACjBjC,gBAAiBwK,EAAKf,MAAMzJ,gBAC5BC,cAAeuK,EAAKf,MAAMxJ,cAC1BF,QAASyK,EAAKf,MAAM1J,QACpBuG,aAAckE,EAAKf,MAAMnD,aACzBC,mBAAoBiE,EAAKf,MAAMlD,mBAC/BC,oBAAqBgE,EAAKf,MAAMjD,oBAChCrG,WAAYqK,EAAKf,MAAMtJ,WACvBgV,YAAa3K,EAAKf,MAAM0L,YACxBE,WAAY7K,EAAKf,MAAM4L,WACvBpL,QAASO,EAAKf,MAAMQ,UAExBH,EAAAC,EAAAC,cAACkP,GAAD,CACIxY,MAAO8J,EAAKf,MAAM/I,MAClB0B,MAAOA,EACPH,UAAWG,EAAMH,UACjBhC,cAAeuK,EAAKf,MAAMxJ,0BAhChBgM,aCwEjB+M,GAAc,SAACtY,EAAO2B,GAC/B,MAAO,CACHrI,K7BxC6B,wB6ByC7B0G,QACA2B,UCrDK8W,GAAqB,SAAC/W,GAC/B,MAAO,CACHpI,K9BkBoC,+B8BjBpCoI,UCtBFgX,8MACFC,cAAgBtJ,IAAMC,cACtBsJ,aAAe,OAEf3f,MAAQ,CACJgM,YAAQ7L,EACR8L,YAAQ9L,EACRyf,UAAMzf,EACN0f,UAAM1f,EACN2f,gBAAgB,KAGpB9I,gBAAkB,SAACT,GACfA,EAAMa,iBAENvG,EAAK8O,aAAa9C,QAEdhM,EAAK7Q,MAAM8f,gBACXjP,EAAKkP,SAAS,CACV/T,YAAQ7L,EACR8L,YAAQ9L,EACRyf,UAAMzf,EACN0f,UAAM1f,EACN2f,gBAAgB,IAEpBjP,EAAK8O,aAAalN,OAAOvK,MAAM8X,OAAS,SAGxCnP,EAAKkP,SAAS,CACV/T,OAAQ6E,EAAK8O,aAAa7K,MAAMyB,EAAMO,QACtC7K,OAAQ4E,EAAK8O,aAAa5K,MAAMwB,EAAMQ,QACtC+I,gBAAgB,IAEpBjP,EAAK8O,aAAalN,OAAOvK,MAAM8X,OAAS,gBAIhD1J,gBAAkB,SAACC,GACX1F,EAAK7Q,MAAM8f,gBACXjP,EAAKkP,SAAS,CACVH,KAAM/O,EAAK8O,aAAa7K,MAAMyB,EAAMO,QACpC+I,KAAMhP,EAAK8O,aAAa5K,MAAMwB,EAAMQ,aAKhDG,cAAgB,SAACX,OAGjBkB,iBAAmB,SAAClB,GAChBA,EAAMa,iBAEN,IAAInB,EAAQM,EAAMmB,QAAUnB,EAAMoB,WACpB,IAAV1B,IAEApF,EAAKf,MAAMkG,qBAAqBnF,EAAKf,MAAM/I,MAAOwP,EAAMqB,QAASrB,EAAMsB,QAAS5B,GAEhFpF,EAAKoP,WAIbnI,oBAAsB,SAACvB,GACnBA,EAAMa,iBAEe,IAAjBb,EAAMmB,SAEN7G,EAAKf,MAAMkG,qBAAqBnF,EAAKf,MAAM/I,MAAOwP,EAAMwB,OAAQxB,EAAMyB,QAASzB,EAAMmB,QAErF7G,EAAKoP,+EAMT,IAAIlZ,EAAQ/F,KAAK2e,aAEbO,EADSnZ,EAAM0L,OACEiD,WAAW,MAEhC1U,KAAK2e,aAAatY,OAASrG,KAAK8O,MAAM/I,MAAMM,OAC5CrG,KAAK2e,aAAavY,WAAapG,KAAK8O,MAAM/I,MAAMK,WAChDpG,KAAK2e,aAAanZ,WAAaxF,KAAK8O,MAAM/I,MAAMP,WAEhDxF,KAAK2e,aAAa9C,QAGlB,IAiBIsD,EAAOC,EAAmBC,EAC1BC,EAAOC,EAlBPC,EAAOld,KAAKmR,IAAI1N,EAAMmN,MAAMlT,KAAKhB,MAAMgM,QAASjF,EAAMmN,MAAMlT,KAAKhB,MAAM4f,OACvEa,EAAOnd,KAAKmR,IAAI1N,EAAMoN,MAAMnT,KAAKhB,MAAMiM,QAASlF,EAAMoN,MAAMnT,KAAKhB,MAAM6f,OACvEzM,EAAQ9P,KAAKod,IAAI3Z,EAAM4Z,WAAW3f,KAAKhB,MAAMgM,OAAShL,KAAKhB,MAAM4f,OACjEvM,EAAS/P,KAAKod,IAAI3Z,EAAM4Z,WAAW3f,KAAKhB,MAAMiM,OAASjL,KAAKhB,MAAM6f,OAEtEK,EAAQU,YACRV,EAAQW,KAAKL,EAAMC,EAAMrN,EAAOC,GAGhC6M,EAAQpG,OAAO/S,EAAMmN,MAAMlT,KAAKhB,MAAMgM,QAASjF,EAAMoN,MAAMnT,KAAKhB,MAAMiM,SACtEiU,EAAQnG,OAAOhT,EAAMmN,MAAMlT,KAAKhB,MAAM4f,MAAO7Y,EAAMoN,MAAMnT,KAAKhB,MAAM6f,OAEpEK,EAAQY,UAAY,EACpBZ,EAAQtY,YAAc,QACtBsY,EAAQrY,SAKR,IAAIkZ,EAAO/f,KAAKggB,cAEhBd,EAAQe,KAAO,aAIfZ,EAAYH,EAAQgB,YAAYH,GAAM3N,MAGlC9P,KAAKod,IAAI3Z,EAAMmN,MAAMlT,KAAKhB,MAAM4f,MAAQY,IAAS,GACjDN,EAAQiB,UAAY,OACpBhB,EAAQK,EAAO,EACfF,EAAQE,IAIRN,EAAQiB,UAAY,QAEpBb,GADAH,EAAQK,EAAOpN,EAAQ,GACPiN,EAAY,GAShCE,GALIH,EADA9c,KAAKod,IAAI3Z,EAAMoN,MAAMnT,KAAKhB,MAAM6f,MAAQY,IAAS,EACzCA,EAAO,EAGPA,EAAOpN,EArBN,GAqB4B,GArB5B,GAuBgB,EAE7B6M,EAAQkB,UAAY,QACpBlB,EAAQmB,YAAc,GACtBnB,EAAQoB,SAAShB,EAAOC,EAAOF,EAAY,EAAGkB,IAE9CrB,EAAQkB,UAAY,QACpBlB,EAAQmB,YAAc,EACtBnB,EAAQsB,SAASxgB,KAAKggB,cAAeb,EAAOC,yCAI5C,IAAI7K,EAAKvU,KAAKhB,MAAM4f,KAAO5e,KAAKhB,MAAMgM,OAClCwJ,EAAKxU,KAAKhB,MAAM6f,KAAO7e,KAAKhB,MAAMiM,OAClCwV,EAAOne,KAAKoe,KAAKnM,EAAKA,EAAKC,EAAKA,GAEpC,MADc,MAAQxU,KAAK2gB,OAAOpM,GAAM,OAASvU,KAAK2gB,OAAOnM,GAAM,MAAQxU,KAAK2gB,OAAOF,kCAIpFG,GACH,OAAQA,EAAM5gB,KAAK8O,MAAMlK,SAASic,QAAQ7gB,KAAK8O,MAAMnK,sDAKrD3E,KAAK2e,aAAe,IAAInN,GAAMxR,KAAK0e,cAAczH,SACjDjX,KAAK2e,aAAatY,OAASrG,KAAK8O,MAAM/I,MAAMM,OAC5CrG,KAAK2e,aAAavY,WAAapG,KAAK8O,MAAM/I,MAAMK,WAChDpG,KAAK2e,aAAanZ,WAAaxF,KAAK8O,MAAM/I,MAAMP,WAEhDxF,KAAK2e,aAAazH,GAAG,iBAAkBlX,KAAKgW,iBAC5ChW,KAAK2e,aAAazH,GAAG,iBAAkBlX,KAAKsV,iBAC5CtV,KAAK2e,aAAazH,GAAG,eAAgBlX,KAAKkW,eAE1ClW,KAAK2e,aAAalN,OAAO0F,iBAAiB,aAAcnX,KAAKyW,kBAC7DzW,KAAK2e,aAAalN,OAAO0F,iBAAiB,iBAAkBnX,KAAK8W,kEAI7D9W,KAAKhB,MAAM8f,gBACX9e,KAAKif,sDAKTjf,KAAK2e,aAAa9C,QAClB7b,KAAK2e,aAAamC,oBAClB9gB,KAAK2e,aAAaoC,2DAIlB,IAAIC,EAAahhB,KAAK8O,MAAM/I,MAAM0L,OAC9BW,EAAQ4O,EAAW5O,MACnBC,EAAS2O,EAAW3O,OACpByL,EAAMkD,EAAWjD,UACjBH,EAAOoD,EAAWnD,WACtB,OACI1O,EAAAC,EAAAC,cAAA,UAAQiI,SAAS,IAAIhH,IAAKtQ,KAAK0e,cACvBtM,MAAOA,EACPC,OAAQA,EACRnL,MAAO,CAAC8W,SAAU,WAAYF,IAAKA,EAAKF,KAAMA,YA/LlCtM,aAoNjBkG,eAdS,SAAAmG,GAAW,IAATzX,EAASyX,EAATzX,IACtB,MAAO,CACHH,MAAOG,EAAIH,MACXnB,QAASsB,EAAItB,QACbD,SAAUuB,EAAIvB,WAIK,SAAA8S,GACvB,MAAO,CACHzC,qBAAsB,SAACjP,EAAOO,EAAGC,EAAG0O,GAAd,OAAwBwC,EAASC,GAA6B3R,EAAOO,EAAGC,EAAG0O,OAI1FuC,CAA6CiH,ICpNxDlN,GAAWpF,OAAOoF,SAgHP0P,eA9GX,SAAAA,EAAY3G,GAAQ,IAAAzK,EAAA,OAAAvQ,OAAAS,EAAA,EAAAT,CAAAU,KAAAihB,IAChBpR,EAAAvQ,OAAAoS,EAAA,EAAApS,CAAAU,KAAAV,OAAAqS,EAAA,EAAArS,CAAA2hB,GAAArP,KAAA5R,QACKgD,QAAU,IAAIuO,GAASqJ,MAC5BN,EAAOvU,MAAM4M,SAAS9C,EAAK7M,SAE3B6M,EAAKqR,WAAa,IAAI3P,GAAS4P,KAC/BtR,EAAKqR,WAAW5a,EAAI,EACpBuJ,EAAKqR,WAAW3a,EAAI,EACpB+T,EAAOvU,MAAM4M,SAAS9C,EAAKqR,YARXrR,sEA0Cb+Q,GACH,OAAQA,EAAI5gB,KAAK8O,MAAMlK,SAASic,QAAQ7gB,KAAK8O,MAAMnK,gDAInD,GAAK3E,KAAKkhB,WAAV,CAEA,IAAInb,EAAQ/F,KAAK8O,MAAM/I,MAEnBqB,EAAMpH,KAAK8O,MAAM7C,gBAAgB7E,IACjCxD,GAAawD,EAAIc,KAAOd,EAAIe,MAAQ,EAApCvE,GAA2CwD,EAAIgB,KAAOhB,EAAIiB,MAAQ,EAClEkM,EAAK,GAAMxO,EAAMP,WAAaO,EAAMK,YACpCoO,EAAK,GAAMzO,EAAMP,WAAaO,EAAMK,YAEpCgB,EAAIgB,OAAShB,EAAIiB,OACjBkM,EAAK,EACLC,GAAMA,GAOVxU,KAAKkhB,WAAWnB,KAAO/f,KAAK2gB,OAAO3gB,KAAK8O,MAAM7C,gBAAgB/M,QAG9Dc,KAAKkhB,WAAWjB,KAAhB,GAAA3V,OADe,GACf,YAEA,IAAI8W,EAAU,GAAMrb,EAAMP,WAAaO,EAAMK,YAGzCuW,EAAK/Y,EAAU2Q,EACfsI,EAAKjZ,EAAU4Q,EACnBxU,KAAKkhB,WAAWrJ,aAAa8E,EAAIE,EAAIuE,GAAUA,mCAI3CphB,KAAK8O,MAAM7C,kBACXjM,KAAKgD,QAAQmV,SAAWA,GAASnY,KAAK8O,MAAM7C,iBAC5CjM,KAAKqhB,2DAITrhB,KAAKif,oDAGLjf,KAAKgD,QAAQmV,SAAS0D,QAClB7b,KAAK8O,MAAMlD,oBAAsB5L,KAAK8O,MAAMjD,qBAC5C7L,KAAK8O,MAAMhD,mBAAmBxE,WAC9BtH,KAAK8O,MAAM/C,oBAAoBzE,YAE/BtH,KAAKif,OACLjf,KAAKqhB,8DAKTrhB,KAAK8O,MAAM/I,MAAM6V,YAAY5b,KAAKgD,SAClChD,KAAKgD,QAAQmV,SAAS0D,QACtB7b,KAAK8O,MAAM/I,MAAM6V,YAAY5b,KAAKkhB,YAClClhB,KAAKkhB,WAAWnB,KAAO,oCAIvB,OAAO,YA3GiBzO,aCajBgQ,GAnBW,SAAA3D,GAAgD,IAA9C5X,EAA8C4X,EAA9C5X,MAAOwb,EAAuC5D,EAAvC4D,OAAQC,EAA+B7D,EAA/B6D,OAAQ5c,EAAuB+Y,EAAvB/Y,QAASD,EAAcgZ,EAAdhZ,SAClDgc,EAAS,SAACC,GACZ,OAAQA,EAAIhc,GAASic,QAAQlc,IAG7Bqc,EAAajb,EAAM0L,OACnBqM,EAAMkD,EAAWjD,UAAY,GAC7BH,EAAOoD,EAAWnD,WAAa,GAC/BvX,EAAIP,EAAM+N,MAAMyN,GAChBhb,EAAIR,EAAMgO,MAAMyN,GACpB,OACIrS,EAAAC,EAAAC,cAAA,OAAKnI,MAAO,CAAC8W,SAAU,WAAYF,IAAKA,EAAKF,KAAMA,IAC/CzO,EAAAC,EAAAC,cAAA,MAAInI,MAAO,CAACua,OAAQ,EAAGC,QAAS,IAAhC,MACQf,EAAOra,GADf,OACuBqa,EAAOpa,8CCdpCob,GAAY1U,SAAS2U,eAAe,cAkC3BC,eA9BX,SAAAA,EAAY/S,GAAO,IAAAe,EAAA,OAAAvQ,OAAAS,EAAA,EAAAT,CAAAU,KAAA6hB,IACfhS,EAAAvQ,OAAAoS,EAAA,EAAApS,CAAAU,KAAAV,OAAAqS,EAAA,EAAArS,CAAAuiB,GAAAjQ,KAAA5R,KAAM8O,KAIDgT,GAAK7U,SAASoC,cAAc,OALlBQ,mFAWf8R,GAAUI,YAAY/hB,KAAK8hB,mDAK3BH,GAAU/F,YAAY5b,KAAK8hB,qCAK3B,OAAOE,KAASC,aAEZjiB,KAAK8O,MAAMmJ,SAEXjY,KAAK8hB,WA1BGxQ,kCCwEL3U,8MApEXulB,kBAAoB,SAACC,GACI,aAAjBA,EAAGC,OAAOvV,IACVgD,EAAKf,MAAMuT,gBAInBC,cAAgB,SAACH,GACG,WAAZA,EAAGI,MACH1S,EAAKf,MAAMuT,gBAInBG,YAAc,SAACL,GACXA,EAAKA,GAAMhW,OAAOoJ,MAElB1F,EAAK+G,QAAU/G,EAAK4S,MAAQN,EAAGxM,QAC/B9F,EAAKgH,QAAUhH,EAAK6S,MAAQP,EAAGvM,QAC/B/F,EAAK4S,MAAQN,EAAGxM,QAChB9F,EAAK6S,MAAQP,EAAGvM,QAEhB,IAAI+M,EAAUR,EAAGC,OACjBO,EAAQzb,MAAM4W,IAAO6E,EAAQ5E,UAAYlO,EAAKgH,QAAW,KACzD8L,EAAQzb,MAAM0W,KAAQ+E,EAAQ9E,WAAahO,EAAK+G,QAAW,QAG/DgM,iBAAmB,SAACT,GAEhBA,EAAGC,OAAOS,UAAY,KACtBV,EAAGC,OAAOU,YAAc,QAG5BC,cAAgB,SAACZ,GACbA,EAAKA,GAAMhW,OAAOoJ,MAElB1F,EAAK4S,MAAQN,EAAGxM,QAChB9F,EAAK6S,MAAQP,EAAGvM,QAChBuM,EAAGC,OAAOS,UAAYhT,EAAK+S,iBAE3BT,EAAGC,OAAOU,YAAcjT,EAAK2S,gGAI7BvV,SAASkK,iBAAiB,UAAWnX,KAAKsiB,8DAI1CrV,SAAS+V,oBAAoB,UAAWhjB,KAAKsiB,gDAI7C,OAAOtiB,KAAK8O,MAAMmU,UACd9T,EAAAC,EAAAC,cAAC6T,GAAD,KACI/T,EAAAC,EAAAC,cAAA,OACIxC,GAAG,WACH0C,UAAWP,KAAQtS,SACnB4S,QAAStP,KAAKkiB,mBAEd/S,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQrS,WACnBwmB,YAAanjB,KAAK+iB,eAElB/iB,KAAK8O,MAAMmJ,YAIxB,YAtEa3G,aCmCV7U,GA/BI,SAACqS,GAChB,OACIK,EAAAC,EAAAC,cAAC+T,GAAD,CACIH,UAAWnU,EAAMnJ,eACjB0c,WAAYvT,EAAMuU,kBAElBlU,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQvS,YACpB0S,EAAAC,EAAAC,cAAA,UAAKP,EAAMhK,MAAX,KAAoBgK,EAAM/J,SAE1BoK,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,WAEAF,EAAAC,EAAAC,cAAA,oCACAF,EAAAC,EAAAC,cAAA,KAAGiU,KAAK,8CAAR,8CAGAnU,EAAAC,EAAAC,cAAA,WAEAF,EAAAC,EAAAC,cAAA,4CACAF,EAAAC,EAAAC,cAAA,KAAGiU,KAAK,gDAAR,gDAGAnU,EAAAC,EAAAC,cAAA,cC1BT,SAASkU,GAAUzf,GACtB,IACImD,EACAE,EAFAqc,EAAS,GADiBhjB,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IAI9B,QAAAwB,EAAAC,EAAkBkH,KAAK2b,MAAM3f,GAA7BjD,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAsC,KAA7BkH,EAA6B/G,EAAAR,MAClC,GAAIuH,EAAMT,gBAAgBiV,MAAO,CAC7BjV,EAAO,IAAIxH,IAAQG,QADU,IAAA0D,GAAA,EAAAC,GAAA,EAAAC,OAAArE,EAAA,IAE7B,QAAAsE,EAAAC,EAAsBgE,EAAMT,KAA5BpG,OAAAC,cAAAwC,GAAAG,EAAAC,EAAA3C,QAAAC,MAAAsC,GAAA,EAAkC,KAAzBogB,EAAyBjgB,EAAAtD,MAC9B8G,EAAK7D,QAAQsgB,IAHY,MAAAriB,GAAAkC,GAAA,EAAAC,EAAAnC,EAAA,YAAAiC,GAAA,MAAAI,EAAApC,QAAAoC,EAAApC,SAAA,WAAAiC,EAAA,MAAAC,SAO7ByD,EAAOxH,IAAQiI,EAAMT,KAAKvC,MAAMgD,EAAMT,MAE1CE,EAAQ,IAAIH,EAAMC,EAAMS,EAAMR,MAAOQ,EAAM7D,OAC3C2f,EAAOtiB,KAAKiG,IAfc,MAAA9F,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,GAkB9B,OAAO8iB,MCfLG,8MACF3kB,MAAM,CACFgC,MAAK,uFAGY,I1BkBiB6L,E0BlBjBmQ,EAAAhd,KACjB,GAAIA,KAAK8O,MAAM/I,QAAU/F,KAAKhB,MAAMgC,KAAM,CACtC,IAAI+E,EAAQ/F,KAAK8O,MAAM/I,O1BgBO8G,E0BdS7M,KAAK8O,MAAMxO,MAAMga,OAAOzN,G1BehEkB,EAAMa,IAAI,cAAgB/B,EAAK,U0BdzB+W,KAAM,SAACC,GACJ,IAAIC,OAAa3kB,EACjB,GAAI0kB,EAASE,KAAM,KAAAvjB,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IACf,QAAAwB,EAAAC,EAAsBijB,EAASE,KAAKvb,OAApC3H,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA4C,KAAnCwjB,EAAmCrjB,EAAAR,MACpCsH,EAAQ,IAAIzK,EAChByK,EAAM3D,OAASyf,GAAUS,EAAUlgB,QACnC2D,EAAM/C,KAAOsf,EAAUtf,KAElBof,IAAYA,EAAarc,GAC9BuV,EAAKlO,MAAMmV,YAAYxc,GACvBuV,EAAKlO,MAAMoV,uBARA,MAAA7iB,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,GAUfsc,EAAKlO,MAAMqV,eAAenH,EAAKlO,MAAMxO,MAAMga,OAAOzN,GAAIgX,EAASE,KAAKrf,KAAM,WAAYmf,EAASE,KAAKhX,aACpGiQ,EAAKlO,MAAMsV,kBAAkBre,EAAO+d,GACpC9G,EAAKlO,MAAMuV,YAAYP,MAG9BQ,MAAO,SAACjjB,GACLkjB,QAAQC,IAAInjB,GACZ2b,EAAKlO,MAAMoV,wBAEnBlkB,KAAK+e,SAAS,CAAC/d,MAAK,IAEpBhB,KAAK8O,MAAM2V,WACXzkB,KAAK8O,MAAM4V,0DAIf,OAAO,YAtCapT,aAgEbkG,eAtBS,SAAAxY,GACpB,MAAO,CACHwJ,OAAQxJ,EAAMwJ,OACdzC,MAAO/G,EAAMkH,IAAIH,MACjBkH,SAAUjO,EAAMmO,aAAaF,WAIV,SAAAwK,GACvB,MAAO,CACH2M,kBAAmB,SAACre,EAAO0B,GAAR,OAAkBgQ,EAASC,GAAoB3R,EAAO0B,KACzEid,sBAAuB,kBAAMjN,EToD1B,CACHpY,K7BtC+B,6BsCd/B6kB,oBAAqB,kBAAMzM,ETyDxB,CACHpY,K7B3C6B,2BsCb7B4kB,YAAa,SAACxc,GAAD,OAAWgQ,ERvDL,SAAChQ,GACxB,MAAO,CACHpI,K9BgCqB,gB8B/BrBoI,SQoDiCkd,CAAyBld,KAC1D4c,YAAa,SAAC5c,GAAD,OAAWgQ,EAASkN,GAAgCld,KAEjEgd,SAAU,kBAAMhN,ERQb,CACHpY,K9BWgC,8BsCnBhC8kB,eAAgB,SAACtX,EAAInI,EAAMoI,EAAOC,GAAlB,OAAkC0K,E1BIH,SAAC5K,EAAInI,EAAMoI,EAAOC,GACrE,MAAO,CACH1N,KZQoD,+CYPpDwN,KACAnI,OACAoI,QACAC,e0BV2D6X,CAAqD/X,EAAInI,EAAMoI,EAAOC,OAI1HyK,CAA6CmM,yBC3CtDkB,8MACFC,iBAAmB,SAACvP,GAChB,GAAMwP,MAAQC,YAAcC,SAA5B,CACA,IAAIC,EAAQ3P,EAAM6M,OAAO8C,MACzBrV,EAAKf,MAAMgW,iBAAiBI,EAAOrV,EAAKf,MAAM/I,MAAO8J,EAAKf,MAAMtG,YAGpE6V,YAAc,WACV,IAAI5W,EAAQc,EAAOS,YAAY6G,EAAKf,MAAMtG,QACrCf,IACLoI,EAAKf,MAAMuP,YAAYxO,EAAKf,MAAM/I,MAAO0B,GACzCoI,EAAKsV,kBAGTzU,4BAA8B,WAC1B,GAAiC,IAA7Bb,EAAKf,MAAMtG,OAAOtJ,OAAtB,CACA,IAAImP,EAAU,CACV3J,KAAmC,KAA7BmL,EAAKf,MAAM7B,SAASvI,KACtBkgB,EAAwB/U,EAAKf,MAAM5B,eAAiB2C,EAAKf,MAAM7B,SAASvI,KAC5E8D,OAAQD,EAAO0B,OAAO4F,EAAKf,MAAMtG,QACjC4c,QAASvV,EAAKf,MAAM/I,MAAMsf,YAC1BtY,aAAa,IAAIuY,MAAOC,qBAAuB,KAAM,IAAID,MAAOE,qBAChE9mB,MAAOmR,EAAKf,MAAMpQ,MAClBC,OAAQkR,EAAKf,MAAMnQ,QAEnBkR,EAAKf,MAAM7B,SAASJ,GACpB+X,EAAsC/U,EAAKf,MAAM7B,SAASJ,GAAIwB,GACzDuV,KAAM,SAAAC,GACHhU,EAAKf,MAAM2W,oBAAoBH,KAAKI,OACpC7V,EAAKf,MAAMoV,wBAEdI,MAAM,SAAAzlB,GACH0lB,QAAQC,IAAI3lB,KAIpB+lB,GAAmCvW,GAC9BuV,KAAM,SAAAC,GACHhU,EAAKf,MAAM6W,gCAAiC9B,EAASE,KAAKrf,KAAM4gB,KAAKI,OACrE7V,EAAKf,MAAMoV,sBAEXrU,EAAKf,MAAM8W,QAAQ1kB,KAAK,cAAc2iB,EAASE,KAAKrf,QAEvD4f,MAAM,SAAAzlB,GACH0lB,QAAQC,IAAI3lB,KAGxBgR,EAAKf,MAAM4V,4BAGfmB,qBAAuB,WACnBhW,EAAKf,MAAM+W,uBACXhW,EAAKf,MAAMgX,iBACXjW,EAAKf,MAAM8W,QAAQ1kB,KAAK,QAG5BohB,cAAgB,SAACyD,GAEb,GAAoB,eAAhBA,EAAE3D,OAAOvV,GAEb,OAAQkZ,EAAExD,MACN,IAAK,OACD1S,EAAKwO,cACL,MAEJ,IAAK,OACDxO,EAAKf,MAAMkX,kBACX,MAEJ,IAAK,OACDnW,EAAKf,MAAMmX,6GAkBnB9Z,OAAO+Z,SAAWlmB,KAAK8O,MAAMqX,YAG7BlZ,SAASkK,iBAAiB,UAAWnX,KAAKsiB,eAE1CrV,SAASkK,iBAAiB,QAASnX,KAAKomB,8CAWxC,IAAIC,EAAoBrmB,KAAK8O,MAAM/I,MAC/BoJ,EAAAC,EAAAC,cAACiX,GAAD,CACIpmB,IAAI,yBACJ6F,MAAO/F,KAAK8O,MAAM/I,MAClBb,MAAOlF,KAAK8O,MAAM5J,MAClBN,QAAS5E,KAAK8O,MAAMlK,QACpBD,SAAU3E,KAAK8O,MAAMnK,SACrB4c,OAAQvhB,KAAK8O,MAAM3D,MAAM7E,EACzBkb,OAAQxhB,KAAK8O,MAAM3D,MAAM5E,IAE7B,KAEAggB,EAAoBvmB,KAAK8O,MAAMvJ,oBAAsB4J,EAAAC,EAAAC,cAACmX,GAAD,MAAwB,KAE7EC,EAA0BzmB,KAAK8O,MAAMzC,kBAAkBT,oBACvD5L,KAAK8O,MAAMzC,kBAAkBR,qBAC7B7L,KAAK8O,MAAMzC,kBAAkBP,mBAAmBxE,WAChDtH,KAAK8O,MAAMzC,kBAAkBN,oBAAoBzE,UAEjD+E,EAAoBrM,KAAK8O,MAAMzC,kBAAkBL,UACrDhM,KAAK8O,MAAMzC,kBAAkBJ,iBAAmBwa,EAC5CtX,EAAAC,EAAAC,cAACqX,GAAD,CACIxmB,IAAI,oBACJ6F,MAAO/F,KAAK8O,MAAM/I,MAClB6F,mBAAoB5L,KAAK8O,MAAMzC,kBAAkBT,mBACjDC,oBAAqB7L,KAAK8O,MAAMzC,kBAAkBR,oBAClDC,mBAAoB9L,KAAK8O,MAAMzC,kBAAkBP,mBACjDC,oBAAqB/L,KAAK8O,MAAMzC,kBAAkBN,oBAClDC,SAAUhM,KAAK8O,MAAMzC,kBAAkBL,SACvCC,gBAAiBjM,KAAK8O,MAAMzC,kBAAkBJ,gBAC9CrH,QAAS5E,KAAK8O,MAAMlK,QACpBD,SAAU3E,KAAK8O,MAAMnK,WAEzB,KAEJ,OACIwK,EAAAC,EAAAC,cAAA,QAAME,UAAWgI,KAAO,iBACpBpI,EAAAC,EAAAC,cAACsX,GAAD,CACIphB,oBAAqBvF,KAAK8O,MAAMvJ,oBAChCL,MAAOlF,KAAK8O,MAAM5J,MAClBW,8BAA+B7F,KAAK8O,MAAMjJ,8BAC1C4K,eAAgBzQ,KAAK8kB,iBACrBlU,oBAAqB5Q,KAAKqe,YAC1BxN,mBAAoB7Q,KAAK8O,MAAM8X,gBAC/B9V,6BAA8B9Q,KAAK8O,MAAM+X,2BACzC9V,oCAAqC/Q,KAAK8O,MAAMgY,2BAChD9V,yBAA0BhR,KAAK8O,MAAMkX,gBACrC/U,wBAAyBjR,KAAK8O,MAAMmX,sBACpC/U,sBAAuBlR,KAAK8O,MAAMiY,oBAClC1V,wBAAyBrR,KAAK8O,MAAMuU,iBACpClS,mCAAoCnR,KAAK8O,MAAMhJ,yBAC/CsL,cAAepR,KAAK8O,MAAMkY,YAC1BtW,4BAA6B1Q,KAAK0Q,4BAClCC,wBAAyB3Q,KAAK6lB,qBAC9B5V,yBAA0BjQ,KAAK8O,MAAMmY,kBAGzC9X,EAAAC,EAAAC,cAAC6X,GAAD,MAEElnB,KAAK8O,MAAM/I,MACboJ,EAAAC,EAAAC,cAAC8X,GAAD,CACIphB,MAAO/F,KAAK8O,MAAM/I,MAClBgS,iBAAkB/X,KAAK8O,MAAMsY,cAE7BjY,EAAAC,EAAAC,cAACgY,GAAD,CACIthB,MAAO/F,KAAK8O,MAAM/I,MAClByC,OAAQxI,KAAK8O,MAAMtG,OACnBnD,gBAAiBrF,KAAK8O,MAAMzJ,gBAC5BC,cAAetF,KAAK8O,MAAMxJ,cAC1BF,QAASpF,KAAK8O,MAAM1J,QACpBI,WAAYxF,KAAK8O,MAAMtJ,WACvBmG,aAAc3L,KAAK8O,MAAMzC,kBAAkBV,aAC3CC,mBAAoB5L,KAAK8O,MAAMzC,kBAAkBT,mBACjDC,oBAAqB7L,KAAK8O,MAAMzC,kBAAkBR,oBAClD2O,YAAaxa,KAAK8O,MAAMwY,yBACxB5M,WAAY1a,KAAK8O,MAAMyY,wBACvBjY,QAAStP,KAAK8O,MAAM0Y,mBACpBnJ,YAAare,KAAK8O,MAAMuP,cAE3BgI,EACAE,EACAla,GACiB,KAEtB8C,EAAAC,EAAAC,cAACoY,GAAD,MAEAtY,EAAAC,EAAAC,cAACqY,GAAD,CACI/hB,eAAgB3F,KAAK8O,MAAMnJ,eAC3B0d,iBAAkBrjB,KAAK8O,MAAMuU,iBAC7Bve,MAAO9E,KAAK8O,MAAMhK,MAClBC,QAAS/E,KAAK8O,MAAM/J,QACpBE,MAAOjF,KAAK8O,MAAM7J,QAGtBkK,EAAAC,EAAAC,cAACsY,EAAA,EAAD,CAAOC,KAAK,iBAAiBC,UAAWlE,aAtM5BrS,aAwQbkG,eA3DS,SAACxY,EAAO8oB,GAC5B,MAAO,CACH/hB,MAAO/G,EAAMkH,IAAIH,MACjBjB,MAAO9F,EAAMkH,IAAIpB,MACjBC,QAAS/F,EAAMkH,IAAInB,QACnBE,MAAOjG,EAAMkH,IAAIjB,MACjBI,gBAAiBrG,EAAMkH,IAAIb,gBAC3BC,cAAetG,EAAMkH,IAAIZ,cACzBF,QAASpG,EAAMkH,IAAId,QACnBI,WAAYxG,EAAMkH,IAAIV,WACtBN,MAAOlG,EAAMkH,IAAIhB,MACjBW,8BAA+B7G,EAAMkH,IAAIL,8BACzCjB,QAAS5F,EAAMkH,IAAItB,QACnBD,SAAU3F,EAAMkH,IAAIvB,SACpBY,oBAAqBvG,EAAMkH,IAAIX,oBAC/BI,eAAgB3G,EAAMkH,IAAIP,eAC1B6C,OAAQxJ,EAAMwJ,OACd2C,MAAOnM,EAAMmM,MACbkB,kBAAmBrN,EAAMqN,kBAEzBY,SAAUjO,EAAMmO,aAAaF,SAC7BC,cAAelO,EAAMmO,aAAaD,cAElCxO,MAAOM,EAAMD,KAAKL,MAClBC,OAAQK,EAAMD,KAAKJ,SAIA,SAAA8Y,GACvB,MAAO,CACH0O,YAAa,kBAAM1O,EVrQhB,CACHpY,K7BAqB,mBuCqQrB+nB,aAAc,kBAAM3P,EVhQjB,CACHpY,K7BHuB,qBuCmQvBylB,iBAAkB,SAACI,EAAOnf,EAAOyC,GAAf,OAA0BiP,EVtMpB,SAACyN,EAAOnf,EAAOyC,GAC3C,MAAO,CACHnJ,K7BX8B,yB6BY9B6lB,QACAnf,QACAyC,UUiMqDkP,CAAyBwN,EAAOnf,EAAOyC,KAC5F6V,YAAa,SAACtY,EAAO2B,GAAR,OAAkB+P,EAASC,GAAoB3R,EAAO2B,KACnEsf,YAAa,kBAAMvP,EV7PhB,CACHpY,K7BE4B,0BuC2P5B2mB,gBAAiB,kBAAMvO,EVxPpB,CACHpY,K7BHiC,+BuC2PjC4mB,sBAAuB,kBAAMxO,EVnP1B,CACHpY,K7BRuC,qCuC2PvC0nB,oBAAqB,kBAAMtP,EV9OxB,CACHpY,K7BbqC,mCuC2PrCgkB,iBAAkB,kBAAM5L,EVzOrB,CACHpY,K7BxBkC,gCuCiQlCwnB,2BAA4B,kBAAMpP,EV9N/B,CACHpY,K7BtCqC,mCuCoQrCynB,2BAA4B,kBAAMrP,EVzN/B,CACHpY,K7B3CqC,mCuCoQrCunB,gBAAiB,kBAAMnP,EV7LpB,CACHpY,K7B7EkC,gCuC0QlC4nB,gBAAiB,kBAAMxP,EVjJpB,CACHpY,K7B9GsC,oCuC+PtCyG,yBAA0B,kBAAM2R,EVtN7B,CACHpY,K7BUyC,yCuC4MzCioB,yBAA0B,SAAC5f,GAAD,OAAW+P,EV3LL,SAAC/P,GACrC,MAAO,CACHrI,K7BhE6B,wB6BiE7BqI,SUwL8CgQ,CAAiChQ,KAC/E6f,wBAAyB,kBAAM9P,EVpL5B,CACHpY,K7BtE4B,0BuC0P5BmoB,mBAAoB,SAAC9f,EAAOD,GAAR,OAAkBgQ,EVhLZ,SAAC/P,EAAOD,GACtC,MAAO,CACHpI,K7B3E8B,yB6B4E9BqI,QACAD,SU4K+CiQ,CAA2BhQ,EAAOD,KACjFid,sBAAuB,kBAAMjN,EVxK1B,CACHpY,K7BtC+B,6BuC8M/B6kB,oBAAqB,kBAAMzM,EVnKxB,CACHpY,K7B3C6B,2BuC+M7BymB,eAAgB,kBAAMrO,ETjNnB,CACHpY,K9BWgC,8BuCwMhCsmB,gCAAiC,SAAC9Y,EAAIkb,GAAL,OAAmBtQ,E3BnPb,SAAC5K,EAAIE,GAChD,MAAO,CACH1N,KZkCgD,2CYjChDwN,GAAIA,EACJE,YAAaA,G2B+OgD6X,CAA6C/X,EAAIkb,KAC9GtC,oBAAqB,SAACsC,GAAD,OAAetQ,E3B3OjC,CACHpY,KZ2BmD,8CY1BnD0N,Y2ByO8Egb,KAC9ElC,qBAAsB,kBAAMpO,E3B9NzB,CACHpY,KZmBgC,gCuC8MzBmY,CAA6CqN,yBCzP7CmD,GAnCU,SAAClZ,GACtB,OACIK,EAAAC,EAAAC,cAAA,OAAKE,UAAWgI,KAAO,uBACnBpI,EAAAC,EAAAC,cAAA,UAAQvK,MAAM,YAAYwK,QAASR,EAAMmZ,yBACrC9Y,EAAAC,EAAAC,cAACG,GAAAJ,EAAD,CACI1K,KAAK,OACLL,KAAK,KACL6C,MAAO,CAACG,MAAO,WAGvB8H,EAAAC,EAAAC,cAAA,UAAQvK,MAAM,sCAAsCwK,QAASR,EAAMoZ,0BAC/D/Y,EAAAC,EAAAC,cAACG,GAAAJ,EAAD,CACI1K,KAAK,aACLL,KAAK,KACL6C,MAAO,CAACG,MAAO,WAGvB8H,EAAAC,EAAAC,cAAA,UAAQvK,MAAM,wBAAwBwK,QAASR,EAAMqZ,4BACjDhZ,EAAAC,EAAAC,cAACG,GAAAJ,EAAD,CACI1K,KAAK,QACLL,KAAK,KACL6C,MAAO,CAACG,MAAO,WAGvB8H,EAAAC,EAAAC,cAAA,UAAQvK,MAAM,kBAAkBwK,QAASR,EAAMsZ,2BAC3CjZ,EAAAC,EAAAC,cAACG,GAAAJ,EAAD,CACI1K,KAAK,kBACLL,KAAK,KACL6C,MAAO,CAACG,MAAO,kCCSpBghB,GAvCO,SAACvZ,GACnB,IAAIwZ,EAAwB,SAACnG,GACzBA,EAAGhM,kBACHgM,EAAG/L,iBACH,IAAImS,EAAOpG,EAAGC,OAAOoG,cACjBte,EAAW5K,OAAO6G,OAAO,GAAI2I,EAAMrH,MAAO,CAC1C/C,KAAM6jB,EAAKE,UAAUtoB,MACrB2E,MAAOyjB,EAAKG,WAAWvoB,QAG3B,OADA2O,EAAMwZ,sBAAsBpe,IACrB,GAGPye,EAAW,SAACxG,GACZA,EAAGhM,kBACHgM,EAAGC,OAAO5M,SAOd,OACIrG,EAAAC,EAAAC,cAAA,QAAME,UAAWgI,KAAO,mBAClB1K,GAAG,gBACH+b,SAAUN,GAEZnZ,EAAAC,EAAAC,cAAA,4BAA0BF,EAAAC,EAAAC,cAAA,WAC1BF,EAAAC,EAAAC,cAAA,SAAOhQ,KAAK,OAAOwN,GAAG,aAAanI,KAAK,YAAYL,KAAK,KAAKwkB,aAAc/Z,EAAMrH,MAAM/C,KACjF4K,QAASqZ,IAAWxZ,EAAAC,EAAAC,cAAA,WAC3BF,EAAAC,EAAAC,cAAA,4BAA0BF,EAAAC,EAAAC,cAAA,WAC1BF,EAAAC,EAAAC,cAAA,YAAUxC,GAAG,cAAcnI,KAAK,aAAaokB,KAAK,KAAKC,KAAK,IAAIF,aAAc/Z,EAAMrH,MAAM3C,MAChFwK,QAASqZ,IAAqBxZ,EAAAC,EAAAC,cAAA,WACxCF,EAAAC,EAAAC,cAAA,UAAQC,QAfY,WACxBR,EAAMka,0BAcF,UACA7Z,EAAAC,EAAAC,cAAA,UAAQC,QAASgZ,GAAjB,6BCiDGW,gMA/EP,GAAwC,WAApChc,SAASic,cAAcC,SAA3B,CAEA,IAAIC,EAAOppB,KAAK8P,KAAK2Y,UACjBzoB,KAAK8O,MAAMrH,MAAMD,UACjB4hB,EAAK5T,sCAIR6T,EAAKC,GACN,IAAI9mB,EAAG+mB,EAAGC,EAAGC,EAgBb,OAfIJ,GACAA,EAAMA,EAAIK,QAAQ,IAAK,IACvBlnB,EAAIb,SAAS0nB,EAAIloB,UAAU,EAAG,GAAI,IAClCooB,EAAI5nB,SAAS0nB,EAAIloB,UAAU,EAAG,GAAI,IAClCqoB,EAAI7nB,SAAS0nB,EAAIloB,UAAU,EAAG,GAAI,IAClCsoB,EAAUH,IAGV9mB,EAAI,IACJ+mB,EAAI,IACJC,EAAI,IACJC,EAAU,GAEJ,QAAAnf,OAAW9H,EAAX,KAAA8H,OAAgBif,EAAhB,KAAAjf,OAAqBkf,EAArB,KAAAlf,OAA0Bmf,EAAU,IAApC,sCASV,IAAIniB,EAAYtH,KAAK8O,MAAMrH,MAAMH,UAAY,kBAAoB,oBAC7DD,EAAQC,EAAYtH,KAAK2pB,KAAK3pB,KAAK8O,MAAMrH,MAAMJ,MAAO,KAAOrH,KAAK2pB,OAClEC,EAAUtiB,EAAYtH,KAAK2pB,KAAK3pB,KAAK8O,MAAMrH,MAAMJ,MAAO,IAAMrH,KAAK2pB,OACnE5iB,EAAQ/G,KAAK8O,MAAMrH,MAAMD,SAAW,EAAI,EACxCqiB,EAAsD,IAAnC7pB,KAAK8O,MAAMrH,MAAM3D,OAAO5E,OAAe,GAAM,EACpE,MAAO,CACHiQ,EAAAC,EAAAC,cAAA,MAAInP,IAAK,EACLqP,UAAWgI,KAAOva,MAClBsS,QAAStP,KAAK8O,MAAMgb,eACpBC,cAAe/pB,KAAK8O,MAAMkb,sBAE1B7a,EAAAC,EAAAC,cAAA,OAAKE,UAAWgI,KAAOta,kBAClBqS,QAAStP,KAAK8O,MAAMmb,sBAErB9a,EAAAC,EAAAC,cAAA,MAAIE,UAAWgI,KAAOra,mBAClBgK,MAAO,CAACoiB,QAASviB,EAAOM,MAAOA,IADnC,WAMJ8H,EAAAC,EAAAC,cAAA,OAAKE,UAAWgI,KAAOpa,aAClB+J,MAAO,CAACgjB,gBAAiBN,EAASN,QAASO,IAC5C1a,EAAAC,EAAAC,cAAA,MAAIiB,IAAI,YACJxL,MAAO9E,KAAK8O,MAAMrH,MAAM/C,KACxB4S,SAAS,KAERtX,KAAK8O,MAAMrH,MAAM/C,QAM9ByK,EAAAC,EAAAC,cAAC+T,GAAD,CACIljB,IAAK,EACL+iB,UAAWjjB,KAAK8O,MAAMrH,MAAMF,OAC5B8a,WAAYriB,KAAK8O,MAAMka,uBAEvB7Z,EAAAC,EAAAC,cAAC8a,GAAD,CACI1iB,MAAOzH,KAAK8O,MAAMrH,MAClB6gB,sBAAuBtoB,KAAK8O,MAAMwZ,sBAClCU,sBAAuBhpB,KAAK8O,MAAMka,iCA1EvB1X,kCCEzB8Y,8MACF/X,OAAS,IAETiQ,cAAgB,SAACyD,GAIb,GAAIA,EAAE3D,OAAOoG,cAAcA,eACvBzC,EAAE3D,OAAOoG,cAAcA,cAAcA,eACrCzC,EAAE3D,OAAOoG,cAAcA,cAAcA,cAAc3b,IACO,eAA1DkZ,EAAE3D,OAAOoG,cAAcA,cAAcA,cAAc3b,GAGnD,OAAQkZ,EAAExD,MACN,IAAK,aACL,IAAK,YACD1S,EAAKf,MAAMub,uBACX,MACJ,IAAK,YACL,IAAK,UACDxa,EAAKf,MAAMwb,2BAuB3BC,mBAAqB,WACjB1a,EAAKsV,kGAMLlY,SAASkK,iBAAiB,UAAWnX,KAAKsiB,4DAM1CtiB,KAAKqS,OAASrS,KAAK8P,KAAKuX,gBAAgBlV,8CAGnC,IAAA6K,EAAAhd,KACCkH,EAAQlH,KAAK8O,MAAM7I,cAAgBsR,KAAO,wBAA0BA,KAAO,cACjF,OACIpI,EAAAC,EAAAC,cAAA,OAAKE,UAAWrI,EACXoJ,IAAI,kBACJhB,QAAStP,KAAKuqB,oBAGfpb,EAAAC,EAAAC,cAACmb,GAAD,CACIvC,wBAAyB,kBAAMjL,EAAKlO,MAAMmZ,wBAAwBjL,EAAKlO,MAAM/I,QAC7EmiB,yBAA0BloB,KAAK8O,MAAMoZ,yBACrCC,2BAA4BnoB,KAAK8O,MAAMqZ,2BACvCC,0BAA2BpoB,KAAK8O,MAAMsZ,4BAE1CjZ,EAAAC,EAAAC,cAAA,MAAIxC,GAAG,aACH3F,MAAO,CAACujB,UAAU,KAAMzqB,KAAKqS,OAAO,MACtCrS,KAAK8O,MAAMtG,OAAOwB,IAAI,SAACvC,GAAD,OACpB0H,EAAAC,EAAAC,cAACqb,GAAD,CACIxqB,IAAKuH,EAAM/C,KACX+C,MAAOA,EACPqiB,eAAgB,kBAAM9M,EAAKlO,MAAMgb,eAAeriB,IAChDwiB,qBAAsB,SAAC1U,GAAD,OAAWyH,EAAKlO,MAAMmb,qBAAqB1U,EAAO9N,IACxE6gB,sBAAuBtL,EAAKlO,MAAMwZ,sBAClCU,sBAAuBhM,EAAKlO,MAAMka,mCAlFjC1X,aAoHVkG,eAvBS,SAAAxY,GACpB,MAAO,CACHwJ,OAAQxJ,EAAMwJ,OACdzC,MAAO/G,EAAMkH,IAAIH,MACjBE,cAAejH,EAAMkH,IAAID,gBAIN,SAAAwR,GACvB,MAAO,CACHwQ,wBAAyB,SAACliB,GAAD,OAAW0R,EbhHf,SAAC1R,GAC1B,MAAO,CACH1G,K9BsCgC,2B8BrChC0G,MAAOA,Ga6GsC2R,CAAsB3R,KACnEmiB,yBAA0B,kBAAMzQ,Eb1D7B,CACHpY,K9BRoC,kC2CkEpC8oB,2BAA4B,kBAAM1Q,EbnG/B,CACHpY,K9B0BmC,iC2CyEnC+oB,0BAA2B,kBAAM3Q,Eb9F9B,CACHpY,K9BqBkC,gC2CyElCyqB,eAAgB,SAACriB,GAAD,OAAWgQ,EAASC,GAA2BjQ,KAC/DwiB,qBAAsB,SAAC1U,EAAO9N,GAAR,OAAkBgQ,EbpFb,SAAClC,EAAO9N,GAEvC,OADA8N,EAAMY,kBACC,CACH9W,K9BWmC,gC8BVnCoI,MAAOA,GagF0CiQ,CAA4BnC,EAAO9N,KACpF6gB,sBAAuB,SAACpe,GAAD,OAAcuN,Eb7ElB,SAACvN,GACxB,MAAO,CACH7K,K9BMsC,iC8BLtC6K,SAAUA,Ga0EoCwN,CAAoBxN,KAClE8e,sBAAuB,kBAAMvR,EbtE1B,CACHpY,K9BAsC,oC2CsEtCgrB,qBAAsB,kBAAM5S,Eb3DzB,CACHpY,K9BVsC,oC2CqEtCirB,qBAAsB,kBAAM7S,EbtDzB,CACHpY,K9BfoC,oC2CwE7BmY,CAA6C4S,yBChH7CO,GARQ,WACnB,OACIxb,EAAAC,EAAAC,cAAA,SAAOE,UAAWgI,KAAO,cACrBpI,EAAAC,EAAAC,cAAA,yCCLN1R,8MACFqB,MAAQ,CACJ0F,KAAM,MAGVkmB,aAAe,SAACzI,GACZ,IAAIzd,EAAOyd,EAAGC,OAAOjiB,MACrB0P,EAAKkP,SAAS,CAACra,KAAMA,IACrBmL,EAAKf,MAAM+b,mBAAmBnmB,MAGlComB,cAAgB,WACR3e,OAAO4e,UAAUC,OACjB7e,OAAO4e,UAAUC,MAAM,CACnBlmB,MAAO,iBACPib,KAAI,GAAAzV,OAAKuF,EAAKf,MAAMlQ,SAAhB,qEAEJqsB,IAAK9e,OAAO+e,SAAS5H,OACtBM,KAAM,SAACuH,GACF5G,QAAQC,IAAI,YAEfF,MAAO,SAACzlB,+EAWjB,OACIsQ,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQrR,cACpBwR,EAAAC,EAAAC,cAAA,SAAOhQ,KAAK,OAAO+rB,YAAY,gBAAiBjrB,MAAOH,KAAKhB,MAAM0F,KAAM8L,SAAUxQ,KAAK4qB,eACtFze,OAAO4e,UAAUC,MACd7b,EAAAC,EAAAC,cAACzT,GAAD,CAAQyD,KAAK,UAAU6P,YAAU,EAACpK,MAAM,iBAAiB2K,SAAS,YAAYH,QAAStP,KAAK8qB,gBAC5F,yDAZgBrP,EAAW4P,GACvC,MAAO,CACH3mB,KAAO+W,EAAU/W,aA3BF4M,aA4CZga,eAAW3tB,ICNX6Z,eAjBS,SAAAmG,GAA0B,IAAxBxQ,EAAwBwQ,EAAxBxQ,aAAcpO,EAAU4e,EAAV5e,KACpC,MAAO,CACHkO,SAAUE,EAAaF,SACvBrO,SAAUG,EAAKH,WAII,SAAA6Y,GACvB,MAAO,CACH8T,oBAAqB,SAAChW,GAAD,OAAWkC,EAAS,CACrCpY,K9CyB2B,0B8CxB3B0kB,KAAMxO,EAAMiW,iBAEhBX,mBAAoB,SAACnmB,GAAD,OAAU+S,ElCoBJ,SAAC/S,GAC/B,MAAO,CACHrF,KZyB6B,wBYxB7BqF,QkCvBuCkgB,CAAgClgB,OAIhE8S,CAlCC,SAAC1I,GACb,OACIK,EAAAC,EAAAC,cAACF,EAAAC,EAAM4I,SAAP,KACI7I,EAAAC,EAAAC,cAACoc,GAAD,CAAc/mB,KAAMoK,EAAM7B,SAASvI,KACrB9F,SAAUkQ,EAAMlQ,SAChBisB,mBAAoB/b,EAAM+b,qBACxC1b,EAAAC,EAAAC,cAAA,OAAKE,UAAU,WAAWmc,QAAS5c,EAAMyc,qBACrCpc,EAAAC,EAAAC,cAACsc,GAAD,CAAe/F,QAAS9W,EAAM8W,QACfgG,kCAAmC9c,EAAM8c,oCAExDzc,EAAAC,EAAAC,cAACwc,GAAD,MACA1c,EAAAC,EAAAC,cAACyc,GAAD,yECPDC,GARF,WACT,OACI5c,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQlR,MACpBqR,EAAAC,EAAAC,cAAA,OAAKgO,IAAK2O,KAASC,IAAI,uDCUpBC,GAdI,SAACpd,GAChB,OACIK,EAAAC,EAAAC,cAAA,MAAIE,UAAWP,KAAQhR,YACnBmR,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAC8c,GAAA,EAAD,CAASC,GAAG,IAAIC,OAAK,GAArB,WACJld,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAC8c,GAAA,EAAD,CAASC,GAAG,cAAZ,kBAEHtd,EAAMwd,gBACHnd,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAC8c,GAAA,EAAD,CAASC,GAAG,WAAZ,YACJjd,EAAAC,EAAAC,cAAA,UAAIF,EAAAC,EAAAC,cAAC8c,GAAA,EAAD,CAASC,GAAG,UAAZ,aCWLd,eAdS,SAACxc,GACrB,IAAM5H,EAAoC,eAA5B4H,EAAMoc,SAASqB,SACzBvd,KAAQ,6BACRA,KAAQ,cACZ,OACIG,EAAAC,EAAAC,cAAA,UAAQE,UAAWrI,GACfiI,EAAAC,EAAAC,cAACvR,GAAD,MACAqR,EAAAC,EAAAC,cAACrR,GAAD,CAAYsuB,gBAAiBxd,EAAMwd,kBAClCxd,EAAMwd,gBAAkBnd,EAAAC,EAAAC,cAAA,qBAAaP,EAAMlQ,UAAmB,KAClC,eAA5BkQ,EAAMoc,SAASqB,SAA4Bpd,EAAAC,EAAAC,cAAA,WAAQ,2BCPnDmd,GAAc,SAAC9tB,EAAOC,GAC/B,MAAO,CACHU,KlD8E8B,yBkD7E9BX,QACAC,SACAC,SALqDK,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAT,OASvCwtB,GAAa,SAAC5tB,GACvB,MAAO,CACHQ,KlDsE6B,wBkDrE7BR,UAWK6tB,GAAS,WAIlB,OAHAC,aAAaC,WAAW,SACxBD,aAAaC,WAAW,kBACxBD,aAAaC,WAAW,UACjB,CACHvtB,KlDsD6B,0BkDlDxBwtB,GAAmB,SAACC,GAC7B,OAAO,SAAArV,GACHsV,WAAW,WACPtV,EAASiV,OACO,IAAjBI,0BCjCIE,GAVC,WACZ,OACI7d,EAAAC,EAAAC,cAAC6T,GAAD,KACI/T,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQtS,UACpByS,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQ9Q,QAAxB,uCCAV+uB,8MACFjuB,MAAQ,CACJJ,SAAU,GACVsuB,MAAO,GACPC,SAAU,MAGdC,WAAa,SAAC7X,GACVA,EAAMa,iBACNvG,EAAKf,MAAMue,OAAOxd,EAAK7Q,MAAMJ,SACzBiR,EAAK7Q,MAAMkuB,MACXrd,EAAK7Q,MAAMmuB,aAGnBG,eAAiB,SAAC/X,GACd,IAAMgY,EAAYjuB,OAAAC,EAAA,EAAAD,CAAA,GACXuQ,EAAK7Q,MADMM,OAAAkuB,GAAA,EAAAluB,CAAA,GAEbiW,EAAM6M,OAAO1d,KAAO6Q,EAAM6M,OAAOjiB,QAEtC0P,EAAKkP,SAASwO,4EAId,OACIpe,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQ5Q,UACpB+Q,EAAAC,EAAAC,cAAA,QAAMuZ,SAAU5oB,KAAKotB,YACjBje,EAAAC,EAAAC,cAAA,SAAOhQ,KAAK,OAAOc,MAAOH,KAAKhB,MAAMJ,SAAU8F,KAAK,WAAW0mB,YAAY,WAAY5a,SAAUxQ,KAAKstB,iBACtGne,EAAAC,EAAAC,cAAA,SAAOhQ,KAAK,QAAQc,MAAOH,KAAKhB,MAAMkuB,MAAOxoB,KAAK,QAAQ0mB,YAAY,iBAAiB5a,SAAUxQ,KAAKstB,iBACtGne,EAAAC,EAAAC,cAAA,SAAOhQ,KAAK,WAAWc,MAAOH,KAAKhB,MAAMmuB,SAAUzoB,KAAK,WAAW0mB,YAAY,WAAW5a,SAAUxQ,KAAKstB,iBACzGne,EAAAC,EAAAC,cAAA,0BAGHrP,KAAK8O,MAAMhQ,QAAUqQ,EAAAC,EAAAC,cAACoe,GAAD,MAAa,KAElCztB,KAAK8O,MAAMjQ,MAAQsQ,EAAAC,EAAAC,cAAA,UAAKrP,KAAK8O,MAAMjQ,MAAM6uB,SAAgB,KAEzD1tB,KAAK8O,MAAMwd,gBAAkBnd,EAAAC,EAAAC,cAACse,GAAA,EAAD,CAAUvB,GAAG,MAAS,aApC/C9a,aAwDNkG,eAdS,SAAAmG,GAAY,IAAV5e,EAAU4e,EAAV5e,KACtB,MAAO,CACHD,QAASC,EAAKD,QACdD,MAAOE,EAAKF,MACZytB,gBAAgC,OAAfvtB,EAAKL,QAIH,SAAC+Y,GACxB,MAAO,CACH4V,OAAQ,SAACzuB,EAAUsuB,EAAOC,EAAUS,GAA5B,OAAyCnW,EFyBnC,SAAC7Y,EAAUsuB,EAAOC,GACpC,OAAO,SAAA1V,GACHA,EAjFG,CACHpY,KlDmF8B,2BkDF9B,IAAMwuB,EAAW,CACbX,QACAC,WACAW,mBAAmB,GAGvB/f,IAAMS,KADM,uHACIqf,GACXjK,KAAK,SAAAC,GACF,IAAMkK,EAAiB,IAAIzI,MAAK,IAAIA,MAAO0I,UAAsC,IAA1BnK,EAASE,KAAKkK,WACrEtB,aAAauB,QAAQ,QAASrK,EAASE,KAAKoK,SAC5CxB,aAAauB,QAAQ,iBAAkBH,GACvCpB,aAAauB,QAAQ,SAAUrK,EAASE,KAAKqK,SAC7CzB,aAAauB,QAAQ,WAAYtvB,GAEjC6Y,EAAS+U,GAAY3I,EAASE,KAAKoK,QAAStK,EAASE,KAAKqK,QAASxvB,IACnE6Y,EAASoV,GAAiBhJ,EAASE,KAAKkK,YAExC,IAAMI,EAAO,CACT1vB,OAAQklB,EAASE,KAAKqK,QACtBxvB,SAAUA,GAEd,OAAOmP,IAAMS,KAAK,iDAAkD6f,KAEvEzK,KAAK,SAAAC,MAGLS,MAAM,SAAAzlB,GACH0lB,QAAQC,IAAI3lB,EAAMglB,SAASE,KAAKllB,OAChC4Y,EAASgV,GAAW5tB,EAAMglB,SAASE,KAAKllB,WExDUyvB,CAAmB1vB,EAAUsuB,EAAOC,OAIvF3V,CAA6CyV,yBCxDtDsB,8MACFvvB,MAAQ,CACJkuB,MAAO,GACPC,SAAU,MAGdC,WAAa,SAAC7X,GACVA,EAAMa,iBACNvG,EAAKf,MAAM0f,MAAM3e,EAAK7Q,MAAMkuB,MAAOrd,EAAK7Q,MAAMmuB,aAGlDG,eAAiB,SAAC/X,GACd,IAAMgY,EAAYjuB,OAAAC,EAAA,EAAAD,CAAA,GACXuQ,EAAK7Q,MADMM,OAAAkuB,GAAA,EAAAluB,CAAA,GAEbiW,EAAM6M,OAAO1d,KAAO6Q,EAAM6M,OAAOjiB,QAEtC0P,EAAKkP,SAASwO,4EAId,OACIpe,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQ5Q,UACpB+Q,EAAAC,EAAAC,cAAA,QAAMuZ,SAAU5oB,KAAKotB,YACjBje,EAAAC,EAAAC,cAAA,SAAOhQ,KAAK,QAAQc,MAAOH,KAAKhB,MAAMkuB,MAAOxoB,KAAK,QAAQ0mB,YAAY,iBAAiB5a,SAAUxQ,KAAKstB,iBACtGne,EAAAC,EAAAC,cAAA,SAAOhQ,KAAK,WAAWc,MAAOH,KAAKhB,MAAMmuB,SAAUzoB,KAAK,WAAW0mB,YAAY,WAAW5a,SAAUxQ,KAAKstB,iBACzGne,EAAAC,EAAAC,cAAA,yBAGHrP,KAAK8O,MAAMhQ,QAAUqQ,EAAAC,EAAAC,cAACoe,GAAD,MAAa,KAElCztB,KAAK8O,MAAMjQ,MAAQsQ,EAAAC,EAAAC,cAAA,UAAKrP,KAAK8O,MAAMjQ,MAAM6uB,SAAgB,KAEzD1tB,KAAK8O,MAAMwd,gBAAkBnd,EAAAC,EAAAC,cAACse,GAAA,EAAD,CAAUvB,GAAG,MAAS,KAEpDjd,EAAAC,EAAAC,cAAA,mCAAgCF,EAAAC,EAAAC,cAAC8c,GAAA,EAAD,CAASC,GAAG,UAAZ,mBAlC5B9a,aAsDLkG,eAdS,SAAAmG,GAAY,IAAV5e,EAAU4e,EAAV5e,KACtB,MAAO,CACHD,QAASC,EAAKD,QACdD,MAAOE,EAAKF,MACZytB,gBAAgC,OAAfvtB,EAAKL,QAIH,SAAC+Y,GACxB,MAAO,CACH+W,MAAO,SAACtB,EAAOC,GAAR,OAAqB1V,EHPf,SAACyV,EAAOC,GACzB,OAAO,SAAA1V,GACHA,EA/CG,CACHpY,KlDmF8B,2BkDpC9B,IAAMwuB,EAAW,CACbX,QACAC,WACAW,mBAAmB,GAGvB/f,IAAMS,KADM,wHACIqf,GACXjK,KAAK,SAAAC,GACF,IAAMkK,EAAiB,IAAIzI,MAAK,IAAIA,MAAO0I,UAAsC,IAA1BnK,EAASE,KAAKkK,WACrEtB,aAAauB,QAAQ,QAASrK,EAASE,KAAKoK,SAC5CxB,aAAauB,QAAQ,iBAAkBH,GACvCpB,aAAauB,QAAQ,SAAUrK,EAASE,KAAKqK,SAE7C3W,EAAS+U,GAAY3I,EAASE,KAAKoK,QAAStK,EAASE,KAAKqK,UAC1D3W,EAASoV,GAAiBhJ,EAASE,KAAKkK,YACxC,IAAMtf,EAAc,SAAWkV,EAASE,KAAKoK,QAAU,8BAAgCtK,EAASE,KAAKqK,QAAU,IAC/G,OAAOrgB,IAAMa,IAAI,iDAAmDD,KAEvEiV,KAAK,SAAAC,GACF,GAAIvkB,OAAO6O,OAAO0V,EAASE,KAAK7kB,OAAS,GAAI,CACzC,IAAMN,EAAWU,OAAO6O,OAAO0V,EAASE,MAAM,GAAGnlB,SACjD+tB,aAAauB,QAAQ,WAAYtvB,GACjC6Y,EAjDW,SAAC7Y,GAC5B,MAAO,CACHS,KlDiEmC,6BkDhEnCT,YA8CqB6vB,CAAgBnvB,OAAO6O,OAAO0V,EAASE,MAAM,GAAGnlB,cAGhE0lB,MAAM,SAAAzlB,GACH4Y,EAASgV,GAAW5tB,EAAMglB,SAASE,KAAKllB,WGtBXyvB,CAAkBpB,EAAOC,OAIvD3V,CAA6C+W,ICzDtDG,+LAEE1uB,KAAK8O,MAAM6f,4CAIX,OAAOxf,EAAAC,EAAAC,cAACse,GAAA,EAAD,CAAUvB,GAAG,aANP9a,aAgBNkG,eAAQ,KANI,SAAAC,GACvB,MAAO,CACHkX,SAAU,kBAAMlX,EAASC,SAIlBF,CAAkCkX,ICnB5C1mB,WAAOvI,IAAPuI,KAEQ4mB,GAAb,WACI,SAAAA,IAAetvB,OAAAS,EAAA,EAAAT,CAAAU,KAAA4uB,GACX5uB,KAAK6uB,SAAW,GAChB7uB,KAAK8E,MAAQ,GACb9E,KAAK8uB,SAAW,GAChB9uB,KAAK+uB,UAAY,GACjB/uB,KAAK8D,OAAS,GANtB,OAAAxE,OAAAW,EAAA,EAAAX,CAAAsvB,EAAA,EAAA1uB,IAAA,MAAA0O,IAAA,WAUQ,IAAI4a,EAAI,IAAIxhB,GADNxH,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IAEN,QAAAwB,EAAAC,EAAkBZ,KAAK8uB,SAAvBjuB,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAiC,KAAxBkH,EAAwB/G,EAAAR,MAC7BqpB,EAAEvhB,MAAMP,EAAMN,MAHZ,MAAA/F,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,GAAA,IAAA4C,GAAA,EAAAC,GAAA,EAAAC,OAAArE,EAAA,IAKN,QAAAsE,EAAAC,EAAkB1D,KAAK+uB,UAAvBluB,OAAAC,cAAAwC,GAAAG,EAAAC,EAAA3C,QAAAC,MAAAsC,GAAA,EAAkC,KAAzBoE,EAAyBjE,EAAAtD,MAC9BqpB,EAAEvhB,MAAMP,EAAMN,MANZ,MAAA/F,GAAAkC,GAAA,EAAAC,EAAAnC,EAAA,YAAAiC,GAAA,MAAAI,EAAApC,QAAAoC,EAAApC,SAAA,WAAAiC,EAAA,MAAAC,GAAA,IAAAO,GAAA,EAAAC,GAAA,EAAAC,OAAA9E,EAAA,IAQN,QAAA+E,EAAAC,EAAkBnE,KAAK8D,OAAvBjD,OAAAC,cAAAiD,GAAAG,EAAAC,EAAApD,QAAAC,MAAA+C,GAAA,EAA+B,KAAtB2D,EAAsBxD,EAAA/D,MAC3BqpB,EAAEvhB,MAAMP,EAAMN,MATZ,MAAA/F,GAAA2C,GAAA,EAAAC,EAAA5C,EAAA,YAAA0C,GAAA,MAAAI,EAAA7C,QAAA6C,EAAA7C,SAAA,WAAA0C,EAAA,MAAAC,GAWN,OAAOulB,MApBfoF,EAAA,GCDKpvB,GAAgCC,IAAhCD,MAAOE,GAAyBD,IAAzBC,QAASC,GAAgBF,IAAhBE,IAAKC,GAAWH,IAAXG,QACpBC,GAAWJ,IAAXI,OAEAmvB,GAAc,OACdC,GAAc,MACpB,SAASC,GAAa9uB,GAClB,OAAOkC,KAAK6sB,MAAMC,OAAOhvB,GAAK4uB,GAAY,GAE9C,SAASK,GAAajvB,GAClB,OAAOkC,KAAK6sB,MAAMC,OAAOhvB,GAAK6uB,GAAY,GAG9C,SAASK,GAAaC,EAAOzV,GASzB,IARA,IAKIjY,EACAE,EANA+B,EAAS,GACTpB,EAAIoX,EACJ7Y,EAAOsuB,EAAM7sB,GACb8sB,EAAQvuB,EAAKO,MAAM,KACnBE,EAAK,IAAIlC,GAAO0vB,GAAaM,EAAM,IAAKN,GAAaM,EAAM,KAG3DC,GAAc,IACN,CAGR,QADAD,GADAvuB,EAAOsuB,EAAM7sB,IACAlB,MAAM,MACL,IACV,IAAK,KACDK,EAAK,IAAIrC,GAAO0vB,GAAaM,EAAM,IAAKN,GAAaM,EAAM,KAC3D1rB,EAAO5C,KAAM,IAAIxB,GAAQgC,EAAIG,IAE7BH,EAAKG,EAAGgG,QACR,MACJ,IAAK,KACDhG,EAAK,IAAIrC,GAAO0vB,GAAaM,EAAM,IAAKN,GAAaM,EAAM,KAC3DztB,EAAK,IAAIvC,GAAO0vB,GAAaM,EAAM,IAAKN,GAAaM,EAAM,KAE3D,IACIxtB,EAA6B,MADrBwtB,EAAM,GACqB/vB,IAAQiwB,GAAKjwB,IAAQkwB,IAExD1tB,EAAapC,GAAOkC,EAAGL,GAAIQ,MAC3BC,EAAWtC,GAAOkC,EAAIF,GAAIK,MAC1BzC,IAAQ2C,MAAMC,GAAGJ,EAAYE,KAC7BA,GAAY,EAAEG,KAAKC,GACnBP,GAAmB,GAEvB,IAAIQ,EAAI3C,GAAOkC,EAAIL,GAAIxC,OAEvB4E,EAAO5C,KAAK,IAAIvB,GAAIoC,EAAIS,EAAGP,EAAYE,EAAUH,IAEjDN,EAAKG,EAAGgG,QACR,MACJ,IAAK,KACD4nB,GAAc,EAKtB,GAAIA,EACA,MAGJ/sB,IAEJ,OAAOoB,EAGX,SAAS8rB,GAAUxvB,EAAKyvB,GACpB,IAAIL,EAAQpvB,EAAIoB,MAAM,KAClBE,EAAK,IAAIlC,GAAO0vB,GAAaM,EAAM,IAAKN,GAAaM,EAAM,KAC3D3tB,EAAK,IAAIrC,GAAO0vB,GAAaM,EAAM,IAAKN,GAAaM,EAAM,KAC3DxsB,EAAU,IAAItD,GAAQgC,EAAIG,GAE1BiuB,EAAWD,EADFT,OAAOI,EAAM,KAG1B,OADAxsB,EAAQsY,SAAWwU,EACZ9sB,EAGX,SAAS+sB,GAAS3vB,EAAKyvB,GACnB,IAAIL,EAAQpvB,EAAIoB,MAAM,KAClBE,EAAK,IAAIlC,GAAO0vB,GAAaM,EAAM,IAAKN,GAAaM,EAAM,KAC3D3tB,EAAK,IAAIrC,GAAO0vB,GAAaM,EAAM,IAAKN,GAAaM,EAAM,KAC3DztB,EAAK,IAAIvC,GAAO0vB,GAAaM,EAAM,IAAKN,GAAaM,EAAM,KAG3DxtB,EAA6B,MADrBwtB,EAAM,IACqB/vB,IAAQiwB,GAAKjwB,IAAQkwB,IAExD1tB,EAAapC,GAAOkC,EAAGL,GAAIQ,MAC3BC,EAAWtC,GAAOkC,EAAIF,GAAIK,MAC1BzC,IAAQ2C,MAAMC,GAAGJ,EAAYE,KAC7BA,GAAY,EAAEG,KAAKC,GACnBP,GAAmB,GAEvB,IAAIQ,EAAI3C,GAAOkC,EAAIL,GAAIxC,OAEnBgE,EAAM,IAAIvD,GAAIoC,EAAIS,EAAGP,EAAYE,EAAUH,GAG3C8tB,EAAWD,EADFT,OAAOI,EAAM,KAI1B,OAFAtsB,EAAIoY,SAAWwU,EAER5sB,EAGJ,SAAS8sB,GAASnB,EAAUzuB,GAC/B,IAAI6vB,EAAM,IAAIrB,GACdqB,EAAIpB,SAAWA,EAOf,IALA,IACIpsB,EADApC,EAAeD,EAAIE,MAAM,aAGzBuvB,EAAY,GAEPntB,EAAE,EAAGA,EAAIrC,EAAanB,OAAQwD,IAAK,CACxC,IAAIzB,EAAOZ,EAAaqC,GACpB8sB,EAAQvuB,EAAKO,MAAM,KAEvB,GAA6B,MAAzBguB,EAAM,GAAGU,OAAO,EAAE,GAOtB,OAAQV,EAAM,IACV,IAAK,IACD/sB,EAAU,IAAI7C,GACd,IACIuwB,EADUlvB,EAAKO,MAAM,KACF,GACvBiB,EAAQ0tB,SAAWA,EACnB,MACJ,IAAK,KACD,IAAIrW,EAAQpX,EACRoB,EAASwrB,GAAajvB,EAAcyZ,GACxCrX,EAAQW,QAAQU,GAChBpB,EAAIoX,EAAQhW,EAAO5E,OAAS,EAC5B,MACJ,IAAK,KACD+wB,EAAInsB,OAAO5C,KAAKuB,GAChB,MACJ,IAAK,IACD,IAAI2tB,EAAUR,GAAU3uB,EAAM4uB,GAC9BI,EAAInsB,OAAO5C,KAAKkvB,GAChB,MACJ,IAAK,IACD,IAAIC,EAASN,GAAS9uB,EAAM4uB,GAC5BI,EAAInsB,OAAO5C,KAAKmvB,OA7BxB,CACI,IAAIC,EAASlB,OAAOI,EAAM,GAAGU,OAAO,IAChCJ,EAAWT,GAAaG,EAAM,GAAGU,OAAO,IAC5CL,EAAUS,GAAUR,GAgC5B,OAAOG,MC/ILM,8MACFvxB,MAAM,CACFgC,MAAK,uFAEY,IAAAgc,EAAAhd,KACjB,GAAIA,KAAK8O,MAAM/I,QAAU/F,KAAKhB,MAAMgC,KAAM,CACtC,IAAI+E,EAAQ/F,KAAK8O,MAAM/I,MACnByC,EAASxI,KAAK8O,MAAMtG,OAEpBf,EAAQc,EAAO2B,SAASnE,EAAOyC,GACnCf,EAAMJ,MAAQkB,EAAOiB,aAAahB,GAClCf,EAAM/C,KAAO,WACb+C,EAAM3C,MAAQ,WACd2C,EAAMD,UAAW,EACjBC,EAAMH,WAAY,EAElByG,IAAM,uIACD6V,KAAM,SAACuH,GACJ,IAAI8E,EAAMD,GAAS,WAAY7E,EAAKpH,MADvBvjB,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IAGb,QAAAwB,EAAAC,EAAkBqvB,EAAInsB,OAAtBjD,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA8B,KAArBkH,EAAqB/G,EAAAR,MACtBgH,EAAQ,IAAIH,EAAMU,OAAOvI,EAAWuI,EAAM7D,OAC9C4D,EAAMG,IAAIT,IALD,MAAA9F,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,GAQbsc,EAAKlO,MAAMsV,kBAAkBre,EAAO0B,GACpCuV,EAAKlO,MAAMmV,YAAYxc,GACvBuV,EAAKlO,MAAMoV,wBAEnBlkB,KAAK+e,SAAS,CAAC/d,MAAK,IACpBhB,KAAK8O,MAAM4V,uGAOf,OAAO,YArCIpT,aAgEJkG,eAvBS,SAAAxY,GACpB,MAAO,CACHwJ,OAAQxJ,EAAMwJ,OACdzC,MAAO/G,EAAMkH,IAAIH,QAIE,SAAA0R,GACvB,MAAO,CACH2M,kBAAmB,SAACre,EAAO0B,GAAR,OAAkBgQ,EAAS,CAC1CpY,KzDtByB,wByDuBzB0G,MAAOA,EACP2B,MAAOD,KAEXwc,YAAa,SAACxc,GAAD,OAAWgQ,EAAS,CAC7BpY,KzDvBiB,gByDwBjBoI,MAAOA,KAEXid,sBAAuB,kBAAMjN,E5B4C1B,CACHpY,K7BtC+B,6ByDN/B6kB,oBAAqB,kBAAMzM,E5BiDxB,CACHpY,K7B3C6B,6ByDHtBmY,CAA6C+Y,yBCnEvD3sB,GAAuBnE,IAAvBmE,MAAOV,GAAgBzD,IAAhByD,IAAKtD,GAAWH,IAAXG,QACZ4wB,GAAuBC,KAAvBD,SAAUE,GAAaD,KAAbC,UAETC,8MACF3xB,MAAM,CACFgC,MAAK,uFAGL,GAAIhB,KAAK8O,MAAM/I,QAAU/F,KAAKhB,MAAMgC,KAAM,CACtC,IAAI+E,EAAQ/F,KAAK8O,MAAM/I,MACnByC,EAASxI,KAAK8O,MAAMtG,OAEpBf,EAAQc,EAAO2B,SAASnE,EAAOyC,GACnCf,EAAMJ,MAAQkB,EAAOiB,aAAahB,GAClCf,EAAM/C,KAAO,WACb+C,EAAM3C,MAAQ,WACd2C,EAAMD,UAAW,EACjBC,EAAMH,WAAY,EAElB,IAAIspB,EAAS,IAAIhxB,GACjBgxB,EAAOxtB,QAAQ,CAACQ,GAAM,EAAG,GAAIA,GAAM,EAAE,KAAMA,GAAM,IAAK,KAAMA,GAAM,IAAK,KACvE4E,EAAOA,EAAOtJ,QAAUqJ,EAAO2B,SAASnE,EAAOyC,GAAQZ,IAAIgpB,GAE3D,IAAIC,EAAW,IAAIjxB,GACnBixB,EAASztB,QAAQ,CAACF,GAAIU,GAAM,EAAE,GAAG,iBAAkB,EAAG,EAAEtB,KAAKC,GAAI9C,IAAQiwB,MACzElnB,EAAOA,EAAOtJ,QAAUqJ,EAAO2B,SAASnE,EAAOyC,GAAQZ,IAAIipB,GAE3DD,EAASF,GAAUE,EAAOC,GAC1BroB,EAAOA,EAAOtJ,QAAUqJ,EAAO2B,SAASnE,EAAOyC,GAAQZ,IAAIgpB,IAE3DC,EAAW,IAAIjxB,IACNwD,QAAQ,CAACF,GAAIU,GAAM,EAAE,GAAG,kBAAmB,EAAG,EAAEtB,KAAKC,GAAI9C,IAAQiwB,MAC1ElnB,EAAOA,EAAOtJ,QAAUqJ,EAAO2B,SAASnE,EAAOyC,GAAQZ,IAAIipB,GAE3DD,EAASJ,GAASI,EAAOC,GACzBroB,EAAOA,EAAOtJ,QAAUqJ,EAAO2B,SAASnE,EAAOyC,GAAQZ,IAAIgpB,IAE3DC,EAAW,IAAIjxB,IACNwD,QAAQ,CAACF,GAAIU,GAAM,EAAE,KAAK,iBAAkB,EAAG,EAAEtB,KAAKC,GAAI9C,IAAQiwB,MAC3ElnB,EAAOA,EAAOtJ,QAAUqJ,EAAO2B,SAASnE,EAAOyC,GAAQZ,IAAIipB,GAE3DD,EAASF,GAAUE,EAAOC,GAC1BroB,EAAOA,EAAOtJ,QAAUqJ,EAAO2B,SAASnE,EAAOyC,GAAQZ,IAAIgpB,IAE3DC,EAAW,IAAIjxB,IACNwD,QAAQ,CAACF,GAAIU,GAAM,EAAE,KAAK,kBAAmB,EAAG,EAAEtB,KAAKC,GAAI9C,IAAQiwB,MAC5ElnB,EAAOA,EAAOtJ,QAAUqJ,EAAO2B,SAASnE,EAAOyC,GAAQZ,IAAIipB,GAE3DD,EAASJ,GAASI,EAAOC,GACzBroB,EAAOA,EAAOtJ,QAAUqJ,EAAO2B,SAASnE,EAAOyC,GAAQZ,IAAIgpB,IAE3DC,EAAW,IAAIjxB,IACNwD,QAAQ,CAACF,GAAIU,GAAM,IAAI,KAAK,kBAAmB,EAAG,EAAEtB,KAAKC,GAAI9C,IAAQiwB,MAC9ElnB,EAAOA,EAAOtJ,QAAUqJ,EAAO2B,SAASnE,EAAOyC,GAAQZ,IAAIipB,GAE3DD,EAASF,GAAUE,EAAOC,GAC1BroB,EAAOA,EAAOtJ,QAAUqJ,EAAO2B,SAASnE,EAAOyC,GAAQZ,IAAIgpB,IAE3DC,EAAW,IAAIjxB,IACNwD,QAAQ,CAACF,GAAIU,GAAM,IAAI,KAAM,iBAAkB,EAAG,EAAEtB,KAAKC,GAAI9C,IAAQiwB,MAC9ElnB,EAAOA,EAAOtJ,QAAUqJ,EAAO2B,SAASnE,EAAOyC,GAAQZ,IAAIipB,GAE3DroB,EAAO,GAAGnB,MAAQkB,EAAOiB,aAAahB,GACtCA,EAAO,GAAGhB,UAAW,EACrBgB,EAAO,GAAGlB,WAAY,EAEtBtH,KAAK8O,MAAMsV,kBAAkBre,EAAOyC,EAAO,IAE3CxI,KAAK+e,SAAS,CAAC/d,MAAK,sCAIxB,OAAO,YArEWsQ,aA8FXkG,eArBS,SAAAxY,GACpB,MAAO,CACHwJ,OAAQxJ,EAAMwJ,OACdzC,MAAO/G,EAAMkH,IAAIH,QAIE,SAAA0R,GACvB,MAAO,CACH2M,kBAAmB,SAACre,EAAO0B,GAAR,OAAkBgQ,EAAS,CAC1CpY,K1DtDyB,wB0DuDzB0G,MAAOA,EACP2B,MAAOD,KAEXwc,YAAa,SAACxc,GAAD,OAAWgQ,EAAS,CAC7BpY,K1DvDiB,gB0DwDjBoI,MAAOA,OAKJ+P,CAA6CmZ,ICpGtDG,+LAEE9wB,KAAK8O,MAAMhJ,4DAGX,OAAO,YALmBwL,aAsBnBkG,eAbS,SAAAxY,GACpB,MAAO,CACHwJ,OAAQxJ,EAAMwJ,OACdzC,MAAO/G,EAAMkH,IAAIH,QAIE,SAAA0R,GACvB,MAAO,CACH3R,yBAA0B,kBAAM2R,EAAS,CAACpY,K3DmDV,gC2D/CzBmY,CAA6CsZ,ICvBvDC,GAA4CtxB,IAA5CsxB,OAAQrxB,GAAoCD,IAApCC,QAASC,GAA2BF,IAA3BE,IAAKqxB,GAAsBvxB,IAAtBuxB,KAAMhpB,GAAgBvI,IAAhBuI,IAAKpI,GAAWH,IAAXG,QAEhCqxB,sGACWC,EAAUC,GAEnB,IADA,IAAIC,EAAqBhC,OAAOiC,kBADHlX,EAAA7a,OAAA+K,EAAA,EAAA/K,CAER6xB,EAASruB,OAA9BqG,EAAA,EAAAA,EAAAgR,EAAAjb,OAAAiK,IAAsC,CAAjC,IAAIuQ,EAAIS,EAAAhR,GACL6C,EAAWilB,EAAkBK,aAAa5X,EAAMwX,GAChDllB,EAAWolB,IACXA,EAAqBplB,GAG7B,OAAOolB,uCAGSG,EAAOL,GACvB,IAAIM,EAAWD,EAAM7pB,MAAMN,IACvBA,EAAM,IAAIY,GACVonB,OAAOqC,kBACPD,EAASppB,KACTgnB,OAAOiC,kBACPG,EAASnpB,MAET+oB,EAAqBhC,OAAOiC,kBAC5BK,EAAcR,EAASpuB,MAAMH,OAAOyE,GATP5G,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IAUjC,QAAAwB,EAAAC,EAAkB8wB,EAAlB7wB,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA8B,KAArBmxB,EAAqBhxB,EAAAR,MACtB6L,OAAQ,EACR2lB,EAAMjqB,iBAAiBhI,IAAW6xB,EAAM7pB,iBAAiBhI,GACzDsM,EAAWilB,EAAkBW,gBAAgBD,EAAMjqB,MAAO6pB,EAAM7pB,OAE3DiqB,EAAMjqB,iBAAiB/H,IAAO4xB,EAAM7pB,iBAAiBhI,GAC1DsM,EAAWilB,EAAkBY,YAAYN,EAAM7pB,MAAOiqB,EAAMjqB,OAEvDiqB,EAAMjqB,iBAAiBhI,IAAW6xB,EAAM7pB,iBAAiB/H,GAC9DqM,EAAWilB,EAAkBY,YAAYF,EAAMjqB,MAAO6pB,EAAM7pB,OAEvDiqB,EAAMjqB,iBAAiB/H,IAAO4xB,EAAM7pB,iBAAiB/H,KAC1DqM,EAAWilB,EAAkBa,QAAQH,EAAMjqB,MAAO6pB,EAAM7pB,QAGxDsE,EAAWolB,IACXA,EAAqBplB,IA1BI,MAAA3K,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,GA6BjC,OAAO0wB,sCAGQxtB,EAAO8D,GACtB,IACIqqB,EADO,IAAIf,GAAKptB,EAAO,IAAImtB,GAAO,EAAE,IACfL,UAAUhpB,GAC/B0pB,EAAqBhC,OAAOiC,kBAHH/tB,GAAA,EAAAC,GAAA,EAAAC,OAAArE,EAAA,IAI7B,QAAAsE,EAAAC,EAAequB,EAAflxB,OAAAC,cAAAwC,GAAAG,EAAAC,EAAA3C,QAAAC,MAAAsC,GAAA,EAA8B,KAArB0uB,EAAqBvuB,EAAAtD,MAAA8xB,EAESruB,EAAMsuB,WAAWF,GAF1BG,EAAA7yB,OAAAqN,EAAA,EAAArN,CAAA2yB,EAAA,GAErBjmB,EAFqBmmB,EAAA,GAAAA,EAAA,GAGtBnmB,EAAWolB,IACXA,EAAqBplB,IARA,MAAA3K,GAAAkC,GAAA,EAAAC,EAAAnC,EAAA,YAAAiC,GAAA,MAAAI,EAAApC,QAAAoC,EAAApC,SAAA,WAAAiC,EAAA,MAAAC,GAW7B,OAAO4tB,0CAGYgB,EAAUC,GAC7B,IAAIjB,EAAqBhC,OAAOiC,kBADOttB,GAAA,EAAAC,GAAA,EAAAC,OAAA9E,EAAA,IAEvC,QAAA+E,EAAAC,EAAkBiuB,EAAStX,SAA3Bja,OAAAC,cAAAiD,GAAAG,EAAAC,EAAApD,QAAAC,MAAA+C,GAAA,EAAqC,KAA5BH,EAA4BM,EAAA/D,MAC7B6L,EAAWilB,EAAkBqB,YAAY1uB,EAAOyuB,GAChDrmB,EAAWolB,IACXA,EAAqBplB,IALU,MAAA3K,GAAA2C,GAAA,EAAAC,EAAA5C,EAAA,YAAA0C,GAAA,MAAAI,EAAA7C,QAAA6C,EAAA7C,SAAA,WAAA0C,EAAA,MAAAC,GAAA,IAAAsuB,GAAA,EAAAC,GAAA,EAAAC,OAAAtzB,EAAA,IAQvC,QAAAuzB,EAAAC,EAAkBN,EAASvX,SAA3Bja,OAAAC,cAAAyxB,GAAAG,EAAAC,EAAA5xB,QAAAC,MAAAuxB,GAAA,EAAqC,KAA5B3uB,EAA4B8uB,EAAAvyB,MAC7B6L,EAAWilB,EAAkBqB,YAAY1uB,EAAOwuB,GAChDpmB,EAAWolB,IACXA,EAAqBplB,IAXU,MAAA3K,GAAAmxB,GAAA,EAAAC,EAAApxB,EAAA,YAAAkxB,GAAA,MAAAI,EAAArxB,QAAAqxB,EAAArxB,SAAA,WAAAkxB,EAAA,MAAAC,GAcvC,OAAOrB,sCAGQpuB,EAASE,GASxB,IARA,IAKI8I,EALAolB,EAAqBhC,OAAOiC,kBAC5BuB,EAAM,IAAI7B,GAAO/tB,EAAQ8W,MAAO9W,EAAQ6vB,KAGxCC,EAAM,EAFVF,EAAMA,EAAIG,aAEKC,cAAcC,SAAS/vB,EAAIV,GAAIowB,EAAIM,aAAaD,SAAS/vB,EAAIV,IAI5E2wB,EAAA,EAAAA,EAAcL,EAAd5zB,OAAAi0B,IAAmB,CAAd,IAAIC,EAAKN,EAAJK,GACFE,EAAgBnwB,EAAI0Z,OAAO0W,UAAUF,GACrCC,EAAcnc,GAAGhU,KACjB8I,EAAWilB,EAAkBqB,YAAYe,EAAerwB,IACzCouB,IACXA,EAAqBplB,GAdJ,IAAAunB,GAAA,EAAAC,GAAA,EAAAC,OAAAt0B,EAAA,IAmB7B,QAAAu0B,EAAAC,EAAkBzwB,EAAI4X,SAAtBja,OAAAC,cAAAyyB,GAAAG,EAAAC,EAAA5yB,QAAAC,MAAAuyB,GAAA,EAAgC,KAAvB3vB,EAAuB8vB,EAAAvzB,MACxB6L,EAAWilB,EAAkBqB,YAAY1uB,EAAOZ,GAChDgJ,EAAWolB,IACXA,EAAqBplB,IAtBA,MAAA3K,GAAAmyB,GAAA,EAAAC,EAAApyB,EAAA,YAAAkyB,GAAA,MAAAI,EAAAryB,QAAAqyB,EAAAryB,SAAA,WAAAkyB,EAAA,MAAAC,GAAA,IAAAG,GAAA,EAAAC,GAAA,EAAAC,OAAA30B,EAAA,IAyB7B,QAAA40B,EAAAC,EAAkBhxB,EAAQ8X,SAA1Bja,OAAAC,cAAA8yB,GAAAG,EAAAC,EAAAjzB,QAAAC,MAAA4yB,GAAA,EAAoC,KAA3BhwB,EAA2BmwB,EAAA5zB,MAC5B6L,EAAWilB,EAAkBqB,YAAY1uB,EAAOV,GAChD8I,EAAWolB,IACXA,EAAqBplB,IA5BA,MAAA3K,GAAAwyB,GAAA,EAAAC,EAAAzyB,EAAA,YAAAuyB,GAAA,MAAAI,EAAA1yB,QAAA0yB,EAAA1yB,SAAA,WAAAuyB,EAAA,MAAAC,GA+B7B,OAAO1C,kCAGI6C,EAAMC,GACjB,IACIloB,EADAolB,EAAqBhC,OAAOiC,kBAI5B8C,EAAeF,EAAKpsB,QAGxB,GAFAssB,EAAa3xB,GAAK0xB,EAAK1xB,GACvBwJ,EAAWilB,EAAkBqB,YAAY4B,EAAKtX,OAAQuX,IACvC/C,EAAoB,KAAAgD,EAI3BH,EAAK/B,WAAYjB,EAAkBoD,aAAaH,EAAM,IAAInD,IAAQ/kB,EAAS,KAJhDsoB,EAAAh1B,OAAAqN,EAAA,EAAArN,CAAA80B,EAAA,GAG1BG,EAH0BD,EAAA,GAAAA,EAAA,GAK3B70B,IAAQ2C,MAAMoyB,KAAKD,KACnBnD,EAAqBplB,GAK7B,GAAIvM,IAAQ2C,MAAMqyB,GAAGR,EAAKzxB,EAAG0xB,EAAK1xB,GAAI,CAClC,IAAIkyB,EAAcT,EAAKpsB,QAGvB,GAFA6sB,EAAYlyB,GAAK0xB,EAAK1xB,GACtBwJ,EAAWilB,EAAkBqB,YAAY4B,EAAKtX,OAAQ8X,IACvCtD,EAAoB,KAAAuD,EAI3BV,EAAK/B,WAAYjB,EAAkBoD,aAAaH,EAAM,IAAInD,IAAQ/kB,EAAS,KAJhD4oB,EAAAt1B,OAAAqN,EAAA,EAAArN,CAAAq1B,EAAA,GAG1BJ,EAH0BK,EAAA,GAAAA,EAAA,GAK3Bn1B,IAAQ2C,MAAMoyB,KAAKD,KACnBnD,EAAqBplB,IAMjC,GAAIvM,IAAQ2C,MAAMyyB,GAAGZ,EAAKzxB,EAAG0xB,EAAK1xB,GAAI,CAClC,IAAIkyB,EAAcR,EAAKrsB,QAGvB,GAFA6sB,EAAYlyB,GAAKyxB,EAAKzxB,GACtBwJ,EAAWilB,EAAkBqB,YAAY2B,EAAKrX,OAAQ8X,IACvCtD,EAAoB,KAAA0D,EAI3Bb,EAAK/B,WAAYjB,EAAkBoD,aAAaH,EAAM,IAAInD,IAAQ/kB,EAAS,KAJhD+oB,EAAAz1B,OAAAqN,EAAA,EAAArN,CAAAw1B,EAAA,GAG1BP,EAH0BQ,EAAA,GAAAA,EAAA,GAK3Bt1B,IAAQ2C,MAAMoyB,KAAKD,KACnBnD,EAAqBplB,IA7CV,IAAAgpB,GAAA,EAAAC,GAAA,EAAAC,OAAA/1B,EAAA,IAkDvB,QAAAg2B,EAAAC,EAAkBnB,EAAKnZ,SAAvBja,OAAAC,cAAAk0B,GAAAG,EAAAC,EAAAr0B,QAAAC,MAAAg0B,GAAA,EAAiC,KAAxBpxB,EAAwBuxB,EAAAh1B,MACzB6L,EAAWilB,EAAkBqB,YAAY1uB,EAAOswB,GAChDloB,EAAWolB,IACXA,EAAqBplB,IArDN,MAAA3K,GAAA4zB,GAAA,EAAAC,EAAA7zB,EAAA,YAAA2zB,GAAA,MAAAI,EAAA9zB,QAAA8zB,EAAA9zB,SAAA,WAAA2zB,EAAA,MAAAC,GAAA,IAAAG,GAAA,EAAAC,GAAA,EAAAC,OAAAp2B,EAAA,IAwDvB,QAAAq2B,EAAAC,EAAkBvB,EAAKpZ,SAAvBja,OAAAC,cAAAu0B,GAAAG,EAAAC,EAAA10B,QAAAC,MAAAq0B,GAAA,EAAiC,KAAxBzxB,EAAwB4xB,EAAAr1B,MACzB6L,EAAWilB,EAAkBqB,YAAY1uB,EAAOqwB,GAChDjoB,EAAWolB,IACXA,EAAqBplB,IA3DN,MAAA3K,GAAAi0B,GAAA,EAAAC,EAAAl0B,EAAA,YAAAg0B,GAAA,MAAAI,EAAAn0B,QAAAm0B,EAAAn0B,SAAA,WAAAg0B,EAAA,MAAAC,GA8DvB,OAAOnE,uCAGSluB,EAAKwyB,GACrB,IAAIC,EAAUzyB,EAAI2E,QAElB,OADA8tB,EAAQ5zB,GAAK4zB,EAAQ5zB,GAAGuxB,UAAUoC,GAC3BC,oCAGMlzB,EAASizB,GACtB,IAAIE,EAAa,IAAIh2B,GADMi2B,GAAA,EAAAC,GAAA,EAAAC,OAAA52B,EAAA,IAE3B,QAAA62B,EAAAC,EAAiBxzB,EAAQ6B,MAAzBzD,OAAAC,cAAA+0B,GAAAG,EAAAC,EAAAl1B,QAAAC,MAAA60B,GAAA,EAAgC,KAAvBvc,EAAuB0c,EAAA71B,MACxB2D,EAAS,GADeoyB,GAAA,EAAAC,GAAA,EAAAC,OAAAj3B,EAAA,IAE5B,QAAAk3B,EAAAC,EAAiBhd,EAAjBzY,OAAAC,cAAAo1B,GAAAG,EAAAC,EAAAv1B,QAAAC,MAAAk1B,GAAA,EAAuB,KAAdxc,EAAc2c,EAAAl2B,MACnB,GAAIuZ,EAAKhS,iBAAiBhI,GACtBoE,EAAO5C,KACH,IAAIxB,GAAQga,EAAKhS,MAAMhG,GAAG4xB,UAAUoC,GAAMhc,EAAKhS,MAAM7F,GAAGyxB,UAAUoC,UAGrE,GAAIhc,EAAKhS,iBAAkB/H,GAAK,CACjC,IAAI42B,EAAY7c,EAAKhS,MAAMG,QAC3B0uB,EAAUx0B,GAAK2X,EAAKhS,MAAM3F,GAAGuxB,UAAUoC,GACvC5xB,EAAO5C,KAAKq1B,KAXQ,MAAAl1B,GAAA80B,GAAA,EAAAC,EAAA/0B,EAAA,YAAA60B,GAAA,MAAAI,EAAAh1B,QAAAg1B,EAAAh1B,SAAA,WAAA60B,EAAA,MAAAC,GAc5BR,EAAWxyB,QAAQU,IAhBI,MAAAzC,GAAAy0B,GAAA,EAAAC,EAAA10B,EAAA,YAAAw0B,GAAA,MAAAI,EAAA30B,QAAA20B,EAAA30B,SAAA,WAAAw0B,EAAA,MAAAC,GAkB3B,OAAOH,WAKf3E,GAAkBxxB,QAAUA,IAEbwxB,UCxMVpxB,GAAUJ,IAAVI,OAEC22B,8MACFx3B,MAAM,CACFgC,MAAK,EACL+iB,KAAK,wFAEY,IAAA/G,EAAAhd,KACjB,GAAIA,KAAK8O,MAAM/I,QAAU/F,KAAKhB,MAAMgC,KAAM,CACtC,IAAI+E,EAAQ/F,KAAK8O,MAAM/I,MACnByC,EAASxI,KAAK8O,MAAMtG,OAEpBf,EAAQc,EAAO2B,SAASnE,EAAOyC,GACnCf,EAAMJ,MAAQkB,EAAOiB,aAAahB,GAClCf,EAAM/C,KAAO,iBACb+C,EAAM3C,MAAQ,iBACd2C,EAAMD,UAAW,EACjBC,EAAMH,WAAY,EAElByG,IAAM,0JACD6V,KAAM,SAACuH,GACJ,IACI+F,EADSlU,EAAKlO,MAAM3J,OACFf,eAAe+mB,EAAKpH,MAC1Ctc,EAAMG,IAAIspB,GAEV,IAAIwE,EAAM71B,GAAQ,GAAGqxB,EAAS9pB,IAAIe,KAAO+oB,EAAS9pB,IAAIc,MAAO,GACzDipB,EAAWD,EAASoC,UAAUoC,GAClCjuB,EAAMG,IAAIupB,GAEV,IAAIsF,EAAYxF,GAAkB7U,MAAM+U,EAAUD,GAC9CwF,EAAWvF,EAASmC,UAAUzzB,IAAQ42B,EAAW,IACrDhvB,EAAMG,IAAI8uB,GAIV1Z,EAAKlO,MAAMsV,kBAAkBre,EAAO0B,GACpCuV,EAAKlO,MAAMmV,YAAYxc,GACvBuV,EAAKlO,MAAM6nB,qBACX3Z,EAAKlO,MAAMoV,wBAEnBlkB,KAAK+e,SAAS,CAAC/d,MAAK,IACpBhB,KAAK8O,MAAM4V,0DAIf,OAAO,YA3CapT,aA0EbkG,eA3BS,SAAAxY,GACpB,MAAO,CACHwJ,OAAQxJ,EAAMwJ,OACdzC,MAAO/G,EAAMkH,IAAIH,MACjBZ,OAAQnG,EAAMkH,IAAIf,SAIC,SAAAsS,GACvB,MAAO,CACH2M,kBAAmB,SAACre,EAAO0B,GAAR,OAAkBgQ,EAAS,CAC1CpY,K7D/ByB,wB6DgCzB0G,MAAOA,EACP2B,MAAOD,KAEXwc,YAAa,SAACxc,GAAD,OAAWgQ,EAAS,CAC7BpY,K7DhCiB,gB6DiCjBoI,MAAOA,KAEXkvB,mBAAoB,kBAAMlf,EAAS,CAC/BpY,K7DVsB,wB6DY1BqlB,sBAAuB,kBAAMjN,EhCgC1B,CACHpY,K7BtC+B,6B6DM/B6kB,oBAAqB,kBAAMzM,EhCqCxB,CACHpY,K7B3C6B,6B6DStBmY,CAA6Cgf,wDCjD7CI,GAjCe,SAAAjZ,GAA0E,IAAxE9Q,EAAwE8Q,EAAxE9Q,GAAII,EAAoE0Q,EAApE1Q,SAAUwB,EAA0DkP,EAA1DlP,2BAA4BooB,EAA8BlZ,EAA9BkZ,yBAetE,OACI1nB,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQzQ,uBACpB4Q,EAAAC,EAAAC,cAACynB,GAAA,EAAD,CAAM1K,GAAI,cAAgBvf,EAAIyC,QAXtB,WACZunB,EAAyB,CACrBhqB,GAAIA,EACJnI,KAAMuI,EAASvI,KACfoI,MAAOG,EAASH,MAChBC,YAAaE,EAASF,gBAOlBoC,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,OAAKgO,IAAKpQ,EAASmY,QAAS6G,IAAKhf,EAASvI,KAAM0N,MAAM,YAG9DjD,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQxQ,6BACpB2Q,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,UAAKpC,EAASvI,MACdyK,EAAAC,EAAAC,cAAA,2BAAmBpC,EAASF,cAEhCoC,EAAAC,EAAAC,cAAA,UAAQC,QA1BgB,SAACiG,GACjCA,EAAMY,kBACN1H,EAA2B5B,KAwBnB,aCvBVkqB,8MACF/3B,MAAQ,CACJg4B,SAAS,KAGbvoB,2BAA6B,SAAC5B,GAC1B+X,GAAwC/X,GACnC+W,KAAK,SAACC,GAEHhU,EAAKf,MAAMmoB,kCAAkCpqB,GAC7CgD,EAAKf,MAAMoV,wBAEnBrU,EAAKf,MAAM4V,2BAGfwS,kBAAoB,WACXrnB,EAAKf,MAAMpQ,QAEhBkmB,GAAwC/U,EAAKf,MAAMpQ,MAAOmR,EAAKf,MAAMnQ,QAChEilB,KAAK,SAACC,GACHhU,EAAKf,MAAMqoB,yCAAyCtT,EAASE,MAC7DlU,EAAKf,MAAMoV,wBAGqB,IAApCrU,EAAKf,MAAM5B,cAAchO,QACzB2Q,EAAKf,MAAM4V,kGAKV,IAAA1H,EAAAhd,KACL,OACImP,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQ3Q,mBACpB8Q,EAAAC,EAAAC,cAAA,gCAEAF,EAAAC,EAAAC,cAAA,OAAKE,UAAWP,KAAQ1Q,uBACnBgB,OAAOmO,KAAKzN,KAAK8O,MAAM5B,eAAelD,IAAI,SAAA9J,GACvC,IAAI+M,EAAW+P,EAAKlO,MAAM5B,cAAchN,GACxC,OAAQiP,EAAAC,EAAAC,cAAC9Q,GAAD,CACJ2B,IAAKA,EACL2M,GAAI3M,EACJ+M,SAAUA,EACVwB,2BAA4BuO,EAAKvO,2BACjCooB,yBAA0B7Z,EAAKlO,MAAM+nB,sCA3ChCvlB,aAwElBkG,eApBS,SAAAmG,GAAyB,IAAvB5e,EAAuB4e,EAAvB5e,KACtB,MAAO,CACHmO,cAFyCyQ,EAAlBxQ,aAEKD,cAC5BxO,MAAOK,EAAKL,MACZC,OAAQI,EAAKJ,SAIM,SAAA8Y,GACvB,MAAO,CACHiN,sBAAuB,kBAAMjN,ElC2C1B,CACHpY,K7BtC+B,6B+DL/B6kB,oBAAqB,kBAAMzM,ElCgDxB,CACHpY,K7B3C6B,2B+DL7B83B,yCAA0C,SAACjqB,GAAD,OACtCuK,EnDuB4C,SAACvK,GACrD,MAAO,CACH7N,KZfqD,gDYgBrD6N,iBmD1Ba0X,CAAsD1X,KACnE+pB,kCAAmC,SAACpqB,GAAD,OAC/B4K,EnDOqC,SAAC5K,GAC9C,MAAO,CACHxN,KZA6C,wCYC7CwN,MmDVa+X,CAA+C/X,KAC5DgqB,yBAA0B,SAAC5pB,GAAD,OAAcwK,EnDaX,SAACxK,GAClC,MAAO,CACH5N,KZNmC,8BYOnC4N,YmDhBiD2X,CAAmC3X,OAI7EuK,CAA6Cuf,IC3DtDK,+LAEEp3B,KAAK8O,MAAMuoB,8DAG0B,MAAjCr3B,KAAK8O,MAAMoc,SAASqB,eAA+CptB,IAA3Ba,KAAK8O,MAAM7B,SAASJ,IAC5D7M,KAAK8O,MAAM8W,QAAQ1kB,KAAK,cAAgBlB,KAAK8O,MAAM7B,SAASJ,qCAWhE,OACIsC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACXJ,EAAAC,EAAAC,cAACioB,GAAD,CACIxyB,MAAO9E,KAAK8O,MAAMhK,MAClBC,QAAS/E,KAAK8O,MAAM/J,QACpBunB,gBAAiBtsB,KAAK8O,MAAMwd,gBAC5B1tB,SAAUoB,KAAK8O,MAAMlQ,WAGzBuQ,EAAAC,EAAAC,cAACkoB,EAAA,EAAD,KACIpoB,EAAAC,EAAAC,cAACsY,EAAA,EAAD,CAAOC,KAAK,aAAayE,OAAK,EAACxE,UAAWkP,KAC1C5nB,EAAAC,EAAAC,cAACsY,EAAA,EAAD,CAAOC,KAAK,UAAUC,UAAWoF,KACjC9d,EAAAC,EAAAC,cAACsY,EAAA,EAAD,CAAOC,KAAK,SAASC,UAAW0G,KAChCpf,EAAAC,EAAAC,cAACsY,EAAA,EAAD,CAAOC,KAAK,UAAUC,UAAW6G,KAEjCvf,EAAAC,EAAAC,cAACsY,EAAA,EAAD,CAAOC,KAAK,IAAIC,UAAW2P,KAI3BroB,EAAAC,EAAAC,cAACsY,EAAA,EAAD,CAAOC,KAAK,QAAQC,UAAW0I,KAC/BphB,EAAAC,EAAAC,cAACsY,EAAA,EAAD,CAAOC,KAAK,gBAAgBC,UAAW8I,KACvCxhB,EAAAC,EAAAC,cAACsY,EAAA,EAAD,CAAOC,KAAK,YAAYC,UAAWiJ,KACnC3hB,EAAAC,EAAAC,cAACsY,EAAA,EAAD,CAAOC,KAAK,sBAAsBC,UAAW2O,MAIhDx2B,KAAK8O,MAAM9I,YAAcmJ,EAAAC,EAAAC,cAACoe,GAAD,MAAa,aA3CrCnc,aAkEHga,eAAW9T,YAjBF,SAAAmG,GAA+B,IAA7B5e,EAA6B4e,EAA7B5e,KAAMmH,EAAuByX,EAAvBzX,IAAKiH,EAAkBwQ,EAAlBxQ,aACjC,MAAO,CACHrI,MAAOoB,EAAIpB,MACXC,QAASmB,EAAInB,QACbiB,YAAaE,EAAIF,YACjBiH,SAAUE,EAAaF,SACvBqf,gBAAgC,OAAfvtB,EAAKL,MACtBE,SAAUG,EAAKH,WAII,SAAA6Y,GACvB,MAAO,CACH4f,eAAgB,kBAAM5f,EduCnB,SAAAA,GACH,IAAM/Y,EAAQiuB,aAAa8K,QAAQ,SACnC,GAAK/4B,EAGA,CACD,IAAMC,EAASguB,aAAa8K,QAAQ,UAC9B74B,EAAW+tB,aAAa8K,QAAQ,YAChC1J,EAAiB,IAAIzI,KAAKqH,aAAa8K,QAAQ,mBACrD,GAAI1J,EAAiB,IAAIzI,KAAQ,CAC7B,IAAMoS,EAAW3J,EAAeC,WAAY,IAAI1I,MAAO0I,UACvDvW,EAAS+U,GAAY9tB,EAAOC,EAAQC,IACpC6Y,EAASoV,GAAiB6K,EAAW,WAGrCjgB,EAASiV,WAZbjV,EAASiV,WctCKlV,CAA6C4f,KC5ExD5S,GATH,SAAA7G,KAAGga,SAAHha,EAAalG,SAAb,OAA4B,SAAA1W,GAAI,OAAI,SAAA3B,GjEsBZ,yBiEpB7BA,EAAOC,MACNklB,QAAQC,IAAI,WAAaplB,EAAOC,KAAMD,GAG1C2B,EAAK3B,MCLJI,GAAgCC,IAAhCD,MAAOE,GAAyBD,IAAzBC,QAASC,GAAgBF,IAAhBE,IAAKC,GAAWH,IAAXG,QACpBC,GAAWJ,IAAXI,OAEN,SAAS+3B,GAAWC,GAGhB,IAFA,IAAI/0B,EAAQ,GADcqX,EAGT+B,MAAM4b,KAAKD,GAA5B1uB,EAAA,EAAAA,EAAAgR,EAAAjb,OAAAiK,IAAuC,CAAlC,IAAIuQ,EAAIS,EAAAhR,GACL9J,EAAOqa,EAAKqe,aAAa,QAE7B,GAAa,YAAT14B,EAAoB,CACpB,IAAIqC,EAAK,IAAIlC,GAAMmC,SAAS+X,EAAKqe,aAAa,MAAM,IAAKp2B,SAAS+X,EAAKqe,aAAa,MAAM,KACtFl2B,EAAK,IAAIrC,GAAMmC,SAAS+X,EAAKqe,aAAa,MAAM,IAAKp2B,SAAS+X,EAAKqe,aAAa,MAAM,KAE1Fj1B,EAAM5B,KAAK,IAAIxB,GAAQgC,EAAIG,IAG/B,GAAa,UAATxC,EAAkB,CAClB,IAAIqC,EAAK,IAAIlC,GAAMmC,SAAS+X,EAAKqe,aAAa,MAAM,IAAKp2B,SAAS+X,EAAKqe,aAAa,MAAM,KACtFl2B,EAAK,IAAIrC,GAAMmC,SAAS+X,EAAKqe,aAAa,MAAM,IAAKp2B,SAAS+X,EAAKqe,aAAa,MAAM,KACtFh2B,EAAK,IAAIvC,GAAMmC,SAAS+X,EAAKqe,aAAa,MAAM,IAAKp2B,SAAS+X,EAAKqe,aAAa,MAAM,KAEtF/1B,EAA+C,OAA5B0X,EAAKqe,aAAa,MAErC91B,EAAapC,GAAOkC,EAAGL,GAAIQ,MAC3BC,EAAWtC,GAAOkC,EAAIF,GAAIK,MAE1BzC,IAAQ2C,MAAMC,GAAGJ,EAAYE,KAC7BA,EAAWH,EAAmBG,EAAW,EAAEG,KAAKC,GAAKJ,EAAW,EAAEG,KAAKC,IAG3E,IAAIC,EAAI3C,GAAOkC,EAAIL,GAAIxC,OAEvB4D,EAAM5B,KAAK,IAAIvB,GAAIoC,EAAIS,EAAGP,EAAYE,EAAUH,KAIxD,OAAOc,EAGX,SAASwsB,GAAa0I,GAClB,IAAIv1B,EAAU,IAAI7C,GAKdyH,EAAQ2wB,EAAYD,aAAa,SACrCt1B,EAAQyE,MAAQ,CACZL,OAAQQ,QAASlI,EACjB2H,KAAMO,QAASlI,EACf4H,MAAO,GAIX,IAAIlD,EAAQm0B,EAAYD,aAAa,SACrCt1B,EAAQoB,MAAQA,EAIhB,IADA,IAAIo0B,EAAUD,EAAYE,qBAAqB,UAlBhBC,EAmBZjc,MAAM4b,KAAKG,GAA9B9E,EAAA,EAAAA,EAAAgF,EAAAj5B,OAAAi0B,IAAwC,CAAnC,IACG0E,EADOM,EAAAhF,GACW+E,qBAAqB,QAC3Cz1B,EAAQW,QAAQw0B,GAAWC,IAK/B,IADA,IAAIO,EAAQJ,EAAYE,qBAAqB,QAzBdG,EA0Bdnc,MAAM4b,KAAKM,GAA5BE,EAAA,EAAAA,EAAAD,EAAAn5B,OAAAo5B,IAAoC,CAA/B,IACGT,EADKQ,EAAAC,GACWJ,qBAAqB,QACzCz1B,EAAQW,QAAQw0B,GAAWC,IAG/B,OAAOp1B,EAGX,SAAS81B,GAAaC,GAClB,IAAI92B,EAAK,IAAIlC,GAAMmC,SAAS62B,EAAWT,aAAa,MAAM,IAAKp2B,SAAS62B,EAAWT,aAAa,MAAM,KAClGl2B,EAAK,IAAIrC,GAAMmC,SAAS62B,EAAWT,aAAa,MAAM,IAAKp2B,SAAS62B,EAAWT,aAAa,MAAM,KAElG/0B,EAAU,IAAItD,GAAQgC,EAAIG,GAG1BgC,EAAQ20B,EAAWT,aAAa,SAGpC,OAFA/0B,EAAQa,MAAQA,EAETb,EAGX,SAASy1B,GAAWC,GAChB,IAAIh3B,EAAK,IAAIlC,GAAMmC,SAAS+2B,EAASX,aAAa,MAAM,IAAKp2B,SAAS+2B,EAASX,aAAa,MAAM,KAC9Fl2B,EAAK,IAAIrC,GAAMmC,SAAS+2B,EAASX,aAAa,MAAM,IAAKp2B,SAAS+2B,EAASX,aAAa,MAAM,KAC9Fh2B,EAAK,IAAIvC,GAAMmC,SAAS+2B,EAASX,aAAa,MAAM,IAAKp2B,SAAS+2B,EAASX,aAAa,MAAM,KAE9F/1B,EAAmD,QAAhC02B,EAASX,aAAa,MAEzC91B,EAAapC,GAAOkC,EAAGL,GAAIQ,MAC3BC,EAAWtC,GAAOkC,EAAIF,GAAIK,MAE1BzC,IAAQ2C,MAAMC,GAAGJ,EAAYE,KAC7BA,EAAWH,EAAmBG,EAAW,EAAEG,KAAKC,GAAKJ,EAAW,EAAEG,KAAKC,IAG3E,IAAIC,EAAI3C,GAAOkC,EAAIL,GAAIxC,OAEnBgE,EAAM,IAAIvD,GAAIoC,EAAIS,EAAGP,EAAYE,EAAUH,GAG3C6B,EAAQ60B,EAASX,aAAa,SAGlC,OAFA70B,EAAIW,MAAQA,EAELX,EAGX,SAASy1B,GAAWC,GAChB,IAAIh1B,EAAQ,IAAIpE,GAAMmC,SAASi3B,EAASb,aAAa,KAAK,IAAKp2B,SAASi3B,EAASb,aAAa,KAAK,KAG/Fl0B,EAAQ+0B,EAASb,aAAa,SAGlC,OAFAn0B,EAAMC,MAAQA,EAEPD,ECvHX,IAAMi1B,GAAgB,UAChBC,GAAiB,IAIjBC,GAAQ,OAEd,SAASC,GAAS54B,GACd,IAAIwgB,EAAMwO,OAAOhvB,GACjB,OAAOkC,KAAK6sB,MAAMvO,EAAIiY,GAAcC,GAAe,OCRlDl1B,GAASnE,IAATmE,MAECq1B,GAAgB,IACtB,SAASC,GAAe94B,GACpB,OAAOkC,KAAK6sB,MAAMC,OAAOhvB,GAAK64B,GAAc,GCGhD,IAAME,GAAa,SAACC,EAAQC,EAAMtzB,EAAOyC,EAAQiP,EAAUyN,GAGvDkU,EAAOjc,OAAU,SAASmc,EAASvzB,EAAOyC,EAAQiP,EAAUyN,GACxD,OAAO,SAAC3P,GACJ,IAII0a,EAJAsJ,EAAShkB,EAAM6M,OAAOoX,OAEtBC,EAAeH,EAAQ50B,KAAKlD,MAAM,KAClCk4B,EAAYD,EAAaA,EAAav6B,OAAO,GAG7C+wB,EADc,QAAdyJ,EHuGT,SAAkB7K,EAAUzuB,GAC/B,IAAI6vB,EAAM,IAAIrB,GAEdqB,EAAIpB,SAAWA,EAEf,IACI8K,GADS,IAAIC,WACGC,gBAAgBz5B,EAAK,YAGrC05B,EAASH,EAAOzB,qBAAqB,SACrC4B,GAAUA,EAAO56B,OAAS,IAC1B+wB,EAAInrB,MAAQg1B,EAAO,GAAGC,WAAWC,WAKrC,IADA,IAAIC,EAAcN,EAAOzB,qBAAqB,WAfVgC,EAgBbhe,MAAM4b,KAAKmC,GAAlCE,EAAA,EAAAA,EAAAD,EAAAh7B,OAAAi7B,IAAgD,CAA3C,IACG13B,EAAU6sB,GADC4K,EAAAC,IAEflK,EAAInB,SAAS5tB,KAAKuB,GAKtB,IADA,IAAI23B,EAAcT,EAAOzB,qBAAqB,YAtBVmC,EAuBfne,MAAM4b,KAAKsC,GAAhCE,EAAA,EAAAA,EAAAD,EAAAn7B,OAAAo7B,IAA8C,CAAzC,IACG73B,EAAU6sB,GADD+K,EAAAC,IAEbrK,EAAIlB,UAAU7tB,KAAKuB,GAKvB,IADA,IAAI83B,EAAcZ,EAAOzB,qBAAqB,WA7BVsC,EA8Bbte,MAAM4b,KAAKyC,GAAlCE,EAAA,EAAAA,EAAAD,EAAAt7B,OAAAu7B,IAAgD,CAA3C,IACGz3B,EAAUu1B,GADCiC,EAAAC,IAEfxK,EAAInsB,OAAO5C,KAAK8B,GAKpB,IADA,IAAI03B,EAAYf,EAAOzB,qBAAqB,SApCRyC,EAqCfze,MAAM4b,KAAK4C,GAAhCE,EAAA,EAAAA,EAAAD,EAAAz7B,OAAA07B,IAA4C,CAAvC,IACGC,EAAQpC,GADCkC,EAAAC,IAEb3K,EAAInsB,OAAO5C,KAAK25B,GAKpB,IADA,IAAIC,EAAYnB,EAAOzB,qBAAqB,SA3CR6C,EA4Cf7e,MAAM4b,KAAKgD,GAAhCE,EAAA,EAAAA,EAAAD,EAAA77B,OAAA87B,IAA4C,CAAvC,IACGp3B,EAAQ+0B,GADCoC,EAAAC,IAEb/K,EAAInsB,OAAO5C,KAAK0C,GAEpB,OAAOqsB,EGtJWgL,CAAS3B,EAAQ50B,KAAM60B,GAEV,QAAdG,EDbd,SAAkB7K,EAAUzuB,GAC/B,IAAI6vB,EAAM,IAAIrB,GACdqB,EAAIpB,SAAWA,EAIf,IAFA,IAAIxuB,EAAeD,EAAIE,MAAM,aAEpBoC,EAAI,EAAGA,EAAIrC,EAAanB,OAAQwD,IAAK,CAC1C,IACI8sB,EADOnvB,EAAaqC,GACPlB,MAAM,KAEnB05B,EAAKhC,GAAe1J,EAAM,IAC1B2L,EAAKjC,GAAe1J,EAAM,IAC1B4L,EAAKhM,OAAOI,EAAM,IAClB6L,EAAKjM,OAAOI,EAAM,IAClB9nB,EAAQ9D,GAAMs3B,EAAGC,GACrBzzB,EAAM0zB,GAAKA,EACX1zB,EAAM2zB,GAAKA,EACXpL,EAAInsB,OAAO5C,KAAKwG,GAGpB,OAAOuoB,ECNWqL,CAAShC,EAAQ50B,KAAM60B,GAEV,QAAdG,ECvBd,SAAkB7K,EAAUzuB,GAC/B,IAAI6vB,EAAM,IAAIrB,GACdqB,EAAIpB,SAAWA,EAEf,IAEI0M,GAFS,IAAIz7B,GAEQ2jB,MAAMrjB,GAE/B,GAAIm7B,EAAYr8B,OAAS,EAAG,KAAAsB,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IACxB,QAAAwB,EAAAC,EAAkB26B,EAAlB16B,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA+B,KAAtBkH,EAAsB/G,EAAAR,MAC3B8vB,EAAInsB,OAAO5C,KAAKwG,IAFI,MAAArG,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,IAM5B,OAAOuvB,EDUWuL,CAASlC,EAAQ50B,KAAM60B,GAGvBvJ,GAASsJ,EAAQ50B,KAAM60B,GAEjC,IAAI9xB,EAAQc,EAAO2B,SAASnE,EAAOyC,GACd,KAAjB8wB,EAAQ50B,OACR+C,EAAM/C,KAAO40B,EAAQ50B,MAEzB+C,EAAM3C,MAAQmrB,EAAInrB,MAtBJ,IAAAtE,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IAwBd,QAAAwB,EAAAC,EAAoBqvB,EAAInB,SAAxBjuB,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAkC,KAAzBiC,EAAyB9B,EAAAR,MAC9B,GAAIsC,EAAQK,MAAMuB,KAAO,GAAK5B,EAAQ6B,MAAMD,KAAO,EAAG,CAGlD,IAAIqD,EAAQ,IAAIV,EAAMvE,OAAStD,EAAWsD,EAAQoB,OAElD4D,EAAMG,IAAIF,KA9BJ,MAAArG,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,GAAA,IAAA4C,GAAA,EAAAC,GAAA,EAAAC,OAAArE,EAAA,IAkCd,QAAAsE,EAAAC,EAAoBusB,EAAIlB,UAAxBluB,OAAAC,cAAAwC,GAAAG,EAAAC,EAAA3C,QAAAC,MAAAsC,GAAA,EAAmC,KAA1Bb,EAA0BgB,EAAAtD,MAC/B,GAAIsC,EAAQK,MAAMuB,KAAO,GAAK5B,EAAQ6B,MAAMD,KAAO,EAAG,CAGlD,IAAIqD,EAAQ,IAAIV,EAAMvE,OAAStD,EAAWsD,EAAQoB,OAElD4D,EAAMG,IAAIF,KAxCJ,MAAArG,GAAAkC,GAAA,EAAAC,EAAAnC,EAAA,YAAAiC,GAAA,MAAAI,EAAApC,QAAAoC,EAAApC,SAAA,WAAAiC,EAAA,MAAAC,GAAA,IAAAO,GAAA,EAAAC,GAAA,EAAAC,OAAA9E,EAAA,IA4Cd,QAAA+E,EAAAC,EAAkB8rB,EAAInsB,OAAtBjD,OAAAC,cAAAiD,GAAAG,EAAAC,EAAApD,QAAAC,MAAA+C,GAAA,EAA8B,KAArB2D,EAAqBxD,EAAA/D,MACtBgH,EAAQ,IAAIH,EAAMU,OAAOvI,EAAWuI,EAAM7D,OAC9C4D,EAAMG,IAAIT,IA9CA,MAAA9F,GAAA2C,GAAA,EAAAC,EAAA5C,EAAA,YAAA0C,GAAA,MAAAI,EAAA7C,QAAA6C,EAAA7C,SAAA,WAAA0C,EAAA,MAAAC,GAmDVq1B,IAAYpU,EAAM,KAClB3c,EAAOiC,YAAYhC,EAAQf,GAC3BA,EAAMJ,MAAQkB,EAAOiB,aAAahB,GAClCf,EAAMH,WAAY,EAClBmQ,EAAS,CACLpY,KrE/BiB,wBqEgCjB0G,MAAOA,EACP2B,MAAOD,KAGfgQ,EAAS,CACLpY,KrEjCa,gBqEkCboI,MAAOA,IAGXgQ,EAAS,CACLpY,KrEJqB,2BqEhEhB,CAuEdg6B,EAAMtzB,EAAOyC,EAAQiP,EAAUyN,GAElCkU,EAAOD,WAAWE,GAElB5hB,EAAS,CACLpY,KrEb+B,6BqEkBjCo8B,GAAc,SAACrC,EAAQC,EAAMtzB,EAAOyC,EAAQiP,EAAUyN,GACxDkU,EAAOjiB,iBAAiB,OAAQ,WAY5B,IAAImF,EF7FL,SAAoB+c,GACvB,IAAI/c,EAAQ,GAERkT,EAAQ6J,EAAK30B,KAAKlD,MAAM,KACxBk6B,EAAOlM,EAAM,GAAGU,OAAO,GACvByL,EAAOnM,EAAM,GAAKA,EAAM,GAAGU,OAAO,QAAK/wB,EAEvCmH,EAAIs1B,MAAMD,GAAQ,EAAI3C,GAAS2C,GAAQ,IACvCp1B,EAAIq1B,MAAMF,GAAQ,EAAI1C,GAAS0C,GAAQ,IAW3C,OATApf,EAAMM,OAAS,IAAInd,IAAQD,MAAM8G,EAAEC,GACnC+V,EAAMlK,MAAQ2mB,GAAMD,GAAe,IACnCxc,EAAMlV,IAAM,IAAI3H,IAAQuI,IACpBsU,EAAMM,OAAOtW,EAAIgW,EAAMlK,MAAM,EAC7BkK,EAAMM,OAAOrW,EAAI+V,EAAMlK,MAAM,EAC7BkK,EAAMM,OAAOtW,EAAIgW,EAAMlK,MAAM,EAC7BkK,EAAMM,OAAOrW,EAAI+V,EAAMlK,MAAM,GAG1BkK,EE0ESuf,CAAWxC,GACvB/c,EAAMgB,IAAMtd,KAAKw5B,OAEjB,IAAIryB,EAAQ,IAAIH,EAAMsV,GAElB7U,EAAQc,EAAO2B,SAASnE,EAAOyC,GACjB,KAAd6wB,EAAK30B,OACL+C,EAAM/C,KAAO20B,EAAK30B,MAGtB+C,EAAMG,IAAIT,GAINkyB,IAASnU,EAAM,KACf3c,EAAOiC,YAAYhC,EAAQf,GAC3BA,EAAMJ,MAAQkB,EAAOiB,aAAahB,GAClCf,EAAMH,WAAY,EAClBmQ,EAAS,CACLpY,KrEvFqB,wBqEwFrB0G,MAAOA,EACP2B,MAAOD,KAIfgQ,EAAS,CACLpY,KrE1FiB,gBqE2FjBoI,MAAOA,IAGXgQ,EAAS,CACLpY,KrE7DyB,4BqEgE9B,GAEH+5B,EAAO0C,cAAczC,IAGnB0C,GAAW,SAAC1C,EAAMtzB,EAAOyC,EAAQiP,EAAUyN,GAC7C,GAAkB,KAAdmU,EAAKh6B,MACHg6B,EAAKh6B,KAAKiB,MAAM,WAAa+4B,EAAKh6B,KAAKiB,MAAM,kBAC/C+4B,EAAKh6B,KAAKiB,MAAM,WAFpB,CAIA,IAAI84B,EAAS,IAAIpU,WAEbqU,EAAKh6B,KAAKiB,MAAM,WAAa+4B,EAAKh6B,KAAKiB,MAAM,kBAAoB+4B,EAAK30B,KAAKpE,MAAM,aACjF64B,GAAWC,EAAQC,EAAMtzB,EAAOyC,EAAQiP,EAAUyN,GAG7CmU,EAAKh6B,KAAKiB,MAAM,YACrBm7B,GAAYrC,EAAQC,EAAMtzB,EAAOyC,EAAQiP,EAAUyN,KAwB5C8W,GAnBG,SAAAre,GAAA,IAAGlG,EAAHkG,EAAGlG,SAAHkG,EAAaga,SAAb,OAA4B,SAAA52B,GAAI,OAAI,SAAA3B,GAElD,GrE1GkC,2BqE0G9BA,EAAOC,KACP,OAAO0B,EAAK3B,GAWhB,IARA,IAAI2G,EAAQ3G,EAAO2G,MACfyC,EAASpJ,EAAOoJ,OAPwC2R,EAc3C+B,MAAM4b,KAAK14B,EAAO8lB,OAAnC/b,EAAA,EAAAA,EAAAgR,EAAAjb,OAAAiK,IAA2C,CAAtC,IAAIkwB,EAAIlf,EAAAhR,GACT4yB,GAAS1C,EAAMtzB,EAAOyC,EAAQiP,EAAUrY,EAAO8lB,WEvHxC+W,GAxDG,SAAAte,GAAA,IAAGlG,EAAHkG,EAAGlG,SAAUkgB,EAAbha,EAAaga,SAAb,OAA4B,SAAA52B,GAAI,OAAI,SAAA3B,GAElD,GvEwDmC,4BuExD/BA,EAAOC,KACP,OAAO0B,EAAK3B,GAGhB,IAAIJ,EAAQ24B,IACR5xB,EAAQ/G,EAAMkH,IAAIH,MAClByC,EAASxJ,EAAMwJ,OACfrD,EAASnG,EAAMkH,IAAIf,OAEnBsC,OAAQtI,EACRH,EAAMkH,IAAIN,sBACV6B,EAAQc,EAAO2B,SAASnE,EAAOyC,GAC/BA,EAAOtH,KAAKuG,KAGZA,EAAQe,EAAOK,KAAK,SAACC,GAAD,OAASA,EAAItB,cAE7BC,EAAQc,EAAO2B,SAASnE,EAAOyC,GAC/BA,EAAOtH,KAAKuG,IApBwC,IAAAjH,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IAyB5D,QAAAwB,EAAAC,EAAiBxB,EAAO2kB,KAAKmY,MAA7Br7B,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAoC,CAAAG,EAAAR,MAC3Bg8B,YAAY,SAAC5C,GACd,IAAIgC,EAAcp2B,EAAOse,MAAM8V,GAI/B,GAAIgC,EAAYr8B,OAAS,EAAG,KAAAoE,GAAA,EAAAC,GAAA,EAAAC,OAAArE,EAAA,IACxB,QAAAsE,EAAAC,EAAkB63B,EAAlB16B,OAAAC,cAAAwC,GAAAG,EAAAC,EAAA3C,QAAAC,MAAAsC,GAAA,EAA+B,KAAtBoE,EAAsBjE,EAAAtD,MAC3BsH,EAAMG,IAAIF,IAFU,MAAArG,GAAAkC,GAAA,EAAAC,EAAAnC,EAAA,YAAAiC,GAAA,MAAAI,EAAApC,QAAAoC,EAAApC,SAAA,WAAAiC,EAAA,MAAAC,IAMxBiE,EAAM3D,OAAO5E,OAAS,IACtBuY,EAAS,CACLpY,KvEHiB,wBuEIjBqI,MAAOD,EACP1B,MAAOA,IAEX0R,EAAS,CACLpY,KvECwB,+BuEAxBoI,MAAOA,OAMnB,OAnDwD,MAAApG,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,OC2EjD07B,GA5ES,SAAAze,GAAA,IAAEga,EAAFha,EAAEga,SAAFha,EAAYlG,SAAZ,OAA0B,SAAA1W,GAAI,OAAI,SAAA3B,GAEtD,IAAM+L,EAAQwsB,IAAWxsB,MACrBpF,EAAQ3G,EAAO2G,MAGnB,GAAIA,EACA,OAAQ3G,EAAOC,MACX,IxENiB,gBwEOb0G,EAAMs2B,SACN,MAEJ,IxEWuB,sBwEVnBt2B,EAAMu2B,kBACN,MAEJ,IxEMwB,4BwELFn9B,IAAdC,EAAOmV,SAAkCpV,IAAdC,EAAOoV,IAClCzO,EAAMw2B,eAAen9B,EAAOmV,GAAInV,EAAOoV,IAE3C,MAEJ,IxEEqB,oBwEDjBzO,EAAM0O,iBACN,MAEJ,IxEWyB,wBwEVrB,IAAImI,EAASxd,EAAOsI,MAAMkV,OACtBxV,EAAMhI,EAAOsI,MAAMN,IACvB,GAAIw0B,MAAMhf,EAAOtW,IAAMs1B,MAAMhf,EAAOrW,GAAI,OACxCR,EAAMy2B,gBAAgB5f,EAAOtW,EAAGsW,EAAOrW,GACvCR,EAAM02B,aAAar1B,EAAIe,KAAOf,EAAIc,KAAMd,EAAIiB,KAAOjB,EAAIgB,MACvD,MAEJ,IxET6B,4BwEUzB,IAAIyL,EAAMzU,EAAO6V,MAAQ,EAEzBlP,EAAM22B,YAAYt9B,EAAOkH,EAAGlH,EAAOmH,EAAGsN,EAAK,KAC3C,MAEJ,IxEpCa,YwEqCT9N,EAAM+a,oBACN/a,EAAM42B,qBACN,MAEJ,IxEduB,sBwEenB52B,EAAM62B,iBAAiBx9B,EAAOgM,GAAIhM,EAAOiM,IACzC,MAEJ,IxEjBwB,uBwEkBpB,GAAIF,EAAMD,YAAa,CACnB,IAAIqJ,EAAKpJ,EAAMD,YAAY,GAAG5E,EAAI6E,EAAMD,YAAY,GAAG5E,EACnDkO,EAAKrJ,EAAMD,YAAY,GAAG3E,EAAI4E,EAAMD,YAAY,GAAG3E,EACnDs2B,EAAYv6B,KAAKoe,KAAKnM,EAAGA,EAAKC,EAAGA,GAErCD,EAAKnV,EAAOgM,GAAKhM,EAAOkM,GACxBkJ,EAAKpV,EAAOiM,GAAKjM,EAAOmM,GACxB,IACIgI,EADcjR,KAAKoe,KAAKnM,EAAGA,EAAKC,EAAGA,GACbqoB,EAC1BtY,QAAQC,IAAIjR,GACZxN,EAAM+2B,gBAAgB19B,EAAOgM,GAAIhM,EAAOiM,GAAIkI,GAEhD,MAEJ,IxE/BqB,oBwEgCjBxN,EAAMuO,kBAQlBvT,EAAK3B,MCvEJwE,GAAuBnE,IAAvBmE,MAAOV,GAAgBzD,IAAhByD,IAAKF,GAAWvD,IAAXuD,QACb+5B,GAAc5wB,OAAO4wB,YAqEVC,GA3Dc,SAAArf,GAAA,IAAElG,EAAFkG,EAAElG,SAAUkgB,EAAZha,EAAYga,SAAZ,OAA0B,SAAA52B,GAAI,OAAI,SAAA3B,GAE3D,GzEyD6C,wCyEzDzCA,EAAOC,KAA0D,CAEjE,IAAIL,EAAQ24B,IACR5xB,EAAQ/G,EAAMkH,IAAIH,MAElByC,EAASxJ,EAAMwJ,OACfy0B,EAAe10B,EAAOS,YAAYR,GAElC00B,EADSD,EAAan5B,OACPkG,IAAI,SAAAtC,GAAK,MACxB,CAACA,EAAMT,KAAKX,EAAI,IAAMoB,EAAMT,KAAKV,EAAI,IAAMmB,EAAMT,KAAKm0B,GAAI1zB,EAAMT,KAAKo0B,MAG5D0B,GAAYI,OAAO,gCAGzBC,KAFS,gCAGXC,KAAKH,GACLtZ,KAAK,SAAU0Z,GACZ,GAAIA,EAAOz+B,MAAO,OAAO0lB,QAAQ1lB,MAAM,UAAYy+B,EAAOz+B,OAE1D,IAAIqL,EAAW3B,EAAO2B,SAASnE,EAAOyC,GACtC0B,EAASxF,KAAO,aAChBwF,EAASpF,MAAQ,aALG,IAAAtE,GAAA,EAAAC,GAAA,EAAAC,OAAAvB,EAAA,IAQpB,QAAAwB,EAAAC,EAAgB08B,EAAO9D,OAAvB34B,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA+B,KAAtB+8B,EAAsB58B,EAAAR,MACvBuH,OAAK,EACT,GAAI61B,EAAI,aAAcrhB,OAA2B,IAAlBqhB,EAAI,GAAGr+B,OAAc,CAChD,IAAI6C,EAAK6B,GAAkB,IAAZ25B,EAAI,GAAG,GAAsB,IAAZA,EAAI,GAAG,IACnC/6B,EAAa,IAAT+6B,EAAI,GAEZ71B,EAAQxE,GAAInB,EAAIS,EAAG+6B,EAAI,GAAIA,EAAI,GAAI99B,IAAQkwB,UAG3CjoB,EAAQ1E,GACJY,GAAe,IAAT25B,EAAI,GAAmB,IAATA,EAAI,IACxB35B,GAAe,IAAT25B,EAAI,GAAmB,IAATA,EAAI,KAE5BA,EAAI,KACJ71B,EAAM7D,MAAQ05B,EAAI,IAEtBrzB,EAAStC,IAAIF,IAxBG,MAAArG,GAAAZ,GAAA,EAAAC,EAAAW,EAAA,YAAAb,GAAA,MAAAI,EAAAU,QAAAV,EAAAU,SAAA,WAAAb,EAAA,MAAAC,GA0BpB8H,EAAOtH,KAAKgJ,GAEZuN,EAAS,CACLpY,KzExBiB,wByEyBjB0G,MAAOA,EACP2B,MAAOu1B,MAKvB,OAAOl8B,EAAK3B,MCvDVo+B,GAAmBrxB,OAAOsxB,sCAAwCC,IAElEC,GAAQC,YAAYhwB,EACtB4vB,GACIK,YAAgBrZ,GAAKwX,GAAWC,GAAWe,GAAsBZ,GAAiB0B,OAc3EC,UAVG,WACd,OACI5uB,EAAAC,EAAAC,cAAC2uB,EAAA,EAAD,CAAUL,MAAOA,IACbxuB,EAAAC,EAAAC,cAAC4uB,EAAA,EAAD,CAAeC,SAAUl5B,IACrBmK,EAAAC,EAAAC,cAAC8uB,GAAD","file":"static/js/1.6e65fcbc.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1wEe_\",\"IconTrigger\":\"Button_IconTrigger__2UBJg\",\"IconModeActive\":\"Button_IconModeActive__3BB17\",\"IconModeNotActive\":\"Button_IconModeNotActive__ekYF8\",\"DrawerButton\":\"Button_DrawerButton__3mmir\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ButtonSeparator\":\"ButtonSeparator_ButtonSeparator__1v1YA\",\"IconSeparator\":\"ButtonSeparator_IconSeparator__1F-6s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-toolbar\":\"ToolbarComponent_App-toolbar__384Ol\",\"App-toolbar-units\":\"ToolbarComponent_App-toolbar-units__2xvim\",\"DrawerButton\":\"ToolbarComponent_DrawerButton__2XrL2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-canvas\":\"CanvasComponent_App-canvas__1SRjy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-status-bar\":\"StatusComponent_App-status-bar__3yjbw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LabelsLayer\":\"labelsLayer_LabelsLayer__13jtP\",\"LabelComponent\":\"labelsLayer_LabelComponent__1n-i4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AboutPopup\":\"AboutPopup_AboutPopup__3A-Ey\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BackDrop\":\"ModalPopup_BackDrop__38gqK\",\"ModalPopup\":\"ModalPopup_ModalPopup__tiHI3\",\"fadeIn\":\"ModalPopup_fadeIn__1kcV2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Main-content\":\"MainComponent_Main-content__1huDY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer-list-toolbar\":\"LayerListToolbar_Layer-list-toolbar__3h7SF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer-edit-form\":\"LayerEditForm_Layer-edit-form__3PKfb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer\":\"LayerListElement_Layer__TTm6c\",\"LayerSelectionBox\":\"LayerListElement_LayerSelectionBox__2y2BJ\",\"LayerSelectionMark\":\"LayerListElement_LayerSelectionMark__1YNk5\",\"LayerNameBox\":\"LayerListElement_LayerNameBox__rdxbt\",\"Layer-displayed\":\"LayerListElement_Layer-displayed__2ITp_\",\"Layer-undisplayed\":\"LayerListElement_Layer-undisplayed__v_ey_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-layers\":\"LayersList_App-layers__W6LER\",\"App-layers-displayed\":\"LayersList_App-layers-displayed__vbZrT\",\"fadeIn\":\"LayersList_fadeIn__1Noko\",\"Open\":\"LayersList_Open__23nbo\",\"Close\":\"LayersList_Close__2pLj6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-aside\":\"AsideComponent_App-aside__3lf4P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DocumentName\":\"DocumentName_DocumentName__TjC-O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-header\":\"HeaderComponent_App-header__3BtxE\",\"App-header-documents-page\":\"HeaderComponent_App-header-documents-page__cbwKd\"};","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Logo\":\"Logo_Logo__LcHr-\",\"App-logo-spin\":\"Logo_App-logo-spin__1AT9j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Navigation\":\"Navigation_Navigation__IIHc3\",\"active\":\"Navigation_active__31kaL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BackDrop\":\"Spinner_BackDrop__aToxg\",\"Loader\":\"Spinner_Loader__1wKrs\",\"load2\":\"Spinner_load2__o7gmt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AuthForm\":\"Signup_AuthForm__1MsC2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AuthForm\":\"Login_AuthForm__2apBs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DocumentComponent\":\"DocumentsComponent_DocumentComponent__1LIYc\",\"DocumentComponentGrid\":\"DocumentsComponent_DocumentComponentGrid__1e_M-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DocumentComponentCell\":\"DocumentComponentCell_DocumentComponentCell__1t_jz\",\"DocumentComponentCellBottom\":\"DocumentComponentCell_DocumentComponentCellBottom__2vO6R\"};","import * as actionTypes from '../actionTypes';\r\n\r\nconst initialState = {\r\n    token: null,\r\n    userId: null,\r\n    username: null,\r\n    error: null,\r\n    loading: false\r\n};\r\n\r\nconst auth = (state=initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.AUTHENTICATION_STARTED:\r\n            return {\r\n                ...state,\r\n                error: null,\r\n                loading: true\r\n            };\r\n        case actionTypes.AUTHENTICATION_SUCCEED:\r\n            return {\r\n                ...state,\r\n                error: null,\r\n                token: action.token,\r\n                userId: action.userId,\r\n                username: action.username,\r\n                loading: false\r\n            };\r\n        case actionTypes.AUTHENTICATION_FAILED:\r\n            return {\r\n                ...state,\r\n                error: action.error,\r\n                token: null,\r\n                userId: null,\r\n                username: null,\r\n                loading: false\r\n            };\r\n        case actionTypes.AUTHENTICATION_LOGOUT:\r\n            return {\r\n                ...state,\r\n                token: null,\r\n                userId: null,\r\n                username: null\r\n            };\r\n        case actionTypes.AUTHENTICATION_SET_USERNAME:\r\n            return {\r\n                ...state,\r\n                username: action.username\r\n            };\r\n        default:\r\n            return state\r\n    }\r\n};\r\n\r\nexport default auth;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\nexport const NEW_STAGE_CREATED = \"NEW_STAGE_CREATED\";\r\nexport const STAGE_RESIZED = \"STAGE_RESIZED\";\r\nexport const NEW_SHAPE_PASTED = \"NEW_SHAPE_PASTED\";\r\nexport const CLEAR_ALL = \"CLEAR_ALL\";\r\nexport const STAGE_UNMOUNTED = \"STAGE_UNMOUNTED\";\r\n\r\n/** Toolbar buttons **/\r\nexport const PAN_BY_DRAG_BUTTON_CLICKED = \"PAN_BY_DRAG_BUTTON_CLICKED\";\r\n// export const SAVE_DOCUMENT_BUTTON_CLICKED = \"SAVE_DOCUMENT_BUTTON_CLICKED\";\r\nexport const MANAGE_CLOUD_STORAGE_BUTTON_CLICKED = \"MANAGE_CLOUD_STORAGE_BUTTON_CLICKED\";\r\n\r\nexport const MEASURE_POINTS_BUTTON_PRESSED = \"MEASURE_POINTS_BUTTON_PRESSED\";\r\nexport const MEASURE_SHAPES_BUTTON_PRESSED = \"MEASURE_SHAPES_BUTTON_PRESSED\";\r\nexport const TOGGLE_ABOUT_POPUP_CLICKED = \"TOGGLE_ABOUT_POPUP_CLICKED\";\r\n// export const CLOSE_ABOUT_POPUP_BUTTON_PRESSED = \"CLOSE_ABOUT_POPUP_BUTTON_PRESSED\";\r\nexport const TOGGLE_UNITS_CLICKED = \"TOGGLE_UNITS_CLICKED\";\r\nexport const TOGGLE_WIDTH_MODE_CLICKED = \"TOGGLE_WIDTH_MODE_CLICKED\";\r\nexport const TOGGLE_DISPLAY_VERTICES_CLICKED = \"TOGGLE_DISPLAY_VERTICES_CLICKED\";\r\nexport const TOGGLE_DISPLAY_LABELS_CLICKED = \"TOGGLE_DISPLAY_LABELS_CLICKED\";\r\nexport const TOGGLE_SHOW_LAYER_LIST_CLICKED = \"TOGGLE_SHOW_LAYER_LIST_CLICKED\";\r\n\r\nexport const MOUSE_MOVED_ON_STAGE = \"MOUSE_MOVED_ON_STAGE\";\r\nexport const MOUSE_DOWN_ON_STAGE = \"MOUSE_DOWN_ON_STAGE\";\r\nexport const MOUSE_UP_ON_STAGE = \"MOUSE_UP_ON_STAGE\";\r\nexport const MOUSE_WHEEL_MOVE_ON_STAGE = \"MOUSE_WHEEL_MOVE_ON_STAGE\";\r\n\r\nexport const MOUSE_ROLL_OVER_SHAPE = \"MOUSE_ROLL_OVER_SHAPE\";\r\nexport const MOUSE_ROLL_OUT_SHAPE = \"MOUSE_ROLL_OUT_SHAPE\";\r\nexport const MOUSE_CLICKED_ON_SHAPE = \"MOUSE_CLICKED_ON_SHAPE\";\r\n\r\nexport const PINCH_DOWN_ON_STAGE = \"PINCH_DOWN_ON_STAGE\";\r\nexport const PINCH_MOVED_ON_STAGE = \"PINCH_MOVED_ON_STAGE\";\r\nexport const PINCH_UP_ON_STAGE = \"PINCH_UP_ON_STAGE\";\r\n\r\n// export const HOME_BUTTON_CLICKED = \"HOME_BUTTON_CLICKED\";\r\nexport const PAN_TO_COORDINATE = \"PAN_TO_COORDINATE\";\r\nexport const PAN_AND_ZOOM_TO_SHAPE = \"PAN_AND_ZOOM_TO_SHAPE\";\r\n\r\nexport const LAYER_LIST_PANEL_PRESSED = \"LAYER_LIST_PANEL_PRESSED\";\r\nexport const ADD_LAYER_BUTTON_PRESSED = \"ADD_LAYER_BUTTON_PRESSED\";\r\nexport const ADD_NEW_LAYER = \"ADD_NEW_LAYER\";\r\nexport const DELETE_LAYER_BUTTON_PRESSED = \"DELETE_LAYER_BUTTON_PRESSED\";\r\nexport const SORT_LAYERS_BUTTON_PRESSED = \"SORT_LAYERS_BUTTON_PRESSED\";\r\nexport const CLEAN_AND_UPDATE_LAYERS = \"CLEAN_AND_UPDATE_LAYERS\";\r\n\r\nexport const TOGGLE_DISPLAY_LAYER_PRESSED = \"TOGGLE_DISPLAY_LAYER_PRESSED\";\r\nexport const TOGGLE_AFFECTED_LAYER_PRESSED=\"TOGGLE_AFFECTED_LAYER_PRESSED\";\r\nexport const OPEN_LAYER_EDIT_FORM_PRESSED = \"OPEN_LAYER_EDIT_FORM_PRESSED\";\r\nexport const SUBMIT_LAYER_EDIT_FORM_PRESSED = \"SUBMIT_LAYER_EDIT_FORM_PRESSED\";\r\nexport const ESCAPE_LAYER_EDIT_FORM_PRESSED = \"ESCAPE_LAYER_EDIT_FORM_PRESSED\";\r\n\r\nexport const LAYERS_LIST_ARROW_DOWN_PRESSED = \"LAYERS_LIST_ARROW_DOWN_PRESSED\";\r\nexport const LAYERS_LIST_ARROW_UP_PRESSED = \"LAYERS_LIST_ARROW_UP_PRESSED\";\r\n\r\n// export const TOGGLE_WATCH_EXPAND_CLICKED = \"TOGGLE_WATCH_EXPAND_CLICKED\";\r\n\r\nexport const FILENAME_LIST_SELECTED = \"FILENAME_LIST_SELECTED\";\r\nexport const INPUT_FILE_LOADED = \"INPUT_FILE_LOADED\";\r\nexport const DATA_FROM_BUFFER_PASTED = \"DATA_FROM_BUFFER_PASTED\";\r\n\r\n/** AABB Distance Measurement Demo **/\r\nexport const AABB_DEMO_URI = \"AABB_DEMO_URI\";\r\nexport const AABB_DEMO_NEXT_DIST_STEP = \"AABB_DEMO_NEXT_DIST_STEP\";\r\nexport const AABB_TREE_NEXT_LEVEL = \"AABB_TREE_NEXT_LEVEL\";\r\n\r\n/** Collision demo **/\r\nexport const COLLISION_DEMO_URI = \"COLLISION_DEMO_URI\";\r\nexport const COLLISION_DEMO_BUTTON_PRESSED = \"COLLISION_DEMO_BUTTON_PRESSED\";\r\n\r\n/** Skeleton recognition demo **/\r\nexport const SKELETON_RECOGNITION_URI = \"SKELETON_RECOGNITION_URI\";\r\nexport const SKELETON_RECOGNITION_BUTTON_PRESSED=\"SKELETON_RECOGNITION_BUTTON_PRESSED\";\r\n\r\nexport const ASYNC_OPERATION_STARTED = \"ASYNC_OPERATION_STARTED\";\r\nexport const ASYNC_OPERATION_ENDED = \"ASYNC_OPERATION_ENDED\";\r\n\r\n/** Documents list **/\r\nexport const REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED = \"REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED\";\r\nexport const REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED = \"REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED\";\r\nexport const REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED = \"REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED\";\r\nexport const REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED = \"REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED\";\r\nexport const DELETE_DOCUMENT_FROM_DATABASE_SUCCEED = \"DELETE_DOCUMENT_FROM_DATABASE_SUCCEED\";\r\nexport const DOCUMENT_SELECTED_FROM_LIST = \"DOCUMENT_SELECTED_FROM_LIST\";\r\nexport const DOCUMENT_NAME_UPDATED = \"DOCUMENT_NAME_UPDATED\";\r\nexport const CLEAR_ALL_BUTTON_CLICKED = \"CLEAR_ALL_BUTTON_CLICKED\";\r\n\r\n/* Authentication */\r\nexport const AUTHENTICATION_STARTED = \"AUTHENTICATION_STARTED\";\r\nexport const AUTHENTICATION_SUCCEED = \"AUTHENTICATION_SUCCEED\";\r\nexport const AUTHENTICATION_FAILED = \"AUTHENTICATION_FAILED\";\r\nexport const AUTHENTICATION_LOGOUT = \"AUTHENTICATION_LOGOUT\";\r\nexport const AUTHENTICATION_SET_USERNAME = \"AUTENTICATION_SET_USERNAME\";\r\n\r\n","/**\r\n * Created by alexanderbol on 01/05/2017.\r\n */\r\n\r\nimport Flatten from 'flatten-js';\r\nlet {Point, Segment, Arc, Polygon} = Flatten;\r\nlet { vector } = Flatten;\r\n\r\n/*\r\nlet debug_str = `+\t\t[0]\t{nrec=27 nalloc=27 h_ind_id=-1 ...} mat_cont_hdr_struc\tmat_cont_struc\r\n    +\t\t[1]\t{pmin=59146400,5973200 pmax=59606001,6438000} mat_cont_lim_struc\tmat_cont_struc\r\n+\t\t[2]\t{nedge=23 nalloc=25 ntop=2 ...} mat_cont_poly_struc\tmat_cont_struc\r\n+\t\t[3]\t{pmin=59146400,5973200 pmax=59606001,6438000} mat_cont_lim_struc\tmat_cont_struc\r\n+\t\t[4]\t{ps=59192738,6363124 pe=59216000,6372800 pc=59216000,6340000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[5]\t{ps=59216000,6372800 pe=59267652,6372800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[6]\t{ps=59267652,6372800 pe=59267652,6307200 pc=59360000,6340000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[7]\t{ps=59267652,6307200 pe=59229586,6307200} mat_seg_struc\tmat_cont_struc\r\n+\t\t[8]\t{ps=59229586,6307200 pe=59212000,6289614} mat_seg_struc\tmat_cont_struc\r\n+\t\t[9]\t{ps=59212000,6289614 pe=59212000,6056386} mat_seg_struc\tmat_cont_struc\r\n+\t\t[10]\t{ps=59212000,6056386 pe=59229586,6038800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[11]\t{ps=59229586,6038800 pe=59469614,6038800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[12]\t{ps=59469614,6038800 pe=59487200,6056386} mat_seg_struc\tmat_cont_struc\r\n+\t\t[13]\t{ps=59487200,6056386 pe=59487200,6100500} mat_seg_struc\tmat_cont_struc\r\n+\t\t[14]\t{ps=59487200,6100500 pe=59434000,6180000 pc=59520000,6180000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[15]\t{ps=59434000,6180000 pe=59552800,6100500 pc=59520000,6180000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[16]\t{ps=59552800,6100500 pe=59552800,6042800} mat_seg_struc\tmat_cont_struc\r\n+\t\t[17]\t{ps=59552800,6042800 pe=59543124,6019538 pc=59520000,6042800 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[18]\t{ps=59543124,6019538 pe=59506462,5982876} mat_seg_struc\tmat_cont_struc\r\n+\t\t[19]\t{ps=59506462,5982876 pe=59483200,5973200 pc=59483200,6006000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[20]\t{ps=59483200,5973200 pe=59216000,5973200} mat_seg_struc\tmat_cont_struc\r\n+\t\t[21]\t{ps=59216000,5973200 pe=59192738,5982876 pc=59216000,6006000 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[22]\t{ps=59192738,5982876 pe=59156076,6019538} mat_seg_struc\tmat_cont_struc\r\n+\t\t[23]\t{ps=59156076,6019538 pe=59146400,6042800 pc=59179200,6042800 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[24]\t{ps=59146400,6042800 pe=59146400,6303200} mat_seg_struc\tmat_cont_struc\r\n+\t\t[25]\t{ps=59146400,6303200 pe=59156076,6326462 pc=59179200,6303200 cw=1} mat_curve_struc\tmat_cont_struc\r\n+\t\t[26]\t{ps=59156076,6326462 pe=59192738,6363124} mat_seg_struc\tmat_cont_struc\r\n`;\r\n*/\r\n\r\nexport class Parser {\r\n    parseToWatchArray(str) {\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n        let watchArray = [];\r\n        for (let line of arrayOfLines) {\r\n            watchArray.push(line.substring(line.indexOf('{')));\r\n        }\r\n        return watchArray;\r\n    }\r\n\r\n    parseToSegment(line) {\r\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\r\n\r\n        let psArr = termArr[0].split('=')[1].split(',');\r\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n\r\n        let peArr = termArr[1].split('=')[1].split(',');\r\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n\r\n        return new Segment(ps, pe);\r\n    }\r\n\r\n    parseToArc(line) {\r\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\r\n\r\n        let psArr = termArr[0].split('=')[1].split(',');\r\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n\r\n        let peArr = termArr[1].split('=')[1].split(',');\r\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n\r\n        let pcArr = termArr[2].split('=')[1].split(',');\r\n        let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\r\n\r\n        let cwStr = termArr[3].split('=')[1];\r\n        let counterClockwise = cwStr === '0' ? true : false;\r\n\r\n        let startAngle = vector(pc,ps).slope;\r\n        let endAngle = vector(pc, pe).slope;\r\n\r\n        if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n            endAngle += 2*Math.PI;\r\n        }\r\n        let r = vector(pc, ps).length;\r\n\r\n        return new Arc(pc, r, startAngle, endAngle, counterClockwise);\r\n    }\r\n\r\n    parseToPolygon(str) {\r\n        let polygon = new Polygon();\r\n        // let mulitystr = debug_str;\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n\r\n        for (let i=0; i < arrayOfLines.length; i++) {\r\n            let line = arrayOfLines[i];\r\n            if (line.search('mat_cont_poly_struc') >= 0) {\r\n                let parenth = line.match(/\\{([^)]+)\\}/)[1];       // string inside {..}\r\n                let termArr = parenth.split(' ');                 // array of terms \"attr=value\"\r\n                let nedgesTerm = termArr[0];                      // \"nedge=nn\"\r\n                let nedgesStr = nedgesTerm.split('=')[1];\r\n                let nedges = parseInt(nedgesStr,10);\r\n\r\n                // Create new face from next #nedges of segments and arcs\r\n                let edges = [];\r\n                for (let j=i+2; j < i+2+nedges; j++) {\r\n                    line = arrayOfLines[j];\r\n                    // let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n                    // let termArr = parenth.split(' ');             // array of terms \"attr=value\"\r\n\r\n                    if (line.search('mat_seg_struc') >= 0) {\r\n                        let segment = this.parseToSegment(line);\r\n                        edges.push(segment);\r\n\r\n                        // let psArr = termArr[0].split('=')[1].split(',');\r\n                        // let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n                        //\r\n                        // let peArr = termArr[1].split('=')[1].split(',');\r\n                        // let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n                        //\r\n                        // edges.push(new Segment(ps, pe));\r\n                    }\r\n                    else if (line.search('mat_curve_struc') >= 0) {\r\n                        let arc = this.parseToArc(line);\r\n                        edges.push(arc);\r\n\r\n                        // let psArr = termArr[0].split('=')[1].split(',');\r\n                        // let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\r\n                        //\r\n                        // let peArr = termArr[1].split('=')[1].split(',');\r\n                        // let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\r\n                        //\r\n                        // let pcArr = termArr[2].split('=')[1].split(',');\r\n                        // let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\r\n                        //\r\n                        // let cwStr = termArr[3].split('=')[1];\r\n                        // let counterClockwise = cwStr === '0' ? true : false;\r\n                        //\r\n                        // let startAngle = vector(pc,ps).slope;\r\n                        // let endAngle = vector(pc, pe).slope;\r\n                        //\r\n                        // if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n                        //     endAngle += 2*Math.PI;\r\n                        // }\r\n                        // let r = vector(pc, ps).length;\r\n                        //\r\n                        // edges.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\r\n                    }\r\n                }\r\n                polygon.addFace(edges);\r\n            }\r\n        }\r\n        return polygon;\r\n    }\r\n\r\n    parseToPoints(str) {\r\n        let points = [];\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n        for (let line of arrayOfLines) {\r\n            if (line.search('point_struc') >= 0) {\r\n                let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\r\n                let pointArr = parenth.split('=')[1].split(',');\r\n                let point = new Point(parseInt(pointArr[0],10), parseInt(pointArr[1],10));\r\n                point.label = line.split(/\\s+/)[1];\r\n                points.push(point);\r\n            }\r\n        }\r\n        return points;\r\n    }\r\n\r\n    parseToSegmentsArcs(str) {\r\n        let shapes = [];\r\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n        for (let line of arrayOfLines) {\r\n            if (line.search('mat_seg_struc') >= 0) {\r\n                let segment = this.parseToSegment(line);\r\n                shapes.push(segment);\r\n            }\r\n            else if (line.search('mat_curve_struc') >= 0) {\r\n                let arc = this.parseToArc(line);\r\n                shapes.push(arc);\r\n            }\r\n        }\r\n        return shapes;\r\n    }\r\n\r\n    parse(str) {\r\n        /* try polygon */\r\n        let polygon = this.parseToPolygon(str);\r\n        if (polygon.edges.size > 0 && polygon.faces.size > 0) {\r\n            return [polygon];\r\n        }\r\n\r\n        /* try array of points */\r\n        let points = this.parseToPoints(str);\r\n        if (points.length > 0) {\r\n            return points;\r\n        }\r\n\r\n        /* try array of segments and arcs */\r\n        let shapes = this.parseToSegmentsArcs(str);\r\n        if (shapes.length > 0) {\r\n            return shapes;\r\n        }\r\n    }\r\n}\r\n\r\n","import * as ActionTypes from \"../actionTypes\";\r\nimport {Parser} from \"../../dataParsers/parser\";\r\n\r\nconst unitsList = [\r\n    {\r\n        name: \"pixels\",\r\n        decimals: 0,\r\n        divisor: 1\r\n    },\r\n    {\r\n        name: \"inch\",\r\n        decimals: 7,\r\n        divisor: 10160000\r\n    },\r\n    {\r\n        name: \"mm\",\r\n        decimals: 6,\r\n        divisor: 400000\r\n    }];\r\n\r\nconst defaultAppState = {\r\n    title: \"Debug Viewer\",\r\n    version: process.env.REACT_APP_VERSION,\r\n    build: \"\",\r\n    units: \"pixels\",\r\n    decimals: 0,\r\n    divisor: 1,\r\n    // bg: \"#F1F1F1\",\r\n    parser: new Parser(),\r\n    widthOn: true,\r\n    displayVertices: false,\r\n    displayLabels: true,\r\n    measurePointsActive: false,\r\n    zoomFactor: undefined,\r\n    originX: undefined,\r\n    originY: undefined,\r\n    showAboutPopup: false,\r\n    importDataToNewLayer: true,       // if false, import data to affected layer\r\n    showSkeletonRecognitionButton: false,\r\n    applySkeletonRecognition: false,\r\n    stage: null,\r\n    showSpinner: false,\r\n    showLayerList: false,\r\n};\r\n\r\nconst app = (state = defaultAppState, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.NEW_STAGE_CREATED:\r\n            return Object.assign({}, state, {\r\n                stage: action.stage,\r\n                zoomFactor: action.stage.zoomFactor * action.stage.resolution,\r\n                originX: action.stage.origin.x,\r\n                originY: action.stage.origin.y,\r\n            });\r\n\r\n        case ActionTypes.STAGE_UNMOUNTED:\r\n            return Object.assign({}, state, {\r\n                stage: null,\r\n                zoomFactor: undefined,\r\n                originX: undefined,\r\n                originY: undefined\r\n            });\r\n\r\n        case ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE:\r\n        case ActionTypes.PAN_AND_ZOOM_TO_SHAPE:\r\n        case ActionTypes.PINCH_MOVED_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                zoomFactor: action.stage.zoomFactor * action.stage.resolution,\r\n                originX: action.stage.origin.x,\r\n                originY: action.stage.origin.y,\r\n            });\r\n        case ActionTypes.MOUSE_MOVED_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                originX: action.stage.origin.x,\r\n                originY: action.stage.origin.y\r\n            });\r\n        case ActionTypes.TOGGLE_UNITS_CLICKED:\r\n            let curUnitsId = unitsList.findIndex(units => state.units === units.name);\r\n            let newUnits = unitsList[(curUnitsId + 1) % 3];\r\n            return Object.assign({}, state, {\r\n                units: newUnits.name,\r\n                decimals: newUnits.decimals,\r\n                divisor: newUnits.divisor\r\n            });\r\n        case ActionTypes.TOGGLE_WIDTH_MODE_CLICKED:\r\n            return Object.assign({}, state, {\r\n                widthOn: !state.widthOn,\r\n                displayVertices: state.widthOn ? state.displayVertices : false\r\n            });\r\n        case ActionTypes.TOGGLE_DISPLAY_VERTICES_CLICKED:\r\n            if (state.displayVertices) {\r\n                return Object.assign({}, state, {\r\n                    displayVertices: false\r\n                });\r\n            }\r\n            else {\r\n                return Object.assign({}, state, {\r\n                    widthOn: false,\r\n                    displayVertices: true\r\n                });\r\n            }\r\n\r\n        case ActionTypes.TOGGLE_DISPLAY_LABELS_CLICKED:\r\n            return Object.assign({}, state, {\r\n                displayLabels: !state.displayLabels\r\n            });\r\n\r\n        case ActionTypes.TOGGLE_ABOUT_POPUP_CLICKED:\r\n            return Object.assign({}, state, {\r\n                showAboutPopup: !state.showAboutPopup\r\n            });\r\n\r\n        // case ActionTypes.CLOSE_ABOUT_POPUP_BUTTON_PRESSED:\r\n        //     return Object.assign({}, state, {\r\n        //         showAboutPopup: false\r\n        //     });\r\n\r\n        case ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED:\r\n            return Object.assign({}, state, {\r\n                measurePointsActive: false\r\n            });\r\n\r\n        case ActionTypes.MEASURE_POINTS_BUTTON_PRESSED:\r\n            return Object.assign({}, state, {\r\n                measurePointsActive: true\r\n            });\r\n        case ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED:\r\n            return Object.assign({}, state, {\r\n                measurePointsActive: false\r\n            });\r\n        case ActionTypes.SKELETON_RECOGNITION_URI:\r\n            return Object.assign({}, state, {\r\n                showSkeletonRecognitionButton: true\r\n            });\r\n        case ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED:\r\n            return Object.assign({}, state, {\r\n                applySkeletonRecognition: true\r\n            });\r\n        case ActionTypes.ASYNC_OPERATION_STARTED:\r\n            return Object.assign({}, state, {\r\n                showSpinner: true\r\n            });\r\n        case ActionTypes.ASYNC_OPERATION_ENDED:\r\n            return Object.assign({}, state, {\r\n                showSpinner: false\r\n            });\r\n        case ActionTypes.AABB_TREE_NEXT_LEVEL:\r\n            return state;\r\n        case ActionTypes.TOGGLE_SHOW_LAYER_LIST_CLICKED:\r\n            return {\r\n                ...state,\r\n                showLayerList: !state.showLayerList\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default app;","\r\nlet defaultStyle = {\r\n    strokeStyle: 1,\r\n    stroke: \"#FF0303\",\r\n    fill: \"#FF0303\",\r\n    alpha: 1.0\r\n};\r\n\r\n/* Class Model represents data model that will be added to layer */\r\nclass Model {\r\n    constructor(geom = undefined, style = undefined, label = \"\") {\r\n        this.geom = geom;\r\n        this.style = style || defaultStyle;\r\n        this.label = label;\r\n    }\r\n\r\n    clone() {\r\n        let model = new Model(this.geom, this.style, this.label);\r\n        return Object.assign(model, this);\r\n    }\r\n\r\n    get box() {\r\n        return this.geom.box;\r\n    }\r\n/*\r\n    static transformPoint(pt, stage) {\r\n        return new Flatten.Point(stage.W2C_X(pt.x), stage.W2C_Y(pt.y));\r\n    }\r\n\r\n    static transformSegment(segment, stage) {\r\n        return new Flatten.Segment(\r\n            Model.transformPoint(segment.ps, stage),\r\n            Model.transformPoint(segment.pe, stage)\r\n        )\r\n    }\r\n\r\n    static transformArc(arc, stage) {\r\n        return new Flatten.Arc(\r\n            Model.transformPoint(arc.pc, stage),\r\n            stage.W2C_Scalar(arc.r),\r\n            arc.startAngle,\r\n            arc.endAngle,\r\n            arc.counterClockwise\r\n        )\r\n    }\r\n\r\n    static transformEdge(shape, stage) {\r\n        if (shape instanceof Flatten.Segment) {\r\n            return Model.transformSegment(shape, stage);\r\n        }\r\n        else if (shape instanceof Flatten.Arc) {\r\n            return Model.transformArc(shape, stage);\r\n        }\r\n    }\r\n\r\n    static transformFace(face, stage) {\r\n        // Get shapes of face as array\r\n        let shapes = [];\r\n        for (let edge of face) {\r\n            shapes.push(edge.shape);\r\n        }\r\n\r\n        // Transform array of edges\r\n        return shapes.map(shape => Model.transformEdge(shape, stage));\r\n    }\r\n\r\n    static transformPolygon(polygon, stage) {\r\n        let newPolygon = new Flatten.Polygon();\r\n        let shapes = [];\r\n        for (let face of polygon.faces) {\r\n            shapes = Model.transformFace(face, stage);\r\n            newPolygon.addFace(shapes);\r\n        }\r\n        return newPolygon;\r\n    }\r\n*/\r\n}\r\n\r\nexport default Model;","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport Flatten from 'flatten-js';\r\n// import { Shape } from '../models/shape';\r\nimport Model from './model';\r\n\r\nclass Layer {\r\n    constructor(stage) {\r\n        // super();\r\n        // cannot define Layer as extension of PlanarSet due to bug in compiler ?\r\n        this.stage = stage;\r\n        this.shapes = [];         // new Flatten.PlanarSet();\r\n        this.name = \"\";\r\n        this.color = \"\";\r\n        this.title = \"\";\r\n        this.displayed = false;\r\n        this.edited = false;\r\n        this.affected = false;\r\n    }\r\n\r\n    clone() {\r\n        let layer = new Layer(this.stage);\r\n        return Object.assign(layer, this);\r\n    }\r\n\r\n    add(shape) {\r\n        if (shape instanceof Model) {\r\n            this.shapes.push(shape);       // add(shape)\r\n        }\r\n        else {\r\n            let geom = shape;\r\n            let newShape = new Model(geom, {}, shape.label) // , this.stage);\r\n            this.shapes.push(newShape);     // add(newShape);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    addShapesArray(shapes) {\r\n        for (let shape of shapes) {\r\n            this.add(shape);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    get box() {\r\n        let box = new Flatten.Box();\r\n        for (let shape of this.shapes) {\r\n            box = box.merge(shape.box);\r\n        }\r\n        return box;\r\n    }\r\n\r\n    get center() {\r\n        let box = this.box;\r\n        return new Flatten.Point((box.xmin + box.xmax)/2, (box.ymin + box.ymax)/2);\r\n    }\r\n\r\n    toggleDisplayed(color) {\r\n        let displayed = !this.displayed;\r\n        return Object.assign(this.clone(),\r\n            {\r\n                displayed : displayed,\r\n                color: color\r\n            });\r\n    }\r\n\r\n    setAffected(affected) {\r\n        this.affected = affected;\r\n        return this;\r\n        // return Object.assign(this.clone(),\r\n        //     {\r\n        //         affected : affected\r\n        //     });\r\n    }\r\n\r\n    setEdited(edited) {\r\n        return Object.assign(this.clone(),\r\n            {\r\n                edited : edited\r\n            });\r\n    }\r\n\r\n    setNameAndTitle(name,title) {\r\n        return Object.assign(this.clone(),\r\n            {\r\n                name : name,\r\n                title: title,\r\n                edited: false\r\n            });\r\n    }\r\n\r\n    setAlpha() {\r\n        for(let shape of this.shapes) {\r\n            shape.alpha = this.displayed ? 1 : 0;\r\n        }\r\n        return this.shapes;\r\n    }\r\n\r\n    // toggleExpanded(shapeToggle) {\r\n    //     for(let shape of this.shapes) {\r\n    //         if (shape === shapeToggle) {\r\n    //             shape.expanded = !shape.expanded;\r\n    //         }\r\n    //     }\r\n    //     return this;\r\n    // }\r\n\r\n    toJSON() {\r\n        return {\r\n            name: this.name,\r\n            title: this.title,\r\n            shapes: JSON.stringify(this.shapes, null, ' ')\r\n        };\r\n    }\r\n}\r\n\r\nexport default Layer;","/**\r\n * Created by alexanderbol on 20/04/2017.\r\n */\r\n\r\nimport Layer from '../models/layer';\r\n\r\nconst colors = [\r\n    \"#FF0303\",\r\n    \"#4AA403\",\r\n    \"#540080\",\r\n    \"#FFFF40\",\r\n    \"#FF0080\",\r\n    \"#AED424\",\r\n    \"#545400\",\r\n    \"#FFA980\",\r\n    \"#A95480\",\r\n    \"#A9A9FF\",\r\n    \"#00FF00\",\r\n    \"#FFEE76\",\r\n    \"#A40576\",\r\n    \"#4385C8\",\r\n    \"#1CC826\",\r\n    \"#BDBD00\",\r\n    \"#48316E\",\r\n    \"#14616E\",\r\n    \"#8040BD\",\r\n    \"#DC7676\",\r\n    \"#924845\",\r\n    \"#A90000\",\r\n    \"#FFA900\"\r\n];\r\n\r\nclass Layers {\r\n\r\n    static newLayer(stage, layers) {\r\n        let layer = new Layer(stage);\r\n        layer.name = Layers.getNewName(layers);\r\n        if (layers.length === 0) { // first layer\r\n            // layer.color = Layers.getNextColor(layers);\r\n            layer.displayed = false;\r\n            layer.affected = false;\r\n        }\r\n        return layer;\r\n    }\r\n\r\n    static get defaultName() {\r\n        return \"layer\";\r\n    }\r\n\r\n    static getNewName(layers) {\r\n        let name = Layers.defaultName;\r\n        let inc = 1;\r\n        let comparator = (layer) => layer.name === name;\r\n        while (layers.find(comparator) ) {\r\n            name = Layers.defaultName + inc;\r\n            inc++;\r\n        }\r\n        return name;\r\n    }\r\n\r\n    static getAffected(layers) {\r\n        return layers.find((lay) => lay.affected);\r\n    }\r\n\r\n    static setAffected(layers, layer) {\r\n        let currentAffectedLayer = Layers.getAffected(layers);\r\n        if (currentAffectedLayer) {\r\n            currentAffectedLayer.affected = false;\r\n        }\r\n        layer.affected = true;\r\n    }\r\n\r\n    static getNextColor(layers) {\r\n        let color = \"\";\r\n        for (let col of colors) {\r\n            if (!layers.find((layer) =>\r\n                layer.displayed && layer.color === col)) {\r\n                color = col;\r\n                break;\r\n            }\r\n        }\r\n        return color;\r\n    }\r\n\r\n    static delete(layers, layer) {\r\n        let index = layers.findIndex((l) => l === layer);\r\n        let newLayers = layers.filter(l => l !== layer);\r\n        if (index > 0) {\r\n            newLayers[index-1].affected = true;\r\n            if (newLayers[index-1].color === \"\") {\r\n                newLayers[index - 1].color = Layers.getNextColor(newLayers);\r\n            }\r\n            newLayers[index-1].displayed = true;\r\n        }\r\n        return newLayers;\r\n        // another option to delete from array:\r\n        // const newLayers = [...layers]\r\n        // return newLayers.splice( index, 1);\r\n    }\r\n\r\n    static sort(layers) {\r\n        let newLayers = layers.slice();\r\n        newLayers.sort( function(l1, l2) {\r\n            let name1 = l1.name.toUpperCase();\r\n            let name2 = l2.name.toUpperCase();\r\n            if (name1 < name2) {\r\n                return -1;\r\n            }\r\n            if (name1 > name2) {\r\n                return 1;\r\n            }\r\n            return 0;\r\n        });\r\n        return newLayers;\r\n    }\r\n\r\n    static toJSON(layers) {\r\n        return layers.map( layer => layer.toJSON() );\r\n    }\r\n}\r\n\r\nexport default Layers;","import * as ActionTypes from \"../actionTypes\";\r\nimport Layers from \"../../models/layers\";\r\n\r\nconst layers = (state = [], action) => {\r\n    let affectedLayer = state.find(layer => layer.affected);\r\n    let affectedLayerId = state.findIndex(layer => layer.affected);\r\n    let newLayer;\r\n\r\n    switch (action.type) {\r\n        case ActionTypes.ADD_LAYER_BUTTON_PRESSED:\r\n            newLayer = Layers.newLayer(action.stage, state);\r\n            return [...state, newLayer];\r\n\r\n        case ActionTypes.ADD_NEW_LAYER:\r\n            return [...state, action.layer];\r\n\r\n        case ActionTypes.DELETE_LAYER_BUTTON_PRESSED:\r\n            if (affectedLayer) {\r\n                return Layers.delete(state, affectedLayer);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n\r\n        case ActionTypes.CLEAR_ALL_BUTTON_CLICKED:\r\n            return [];\r\n\r\n        case ActionTypes.SORT_LAYERS_BUTTON_PRESSED:\r\n            return Layers.sort(state);\r\n\r\n        case ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED:\r\n            let color = \"\";\r\n            if (!action.layer.displayed) {\r\n                color = Layers.getNextColor(state);\r\n                if (color === \"\") return;  // no free colors\r\n            }\r\n            return state.map((layer) => {\r\n                if (layer !== action.layer) {\r\n                    // if action.layer will be undisplayed,\r\n                    // it cannot become affected, then\r\n                    // keep affected on this layer\r\n                    if (action.layer.displayed) {\r\n                        return layer;\r\n                    }\r\n                    else {\r\n                        return layer.setAffected(false);\r\n                    }\r\n                }\r\n                else {\r\n                    let newLayer = layer.toggleDisplayed(color);\r\n                    newLayer.affected = newLayer.displayed;\r\n                    return newLayer;\r\n                }\r\n                // return layer.toggleDisplayed(color);\r\n            });\r\n\r\n        case ActionTypes.TOGGLE_AFFECTED_LAYER_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer !== action.layer) {\r\n                    return layer.setAffected(false);\r\n                }\r\n                else {\r\n                    return layer.setAffected(!layer.affected);\r\n                }\r\n            });\r\n\r\n        // case ActionTypes.NEW_SHAPE_PASTED:\r\n        //     return state.map((layer) => {\r\n        //         if (layer.affected) {\r\n        //             return layer.addShapesArray(action.shapesArray);\r\n        //         }\r\n        //         else {\r\n        //             return layer;\r\n        //         }\r\n        //     });\r\n\r\n        case ActionTypes.OPEN_LAYER_EDIT_FORM_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer !== affectedLayer) {\r\n                    return layer;\r\n                }\r\n                else {\r\n                    return layer.setEdited(true);\r\n                }\r\n            });\r\n\r\n        case ActionTypes.SUBMIT_LAYER_EDIT_FORM_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer.edited) {\r\n                    return layer.setNameAndTitle(action.newLayer.name, action.newLayer.title);\r\n                }\r\n                else {\r\n                    return layer;\r\n                }\r\n            });\r\n\r\n        case ActionTypes.ESCAPE_LAYER_EDIT_FORM_PRESSED:\r\n            return state.map((layer) => {\r\n                if (layer.edited) {             // !== action.layer) {\r\n                    return layer.setEdited(false);\r\n                }\r\n                else {\r\n                    return layer;\r\n                }\r\n            });\r\n\r\n        case ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED:\r\n            if (affectedLayerId === state.length - 1) {\r\n                return state;\r\n            }\r\n            else {\r\n\r\n                let nextLayer = state[affectedLayerId + 1];\r\n\r\n                return state.map(layer => {\r\n                    if (layer === affectedLayer) {\r\n                        let newCurLayer = layer.toggleDisplayed(\"\");\r\n                        newCurLayer.affected = false;\r\n                        return newCurLayer;\r\n                    }\r\n                    else if (layer === nextLayer) {\r\n                        let color = affectedLayer.color;\r\n                        let newNextLayer = layer.toggleDisplayed(color);\r\n                        newNextLayer.affected = true;\r\n                        return newNextLayer;\r\n                    }\r\n                    else {\r\n                        return layer;\r\n                    }\r\n                });\r\n            }\r\n\r\n        case ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED:\r\n            if (affectedLayerId === 0) {\r\n                return state;\r\n            }\r\n            else {\r\n                let nextLayer = state[affectedLayerId - 1];\r\n\r\n                return state.map(layer => {\r\n                    if (layer === affectedLayer) {\r\n                        let newCurLayer = layer.toggleDisplayed(\"\");\r\n                        newCurLayer.affected = false;\r\n                        return newCurLayer;\r\n                    }\r\n                    else if (layer === nextLayer) {\r\n                        let newNextLayer = layer.toggleDisplayed(affectedLayer.color);\r\n                        newNextLayer.displayed = true;\r\n                        newNextLayer.affected = true;\r\n                        return newNextLayer;\r\n                    }\r\n                    else {\r\n                        return layer;\r\n                    }\r\n                });\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default layers;","import * as ActionTypes from \"../actionTypes\";\r\n\r\nconst defaultMouseState = {\r\n    x: 0,\r\n    y: 0,\r\n    startX: undefined,\r\n    startY: undefined,\r\n    touchPoints: undefined\r\n};\r\n\r\nconst mouse = (state = defaultMouseState, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.MOUSE_MOVED_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                x: action.x,\r\n                y: action.y\r\n            });\r\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                startX: action.x,\r\n                startY: action.y\r\n            });\r\n        case ActionTypes.MOUSE_UP_ON_STAGE:\r\n            return Object.assign({}, state, {\r\n                startX: undefined,\r\n                startY: undefined\r\n            });\r\n\r\n        case ActionTypes.PINCH_DOWN_ON_STAGE: {\r\n            return {\r\n                ...state,\r\n                touchPoints: [\r\n                    {x: action.x1, y: action.y1},\r\n                    {x: action.x2, y: action.y2}\r\n                ]\r\n            }\r\n        }\r\n        // case ActionTypes.PINCH_MOVED_ON_STAGE: {\r\n        //     return {\r\n        //         ...state,\r\n        //         touchPoints: [\r\n        //             {x: action.x1, y: action.y1},\r\n        //             {x: action.x2, y: action.y2}\r\n        //         ]\r\n        //     }\r\n        // }\r\n        case ActionTypes.PINCH_UP_ON_STAGE: {\r\n            return {\r\n                ...state,\r\n                touchPoints: undefined\r\n            }\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default mouse;","import * as ActionTypes from \"../actionTypes\";\r\nimport Flatten from \"flatten-js\";\r\n\r\nconst defaultMeasureShapesTool = {\r\n    measureShapesActive: false,\r\n    measureShapesFirstClick: true,\r\n    hoveredShape: null,\r\n    firstMeasuredShape: null,\r\n    secondMeasuredShape: null,\r\n    firstMeasuredLayer: null,\r\n    secondMeasuredLayer: null,\r\n    distance: undefined,\r\n    shortestSegment: null\r\n};\r\n\r\nconst is_mobile = window.mobilecheck();\r\n\r\nconst measureShapesTool = (state = defaultMeasureShapesTool, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED:\r\n            return Object.assign({}, defaultMeasureShapesTool, {\r\n                measureShapesActive: true\r\n            });\r\n        case ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED:\r\n            return Object.assign({}, defaultMeasureShapesTool);\r\n\r\n        case ActionTypes.MEASURE_POINTS_BUTTON_PRESSED:\r\n            return Object.assign({}, defaultMeasureShapesTool);\r\n\r\n        case ActionTypes.MOUSE_ROLL_OVER_SHAPE:\r\n            return Object.assign({}, state, {\r\n                hoveredShape: state.measureShapesActive ? action.shape : null\r\n            });\r\n        case ActionTypes.MOUSE_ROLL_OUT_SHAPE:\r\n            return Object.assign({}, state, {\r\n                hoveredShape: null\r\n            });\r\n        case ActionTypes.MOUSE_CLICKED_ON_SHAPE:\r\n            if (!state.measureShapesActive) {\r\n                return state;\r\n            }\r\n            // measureShapesActive\r\n\r\n            if (state.measureShapesFirstClick) {\r\n                return Object.assign({}, state, {\r\n                    firstMeasuredShape: action.shape,\r\n                    firstMeasuredLayer: action.layer,\r\n                    secondMeasuredShape: null,\r\n                    secondMeasuredLayer: null,\r\n                    measureShapesFirstClick: false,\r\n                    distance: undefined,\r\n                    shortestSegment: null\r\n                })\r\n            }\r\n            else {    // second click\r\n                if (action.shape === state.firstMeasuredShape) {\r\n                    return state;  // second click on the same shape\r\n                }\r\n\r\n                let shape1 = state.firstMeasuredShape.geom;\r\n                let shape2 = action.shape.geom;\r\n                let distance, shortestSegment;\r\n                // if (shape1 instanceof Flatten.Polygon && shape2 instanceof Flatten.Polygon) {\r\n                //     [distance, shortestSegment] = Flatten.Distance.polygon2polygon(shape1, shape2);\r\n                // }\r\n                // else {\r\n                [distance, shortestSegment] = Flatten.Distance.distance(shape1, shape2);\r\n                // }\r\n\r\n\r\n                return Object.assign({}, state, {\r\n                    secondMeasuredShape: action.shape,\r\n                    secondMeasuredLayer: action.layer,\r\n                    measureShapesFirstClick: true,\r\n                    distance: distance,\r\n                    shortestSegment: shortestSegment\r\n                });\r\n            }\r\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n            if (state.hoveredShape || is_mobile) {\r\n                return state\r\n            }\r\n            else {\r\n                return Object.assign({}, state, {\r\n                    measureShapesFirstClick: true,\r\n                    firstMeasuredShape: null,\r\n                    firstMeasuredLayer: null,\r\n                    secondMeasuredShape: null,\r\n                    secondMeasuredLayer: null,\r\n                    distance: undefined,\r\n                    shortestSegment: null\r\n                });\r\n            }\r\n\r\n        case ActionTypes.DELETE_LAYER_BUTTON_PRESSED:\r\n            if (action.layer === state.firstMeasuredLayer ||\r\n                action.layer === state.secondMeasuredLayer) {\r\n                return Object.assign({}, defaultMeasureShapesTool);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n\r\n        case ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED:\r\n            if (action.layer.displayed &&\r\n                (action.layer === state.firstMeasuredLayer ||\r\n                    action.layer === state.secondMeasuredLayer)) {\r\n                return Object.assign({}, defaultMeasureShapesTool);\r\n            }\r\n            else {\r\n                return state;\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default measureShapesTool;","import * as ActionTypes from \"../actionTypes\";\r\n\r\nconst documentDefaultState = {\r\n    id: undefined,\r\n    name: \"\",\r\n    owner: \"Alex Bol\",\r\n    lastUpdated: undefined\r\n};\r\n\r\nconst cloudStorageDefaultState = {\r\n    document: documentDefaultState,\r\n    documentsList: {}\r\n};\r\n\r\nfunction isUpToDate(stateDocumentsList, actionDocumentsList) {\r\n    if (actionDocumentsList === null || actionDocumentsList === undefined)\r\n        return true;\r\n\r\n    if (Object.keys(stateDocumentsList).length !== Object.keys(actionDocumentsList).length)\r\n        return false;\r\n    for (let key in stateDocumentsList) {\r\n        if (!(actionDocumentsList.hasOwnProperty(key) && (stateDocumentsList[key].lastUpdated !== actionDocumentsList[key].lastUpdated))) {\r\n            return false\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nconst cloudStorage = (state = cloudStorageDefaultState, action) => {\r\n    switch (action.type) {\r\n        case ActionTypes.REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED:\r\n            return {\r\n                ...state,\r\n                document: {\r\n                    id: action.id,\r\n                    name: action.name,\r\n                    owner: action.owner,\r\n                    lastUpdated: action.lastUpdated\r\n                }\r\n            };\r\n\r\n        case ActionTypes.REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED:\r\n            return {\r\n                ...state,\r\n                document: {\r\n                    id: action.id,\r\n                    name: action.name,\r\n                    owner: action.owner,\r\n                    lastUpdated: action.lastUpdated\r\n                }\r\n            };\r\n\r\n        case ActionTypes.REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED:\r\n            return {\r\n                ...state,\r\n                document: {\r\n                    ...state.document,\r\n                    lastUpdated: action.lastUpdated\r\n                }\r\n            };\r\n\r\n        case ActionTypes.DOCUMENT_NAME_UPDATED:\r\n            return {\r\n                ...state,\r\n                document: {\r\n                    ...state.document,\r\n                    name: action.name\r\n                }\r\n            };\r\n\r\n        case ActionTypes.DELETE_DOCUMENT_FROM_DATABASE_SUCCEED:\r\n            let { [action.id]: document, ...newList } = state.documentsList;\r\n            return {\r\n                ...state,\r\n                document: state.document.id === action.id ? documentDefaultState : state.document,\r\n                documentsList: newList\r\n            };\r\n\r\n        case ActionTypes.DOCUMENT_SELECTED_FROM_LIST:\r\n            return {\r\n                ...state,\r\n                document: action.document\r\n            };\r\n\r\n        case ActionTypes.CLEAR_ALL_BUTTON_CLICKED:\r\n            return {\r\n                ...state,\r\n                document: documentDefaultState\r\n            };\r\n\r\n        case ActionTypes.REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED:\r\n            return isUpToDate(state.documentsList, action.documentsList) ?\r\n                state :\r\n            {\r\n                ...state,\r\n                documentsList: action.documentsList\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default cloudStorage","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport {combineReducers} from 'redux';\r\n\r\nimport auth from \"./reducers/auth\";\r\nimport app from \"./reducers/app\";\r\nimport layers from \"./reducers/layers\";\r\nimport mouse from \"./reducers/mouse\";\r\nimport measureShapesTool from \"./reducers/measureShapesTool\";\r\nimport cloudStorage from \"./reducers/cloudStorage\";\r\n\r\nconst reducer = combineReducers({\r\n    auth,\r\n    app,\r\n    layers,\r\n    cloudStorage,\r\n    measureShapesTool,\r\n    mouse\r\n});\r\n\r\nexport default reducer;\r\n","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: \"https://debug-viewer.firebaseio.com/\"\r\n});\r\n\r\nexport default instance;\r\n","import * as ActionTypes from \"../actionTypes\";\r\nimport axios from \"../../axios-database\";\r\n\r\nconst defaultName = \"document\";\r\n\r\nexport const getNewName = (documents) => {\r\n    let name = defaultName;\r\n    let inc = 1;\r\n    let comparator = (document) => document.name === name;\r\n    while ( Object.values(documents).find(comparator) ) {\r\n        name = defaultName + inc;\r\n        inc++;\r\n    }\r\n    return name;\r\n};\r\n\r\n// export const updateDocumentsList = (documents) => {\r\n//     return {\r\n//         type: ActionTypes.DOCUMENTS_LIST_LOADED,\r\n//         documents: documents\r\n//     }\r\n// };\r\n\r\nexport const updateDocumentInDatabase = ( id, payload) => {\r\n    return axios.put(`/documents/${id}.json`, payload);\r\n};\r\n\r\nexport const addDocumentToDatabase = ( payload) => {\r\n    return axios.post('/documents.json', payload);\r\n};\r\n\r\nexport const fetchDocumentFromDatabase = (id) => {\r\n    return axios.get('/documents/' + id + '.json');\r\n};\r\n\r\nexport const deleteDocumentFromDatabase = (id) => {\r\n    return axios.delete('/documents/' + id + '.json');\r\n};\r\n\r\nexport const fetchDocumentsFromDatabase = (token, userId) => {\r\n    const queryParams = '?auth=' + token + '&orderBy=\"userId\"&equalTo=\"' + userId + '\"';\r\n    return axios.get('/documents.json' + queryParams);\r\n};\r\n\r\nexport const registerDocumentAddedToDatabase = (id, lastUpdated) => {\r\n    return {\r\n        type: ActionTypes.REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED,\r\n        id: id,\r\n        lastUpdated: lastUpdated\r\n    }\r\n};\r\n\r\nexport const updateDocumentState = (lastUpdated) => {\r\n    return {\r\n        type: ActionTypes.REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED,\r\n        lastUpdated: lastUpdated\r\n    }\r\n};\r\n\r\nexport const updateDocumentName = (name) => {\r\n    return {\r\n        type: ActionTypes.DOCUMENT_NAME_UPDATED,\r\n        name\r\n    }\r\n};\r\n\r\nexport const clearCurrentDocument = () => {\r\n    return {\r\n        type: ActionTypes.CLEAR_ALL_BUTTON_CLICKED,\r\n    }\r\n};\r\n\r\nexport const requestFetchDocumentFromDatabaseSucceed = (id, name, owner, lastUpdated) => {\r\n    return {\r\n        type: ActionTypes.REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED,\r\n        id,\r\n        name,\r\n        owner,\r\n        lastUpdated\r\n    }\r\n};\r\n\r\nexport const deleteDocumentFromDatabaseSucceed = (id) => {\r\n    return {\r\n        type: ActionTypes.DELETE_DOCUMENT_FROM_DATABASE_SUCCEED,\r\n        id\r\n    }\r\n};\r\n\r\nexport const updateCurrentDocument = (document) => {\r\n    return {\r\n        type: ActionTypes.DOCUMENT_SELECTED_FROM_LIST,\r\n        document\r\n    }\r\n};\r\n\r\nexport const requestFetchDocumentsFromDatabaseSucceed = (documentsList) => {\r\n    return {\r\n        type: ActionTypes.REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED,\r\n        documentsList\r\n    }\r\n};\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport FontAwesome from \"react-fontawesome\";\r\nimport classes from \"./Button.module.css\";\r\n\r\nconst button = (props) => {\r\n    let iconStyle;\r\n    switch (props.type) {\r\n        case \"trigger\":\r\n            iconStyle = classes.IconTrigger;\r\n            break;\r\n        case \"mode\":\r\n            iconStyle = props.active ? classes.IconModeActive : classes.IconModeNotActive;\r\n            break;\r\n        default:\r\n            iconStyle = classes.IconTrigger;\r\n            break;\r\n    }\r\n    // eslint-disable-next-line\r\n    let buttonStyle = props.mobileOnly ? classes[\"Button\",\"DrawerButton\"] : classes[\"Button\"];\r\n    return (\r\n        <button title={props.title} onClick={props.onClick} className={buttonStyle}>\r\n            <FontAwesome\r\n                name={props.iconName}\r\n                size='2x'\r\n                className={iconStyle}\r\n            />\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default button;","import React from 'react';\r\nimport FontAwesome from \"react-fontawesome\";\r\nimport classes from \"./ButtonSeparator.module.css\";\r\n\r\nconst buttonSeparator = () => {\r\n    return (\r\n        <div className={classes.ButtonSeparator}>\r\n            <FontAwesome\r\n                name='ellipsis-v'\r\n                size='2x'\r\n                className={classes.IconSeparator}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default buttonSeparator;","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport Button from '../../../components/UI/Button/Button';\r\nimport Separator from '../../../components/UI/ButtonSeparator/ButtonSeparator';\r\n\r\nimport classes from './ToolbarComponent.module.css';\r\nimport '@fortawesome/fontawesome-free/css/all.css';\r\n\r\nclass ToolbarComponent extends Component {\r\n    openJobButtonClicked = () => this.refs.browseFiles.click();\r\n\r\n    render() {\r\n        return (\r\n            <div className={classes[\"App-toolbar\"]}>\r\n                <Button type=\"trigger\" mobileOnly title=\"Show layers list\" iconName='list' onClick={this.props.onLayerListButtonClicked} />\r\n\r\n                {/*<h4>Toolbar</h4>*/}\r\n                <Button type=\"trigger\" title=\"Open files\" iconName='folder-open'\r\n                        onClick={this.openJobButtonClicked}\r\n                />\r\n\r\n                {/*<button title=\"Open file\" onClick={this.openJobButtonClicked}>*/}\r\n                {/*/!*<img src={open} alt=\"open\" />*!/*/}\r\n                {/*<FontAwesome*/}\r\n                {/*name='folder-open'*/}\r\n                {/*size='2x'*/}\r\n                {/*style={{color:\"grey\"}}*/}\r\n                {/*/>*/}\r\n                {/*</button>*/}\r\n\r\n                <input style={{fontSize: 16, marginTop: 5, marginBottom: 5, display: \"none\"}}\r\n                       type=\"file\" id=\"browseFiles\" ref=\"browseFiles\" name=\"files[]\" multiple\r\n                       onChange={this.props.onFileSelected}\r\n                />\r\n\r\n                <Button type=\"trigger\" title=\"Save document on cloud\" iconName='save'\r\n                        onClick={this.props.onSaveDocumentButtonClicked}\r\n                />\r\n\r\n                <Button type=\"trigger\" title=\"Clean current document\" iconName='broom'\r\n                        onClick={this.props.onClearAllButtonClicked}\r\n                />\r\n\r\n                <Separator/>\r\n\r\n                <Button type=\"trigger\" title=\"Zoom and pan to home view\" iconName='home'\r\n                        onClick={this.props.onHomeButtonPressed}\r\n                />\r\n\r\n                <Separator/>\r\n\r\n                <Button type=\"mode\" title=\"Pan by drag\" iconName='hand-paper'\r\n                        active={!this.props.measurePointsActive}\r\n                        onClick={this.props.onPanByDragPressed}\r\n                />\r\n\r\n                <Button type=\"mode\" title=\"Measure distance\" iconName='hand-lizard'\r\n                        active={this.props.measurePointsActive}\r\n                        onClick={this.props.onMeasurePointsButtonPressed}\r\n                />\r\n\r\n                <Separator/>\r\n\r\n                <Button type=\"trigger\" title=\"Measure distance between shapes\" iconName='ruler'\r\n                        onClick={this.props.onMeasureBetweenShapesButtonPressed}\r\n                />\r\n\r\n                <Button type=\"trigger\" title=\"Display solid or wire\" iconName='fill-drip'\r\n                        onClick={this.props.onToggleWidthModePressed}\r\n                />\r\n\r\n                <Button type=\"trigger\" title=\"Display vertices on/off\" iconName='draw-polygon'\r\n                        onClick={this.props.onToggleVerticesPressed}\r\n                />\r\n\r\n                <Button type=\"trigger\" title=\"Display labels on/off\" iconName='tag'\r\n                        onClick={this.props.onToggleLabelsPressed}\r\n                />\r\n\r\n                {this.props.showSkeletonRecognitionButton ? (\r\n                    <Button type=\"trigger\" title=\"Skeleton Recognition Demo\" iconName='tree'\r\n                            onClick={this.props.onSkeletonRecognitionButtonPressed}\r\n                    />\r\n                ) : null}\r\n\r\n                <Separator/>\r\n\r\n                <button className={classes[\"App-toolbar-units\"]}\r\n                        onClick={this.props.onUnitClicked}\r\n                >\r\n                    {this.props.units}\r\n                </button>\r\n\r\n                <Separator/>\r\n\r\n                <Button type=\"trigger\" title=\"About\" iconName='info'\r\n                        onClick={this.props.onShowAboutPopupPressed}\r\n                />\r\n\r\n                <Separator/>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ToolbarComponent;","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\nimport Flatten from 'flatten-js';\r\nlet createjs = window.createjs;\r\n\r\nclass Stage extends createjs.Stage {\r\n    constructor(canvas) {\r\n        super(canvas);\r\n\r\n        createjs.Touch.enable(this);\r\n        this.mouseMoveOutside = false;   // true;\r\n        // this.enableDOMEvents(false);\r\n        this.enableMouseOver(20);\r\n\r\n        if (this.canvas.clientWidth > 0 && this.canvas.clientHeight > 0) {\r\n            this.canvas.width = this.canvas.clientWidth;\r\n            this.canvas.height = this.canvas.clientHeight;\r\n            // this.updateViewport(this.canvas.width, this.canvas.height);\r\n        }\r\n        this.origin = {x: this.canvas.width / 2, y: this.canvas.height / 2};\r\n        this.resolution = 0.00001;          // MM 2 Pixels when zoomFactor = 1;\r\n        this.zoomFactor = 1.0;\r\n\r\n        this.oldOrigin = {x: undefined, y: undefined};   // used by pan\r\n        // used by zoom by pinch\r\n        this.oldZoomFactor = undefined;\r\n        this.pinchAnchorX = undefined;\r\n        this.pinchAnchorY = undefined;\r\n        this.pinchStarted = false;\r\n    }\r\n\r\n    get box() {\r\n        let minX = this.C2W_X(0);\r\n        let minY = this.C2W_Y(this.canvas.height);\r\n        let maxX = this.C2W_X(this.canvas.width);\r\n        let maxY = this.C2W_Y(0);\r\n\r\n        return ( new Flatten.Box(minX, minY, maxX, maxY) );\r\n    }\r\n\r\n    clone() {\r\n        let stage = new Stage(this.canvas);\r\n        return Object.assign(stage, this);\r\n    }\r\n\r\n    add(shape) {\r\n        this.addChild(shape);\r\n        return this;\r\n    }\r\n\r\n    scalingFactor() {\r\n        return this.resolution * this.zoomFactor;\r\n    }\r\n\r\n    C2W_Scalar(scalar) {\r\n        return (scalar / this.scalingFactor());\r\n    }\r\n\r\n    W2C_Scalar(scalar) {\r\n        return (this.scalingFactor() * scalar);\r\n    }\r\n\r\n    C2W_X(canvasX) {\r\n        return ((canvasX - this.origin.x) / this.scalingFactor());\r\n    }\r\n\r\n    C2W_Y(canvasY) {\r\n        return ((this.origin.y - canvasY) / this.scalingFactor());\r\n    }\r\n\r\n    W2C_X(worldX) {\r\n        return (this.scalingFactor() * worldX + this.origin.x);\r\n    }\r\n\r\n    W2C_Y(worldY) {\r\n        return (this.origin.y - this.scalingFactor() * worldY);\r\n    }\r\n\r\n    W2C(point) {\r\n        return {x: this.W2C_X(point.x), y: this.W2C_Y(point.y)}\r\n    }\r\n\r\n    panTo(newOrigin) {\r\n        this.origin = {x: newOrigin.x, y: newOrigin.y}\r\n    }\r\n\r\n    panBy(deltaX, deltaY) {\r\n        this.origin = {\r\n            x: this.origin.x + deltaX,\r\n            y: this.origin.y + deltaY\r\n        }\r\n    }\r\n\r\n    // zoom by 10% each time\r\n    zoomIn(ratio) {\r\n        let curRatio = ratio || 1.1;\r\n        this.zoomFactor = Math.min(10000000, curRatio * this.zoomFactor);\r\n    }\r\n\r\n    zoomOut(ratio) {\r\n        let curRatio = ratio || 1.1;\r\n        this.zoomFactor = Math.max(0.001, this.zoomFactor / curRatio);\r\n    }\r\n\r\n    // ZoomIn/Out + \"Focus follows mouse\"\r\n    zoom(focusX, focusY, bIn, ratio) {\r\n        let worldX = this.C2W_X(focusX);    // world coordinate of mouse focus before zoom\r\n        let worldY = this.C2W_Y(focusY);\r\n\r\n        bIn ? this.zoomIn(ratio) : this.zoomOut(ratio);\r\n\r\n        let newFocusX = this.W2C_X(worldX); // canvas coordinate after zoom\r\n        let newFocusY = this.W2C_Y(worldY);\r\n\r\n        this.panBy(focusX - newFocusX, focusY - newFocusY);\r\n\r\n        return [newFocusX, newFocusY];\r\n    }\r\n\r\n    zoomByMouse(focusX, focusY, bIn, ratio) {\r\n        this.zoom(focusX, focusY, bIn, ratio);\r\n    }\r\n\r\n    zoomToLimits(width, height) {\r\n        // prevent zero division in case of single point box\r\n        if (width === 0) width = 400000;\r\n        if (height === 0) height = 400000;\r\n        let resolution = Math.min(this.canvas.width / (1.1*width), this.canvas.height / (1.1*height));\r\n        let zoomFactor = resolution / this.resolution;\r\n        let ratio = zoomFactor / this.zoomFactor;\r\n        let bIn = true; //ratio > 1;\r\n\r\n        let focusX = this.canvas.width/2;\r\n        let focusY = this.canvas.height/2;\r\n        this.zoom(focusX, focusY, bIn, ratio);\r\n    }\r\n\r\n    resize() {\r\n        // this.origin.x = this.canvas.width / 2;\r\n        // this.origin.y = this.canvas.height / 2;\r\n        if (this.canvas.clientWidth > 0 && this.canvas.clientHeight > 0) {\r\n            this.canvas.width = this.canvas.clientWidth;\r\n            this.canvas.height = this.canvas.clientHeight;\r\n        }\r\n    }\r\n\r\n    // drawSomething() {\r\n    //     let shape = new Shape();\r\n    //     shape.graphics.beginFill('red').drawRect(0, 0, 20, 20);\r\n    //     this.addChild(shape);\r\n    //     this.update();\r\n    // }\r\n\r\n    panByMouseStart() {\r\n        this.oldOrigin.x = this.origin.x;\r\n        this.oldOrigin.y = this.origin.y;\r\n        this.zoomByPinchStop();\r\n    }\r\n\r\n    panByMouseMove(dx, dy) {\r\n        if (this.pinchStarted) return;\r\n        if (dx !== undefined && dy !== undefined &&\r\n            this.oldOrigin.x !== undefined && this.oldOrigin.y !== undefined) {\r\n            this.origin = {\r\n                    x: this.oldOrigin.x + dx,\r\n                    y: this.oldOrigin.y + dy\r\n                };\r\n        }\r\n    }\r\n\r\n    panByMouseStop() {\r\n        this.oldOrigin.x = undefined;\r\n        this.oldOrigin.y = undefined;\r\n    }\r\n\r\n    panToCoordinate(x, y) {\r\n        let canvasX = this.W2C_X(x);\r\n        let canvasY = this.W2C_Y(y);\r\n\r\n        let dx = this.canvas.width / 2 - canvasX;\r\n        let dy = this.canvas.height / 2 - canvasY;\r\n        this.panBy(dx, dy);\r\n    }\r\n\r\n    zoomByPinchStart(canvasX, canvasY) {\r\n        this.oldZoomFactor = this.zoomFactor;\r\n        this.pinchAnchorX = this.C2W_X(canvasX);\r\n        this.pinchAnchorY = this.C2W_Y(canvasY);\r\n        this.pinchStarted = true;\r\n        this.panByMouseStop();\r\n    }\r\n\r\n    zoomByPinchMove(canvasX, canvasY, ratio) {\r\n        this.zoomFactor = ratio * this.oldZoomFactor;\r\n        this.origin = {\r\n            x: canvasX - this.scalingFactor() * this.pinchAnchorX,\r\n            y: canvasY + this.scalingFactor() * this.pinchAnchorY\r\n        }\r\n    }\r\n\r\n    zoomByPinchStop() {\r\n        this.oldZoomFactor = undefined;\r\n        this.pinchAnchorX = undefined;\r\n        this.pinchAnchorY = undefined;\r\n        this.pinchStarted = false;\r\n    }\r\n\r\n    clear() {\r\n        this.canvas.getContext('2d').clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n}\r\n\r\nexport default Stage;\r\n","import * as ActionTypes from '../actionTypes';\r\n\r\nexport const registerStage = (stage) => {\r\n    return {\r\n        type: ActionTypes.NEW_STAGE_CREATED,\r\n        stage: stage\r\n    }\r\n};\r\n\r\nexport const handleMouseDown = (stage, x, y) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_DOWN_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y\r\n    }\r\n};\r\n\r\nexport const handleMouseUp = (stage, x, y) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_UP_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y\r\n    }\r\n};\r\n\r\nexport const handleMouseMove = (stage, x, y, dx, dy) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_MOVED_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y,\r\n        dx: dx,\r\n        dy: dy\r\n    }\r\n};\r\n\r\nexport const handleMouseWheelMove = (stage, x, y, delta) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE,\r\n        stage: stage,\r\n        x: x,\r\n        y: y,\r\n        delta: delta\r\n    }\r\n};\r\n\r\nexport const handlePinchDown = (stage, touchPoints) => {\r\n    return {\r\n        type: ActionTypes.PINCH_DOWN_ON_STAGE,\r\n        stage: stage,\r\n        x1: touchPoints[0].x,\r\n        y1: touchPoints[0].y,\r\n        x2: touchPoints[1].x,\r\n        y2: touchPoints[1].y\r\n    }\r\n};\r\n\r\nexport const handlePinchMove = (stage, touchPoints) => {\r\n    return {\r\n        type: ActionTypes.PINCH_MOVED_ON_STAGE,\r\n        stage: stage,\r\n        x1: touchPoints[0].x,\r\n        y1: touchPoints[0].y,\r\n        x2: touchPoints[1].x,\r\n        y2: touchPoints[1].y\r\n    }\r\n};\r\n\r\nexport const handlePinchUp = (stage) => {\r\n    return {\r\n        type: ActionTypes.PINCH_UP_ON_STAGE,\r\n        stage\r\n    }\r\n};\r\n\r\n","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport styles from \"./CanvasComponent.module.css\";\r\nimport Stage from '../../../models/stage';\r\nimport { connect } from \"react-redux\";\r\n// import * as ActionTypes from \"../../../store/actionTypes\";\r\nimport * as actions from '../../../store/actions/stageActions';\r\n\r\nclass CanvasComponent extends Component {\r\n    canvasElement = React.createRef();\r\n\r\n    handleMouseMove = (event) => {\r\n        this.props.stage.canvas.focus();\r\n        if (!event.nativeEvent.touches || event.nativeEvent.touches.length === 1) {\r\n            this.props.handleMouseMove(\r\n                this.props.stage,\r\n                event.stageX,\r\n                event.stageY,\r\n                this.props.mouse.startX ? event.stageX - this.props.mouse.startX : undefined,\r\n                this.props.mouse.startY ? event.stageY - this.props.mouse.startY : undefined\r\n            );\r\n        }\r\n        else if (event.nativeEvent.touches && event.nativeEvent.touches.length === 2) {\r\n            let touchPoints = [\r\n                {x: event.nativeEvent.touches[0].clientX, y: event.nativeEvent.touches[0].clientY},\r\n                {x: event.nativeEvent.touches[1].clientX, y: event.nativeEvent.touches[1].clientY},\r\n            ];\r\n            this.props.handlePinchMove(this.props.stage, touchPoints);\r\n        }\r\n\r\n        // if (this.props.stage.pinchStarted) {\r\n        //     this.props.handleSecondTouchMove(this.props.stage, event.stageX, event.stageY);\r\n        // }\r\n        // else {\r\n        //     this.props.handleMouseMove(\r\n        //         this.props.stage,\r\n        //         event.stageX,\r\n        //         event.stageY,\r\n        //         this.props.mouse.startX ? event.stageX - this.props.mouse.startX : undefined,\r\n        //         this.props.mouse.startY ? event.stageY - this.props.mouse.startY : undefined\r\n        //     );\r\n        // }\r\n    };\r\n\r\n    handleMouseDown = (event) => {\r\n        // if (event.pointerID === -1 || event.pointerID === 0) {\r\n        if (!event.nativeEvent.touches || event.nativeEvent.touches.length === 1) {\r\n            this.props.handleMouseDown(this.props.stage, event.stageX, event.stageY);\r\n        }\r\n        else if (event.nativeEvent.touches && event.nativeEvent.touches.length === 2) {\r\n            let touchPoints = [\r\n                {x: event.nativeEvent.touches[0].clientX, y: event.nativeEvent.touches[0].clientY},\r\n                {x: event.nativeEvent.touches[1].clientX, y: event.nativeEvent.touches[1].clientY},\r\n            ];\r\n            this.props.handlePinchDown(this.props.stage, touchPoints);\r\n        }\r\n    };\r\n\r\n    handleMouseUp = (event) => {\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        if (!event.nativeEvent.touches || event.nativeEvent.touches.length === 1) {\r\n            this.props.handleMouseUp(this.props.stage);\r\n        }\r\n        else if (event.nativeEvent.touches && event.nativeEvent.touches.length === 2) {\r\n            this.props.handlePinchUp(this.props.stage);\r\n        }\r\n    };\r\n\r\n    handleMouseLeave = (event) => {   // nothing works except click\r\n        this.props.stage.canvas.blur();\r\n        document.body.focus();\r\n    };\r\n\r\n    handleMouseWheel = (event) => {\r\n        /*event.preventDefault();*/\r\n\r\n        let delta = event.detail || event.wheelDelta;\r\n        if (delta !== 0) {\r\n            this.props.handleMouseWheelMove(this.props.stage, event.offsetX, event.offsetY, delta);\r\n        }\r\n    };\r\n\r\n    handleMouseWheelFox = (event) => {\r\n        /*event.preventDefault();*/\r\n        if (event.detail !== 0) {\r\n            this.props.handleMouseWheelMove(this.props.stage, event.layerX, event.layerY, -event.detail);\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        let stage = new Stage(this.canvasElement.current);\r\n\r\n        // stage.setClearColor(\"#FFFFFF\");\r\n        // stage.update();\r\n\r\n        stage.on(\"stagemousedown\", this.handleMouseDown);\r\n        stage.on(\"stagemousemove\", this.handleMouseMove);\r\n        // stage.on(\"click\", this.handleMouseDown);\r\n        stage.on(\"stagemouseup\", this.handleMouseUp);\r\n        stage.on(\"mouseleave\", this.handleMouseLeave);\r\n        stage.canvas.addEventListener(\"mousewheel\", this.handleMouseWheel, {passive: true});\r\n        stage.canvas.addEventListener(\"DOMMouseScroll\", this.handleMouseWheelFox, {passive: true});\r\n\r\n        this.props.registerStage(stage);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <canvas\r\n                tabIndex=\"1\"\r\n                ref={this.canvasElement}\r\n                id=\"mainCanvas\"\r\n                className={styles[\"App-canvas\"]}\r\n                width=\"100\"\r\n                height=\"100\"\r\n            >\r\n            </canvas>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        stage: state.app.stage,\r\n        mouse: state.mouse\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        registerStage: (stage) => dispatch(actions.registerStage(stage)),\r\n        handleMouseDown: (stage, x, y) => dispatch(actions.handleMouseDown(stage, x, y)),\r\n        handleMouseUp: (stage, x, y) => dispatch(actions.handleMouseUp(stage, x, y)),\r\n        handleMouseMove: (stage, x, y, dx, dy) => dispatch(actions.handleMouseMove(stage, x, y, dx, dy)),\r\n        handleMouseWheelMove: (stage, x, y, delta) => dispatch(actions.handleMouseWheelMove(stage, x, y, delta)),\r\n        handlePinchDown: (stage, touchPoints) => dispatch(actions.handlePinchDown(stage, touchPoints)),\r\n        handlePinchMove: (stage, touchPoints) => dispatch(actions.handlePinchMove(stage, touchPoints)),\r\n        handlePinchUp: (stage) => dispatch(actions.handlePinchUp(stage))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CanvasComponent);\r\n","/**\r\n * Created by alexanderbol on 17/06/2017.\r\n */\r\nimport React from 'react';\r\nimport styles from './StatusComponent.module.css';\r\n\r\nconst StatusComponent = () => {\r\n    return (\r\n        <div className={styles[\"App-status-bar\"]}>\r\n            <div>\r\n                <h5>\r\n                    &nbsp;\r\n                </h5>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StatusComponent;","import React, {Component} from 'react';\r\n// import Utils from \"../utils\";\r\n\r\nclass StageComponent extends Component {\r\n    // shouldComponentUpdate useless because always returns \"true\",\r\n    // Don't know why, maybe because of children?\r\n    // ----------------------------------------------------------\r\n    // shouldComponentUpdate(nextProps, nextState) {\r\n    //     if (Utils.is_equal(this.props, nextProps)) {\r\n    //         return false;\r\n    //     }\r\n    //     return true;\r\n    // }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.stage.canvas && this.props.stage.canvas.getContext('2d')) {\r\n\r\n            let origin = this.props.stage.origin;\r\n            let zoomFactor = this.props.stage.zoomFactor*this.props.stage.resolution;\r\n            this.props.stage.setTransform(origin.x, origin.y, zoomFactor, -zoomFactor);\r\n\r\n            this.props.stage.update();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.onStageUnmounted();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                {this.props.children}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default StageComponent;","import Flatten from 'flatten-js';\r\n\r\n// import * as createjs from '@createjs/easeljs';\r\nlet createjs = window.createjs;\r\nlet {Point, Segment, Circle, Arc, Polygon, Box} = Flatten;\r\n\r\n/* Provide conversion methods from FlattenJS objects to CreateJS Graphics */\r\nexport function graphics(shape, style = undefined) {\r\n    if (shape instanceof Point) {\r\n        return graphics_point(shape, style);\r\n    }\r\n    if (shape instanceof Segment) {\r\n        return graphics_segment(shape, style);\r\n    }\r\n    if (shape instanceof Arc) {\r\n        return graphics_arc(shape, style);\r\n    }\r\n    if (shape instanceof Circle) {\r\n        return graphics_circle(shape, style);\r\n    }\r\n    if (shape instanceof Box) {\r\n        return graphics_box(shape, style);\r\n    }\r\n    if (shape instanceof Polygon) {\r\n        return graphics_polygon(shape, style);\r\n    }\r\n    return null;\r\n}\r\n\r\n// Point.prototype.graphics = function(style) {\r\nfunction graphics_point(point, style) {\r\n    let radius = (style && style.radius) ? style.radius : 3;\r\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\r\n    let graphics = new createjs.Graphics();\r\n    graphics.fill = graphics.beginFill(fill).command;\r\n    graphics.circle = graphics.drawCircle(point.x, point.y, radius).command;\r\n    return graphics;\r\n};\r\n\r\n// Segment.prototype.graphics = function(style) {\r\nfunction graphics_segment(segment, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle !== undefined ? style.strokeStyle : 2;\r\n    let ignoreScale = style && style.ignoreScale !== undefined ? style.ignoreScale : true;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,1,0,10,ignoreScale)\r\n        .beginStroke(stroke)\r\n        .moveTo(segment.ps.x, segment.ps.y)\r\n        .lineTo(segment.pe.x, segment.pe.y)\r\n        .endStroke();\r\n};\r\n\r\n// Arc.prototype.graphics = function(style) {\r\nfunction graphics_arc(arc, style) {\r\n    // let startAngle = 2 * Math.PI - this.startAngle;\r\n    // let endAngle =  2 * Math.PI - this.endAngle;\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 2;\r\n    let ignoreScale = style && style.ignoreScale !== undefined ? style.ignoreScale : true;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,1,0,10,ignoreScale)\r\n        .beginStroke(stroke)\r\n        .arc(arc.pc.x, arc.pc.y, arc.r, arc.startAngle, arc.endAngle, !arc.counterClockwise)\r\n        .endStroke();\r\n};\r\n\r\n// Circle.prototype.graphics = function(style) {\r\nfunction graphics_circle(circle, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 2;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    // graphics.setStrokeStyle(2).beginStroke(\"black\").beginFill(\"red\").drawCircle(pcx, pcy, r);\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,0,0,10,true)\r\n        .beginStroke(stroke)\r\n        .drawCircle(circle.pc.x, circle.pc.y, circle.r)\r\n        .endStroke();\r\n};\r\n\r\n// Box.prototype.graphics = function(style) {\r\nfunction graphics_box(box, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\r\n    let stroke = style && style.stroke ? style.stroke : \"black\";\r\n    // graphics.setStrokeStyle(2).beginStroke(\"black\").beginFill(\"red\").drawCircle(pcx, pcy, r);\r\n    return graphics\r\n        .setStrokeStyle(strokeStyle,0,0,10,true)\r\n        .beginStroke(stroke)\r\n        .drawRect(box.xmin, box.ymin, box.xmax-box.xmin, box.ymax-box.ymin);\r\n};\r\n\r\nfunction setGraphicsEdgeSegment(graphics, segment) {\r\n    graphics.lineTo(segment.pe.x, segment.pe.y);\r\n}\r\n\r\nfunction setGraphicsEdgeArc(graphics, arc) {\r\n    // let startAngle = 2 * Math.PI - arc.startAngle;\r\n    // let endAngle = 2 * Math.PI - arc.endAngle;\r\n    graphics.arc(arc.pc.x, arc.pc.y, arc.r, arc.startAngle, arc.endAngle, !arc.counterClockwise);\r\n}\r\n\r\nfunction setGraphicsEdge(graphics, edge) {\r\n    if (edge.shape instanceof Segment) {\r\n        setGraphicsEdgeSegment(graphics, edge.shape);\r\n    }\r\n    else if (edge.shape instanceof Arc) {\r\n        setGraphicsEdgeArc(graphics, edge.shape);\r\n    }\r\n}\r\n\r\nfunction setGraphicsFace(graphics, face) {\r\n    let ps = face.first.start;\r\n    graphics.moveTo(ps.x, ps.y);\r\n\r\n    for (let edge of face) {\r\n        setGraphicsEdge(graphics, edge);\r\n    }\r\n}\r\n\r\n// Polygon.prototype.graphics = function(style) {\r\nfunction graphics_polygon(polygon, style) {\r\n    let graphics = new createjs.Graphics();\r\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\r\n    let stroke = style && style.stroke ? style.stroke : \"#FF0303\";\r\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\r\n    graphics.setStrokeStyle(strokeStyle,0,0,10,true);\r\n    graphics.stroke = graphics.beginStroke(stroke).command;\r\n    graphics.fill = graphics.beginFill(fill).command;\r\n\r\n    for (let face of polygon.faces) {\r\n        setGraphicsFace(graphics, face);\r\n    }\r\n\r\n    graphics.endStroke();\r\n    return graphics;\r\n};\r\n\r\n","const Utils = {\r\n    is_equal: (obj1, obj2) => {\r\n        let equal = true;\r\n        for (let key of Object.keys(obj2)) {\r\n            if (obj2[key] !== obj1[key]) {\r\n                equal = false;\r\n                break;\r\n            }\r\n        }\r\n        return equal;\r\n    }\r\n};\r\n\r\nexport default Utils;","/**\r\n * Created by alexanderbol on 19/06/2017.\r\n */\r\n\r\nimport {Component} from 'react';\r\n// import * as createjs from '@createjs/easeljs';\r\nimport {graphics} from '../../../../models/graphics';\r\nimport Utils from '../../../../models/utils';\r\n\r\nlet createjs = window.createjs;\r\nexport class ShapeComponent extends Component {\r\n    constructor(params) {\r\n        super();\r\n\r\n        this.shape = new createjs.Shape();\r\n        params.stage.addChild(this.shape);\r\n\r\n        this.vertexShapes = [];\r\n\r\n        for (let vertex of params.model.geom.vertices) {\r\n            let vertexShape = new createjs.Shape();\r\n            vertexShape.geom = vertex;   // augment Shape with geom struct\r\n            vertexShape.mouseEnabled = false;\r\n            params.stage.addChild(vertexShape);\r\n            this.vertexShapes.push(vertexShape);\r\n        }\r\n    }\r\n\r\n    handleMouseOver = (event) => {\r\n        this.props.onMouseOver(this.props.model);\r\n    };\r\n\r\n    handleMouseOut = (event) => {\r\n        this.props.onMouseOut();\r\n    };\r\n\r\n    handleClick = (event) => {\r\n        this.props.onClick(this.props.model, this.props.layer);\r\n    };\r\n\r\n    redrawVertices(stroke, fill, alpha) {\r\n        let stage = this.props.stage;\r\n\r\n        for (let vertexShape of this.vertexShapes) {\r\n            let vertex = vertexShape.geom;\r\n            if (vertexShape.graphics.isEmpty()) {\r\n                vertexShape.graphics = graphics(vertex,   // vertex.graphics({\r\n                    {\r\n                        stroke: stroke,     // this.props.color,\r\n                        fill: fill,\r\n                        radius: 3. / (stage.zoomFactor * stage.resolution)\r\n                    });\r\n            }\r\n            else {\r\n                vertexShape.graphics.circle.radius = 3. / (stage.zoomFactor * stage.resolution);\r\n                vertexShape.graphics.fill.style = fill;\r\n            }\r\n            vertexShape.alpha = alpha;\r\n        }\r\n    }\r\n\r\n    redraw() {\r\n        // Draw shape\r\n        let stage = this.props.stage;\r\n        let color = (this.props.hovered || this.props.selected) ? \"black\" : this.props.color;\r\n        let alpha = (this.props.hovered || this.props.selected) ? 1.0 : 0.6;\r\n        let widthOn = this.props.widthOn;\r\n\r\n        let strokeStyle = this.props.model.geom.aperture ? this.props.model.geom.aperture : undefined;\r\n        let fill = (widthOn && !this.props.displayVertices) ? this.props.color : \"white\";\r\n\r\n        if (this.shape.graphics.isEmpty()) {\r\n            this.shape.graphics = graphics(this.props.model.geom,{\r\n                strokeStyle: strokeStyle,\r\n                ignoreScale: true,\r\n                stroke: color,\r\n                fill: fill,\r\n                radius: 3. / (stage.zoomFactor * stage.resolution)\r\n            });\r\n\r\n            // this.skeletonShape = new createjs.Shape();\r\n            // this.skeletonShape.graphics = this.props.model.geom.graphics({\r\n            //     strokeStyle: 1,\r\n            //     ignoreScale: true,\r\n            //     stroke: color,\r\n            //     fill: fill,\r\n            //     radius: 3. / (stage.zoomFactor * stage.resolution)\r\n            // });\r\n            // this.skeletonShape.alpha = 1;\r\n            // this.props.stage.addChild(this.skeletonShape);\r\n        }\r\n        else {\r\n            if (this.shape.graphics.stroke) this.shape.graphics.stroke.style = color;\r\n            if (this.shape.graphics.fill) this.shape.graphics.fill.style = fill;\r\n            if (this.shape.graphics.circle) this.shape.graphics.circle.radius =\r\n                3. / (stage.zoomFactor * stage.resolution);\r\n        }\r\n        this.shape.alpha = this.props.displayed ? alpha : 0.0;\r\n\r\n        // let box = this.props.model.geom.box;\r\n        // this.shape.cache(box.xmin, box.ymin, box.xmax - box.xmin, box.ymax - box.ymin);\r\n\r\n        // Draw vertices\r\n        alpha = this.props.displayed && this.props.displayVertices ? 1.0 : 0.0;\r\n        this.redrawVertices(color, color, alpha);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.shape.on(\"mouseover\", this.handleMouseOver);\r\n        this.shape.on(\"mouseout\", this.handleMouseOut);\r\n        this.shape.on(\"click\", this.handleClick);\r\n\r\n        // this.shape.mouseEnabled = false;\r\n\r\n        this.redraw();\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if (Utils.is_equal(this.props, nextProps)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.redraw();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.shape.off(\"mouseover\", this.handleMouseOver);\r\n        this.shape.off(\"mouseout\", this.handleMouseOut);\r\n        this.shape.off(\"click\", this.handleClick);\r\n        this.props.stage.removeChild(this.shape);\r\n        this.shape.graphics.clear();\r\n        for (let vertexShape of this.vertexShapes) {\r\n            this.props.stage.removeChild(vertexShape);\r\n        }\r\n        this.vertexShapes = [];\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * Created by alexanderbol on 19/06/2017.\r\n */\r\n\r\nimport {Component} from 'react';\r\n// import * as createjs from '@createjs/easeljs';\r\nimport '../../../../models/graphics';\r\nimport Utils from '../../../../models/utils';\r\n\r\nlet createjs = window.createjs;\r\n\r\nexport class ImageComponent extends Component {\r\n    handleMouseOver = (event) => {\r\n        this.props.onMouseOver(this.props.model);\r\n    };\r\n\r\n    handleMouseOut = (event) => {\r\n        this.props.onMouseOut();\r\n    };\r\n\r\n    handleClick = (event) => {\r\n        this.props.onClick(this.props.model, this.props.layer);\r\n    };\r\n\r\n    redraw() {\r\n        // Draw shape\r\n        let alpha = 1; // (this.props.hovered || this.props.selected) ? 1.0 : 0.6;\r\n        this.bitmap.alpha = this.props.displayed ? alpha : 0.0;\r\n\r\n        let width = this.props.model.geom.width;\r\n        let ratio = this.bitmap.image.naturalWidth/this.bitmap.image.naturalHeight;\r\n        let scaleX = width/this.bitmap.image.naturalWidth; // 1. / (stage.zoomFactor * stage.resolution);\r\n        let scaleY = width/(this.bitmap.image.naturalHeight*ratio);\r\n        let tx = this.props.model.geom.center.x; // stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n        let ty = this.props.model.geom.center.y; // -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n\r\n        this.bitmap.setTransform(tx, ty, scaleX, -scaleY);\r\n\r\n        this.bitmap.regX = this.bitmap.image.naturalWidth/2;\r\n        this.bitmap.regY = this.bitmap.image.naturalHeight/2;\r\n\r\n        // let box = this.state.polygon.geom.box;\r\n        // this.shape.cache(box.xmin, box.ymin, box.xmax - box.xmin, box.ymax - box.ymin);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const img = new Image();\r\n        img.onload = () => {\r\n            this.bitmap = new createjs.Bitmap(img);\r\n            this.props.stage.addChild(this.bitmap);\r\n\r\n            // this.bitmap.on(\"mouseover\", this.handleMouseOver);\r\n            // this.bitmap.on(\"mouseout\", this.handleMouseOut);\r\n            // this.bitmap.on(\"click\", this.handleClick);\r\n\r\n            // this.shape.mouseEnabled = false;\r\n            this.redraw();\r\n        };\r\n        img.src = this.props.model.geom.uri;\r\n    }\r\n\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if (Utils.is_equal(this.props, nextProps)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.redraw();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // this.bitmap.off(\"mouseover\", this.handleMouseOver);\r\n        // this.bitmap.off(\"mouseout\", this.handleMouseOut);\r\n        // this.bitmap.off(\"click\", this.handleClick);\r\n\r\n        this.props.stage.removeChild(this.bitmap);\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport {ShapeComponent} from './graphics/shapeComponent';\r\nimport {ImageComponent} from \"./graphics/imageComponent\";\r\n\r\nexport class LayerComponent extends Component {\r\n    render() {\r\n        return (\r\n            this.props.layer.shapes.map((shape, index) => {\r\n                return shape.geom.uri ? (\r\n                    <ImageComponent\r\n                        key={index}\r\n                        stage={this.props.stage}\r\n                        layer={this.props.layer}\r\n                        model={shape}\r\n                        displayed={this.props.layer.displayed}\r\n                        hovered={shape === this.props.hoveredShape}\r\n                        selected={\r\n                            shape === this.props.firstMeasuredShape ||\r\n                            shape === this.props.secondMeasuredShape\r\n                        }\r\n                        color={this.props.layer.color}\r\n                        widthOn={this.props.widthOn}\r\n                        displayLabels={this.props.displayLabels}\r\n                        zoomFactor={this.props.zoomFactor}\r\n                        onMouseOver={this.props.onMouseOver}\r\n                        onMouseOut={this.props.onMouseOut}\r\n                        onClick={this.props.onClick}\r\n                    />\r\n                    ) : (\r\n                    <ShapeComponent\r\n                        key={index}\r\n                        stage={this.props.stage}\r\n                        layer={this.props.layer}\r\n                        model={shape}\r\n                        displayed={this.props.layer.displayed}\r\n                        hovered={shape === this.props.hoveredShape}\r\n                        selected={\r\n                            shape === this.props.firstMeasuredShape ||\r\n                            shape === this.props.secondMeasuredShape\r\n                        }\r\n                        color={this.props.layer.color}\r\n                        widthOn={this.props.widthOn}\r\n                        displayVertices={this.props.displayVertices}\r\n                        zoomFactor={this.props.zoomFactor}\r\n                        onMouseOver={this.props.onMouseOver}\r\n                        onMouseOut={this.props.onMouseOut}\r\n                        onClick={this.props.onClick}\r\n                    /> )\r\n                }\r\n            )\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport classes from '../LabelsLayerComponent/labelsLayer.module.css';\r\n\r\nconst labelComponent = ( {stage, shape} ) => {\r\n    let center = shape.geom.center || shape.geom;  // Point has no method center\r\n    let left = stage.canvas.offsetLeft + stage.W2C_X(center.x) + 6;\r\n    let top = stage.canvas.offsetTop + stage.W2C_Y(center.y) - 4;\r\n    let inside = left > stage.canvas.offsetLeft && left < stage.canvas.offsetLeft + stage.canvas.width &&\r\n        top > stage.canvas.offsetTop && top < stage.canvas.height;\r\n\r\n    return inside ? (\r\n        <div style={{position:\"absolute\", left:left+\"px\", top: top+\"px\"}} className={classes.LabelComponent}>\r\n            <h5>{shape.label}</h5>\r\n        </div>\r\n    ) : null;\r\n};\r\n\r\nexport default labelComponent;","import React from 'react';\r\nimport LabelComponent from '../domelements/labelComponent';\r\n\r\nconst labelsLayerComponent = ({stage, layer, displayLabels}) => {\r\n    return (layer.displayed && displayLabels) ? (\r\n        layer.shapes.map((shape, index) => {\r\n                return (shape.label && shape.label.trim() !== \"\") ? (\r\n                    <LabelComponent\r\n                        key={index}\r\n                        stage={stage}\r\n                        shape={shape}\r\n                    />) : null;\r\n            }\r\n        )\r\n    ) : null;\r\n};\r\n\r\nexport default labelsLayerComponent;","import React, {Component} from 'react';\r\nimport {LayerComponent} from \"./layerComponent\";\r\nimport LabelsLayerComponent from \"./LabelsLayerComponent/labelsLayerComponent\";\r\nimport Layers from \"../../../models/layers\";\r\n\r\nclass LayersComponent extends Component {\r\n    componentDidMount() {\r\n        if (this.props.layers.length > 0 && this.props.stage) {\r\n            let affectedLayer = Layers.getAffected(this.props.layers);\r\n            if (affectedLayer) {\r\n                this.props.setHomeView(this.props.stage, affectedLayer);\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        return this.props.layers.map((layer) =>\r\n            <React.Fragment key={layer.name}>\r\n                <LayerComponent\r\n                    stage={this.props.stage}\r\n                    layer={layer}\r\n                    color={layer.color}\r\n                    displayed={layer.displayed}\r\n                    displayVertices={this.props.displayVertices}\r\n                    displayLabels={this.props.displayLabels}\r\n                    widthOn={this.props.widthOn}\r\n                    hoveredShape={this.props.hoveredShape}\r\n                    firstMeasuredShape={this.props.firstMeasuredShape}\r\n                    secondMeasuredShape={this.props.secondMeasuredShape}\r\n                    zoomFactor={this.props.zoomFactor}\r\n                    onMouseOver={this.props.onMouseOver}\r\n                    onMouseOut={this.props.onMouseOut}\r\n                    onClick={this.props.onClick}\r\n                />\r\n                <LabelsLayerComponent\r\n                    stage={this.props.stage}\r\n                    layer={layer}\r\n                    displayed={layer.displayed}\r\n                    displayLabels={this.props.displayLabels}\r\n\r\n                />\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LayersComponent;\r\n","import * as ActionTypes from '../actionTypes';\r\n\r\nexport const resizeStage = () => {\r\n    return {\r\n        type: ActionTypes.STAGE_RESIZED\r\n    }\r\n};\r\n\r\nexport const destroyStage = () => {\r\n    return {\r\n        type: ActionTypes.STAGE_UNMOUNTED\r\n    }\r\n};\r\n\r\nexport const toggleUnits = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_UNITS_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleWidthMode = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_WIDTH_MODE_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleDisplayVertices = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_DISPLAY_VERTICES_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleDisplayLabels = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_DISPLAY_LABELS_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleAboutPopup = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_ABOUT_POPUP_CLICKED\r\n    }\r\n};\r\n\r\n// export const closeAboutPopup = () => {\r\n//     return {\r\n//         type: ActionTypes.CLOSE_ABOUT_POPUP_BUTTON_PRESSED\r\n//     }\r\n// };\r\n\r\nexport const toggleMeasureBetweenPoints = () => {\r\n    return {\r\n        type: ActionTypes.MEASURE_POINTS_BUTTON_PRESSED\r\n    }\r\n};\r\n\r\nexport const toggleMeasureBetweenShapes = () => {\r\n    return {\r\n        type: ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED\r\n    }\r\n};\r\n\r\nexport const applySkeletonRecognition = () => {\r\n    return {\r\n        type: ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED\r\n    }\r\n};\r\n\r\nexport const handleFileSelect = (files, stage, layers) => {\r\n    return {\r\n        type: ActionTypes.FILENAME_LIST_SELECTED,\r\n        files,\r\n        stage,\r\n        layers\r\n    }\r\n};\r\n\r\nexport const setHomeView = (stage, shape) => {\r\n    return {\r\n        type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n        stage,\r\n        shape\r\n    }\r\n};\r\n\r\nexport const togglePanByDrag = () => {\r\n    return {\r\n        type: ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED\r\n    }\r\n};\r\n\r\nexport const handleMouseRollOverShape = (shape) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_ROLL_OVER_SHAPE,\r\n        shape\r\n    }\r\n};\r\n\r\nexport const handleMouseRollOutShape = () => {\r\n    return {\r\n        type: ActionTypes.MOUSE_ROLL_OUT_SHAPE\r\n    }\r\n};\r\n\r\nexport const handleClickOnShape = (shape, layer) => {\r\n    return {\r\n        type: ActionTypes.MOUSE_CLICKED_ON_SHAPE,\r\n        shape,\r\n        layer\r\n    }\r\n};\r\n\r\nexport const asyncOperationStarted = () => {\r\n    return {\r\n        type: ActionTypes.ASYNC_OPERATION_STARTED\r\n    }\r\n};\r\n\r\nexport const asyncOperationEnded = () => {\r\n    return {\r\n        type: ActionTypes.ASYNC_OPERATION_ENDED\r\n    }\r\n};\r\n\r\nexport const openDocumentOnCloud = () => {\r\n    return {\r\n        type: ActionTypes.MANAGE_CLOUD_STORAGE_BUTTON_CLICKED\r\n    }\r\n};\r\n\r\nexport const toggleLayerList = () => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_SHOW_LAYER_LIST_CLICKED\r\n    }\r\n};\r\n\r\n\r\n","import * as ActionTypes from '../actionTypes';\r\n\r\nexport const addEmptyLayer = (stage) => {\r\n    return {\r\n        type: ActionTypes.ADD_LAYER_BUTTON_PRESSED,\r\n        stage: stage\r\n    }\r\n};\r\n\r\nexport const addNewLayer = (layer) => {\r\n    return {\r\n        type: ActionTypes.ADD_NEW_LAYER,\r\n        layer\r\n    }\r\n};\r\n\r\nexport const deleteAffectedLayer = () => {\r\n    return {\r\n        type: ActionTypes.DELETE_LAYER_BUTTON_PRESSED\r\n    };\r\n};\r\n\r\nexport const sortLayers = () => {\r\n    return {\r\n        type: ActionTypes.SORT_LAYERS_BUTTON_PRESSED\r\n    };\r\n};\r\n\r\nexport const toggleDisplayLayer = (layer) => {\r\n    return {\r\n        type: ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED,\r\n        layer\r\n    }\r\n};\r\n\r\nexport const toggleAffectedLayer = (event, layer) => {\r\n    event.stopPropagation();\r\n    return {\r\n        type: ActionTypes.TOGGLE_AFFECTED_LAYER_PRESSED,\r\n        layer: layer\r\n    };\r\n};\r\n\r\nexport const updateLayer = (newLayer) => {\r\n    return {\r\n        type: ActionTypes.SUBMIT_LAYER_EDIT_FORM_PRESSED,\r\n        newLayer: newLayer\r\n    };\r\n};\r\n\r\nexport const closeEditLayerForm = () => {\r\n    return {\r\n        type: ActionTypes.ESCAPE_LAYER_EDIT_FORM_PRESSED\r\n    };\r\n};\r\n\r\nexport const openAffectedLayerEditForm = () => {\r\n    return {\r\n        type: ActionTypes.OPEN_LAYER_EDIT_FORM_PRESSED,\r\n    }\r\n};\r\n\r\nexport const setAffectedNextLayer = () => {\r\n    return {\r\n        type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\r\n    }\r\n};\r\n\r\nexport const setAffectedPrevLayer = () => {\r\n    return {\r\n        type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\r\n    }\r\n};\r\n\r\nexport const deleteAllLayers = () => {\r\n    return {\r\n        type: ActionTypes.CLEAR_ALL_BUTTON_CLICKED,\r\n    }\r\n}\r\n\r\n\r\n\r\n","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport Stage from \"../models/stage\";\r\nimport * as actions from '../store/actions/stageActions';\r\n\r\nclass MeasurePointsTool extends Component {\r\n    measureCanvas = React.createRef();\r\n    measureStage = null;\r\n\r\n    state = {\r\n        startX: undefined,\r\n        startY: undefined,\r\n        endX: undefined,\r\n        endY: undefined,\r\n        measureStarted: false\r\n    };\r\n\r\n    handleMouseDown = (event) => {\r\n        event.preventDefault();\r\n\r\n        this.measureStage.clear();\r\n\r\n        if (this.state.measureStarted) {   // second click - clear measurement\r\n            this.setState({\r\n                startX: undefined,\r\n                startY: undefined,\r\n                endX: undefined,\r\n                endY: undefined,\r\n                measureStarted: false\r\n            });\r\n            this.measureStage.canvas.style.cursor = \"auto\";\r\n        }\r\n        else {                       // first click - start measurment\r\n            this.setState({\r\n                startX: this.measureStage.C2W_X(event.stageX),\r\n                startY: this.measureStage.C2W_Y(event.stageY),\r\n                measureStarted: true\r\n            });\r\n            this.measureStage.canvas.style.cursor = \"crosshair\";\r\n        }\r\n    };\r\n\r\n    handleMouseMove = (event) => {\r\n        if (this.state.measureStarted) {\r\n            this.setState({\r\n                endX: this.measureStage.C2W_X(event.stageX),\r\n                endY: this.measureStage.C2W_Y(event.stageY)\r\n            })\r\n        }\r\n    };\r\n\r\n    handleMouseUp = (event) => {\r\n    }\r\n\r\n    handleMouseWheel = (event) => {\r\n        event.preventDefault();\r\n\r\n        let delta = event.detail || event.wheelDelta;\r\n        if (delta !== 0) {\r\n            // this.props.onMouseWheelMove(event.offsetX, event.offsetY, delta);\r\n            this.props.handleMouseWheelMove(this.props.stage, event.offsetX, event.offsetY, delta);\r\n\r\n            this.draw();\r\n        }\r\n    };\r\n\r\n    handleMouseWheelFox = (event) => {\r\n        event.preventDefault();\r\n\r\n        if (event.detail !== 0) {\r\n            // this.props.onMousewheelMove(event.layerX, event.layerY, -event.detail);\r\n            this.props.handleMouseWheelMove(this.props.stage, event.layerX, event.layerY, -event.detail);\r\n\r\n            this.draw();\r\n        }\r\n    };\r\n\r\n    draw() {\r\n        // let canvas = this.measureCanvas.current;\r\n        let stage = this.measureStage; // this.props.stage;\r\n        let canvas = stage.canvas;\r\n        let context = canvas.getContext('2d');\r\n\r\n        this.measureStage.origin = this.props.stage.origin;\r\n        this.measureStage.resolution = this.props.stage.resolution;\r\n        this.measureStage.zoomFactor = this.props.stage.zoomFactor;\r\n\r\n        this.measureStage.clear();\r\n\r\n        // Draw rectangle\r\n        let pllX = Math.min(stage.W2C_X(this.state.startX), stage.W2C_X(this.state.endX));\r\n        let pllY = Math.min(stage.W2C_Y(this.state.startY), stage.W2C_Y(this.state.endY));\r\n        let width = Math.abs(stage.W2C_Scalar(this.state.startX - this.state.endX));\r\n        let height = Math.abs(stage.W2C_Scalar(this.state.startY - this.state.endY));\r\n\r\n        context.beginPath();\r\n        context.rect(pllX, pllY, width, height);\r\n\r\n        // Draw segment\r\n        context.moveTo(stage.W2C_X(this.state.startX), stage.W2C_Y(this.state.startY));\r\n        context.lineTo(stage.W2C_X(this.state.endX), stage.W2C_Y(this.state.endY));\r\n\r\n        context.lineWidth = 1;\r\n        context.strokeStyle = 'black';\r\n        context.stroke();\r\n\r\n        // Draw text\r\n        let textX, textY, textHeight, textWidth;\r\n        let backX, backY;                      // background rectangle\r\n        let text = this.measurement();\r\n\r\n        context.font = \"12pt Arial\";\r\n\r\n        textHeight = 12;\r\n        /* font size*/\r\n        textWidth = context.measureText(text).width;\r\n\r\n        // Rectangle to the right of current point, text aligned left\r\n        if (Math.abs(stage.W2C_X(this.state.endX) - pllX) <= 2) {\r\n            context.textAlign = \"left\";\r\n            textX = pllX + 3;\r\n            backX = pllX;\r\n        }\r\n        // Rectangle to the left of current point, text aligned right\r\n        else {\r\n            context.textAlign = \"right\";\r\n            textX = pllX + width - 3;\r\n            backX = textX - textWidth - 3;\r\n        }\r\n\r\n        if (Math.abs(stage.W2C_Y(this.state.endY) - pllY) <= 2) {\r\n            textY = pllY - 3;\r\n        }\r\n        else {\r\n            textY = pllY + height + textHeight + 3;\r\n        }\r\n        backY = textY - textHeight - 3;\r\n\r\n        context.fillStyle = 'white';\r\n        context.globalAlpha = 0.4;\r\n        context.fillRect(backX, backY, textWidth + 6, textHeight + 6);\r\n\r\n        context.fillStyle = \"black\";\r\n        context.globalAlpha = 1;\r\n        context.fillText(this.measurement(), textX, textY);\r\n    }\r\n\r\n    measurement() {\r\n        let dx = this.state.endX - this.state.startX;\r\n        let dy = this.state.endY - this.state.startY;\r\n        let dist = Math.sqrt(dx * dx + dy * dy);\r\n        let message = \"DX=\" + this.format(dx) + \",DY=\" + this.format(dy) + \",D=\" + this.format(dist);\r\n        return message;\r\n    }\r\n\r\n    format(num) {\r\n        return (num / this.props.divisor).toFixed(this.props.decimals);\r\n    }\r\n\r\n    componentDidMount() {\r\n        // let canvas = this.measureCanvas.current;\r\n        this.measureStage = new Stage(this.measureCanvas.current);\r\n        this.measureStage.origin = this.props.stage.origin;\r\n        this.measureStage.resolution = this.props.stage.resolution;\r\n        this.measureStage.zoomFactor = this.props.stage.zoomFactor;\r\n\r\n        this.measureStage.on(\"stagemousedown\", this.handleMouseDown);\r\n        this.measureStage.on(\"stagemousemove\", this.handleMouseMove);\r\n        this.measureStage.on(\"stagemouseup\", this.handleMouseUp);\r\n\r\n        this.measureStage.canvas.addEventListener(\"mousewheel\", this.handleMouseWheel);\r\n        this.measureStage.canvas.addEventListener(\"DOMMouseScroll\", this.handleMouseWheelFox);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.state.measureStarted) {\r\n            this.draw();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.measureStage.clear();\r\n        this.measureStage.removeAllChildren();\r\n        this.measureStage.removeAllEventListeners();\r\n    }\r\n\r\n    render() {\r\n        let mainCanvas = this.props.stage.canvas;\r\n        let width = mainCanvas.width;\r\n        let height = mainCanvas.height;\r\n        let top = mainCanvas.offsetTop;\r\n        let left = mainCanvas.offsetLeft;\r\n        return (\r\n            <canvas tabIndex=\"1\" ref={this.measureCanvas}\r\n                    width={width}\r\n                    height={height}\r\n                    style={{position: 'absolute', top: top, left: left}}\r\n            >\r\n            </canvas>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({app}) => {\r\n    return {\r\n        stage: app.stage,\r\n        divisor: app.divisor,\r\n        decimals: app.decimals\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleMouseWheelMove: (stage, x, y, delta) => dispatch(actions.handleMouseWheelMove(stage, x, y, delta))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MeasurePointsTool);\r\n","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\n\r\nimport {Component} from 'react';\r\n// import createjs from 'easel-js';\r\n// import * as createjs from '@createjs/easeljs';\r\nimport {graphics} from '../models/graphics';\r\n// import '../../public/styles/App.css';\r\nlet createjs = window.createjs;\r\nclass MeasureShapesTool extends Component {\r\n    constructor(params) {\r\n        super();\r\n        this.segment = new createjs.Shape();\r\n        params.stage.addChild(this.segment);\r\n\r\n        this.labelShape = new createjs.Text();\r\n        this.labelShape.x = 0;\r\n        this.labelShape.y = 0;\r\n        params.stage.addChild(this.labelShape);\r\n\r\n        // var html = document.createElement('div');\r\n        // html.innerText = \"\"; // params.model.label;\r\n        // html.style.position = \"absolute\";\r\n        // html.style.top = 0;\r\n        // html.style.left = 0;\r\n        //\r\n        // document.body.appendChild(html);\r\n        // this.labelShape = new createjs.DOMElement(html);\r\n        // params.stage.addChild(this.labelShape);\r\n    }\r\n\r\n    // redrawLabel() {\r\n    //     if (!this.labelShape) return;\r\n    //\r\n    //     let stage = this.props.stage;\r\n    //\r\n    //     this.labelShape.htmlElement.style.display = \"block\";\r\n    //\r\n    //     let box = this.props.shortestSegment.box;\r\n    //     let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\r\n    //     let dx = 6. / (stage.zoomFactor * stage.resolution);\r\n    //     let dy = 4. / (stage.zoomFactor * stage.resolution);\r\n    //\r\n    //     this.labelShape.htmlElement.style.font = \"16px Arial\";\r\n    //     this.labelShape.htmlElement.innerText = this.props.shortestSegment.length;\r\n    //\r\n    //     let unscale = 1. / (stage.zoomFactor * stage.resolution);\r\n    //     let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n    //     let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n    //     this.labelShape.setTransform(tx, ty, unscale, -unscale);\r\n    // }\r\n\r\n    format(num) {\r\n        return (num/this.props.divisor).toFixed(this.props.decimals);\r\n    }\r\n\r\n    redrawLabel() {\r\n        if (!this.labelShape) return;\r\n\r\n        let stage = this.props.stage;\r\n\r\n        let box = this.props.shortestSegment.box;\r\n        let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\r\n        let dx = 6. / (stage.zoomFactor * stage.resolution);\r\n        let dy = 4. / (stage.zoomFactor * stage.resolution);\r\n\r\n        if (box.ymin === box.ymax) {\r\n            dx = 0;\r\n            dy = -dy;\r\n        }\r\n\r\n        // this.labelShape.htmlElement.style.display = \"block\";\r\n        // this.labelShape.htmlElement.style.font = \"16px Arial\";\r\n        // this.labelShape.htmlElement.innerText = this.props.shortestSegment.length;\r\n\r\n        this.labelShape.text = this.format(this.props.shortestSegment.length);\r\n\r\n        let fontSize = 14.; // / (stage.zoomFactor * stage.resolution);\r\n        this.labelShape.font = `${fontSize}px Arial`;\r\n\r\n        let unscale = 1. / (stage.zoomFactor * stage.resolution);\r\n        // let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\r\n        // let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\r\n        let tx = point.x + dx;\r\n        let ty = point.y + dy;\r\n        this.labelShape.setTransform(tx, ty, unscale, -unscale);\r\n    }\r\n\r\n    draw() {\r\n        if (this.props.shortestSegment) {\r\n            this.segment.graphics = graphics(this.props.shortestSegment);\r\n            this.redrawLabel();\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.draw();\r\n    }\r\n    componentDidUpdate() {\r\n        this.segment.graphics.clear();\r\n        if (this.props.firstMeasuredShape && this.props.secondMeasuredShape &&\r\n            this.props.firstMeasuredLayer.displayed &&\r\n            this.props.secondMeasuredLayer.displayed) {\r\n\r\n            this.draw();\r\n            this.redrawLabel();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.stage.removeChild(this.segment);\r\n        this.segment.graphics.clear();\r\n        this.props.stage.removeChild(this.labelShape);\r\n        this.labelShape.text = \"\";\r\n    }\r\n\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default MeasureShapesTool;","/**\r\n * Created by alexanderbol on 21/04/2017.\r\n */\r\nimport React from 'react';\r\nconst DisplayCoordsTool = ({stage, coordX, coordY, divisor, decimals}) => {\r\n    const format = (num) => {\r\n        return (num/divisor).toFixed(decimals);\r\n    };\r\n\r\n    let mainCanvas = stage.canvas;\r\n    let top = mainCanvas.offsetTop + 10;\r\n    let left = mainCanvas.offsetLeft + 10;\r\n    let x = stage.C2W_X(coordX);\r\n    let y = stage.C2W_Y(coordY);\r\n    return (\r\n        <div style={{position: 'absolute', top: top, left: left}}>\r\n            <h5 style={{margin: 0, padding: 3}}>\r\n                X: {format(x)} Y: {format(y)}\r\n            </h5>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default DisplayCoordsTool;\r\n","import {Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst modalRoot = document.getElementById('modal-root');\r\n\r\n// A Modal component that is an abstraction around the portal API.\r\nclass Modal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // Create a div that we'll render the modal into. Because each\r\n        // Modal component has its own element, we can render multiple\r\n        // modal components into the modal container.\r\n        this.el = document.createElement('div');\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Append the element into the DOM on mount. We'll render\r\n        // into the modal container element (see the HTML tab).\r\n        modalRoot.appendChild(this.el);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // Remove the element from the DOM when we unmount\r\n        modalRoot.removeChild(this.el);\r\n    }\r\n\r\n    render() {\r\n        // Use a portal to render the children into the element\r\n        return ReactDOM.createPortal(\r\n            // Any valid React child: JSX, strings, arrays, etc.\r\n            this.props.children,\r\n            // A DOM element\r\n            this.el,\r\n        );\r\n    }\r\n}\r\n\r\nexport default Modal;","import React, {Component} from 'react';\r\nimport Modal from '../Modal';\r\nimport classes from './ModalPopup.module.css';\r\n\r\nclass ModalPopup extends Component {\r\n    offsetX;\r\n    offsetY;\r\n    dragX;\r\n    dragY;\r\n\r\n    onBackDropClicked = (ev) => {\r\n        if (ev.target.id === \"backDrop\") {\r\n            this.props.closePopup();\r\n        }\r\n    };\r\n\r\n    handleKeyDown = (ev) => {\r\n        if (ev.code === \"Escape\") {\r\n            this.props.closePopup();\r\n        }\r\n    };\r\n\r\n    elementDrag = (ev) => {\r\n        ev = ev || window.event;\r\n        // calculate the new cursor position:\r\n        this.offsetX = this.dragX - ev.clientX;\r\n        this.offsetY = this.dragY - ev.clientY;\r\n        this.dragX = ev.clientX;\r\n        this.dragY = ev.clientY;\r\n        // set the element's new position:\r\n        let element = ev.target;\r\n        element.style.top = (element.offsetTop - this.offsetY) + \"px\";\r\n        element.style.left = (element.offsetLeft - this.offsetX) + \"px\";\r\n    };\r\n\r\n    closeDragElement = (ev) => {\r\n        /* stop moving when mouse button is released:*/\r\n        ev.target.onmouseup = null;\r\n        ev.target.onmousemove = null;\r\n    };\r\n\r\n    dragMouseDown = (ev) => {\r\n        ev = ev || window.event;\r\n        // get the mouse cursor position at startup:\r\n        this.dragX = ev.clientX;\r\n        this.dragY = ev.clientY;\r\n        ev.target.onmouseup = this.closeDragElement;\r\n        // call a function whenever the cursor moves:\r\n        ev.target.onmousemove = this.elementDrag;\r\n    };\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    render() {\r\n        return this.props.showPopup ? (\r\n            <Modal>\r\n                <div\r\n                    id=\"backDrop\"\r\n                    className={classes.BackDrop}\r\n                    onClick={this.onBackDropClicked}\r\n                >\r\n                    <div className={classes.ModalPopup}\r\n                         onMouseDown={this.dragMouseDown}\r\n                    >\r\n                        {this.props.children}\r\n                    </div>\r\n                </div>\r\n            </Modal>\r\n        ) : null;\r\n    }\r\n}\r\n\r\nexport default ModalPopup;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport classes from './AboutPopup.module.css';\r\nimport ModalPopup from \"../UI/ModalPopup/ModalPopup\";\r\n\r\nconst AboutPopup = (props) => {\r\n    return (\r\n        <ModalPopup\r\n            showPopup={props.showAboutPopup}\r\n            closePopup={props.toggleAboutPopup}\r\n        >\r\n            <div className={classes.AboutPopup}>\r\n                <h2>{props.title} v{props.version}</h2>\r\n\r\n                <label>{`Build date: `}</label>\r\n                <span>December 2018</span>\r\n                <br/>\r\n\r\n                <label>{`Github depository: `}</label>\r\n                <a href=\"https://github.com/alexbol99/debug-viewer1\" >\r\n                    https://github.com/alexbol99/debug-viewer1\r\n                </a>\r\n                <br/>\r\n\r\n                <label>{`3d party graphics library: `}</label>\r\n                <a href=\"https://github.com/CreateJS/EaselJS/tree/2.0\" >\r\n                    https://github.com/CreateJS/EaselJS/tree/2.0\r\n                </a>\r\n                <br/>\r\n\r\n            </div>\r\n        </ModalPopup>\r\n\r\n    )\r\n};\r\n\r\nexport default AboutPopup;","// import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nimport Model from '../models/model';\r\n\r\nexport function parseJSON(shapes) {\r\n    let models = [];\r\n    let geom;\r\n    let model;\r\n    for (let shape of JSON.parse(shapes)) {\r\n        if (shape.geom instanceof Array) {      // TODO: add \"name\" to polygon stringified\r\n            geom = new Flatten.Polygon();\r\n            for (let faceArray of shape.geom) {\r\n                geom.addFace(faceArray);\r\n            }\r\n        }\r\n        else {\r\n            geom = Flatten[shape.geom.name](shape.geom);\r\n        }\r\n        model = new Model(geom, shape.style, shape.label);\r\n        models.push(model);\r\n    }\r\n\r\n    return models;\r\n}\r\n","import /*React,*/ {Component} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../../store/actions/appActions';\r\nimport * as layerActions from '../../store/actions/layersActions';\r\nimport * as cloudActions from '../../store/actions/cloudStorageActions';\r\nimport Layer from \"../../models/layer\";\r\nimport {parseJSON} from \"../../dataParsers/parseJSON\";\r\n\r\nclass CloudDocument extends Component {\r\n    state={\r\n        done:false\r\n    };\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n\r\n            cloudActions.fetchDocumentFromDatabase(this.props.match.params.id)\r\n                .then( (response) => {\r\n                    let firstLayer = undefined;\r\n                    if (response.data) {\r\n                        for (let layerData of response.data.layers) {\r\n                            let layer = new Layer();\r\n                            layer.shapes = parseJSON(layerData.shapes);\r\n                            layer.name = layerData.name;\r\n\r\n                            if (!firstLayer) firstLayer = layer;\r\n                            this.props.addNewLayer(layer);\r\n                            this.props.asyncOperationEnded();\r\n                        }\r\n                        this.props.updateDocument(this.props.match.params.id, response.data.name, \"Alex Bol\", response.data.lastUpdated);\r\n                        this.props.panAndZoomToShape(stage, firstLayer);\r\n                        this.props.toggleLayer(firstLayer);\r\n                    }\r\n                })\r\n                .catch( (err) => {\r\n                    console.log(err);\r\n                    this.props.asyncOperationEnded();\r\n                });\r\n            this.setState({done:true});\r\n\r\n            this.props.clearAll();\r\n            this.props.asyncOperationStarted();\r\n        }\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage,\r\n        document: state.cloudStorage.document\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch(actions.setHomeView(stage, layer)),\r\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\r\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded()),\r\n\r\n        addNewLayer: (layer) => dispatch(layerActions.addNewLayer(layer)),\r\n        toggleLayer: (layer) => dispatch(layerActions.toggleDisplayLayer(layer)),\r\n\r\n        clearAll: () => dispatch(layerActions.deleteAllLayers()),\r\n        updateDocument: (id, name, owner, lastUpdated) => dispatch(cloudActions.requestFetchDocumentFromDatabaseSucceed(id, name, owner, lastUpdated))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CloudDocument);\r\n","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport {Route} from 'react-router-dom';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport ToolbarComponent from '../../components/MainComponent/ToolbarComponent/ToolbarComponent';\r\nimport CanvasComponent from '../../components/MainComponent/CanvasComponent/CanvasComponent';\r\nimport StatusComponent from '../../components/Layout/StatusComponent/StatusComponent';\r\n\r\nimport StageComponent from \"../../components/MainComponent/GraphicsComponent/stageComponent\";\r\nimport LayersComponent from '../../components/MainComponent/GraphicsComponent/layersComponent';\r\n\r\nimport * as actions from '../../store/actions/appActions';\r\nimport * as layerActions from \"../../store/actions/layersActions\";\r\nimport * as cloudActions from '../../store/actions/cloudStorageActions';\r\n\r\nimport Layers from '../../models/layers';\r\nimport MeasurePointsTool from '../../tools/measurePointsTool';\r\nimport MeasureShapesTool from \"../../tools/measureShapesTool\";\r\nimport DisplayCoordsTool from \"../../tools/displayCoordsTool\";\r\n\r\nimport AboutPopup from \"../../components/AboutPopup/AboutPopup\";\r\nimport CloudDocument from '../../components/Constructions/CloudDocument';\r\n\r\nimport styles from './MainComponent.module.css';\r\n\r\nclass MainComponent extends Component {\r\n    handleFileSelect = (event) => {\r\n        if (!(File && FileReader && FileList)) return;\r\n        let files = event.target.files; // FileList object\r\n        this.props.handleFileSelect(files, this.props.stage, this.props.layers);\r\n    };\r\n\r\n    setHomeView = () => {\r\n        let layer = Layers.getAffected(this.props.layers);\r\n        if (!layer) return;\r\n        this.props.setHomeView(this.props.stage, layer);\r\n        this.forceUpdate();       // ??? unclear why on Home button click not updated\r\n    };\r\n\r\n    onSaveDocumentButtonClicked = () => {\r\n        if (this.props.layers.length === 0) return;   // nothing to save\r\n        let payload = {\r\n            name: this.props.document.name === \"\" ?\r\n                cloudActions.getNewName(this.props.documentsList) : this.props.document.name,\r\n            layers: Layers.toJSON(this.props.layers),\r\n            dataURL: this.props.stage.toDataURL(),\r\n            lastUpdated: new Date().toLocaleDateString() + \" \" + new Date().toLocaleTimeString(),\r\n            token: this.props.token,\r\n            userId: this.props.userId\r\n        };\r\n        if (this.props.document.id) {\r\n            cloudActions.updateDocumentInDatabase(this.props.document.id, payload)\r\n                .then( response => {\r\n                    this.props.updateDocumentState(Date.now());\r\n                    this.props.asyncOperationEnded();\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                });\r\n        }\r\n        else {\r\n            cloudActions.addDocumentToDatabase(payload)\r\n                .then( response => {\r\n                    this.props.registerDocumentAddedToDatabase( response.data.name, Date.now());\r\n                    this.props.asyncOperationEnded();\r\n                    // update url\r\n                    this.props.history.push('/documents/'+response.data.name);\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                });\r\n        }\r\n        this.props.asyncOperationStarted();\r\n    };\r\n\r\n    clearCurrentDocument = () => {\r\n        this.props.clearCurrentDocument();\r\n        this.props.clearAllLayers();\r\n        this.props.history.push(\"/\");\r\n    };\r\n\r\n    handleKeyDown = (e) => {\r\n        // let ctrl = e.ctrlKey;\r\n        if (e.target.id !== \"mainCanvas\")\r\n            return;\r\n        switch (e.code) {\r\n            case \"KeyH\":\r\n                this.setHomeView();\r\n                break;\r\n\r\n            case \"KeyW\":\r\n                this.props.toggleWidthMode();     // toggle width On/Off in graphics model\r\n                break;\r\n\r\n            case \"KeyE\":\r\n                this.props.toggleDisplayVertices();  // toggle vertices On/Off\r\n                break;\r\n\r\n            case \"ArrowRight\":\r\n                break;\r\n\r\n            case \"ArrowLeft\":\r\n                break;\r\n            case \"ArrowUp\":\r\n                break;\r\n            case \"ArrowDown\":\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        window.onresize = this.props.resizeStage;\r\n        // Keyboard event\r\n        // var _keydown = _.throttle(this.keydown, 100);\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n        // var _keyup = _.throttle(this.keyup, 500);\r\n        document.addEventListener('keyup', this.handleKeyUp);\r\n\r\n        // if (this.props.document.id === undefined) {\r\n        //     this.props.history.push(\"/\");\r\n        // }\r\n        // if (this.props.document.id !== undefined) {\r\n        //     this.props.history.push(\"/documents/\" + this.props.document.id)\r\n        // }\r\n    }\r\n\r\n    render() {\r\n        let displayCoordsTool = this.props.stage ? (\r\n            <DisplayCoordsTool\r\n                key=\"displayCoordinatedTool\"\r\n                stage={this.props.stage}\r\n                units={this.props.units}\r\n                divisor={this.props.divisor}\r\n                decimals={this.props.decimals}\r\n                coordX={this.props.mouse.x}\r\n                coordY={this.props.mouse.y}\r\n            />\r\n        ) : null;\r\n\r\n        let measurePointsTool = this.props.measurePointsActive ? <MeasurePointsTool /> : null;\r\n\r\n        let measuredLayersDisplayed = this.props.measureShapesTool.firstMeasuredShape &&\r\n            this.props.measureShapesTool.secondMeasuredShape &&\r\n            this.props.measureShapesTool.firstMeasuredLayer.displayed &&\r\n            this.props.measureShapesTool.secondMeasuredLayer.displayed;\r\n\r\n        let measureShapesTool = this.props.measureShapesTool.distance &&\r\n        this.props.measureShapesTool.shortestSegment && measuredLayersDisplayed ? (\r\n            <MeasureShapesTool\r\n                key=\"MeasureShapesTool\"\r\n                stage={this.props.stage}\r\n                firstMeasuredShape={this.props.measureShapesTool.firstMeasuredShape}\r\n                secondMeasuredShape={this.props.measureShapesTool.secondMeasuredShape}\r\n                firstMeasuredLayer={this.props.measureShapesTool.firstMeasuredLayer}\r\n                secondMeasuredLayer={this.props.measureShapesTool.secondMeasuredLayer}\r\n                distance={this.props.measureShapesTool.distance}\r\n                shortestSegment={this.props.measureShapesTool.shortestSegment}\r\n                divisor={this.props.divisor}\r\n                decimals={this.props.decimals}\r\n            />\r\n        ) : null;\r\n\r\n        return (\r\n            <main className={styles[\"Main-content\"]}>\r\n                <ToolbarComponent\r\n                    measurePointsActive={this.props.measurePointsActive}\r\n                    units={this.props.units}\r\n                    showSkeletonRecognitionButton={this.props.showSkeletonRecognitionButton}\r\n                    onFileSelected={this.handleFileSelect}\r\n                    onHomeButtonPressed={this.setHomeView}\r\n                    onPanByDragPressed={this.props.togglePanByDrag}\r\n                    onMeasurePointsButtonPressed={this.props.toggleMeasureBetweenPoints}\r\n                    onMeasureBetweenShapesButtonPressed={this.props.toggleMeasureBetweenShapes}\r\n                    onToggleWidthModePressed={this.props.toggleWidthMode}\r\n                    onToggleVerticesPressed={this.props.toggleDisplayVertices}\r\n                    onToggleLabelsPressed={this.props.toggleDisplayLabels}\r\n                    onShowAboutPopupPressed={this.props.toggleAboutPopup}\r\n                    onSkeletonRecognitionButtonPressed={this.props.applySkeletonRecognition}\r\n                    onUnitClicked={this.props.toggleUnits}\r\n                    onSaveDocumentButtonClicked={this.onSaveDocumentButtonClicked}\r\n                    onClearAllButtonClicked={this.clearCurrentDocument}\r\n                    onLayerListButtonClicked={this.props.toggleLayerList}\r\n                />\r\n\r\n                <CanvasComponent />\r\n\r\n                { this.props.stage ? (\r\n                <StageComponent\r\n                    stage={this.props.stage}\r\n                    onStageUnmounted={this.props.destroyStage}\r\n                >\r\n                    <LayersComponent\r\n                        stage={this.props.stage}\r\n                        layers={this.props.layers}\r\n                        displayVertices={this.props.displayVertices}\r\n                        displayLabels={this.props.displayLabels}\r\n                        widthOn={this.props.widthOn}\r\n                        zoomFactor={this.props.zoomFactor}\r\n                        hoveredShape={this.props.measureShapesTool.hoveredShape}\r\n                        firstMeasuredShape={this.props.measureShapesTool.firstMeasuredShape}\r\n                        secondMeasuredShape={this.props.measureShapesTool.secondMeasuredShape}\r\n                        onMouseOver={this.props.handleMouseRollOverShape}\r\n                        onMouseOut={this.props.handleMouseRollOutShape}\r\n                        onClick={this.props.handleClickOnShape}\r\n                        setHomeView={this.props.setHomeView}\r\n                    />\r\n                    {displayCoordsTool}\r\n                    {measurePointsTool}\r\n                    {measureShapesTool}\r\n                </StageComponent> ) : null }\r\n\r\n                <StatusComponent />\r\n\r\n                <AboutPopup\r\n                    showAboutPopup={this.props.showAboutPopup}\r\n                    toggleAboutPopup={this.props.toggleAboutPopup}\r\n                    title={this.props.title}\r\n                    version={this.props.version}\r\n                    build={this.props.build}\r\n                />\r\n\r\n                <Route path=\"/documents/:id\" component={CloudDocument}/>\r\n\r\n            </main>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        stage: state.app.stage,\r\n        title: state.app.title,\r\n        version: state.app.version,\r\n        build: state.app.build,\r\n        displayVertices: state.app.displayVertices,\r\n        displayLabels: state.app.displayLabels,\r\n        widthOn: state.app.widthOn,\r\n        zoomFactor: state.app.zoomFactor,\r\n        units: state.app.units,\r\n        showSkeletonRecognitionButton: state.app.showSkeletonRecognitionButton,\r\n        divisor: state.app.divisor,\r\n        decimals: state.app.decimals,\r\n        measurePointsActive: state.app.measurePointsActive,\r\n        showAboutPopup: state.app.showAboutPopup,\r\n        layers: state.layers,\r\n        mouse: state.mouse,\r\n        measureShapesTool: state.measureShapesTool,\r\n\r\n        document: state.cloudStorage.document,\r\n        documentsList: state.cloudStorage.documentsList,\r\n        // onManageCloudStorageButtonClicked: ownProps.onManageCloudStorageButtonClicked\r\n        token: state.auth.token,\r\n        userId: state.auth.userId\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        resizeStage: () => dispatch(actions.resizeStage()),\r\n        destroyStage: () => dispatch(actions.destroyStage()),\r\n        handleFileSelect: (files, stage, layers) => dispatch(actions.handleFileSelect(files, stage, layers)),\r\n        setHomeView: (stage, shape) => dispatch(actions.setHomeView(stage, shape)),\r\n        toggleUnits: () => dispatch(actions.toggleUnits()),\r\n        toggleWidthMode: () => dispatch(actions.toggleWidthMode()),\r\n        toggleDisplayVertices: () => dispatch(actions.toggleDisplayVertices()),\r\n        toggleDisplayLabels: () => dispatch(actions.toggleDisplayLabels()),\r\n        toggleAboutPopup: () => dispatch(actions.toggleAboutPopup()),\r\n        toggleMeasureBetweenPoints: () => dispatch(actions.toggleMeasureBetweenPoints()),\r\n        toggleMeasureBetweenShapes: () => dispatch(actions.toggleMeasureBetweenShapes()),\r\n        togglePanByDrag: () => dispatch(actions.togglePanByDrag()),\r\n        toggleLayerList: () => dispatch(actions.toggleLayerList()),\r\n        applySkeletonRecognition: () => dispatch(actions.applySkeletonRecognition()),\r\n        handleMouseRollOverShape: (shape) => dispatch(actions.handleMouseRollOverShape(shape)),\r\n        handleMouseRollOutShape: () => dispatch(actions.handleMouseRollOutShape()),\r\n        handleClickOnShape: (shape, layer) => dispatch(actions.handleClickOnShape(shape, layer)),\r\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\r\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded()),\r\n\r\n        clearAllLayers: () => dispatch(layerActions.deleteAllLayers()),\r\n        // addNewLayer: (layer) => dispatch(layerActions.addNewLayer(layer)),\r\n\r\n        registerDocumentAddedToDatabase: (id, timestamp) => dispatch(cloudActions.registerDocumentAddedToDatabase(id, timestamp)),\r\n        updateDocumentState: (timestamp) => dispatch(cloudActions.updateDocumentState(timestamp)),\r\n        clearCurrentDocument: () => dispatch(cloudActions.clearCurrentDocument())\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MainComponent);\r\n","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\nimport React from 'react';\r\nimport FontAwesome from 'react-fontawesome';\r\n\r\nimport styles from './LayerListToolbar.module.css';\r\nimport '@fortawesome/fontawesome-free/css/all.css';\r\n\r\nconst LayerListToolbar = (props) => {\r\n    return (\r\n        <div className={styles[\"Layer-list-toolbar\"]}>\r\n            <button title=\"Add layer\" onClick={props.onAddLayerButtonClicked}>\r\n                <FontAwesome\r\n                    name='plus'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n            <button title=\"Edit selected layer's name and info\" onClick={props.onEditLayerButtonClicked}>\r\n                <FontAwesome\r\n                    name='pencil-alt'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n            <button title=\"Delete selected layer\" onClick={props.onDeleteLayerButtonClicked}>\r\n                <FontAwesome\r\n                    name='times'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n            <button title=\"Sort layer list\" onClick={props.onSortLayersButtonClicked}>\r\n                <FontAwesome\r\n                    name='sort-alpha-down'\r\n                    size='2x'\r\n                    style={{color: \"grey\"}}\r\n                />\r\n            </button>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default LayerListToolbar;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport styles from './LayerEditForm.module.css';\r\n\r\nconst LayerEditForm = (props) => {\r\n    let onSubmitLayerEditForm = (ev) => {\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n        let form = ev.target.parentElement;\r\n        let newLayer = Object.assign({}, props.layer, {\r\n            name: form.layerName.value,\r\n            title: form.layerTitle.value\r\n        });\r\n        props.onSubmitLayerEditForm(newLayer);\r\n        return false;\r\n    };\r\n\r\n    let setFocus = (ev) => {\r\n        ev.stopPropagation();\r\n        ev.target.focus();\r\n    };\r\n\r\n    let onCancelLayerEditForm = () => {\r\n        props.onEscapeLayerEditForm();\r\n    };\r\n\r\n    return (\r\n        <form className={styles[\"Layer-edit-form\"]}\r\n              id=\"layerEditForm\"\r\n              onSubmit={onSubmitLayerEditForm}\r\n        >\r\n            <label>Layer name:</label><br/>\r\n            <input type=\"text\" id=\"layer-name\" name=\"layerName\" size=\"80\" defaultValue={props.layer.name}\r\n                   onClick={setFocus}/><br/>\r\n            <label>Layer info:</label><br/>\r\n            <textarea id=\"layer-title\" name=\"layerTitle\" cols=\"78\" rows=\"3\" defaultValue={props.layer.title}\r\n                      onClick={setFocus}></textarea><br/>\r\n            <button onClick={onCancelLayerEditForm}>Cancel</button>\r\n            <button onClick={onSubmitLayerEditForm}>OK</button>\r\n        </form>\r\n    )\r\n};\r\n\r\nexport default LayerEditForm;","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport ModalPopup from \"../../UI/ModalPopup/ModalPopup\";\r\nimport LayerEditForm from \"../LayerEditForm/LayerEditForm\";\r\nimport styles from './LayerListElement.module.css';\r\n\r\nclass LayerListElement extends Component {\r\n    componentDidUpdate() {\r\n        if (document.activeElement.nodeName === \"CANVAS\")\r\n            return;\r\n        let elem = this.refs.layerName;\r\n        if (this.props.layer.affected) {\r\n            elem.focus();\r\n        }\r\n    }\r\n\r\n    rgba(hex, opacity) {\r\n        let r, g, b, percent;\r\n        if (hex) {\r\n            hex = hex.replace('#', '');\r\n            r = parseInt(hex.substring(0, 2), 16);\r\n            g = parseInt(hex.substring(2, 4), 16);\r\n            b = parseInt(hex.substring(4, 6), 16);\r\n            percent = opacity;\r\n        }\r\n        else {\r\n            r = 147;\r\n            g = 128;\r\n            b = 108;\r\n            percent = 0;\r\n        }\r\n        let result = `rgba(${r},${g},${b},${percent / 100})`;\r\n\r\n        return result;\r\n    }\r\n\r\n    render() {\r\n        // let style = this.props.layer.displayed ?\r\n        //     styleSheet.displayed : styleSheet.undisplayed;\r\n\r\n        let displayed = this.props.layer.displayed ? \"Layer-displayed\" : \"Layer-undisplayed\";\r\n        let color = displayed ? this.rgba(this.props.layer.color, 100) : this.rgba();\r\n        let bgcolor = displayed ? this.rgba(this.props.layer.color, 30) : this.rgba();\r\n        let alpha = this.props.layer.affected ? 1 : 0;\r\n        let layerNameOpacity = this.props.layer.shapes.length === 0 ? 0.6 : 1.0;\r\n        return [\r\n            <li key={1}\r\n                className={styles.Layer}\r\n                onClick={this.props.onLayerClicked}\r\n                onDoubleClick={this.props.onLayerDoubleClicked}>\r\n\r\n                <div className={styles.LayerSelectionBox}\r\n                     onClick={this.props.onAffectedBoxClicked}\r\n                >\r\n                    <h4 className={styles.LayerSelectionMark}\r\n                        style={{opacity: alpha, color: color}}>\r\n                        ✓\r\n                    </h4>\r\n                </div>\r\n\r\n                <div className={styles.LayerNameBox}\r\n                     style={{backgroundColor: bgcolor, opacity: layerNameOpacity}}>\r\n                    <h4 ref=\"layerName\"\r\n                        title={this.props.layer.name}\r\n                        tabIndex='1'\r\n                    >\r\n                        {this.props.layer.name}\r\n                    </h4>\r\n                </div>\r\n\r\n            </li>,\r\n\r\n            <ModalPopup\r\n                key={2}\r\n                showPopup={this.props.layer.edited}\r\n                closePopup={this.props.onEscapeLayerEditForm}\r\n            >\r\n                <LayerEditForm\r\n                    layer={this.props.layer}\r\n                    onSubmitLayerEditForm={this.props.onSubmitLayerEditForm}\r\n                    onEscapeLayerEditForm={this.props.onEscapeLayerEditForm}\r\n                />\r\n            </ModalPopup>\r\n        ]\r\n    }\r\n}\r\n\r\nexport default LayerListElement;\r\n","/**\r\n * Created by alexanderbol on 17/04/2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport LayerListToolbar from \"../../components/LayersList/LayerListToolbar/LayerListToolbar\";\r\nimport LayerListElement from '../../components/LayersList/LayerListElement/LayerListElement';\r\nimport * as actions from '../../store/actions/layersActions';\r\nimport { connect } from 'react-redux';\r\nimport styles from './LayersList.module.css';\r\n\r\nclass LayersList extends Component {\r\n    height = 0;\r\n\r\n    handleKeyDown = (e) => {\r\n        // e.stopPropagation();\r\n        // e.preventDefault();\r\n\r\n        if (e.target.parentElement.parentElement &&\r\n            e.target.parentElement.parentElement.parentElement &&\r\n            e.target.parentElement.parentElement.parentElement.id &&\r\n            e.target.parentElement.parentElement.parentElement.id === \"layersList\") {\r\n\r\n\r\n            switch (e.code) {\r\n                case \"ArrowRight\":\r\n                case \"ArrowDown\":\r\n                    this.props.setAffectedNextLayer();\r\n                    break;\r\n                case \"ArrowLeft\":\r\n                case \"ArrowUp\":\r\n                    this.props.setAffectedPrevLayer();\r\n                    break;\r\n                /* tab does not work properly\r\n            case \"Tab\":\r\n                if (e.shiftKey) {\r\n                    this.dispatch({\r\n                        type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\r\n                    });\r\n                }\r\n                else {\r\n                    this.dispatch({\r\n                        type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\r\n                    });\r\n                }\r\n                break;\r\n                */\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    onLayerListClicked = () => {\r\n        this.forceUpdate();\r\n    };\r\n\r\n    componentDidMount() {\r\n        // Keyboard event\r\n        // var _keydown = _.throttle(this.keydown, 100);\r\n        document.addEventListener('keydown', this.handleKeyDown);\r\n        // var _keyup = _.throttle(this.keyup, 500);\r\n        // document.addEventListener('keyup', this.handleKeyUp);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.height = this.refs.layersComponent.clientHeight;\r\n    }\r\n\r\n    render() {\r\n        const style = this.props.showLayerList ? styles[\"App-layers-displayed\"] : styles[\"App-layers\"];\r\n        return (\r\n            <div className={style}\r\n                 ref=\"layersComponent\"\r\n                 onClick={this.onLayerListClicked}\r\n            >\r\n                {/*<h5>Layers</h5>*/}\r\n                <LayerListToolbar\r\n                    onAddLayerButtonClicked={() => this.props.onAddLayerButtonClicked(this.props.stage)}\r\n                    onEditLayerButtonClicked={this.props.onEditLayerButtonClicked}\r\n                    onDeleteLayerButtonClicked={this.props.onDeleteLayerButtonClicked}\r\n                    onSortLayersButtonClicked={this.props.onSortLayersButtonClicked}\r\n                />\r\n                <ul id=\"layersList\"\r\n                    style={{maxHeight:0.82*(this.height-40)}}>\r\n                { this.props.layers.map((layer) =>\r\n                    <LayerListElement\r\n                        key={layer.name}\r\n                        layer={layer}\r\n                        onLayerClicked={() => this.props.onLayerClicked(layer)}\r\n                        onAffectedBoxClicked={(event) => this.props.onAffectedBoxClicked(event, layer)}\r\n                        onSubmitLayerEditForm={this.props.onSubmitLayerEditForm}\r\n                        onEscapeLayerEditForm={this.props.onEscapeLayerEditForm}\r\n                    />)\r\n                }\r\n                </ul>\r\n                {/*{addLayer}*/}\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage,\r\n        showLayerList: state.app.showLayerList         // on mobile device\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onAddLayerButtonClicked: (stage) => dispatch(actions.addEmptyLayer(stage)),\r\n        onEditLayerButtonClicked: () => dispatch(actions.openAffectedLayerEditForm()),\r\n        onDeleteLayerButtonClicked: () => dispatch(actions.deleteAffectedLayer()),\r\n        onSortLayersButtonClicked: () => dispatch(actions.sortLayers()),\r\n        onLayerClicked: (layer) => dispatch(actions.toggleDisplayLayer(layer)),\r\n        onAffectedBoxClicked: (event, layer) => dispatch(actions.toggleAffectedLayer(event, layer)),\r\n        onSubmitLayerEditForm: (newLayer) => dispatch(actions.updateLayer(newLayer)),\r\n        onEscapeLayerEditForm: () => dispatch(actions.closeEditLayerForm()),\r\n        setAffectedNextLayer: () => dispatch(actions.setAffectedNextLayer()),\r\n        setAffectedPrevLayer: () => dispatch(actions.setAffectedPrevLayer())\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LayersList);\r\n\r\n// export default LayersList;","/**\r\n * Created by alexanderbol on 06/05/2017.\r\n */\r\n\r\nimport React from 'react';\r\nimport styles from './AsideComponent.module.css';\r\n\r\nconst AsideComponent = () => {\r\n    return (\r\n        <aside className={styles[\"App-aside\"]}>\r\n            <h5>&nbsp;</h5>\r\n        </aside>\r\n    )\r\n};\r\n\r\nexport default AsideComponent;\r\n","import React, {Component} from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Button from '../../../components/UI/Button/Button';\r\nimport classes from './DocumentName.module.css';\r\n\r\nclass DocumentName extends Component {\r\n    state = {\r\n        name: \"\"\r\n    };\r\n\r\n    handleChange = (ev) => {\r\n        let name = ev.target.value;\r\n        this.setState({name: name});\r\n        this.props.updateDocumentName(name);\r\n    };\r\n\r\n    shareDocument = () => {\r\n        if (window.navigator.share) {\r\n            window.navigator.share({\r\n                title: 'Share document',\r\n                text: `${this.props.username} shared a document with you.\r\nClick on the link below to open it:`,\r\n                url: window.location.href,\r\n            }).then( (resp) => {\r\n                    console.log(\"shared\")\r\n                })\r\n                .catch( (error) => {})\r\n        }\r\n    };\r\n\r\n    static getDerivedStateFromProps(nextProps, prevState){\r\n        return {\r\n            name : nextProps.name\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={classes.DocumentName}>\r\n                <input type=\"text\" placeholder=\"Document Name\"  value={this.state.name} onChange={this.handleChange} />\r\n                {window.navigator.share ?\r\n                    <Button type=\"trigger\" mobileOnly title=\"Share document\" iconName='share-alt' onClick={this.shareDocument}/> :\r\n                    null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(DocumentName);","import React from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport * as ActionTypes from \"./store/actionTypes\";\r\nimport * as cloudActions from \"./store/actions/cloudStorageActions\";\r\nimport MainComponent from \"./containers/MainComponent/MainComponent\";\r\nimport LayersList from \"./containers/LayerList/LayersList\";\r\nimport AsideComponent from \"./components/Layout/AsideComponent/AsideComponent\";\r\nimport DocumentName from \"./components/MainComponent/DocumentName/DocumentName\";\r\n\r\nconst appBody = (props) => {\r\n    return (\r\n        <React.Fragment>\r\n            <DocumentName name={props.document.name}\r\n                          username={props.username}\r\n                          updateDocumentName={props.updateDocumentName} />\r\n            <div className=\"App-body\" onPaste={props.pasteDataFromBuffer}>\r\n                <MainComponent history={props.history}\r\n                               onManageCloudStorageButtonClicked={props.onManageCloudStorageButtonClicked}\r\n                />\r\n                <LayersList/>\r\n                <AsideComponent/>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = ({cloudStorage, auth}) => {\r\n    return {\r\n        document: cloudStorage.document,\r\n        username: auth.username\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        pasteDataFromBuffer: (event) => dispatch({\r\n            type: ActionTypes.DATA_FROM_BUFFER_PASTED,\r\n            data: event.clipboardData\r\n        }),\r\n        updateDocumentName: (name) => dispatch(cloudActions.updateDocumentName(name))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(appBody);\r\n","import React from 'react';\r\n// import logoImg from \"../../../assets/images/debug-viewer-logo3-notext.png\";\r\nimport logoImg from \"../../../../assets/images/debug-viewer-logo3.png\";\r\nimport classes from \"./Logo.module.css\";\r\n\r\nconst logo = () => {\r\n    return (\r\n        <div className={classes.Logo}>\r\n            <img src={logoImg} alt=\"Debug Viewer Logo\" />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default logo;","import React from 'react';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport classes from './Navigation.module.css';\r\n\r\nconst navigation = (props) => {\r\n    return (\r\n        <ul className={classes.Navigation}>\r\n            <li><NavLink to=\"/\" exact>Editor</NavLink></li>\r\n            <li><NavLink to=\"/documents\">Cloud Storage</NavLink></li>\r\n\r\n            {props.isAuthenticated ?\r\n                <li><NavLink to=\"/logout\">Log Out</NavLink></li> :\r\n                <li><NavLink to=\"/login\">Log In</NavLink></li>\r\n            }\r\n        </ul>\r\n    );\r\n};\r\n\r\nexport default navigation;","/**\r\n * Created by alexanderbol on 13/04/2017.\r\n */\r\nimport React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport classes from './HeaderComponent.module.css';\r\nimport Logo from './Logo/Logo';\r\nimport Navigation from './Navigation/Navigation';\r\n\r\nconst HeaderComponent = (props) => {\r\n    const style = props.location.pathname === \"/documents\" ?\r\n        classes[\"App-header-documents-page\"] :\r\n        classes[\"App-header\"];\r\n    return (\r\n        <header className={style}>\r\n            <Logo />\r\n            <Navigation isAuthenticated={props.isAuthenticated} />\r\n            {props.isAuthenticated ? <span>Hello {props.username}</span> : null}\r\n            {props.location.pathname === \"/documents\" ? <hr/> : null}\r\n        </header>\r\n    )\r\n};\r\n\r\nexport default withRouter(HeaderComponent);","import * as actionTypes from '../actionTypes';\r\nimport axios from 'axios';\r\n\r\nconst apiKey = \"AIzaSyDMUAcjgolAlapdpFmPEz8SaId1DZw7MpQ\";\r\n\r\nexport const authStart = () => {\r\n    return {\r\n        type: actionTypes.AUTHENTICATION_STARTED\r\n    }\r\n};\r\n\r\nexport const authSucceed = (token, userId, username=null) => {\r\n    return {\r\n        type: actionTypes.AUTHENTICATION_SUCCEED,\r\n        token,\r\n        userId,\r\n        username\r\n    }\r\n};\r\n\r\nexport const authFailed = (error) => {\r\n    return {\r\n        type: actionTypes.AUTHENTICATION_FAILED,\r\n        error\r\n    }\r\n};\r\n\r\nexport const authSetUsername = (username) => {\r\n    return {\r\n        type: actionTypes.AUTHENTICATION_SET_USERNAME,\r\n        username\r\n    }\r\n};\r\n\r\nexport const logout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('expirationDate');\r\n    localStorage.removeItem('userId');\r\n    return {\r\n        type: actionTypes.AUTHENTICATION_LOGOUT\r\n    }\r\n};\r\n\r\nexport const checkAuthTimeout = (expirationTime) => {\r\n    return dispatch => {\r\n        setTimeout(() => {\r\n            dispatch(logout())\r\n        }, expirationTime * 1000)\r\n    }\r\n};\r\n\r\nexport const logIn = (email, password) => {\r\n    return dispatch => {\r\n        dispatch(authStart());\r\n        const authData = {\r\n            email,\r\n            password,\r\n            returnSecureToken: true\r\n        };\r\n        const url = \"https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=\" + apiKey;\r\n        axios.post(url, authData)\r\n            .then(response => {\r\n                const expirationDate = new Date(new Date().getTime() + response.data.expiresIn * 1000);\r\n                localStorage.setItem('token', response.data.idToken);\r\n                localStorage.setItem('expirationDate', expirationDate);\r\n                localStorage.setItem('userId', response.data.localId);\r\n\r\n                dispatch(authSucceed(response.data.idToken, response.data.localId));\r\n                dispatch(checkAuthTimeout(response.data.expiresIn));\r\n                const queryParams = '?auth=' + response.data.idToken + '&orderBy=\"userId\"&equalTo=\"' + response.data.localId + '\"';\r\n                return axios.get(\"https://debug-viewer.firebaseio.com/users.json\" + queryParams);\r\n            })\r\n            .then(response => {\r\n                if (Object.values(response.data.length > 0)) {\r\n                    const username = Object.values(response.data)[0].username;\r\n                    localStorage.setItem('username', username);\r\n                    dispatch(authSetUsername(Object.values(response.data)[0].username))\r\n                }\r\n            })\r\n            .catch(error => {\r\n                dispatch(authFailed(error.response.data.error))\r\n            })\r\n    }\r\n};\r\n\r\nexport const signUp = (username, email, password) => {\r\n    return dispatch => {\r\n        dispatch(authStart());\r\n        const authData = {\r\n            email,\r\n            password,\r\n            returnSecureToken: true\r\n        };\r\n        const url = \"https://www.googleapis.com/identitytoolkit/v3/relyingparty/signupNewUser?key=\" + apiKey;\r\n        axios.post(url, authData)\r\n            .then(response => {\r\n                const expirationDate = new Date(new Date().getTime() + response.data.expiresIn * 1000);\r\n                localStorage.setItem('token', response.data.idToken);\r\n                localStorage.setItem('expirationDate', expirationDate);\r\n                localStorage.setItem('userId', response.data.localId);\r\n                localStorage.setItem('username', username);\r\n\r\n                dispatch(authSucceed(response.data.idToken, response.data.localId, username));\r\n                dispatch(checkAuthTimeout(response.data.expiresIn));\r\n\r\n                const user = {\r\n                    userId: response.data.localId,\r\n                    username: username\r\n                };\r\n                return axios.post(\"https://debug-viewer.firebaseio.com/users.json\", user);\r\n            })\r\n            .then(response => {\r\n                // do nothing\r\n            })\r\n            .catch(error => {\r\n                console.log(error.response.data.error);\r\n                dispatch(authFailed(error.response.data.error))\r\n            })\r\n    }\r\n};\r\n\r\nexport const authCheckState = () => {\r\n    return dispatch => {\r\n        const token = localStorage.getItem('token');\r\n        if (!token) {\r\n            dispatch(logout());\r\n        }\r\n        else {\r\n            const userId = localStorage.getItem('userId');\r\n            const username = localStorage.getItem('username');\r\n            const expirationDate = new Date(localStorage.getItem('expirationDate'));\r\n            if (expirationDate > new Date()) {\r\n                const timeLeft = expirationDate.getTime() - new Date().getTime()\r\n                dispatch(authSucceed(token, userId, username));\r\n                dispatch(checkAuthTimeout(timeLeft / 1000));\r\n            }\r\n            else {\r\n                dispatch(logout());\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n","import React from 'react';\r\nimport Modal from '../Modal';\r\nimport classes from './Spinner.module.css';\r\n\r\nconst spinner = () => {\r\n    return (\r\n        <Modal>\r\n            <div className={classes.BackDrop} >\r\n                <div className={classes.Loader}>Loading ...</div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default spinner;","import React, {Component} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport * as authActions from '../../../store/actions/auth';\r\nimport Spinner from '../../../components/UI/Spinner/Spinner';\r\nimport classes from './Signup.module.css';\r\n\r\nclass Signup extends Component {\r\n    state = {\r\n        username: \"\",\r\n        email: \"\",\r\n        password: \"\"\r\n    };\r\n\r\n    submitForm = (event) => {\r\n        event.preventDefault();\r\n        this.props.signUp(this.state.username,\r\n            this.state.email,\r\n            this.state.password);\r\n    };\r\n\r\n    controlChanged = (event) => {\r\n        const updatedState = {\r\n            ...this.state,\r\n            [event.target.name]: event.target.value\r\n        };\r\n        this.setState(updatedState);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className={classes.AuthForm}>\r\n                <form onSubmit={this.submitForm}>\r\n                    <input type=\"text\" value={this.state.username} name=\"username\" placeholder=\"username\"  onChange={this.controlChanged} />\r\n                    <input type=\"email\" value={this.state.email} name=\"email\" placeholder=\"e-mail address\" onChange={this.controlChanged} />\r\n                    <input type=\"password\" value={this.state.password} name=\"password\" placeholder=\"password\" onChange={this.controlChanged} />\r\n                    <button>Sign Up</button>\r\n                </form>\r\n\r\n                {this.props.loading ? <Spinner/> : null}\r\n\r\n                {this.props.error ? <h4>{this.props.error.message}</h4> : null}\r\n\r\n                {this.props.isAuthenticated ? <Redirect to=\"/\" /> : null}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({auth}) => {\r\n    return {\r\n        loading: auth.loading,\r\n        error: auth.error,\r\n        isAuthenticated: auth.token !== null\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        signUp: (username, email, password, isSignUp) => dispatch(authActions.signUp(username, email, password, isSignUp))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Signup);","import React, {Component} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect, NavLink } from 'react-router-dom';\r\n\r\nimport * as authActions from '../../../store/actions/auth';\r\nimport Spinner from '../../../components/UI/Spinner/Spinner';\r\nimport classes from './Login.module.css';\r\n\r\nclass Login extends Component {\r\n    state = {\r\n        email: \"\",\r\n        password: \"\"\r\n    };\r\n\r\n    submitForm = (event) => {\r\n        event.preventDefault();\r\n        this.props.logIn(this.state.email, this.state.password);\r\n    };\r\n\r\n    controlChanged = (event) => {\r\n        const updatedState = {\r\n            ...this.state,\r\n            [event.target.name]: event.target.value\r\n        };\r\n        this.setState(updatedState);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className={classes.AuthForm}>\r\n                <form onSubmit={this.submitForm}>\r\n                    <input type=\"email\" value={this.state.email} name=\"email\" placeholder=\"e-mail address\" onChange={this.controlChanged} />\r\n                    <input type=\"password\" value={this.state.password} name=\"password\" placeholder=\"password\" onChange={this.controlChanged} />\r\n                    <button>Log In</button>\r\n                </form>\r\n\r\n                {this.props.loading ? <Spinner/> : null}\r\n\r\n                {this.props.error ? <h4>{this.props.error.message}</h4> : null}\r\n\r\n                {this.props.isAuthenticated ? <Redirect to=\"/\" /> : null}\r\n\r\n                <span>Not registered yet?</span><NavLink to=\"signup\">Sign Up</NavLink>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({auth}) => {\r\n    return {\r\n        loading: auth.loading,\r\n        error: auth.error,\r\n        isAuthenticated: auth.token !== null\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        logIn: (email, password) => dispatch(authActions.logIn(email, password))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","import React, {Component} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport * as actions from '../../store/actions/auth';\r\n\r\nclass Logout extends Component {\r\n    componentDidMount() {\r\n        this.props.onLogout();\r\n    }\r\n\r\n    render() {\r\n        return <Redirect to=\"/\" />;\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        onLogout: () => dispatch(actions.logout())\r\n    }\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(Logout);","import Flatten from 'flatten-js';\r\n\r\nlet {Box} = Flatten;\r\n\r\nexport class Job {\r\n    constructor() {\r\n        this.filename = \"\";\r\n        this.title = \"\";\r\n        this.profiles = [];   // array of FlattenJS Polygons\r\n        this.materials = [];  // array of FlattenJS Polygons\r\n        this.shapes = [];     // array of other FlattenJS shapes\r\n    }\r\n\r\n    get box() {\r\n        let b = new Box();\r\n        for (let shape of this.profiles) {\r\n            b.merge(shape.box);\r\n        }\r\n        for (let shape of this.materials) {\r\n            b.merge(shape.box);\r\n        }\r\n        for (let shape of this.shapes) {\r\n            b.merge(shape.box);\r\n        }\r\n        return b;\r\n    }\r\n}","import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nlet {Point, Segment, Arc, Polygon} = Flatten;\r\nlet { vector } = Flatten;\r\n\r\nconst inch2pixels = 10160000;\r\nconst mils2pixels = 10160;\r\nfunction InchToPixels(str) {\r\n    return Math.round(Number(str)*inch2pixels,0);\r\n}\r\nfunction MilsToPixels(str) {\r\n    return Math.round(Number(str)*mils2pixels,0);\r\n}\r\n\r\nfunction parsePolygon(lines, start) {\r\n    let shapes = [];\r\n    let i = start;\r\n    let line = lines[i];\r\n    let terms = line.split(' ');\r\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n    let pe;\r\n    let pc;\r\n    let end_of_face = false;\r\n    while(true) {\r\n        line = lines[i];\r\n        terms = line.split(' ');\r\n        switch (terms[0]) {\r\n            case 'OS':\r\n                pe = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n                shapes.push( new Segment(ps, pe));\r\n\r\n                ps = pe.clone();\r\n                break;\r\n            case 'OC':\r\n                pe = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n                pc = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\r\n\r\n                let cwStr = terms[5];\r\n                let counterClockwise = cwStr === 'Y' ? Flatten.CW : Flatten.CCW; /* sic ! */\r\n\r\n                let startAngle = vector(pc,ps).slope;\r\n                let endAngle = vector(pc, pe).slope;\r\n                if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n                    endAngle += 2*Math.PI;\r\n                    counterClockwise = true;\r\n                }\r\n                let r = vector(pc, ps).length;\r\n\r\n                shapes.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\r\n\r\n                ps = pe.clone();\r\n                break;\r\n            case 'OE':\r\n                end_of_face = true;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (end_of_face) {\r\n            break;\r\n        }\r\n\r\n        i++;\r\n    }\r\n    return shapes;\r\n}\r\n\r\nfunction parseLine(str, apertures) {\r\n    let terms = str.split(' ');\r\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n    let pe = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\r\n    let segment = new Segment(ps, pe);\r\n    let ap_key = Number(terms[5]);\r\n    let ap_value = apertures[ap_key];\r\n    segment.aperture = ap_value;     // augmentation\r\n    return segment;\r\n}\r\n\r\nfunction parseArc(str, apertures) {\r\n    let terms = str.split(' ');\r\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\r\n    let pe = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\r\n    let pc = new Point( InchToPixels(terms[5]), InchToPixels(terms[6]) );\r\n\r\n    let cwStr = terms[10];\r\n    let counterClockwise = cwStr === 'Y' ? Flatten.CW : Flatten.CCW; /* sic ! */\r\n\r\n    let startAngle = vector(pc,ps).slope;\r\n    let endAngle = vector(pc, pe).slope;\r\n    if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n        endAngle += 2*Math.PI;\r\n        counterClockwise = true;\r\n    }\r\n    let r = vector(pc, ps).length;\r\n\r\n    let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\r\n\r\n    let ap_key = Number(terms[7]);\r\n    let ap_value = apertures[ap_key];\r\n    arc.aperture = ap_value;     // augmentation\r\n\r\n    return arc;\r\n}\r\n\r\nexport function parseODB(filename, str) {\r\n    let job = new Job();\r\n    job.filename = filename;\r\n\r\n    let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n    let polygon;\r\n\r\n    let apertures = [];\r\n\r\n    for (let i=0; i < arrayOfLines.length; i++) {\r\n        let line = arrayOfLines[i];\r\n        let terms = line.split(' ');\r\n\r\n        if (terms[0].substr(0,1) === '$') {\r\n            let ap_key = Number(terms[0].substr(1));\r\n            let ap_value = MilsToPixels(terms[1].substr(1));\r\n            apertures[ap_key] = ap_value;\r\n            continue;\r\n        }\r\n\r\n        switch (terms[0]) {\r\n            case 'S':                  // surface started\r\n                polygon = new Polygon();\r\n                let termArr = line.split(' ');\r\n                let polarity = termArr[1];      // consider later\r\n                polygon.polarity = polarity;\r\n                break;\r\n            case 'OB':                  // polygon started\r\n                let start = i;\r\n                let shapes = parsePolygon(arrayOfLines, start);\r\n                polygon.addFace(shapes);\r\n                i = start + shapes.length + 1;\r\n                break;\r\n            case 'SE':     // surface ended\r\n                job.shapes.push(polygon);\r\n                break;\r\n            case 'L':                  // line\r\n                let odbLine = parseLine(line, apertures);\r\n                job.shapes.push(odbLine);\r\n                break;\r\n            case 'A':                  // Arc\r\n                let odbArc = parseArc(line, apertures);\r\n                job.shapes.push(odbArc);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    return job;\r\n}","import /*React,*/ {Component} from 'react';\r\nimport axios from \"axios\";\r\n\r\nimport Layers from \"../../models/layers\";\r\nimport {parseODB} from \"../../dataParsers/parserODB\";\r\nimport Model from \"../../models/model\";\r\nimport * as ActionTypes from \"../../store/actionTypes\";\r\nimport * as actions from '../../store/actions/appActions';\r\nimport { connect } from 'react-redux';\r\n\r\nclass Demo extends Component {\r\n    state={\r\n        done:false\r\n    };\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n            let layers = this.props.layers;\r\n\r\n            let layer = Layers.newLayer(stage, layers);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.name = \"features\";\r\n            layer.title = \"features\";\r\n            layer.affected = true;\r\n            layer.displayed = true;\r\n\r\n            axios(\"https://gist.githubusercontent.com/alexbol99/825fdf2dd508467cc852eb22aa36183d/raw/d10e853338afd8294eeb3ffdebe3bc380477a978/features\")\r\n                .then( (resp) => {\r\n                    let job = parseODB(\"features\", resp.data);\r\n\r\n                    for (let shape of job.shapes) {\r\n                        let model = new Model(shape, undefined, shape.label);\r\n                        layer.add(model);\r\n                    }\r\n\r\n                    this.props.panAndZoomToShape(stage, layer);\r\n                    this.props.addNewLayer(layer);\r\n                    this.props.asyncOperationEnded();\r\n                });\r\n            this.setState({done:true});\r\n            this.props.asyncOperationStarted();\r\n        }\r\n    }\r\n    componentDidMount() {\r\n\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch({\r\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n            stage: stage,\r\n            shape: layer\r\n        }),\r\n        addNewLayer: (layer) => dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        }),\r\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\r\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded())\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Demo);\r\n","import /*React,*/ {Component} from 'react';\r\nimport Flatten from 'flatten-js';\r\nimport BooleanOp from 'flatten-boolean-op';\r\nimport Layers from \"../../models/layers\";\r\nimport * as ActionTypes from '../../store/actionTypes';\r\nimport { connect } from 'react-redux';\r\n\r\nlet {point, arc, Polygon} = Flatten;\r\nlet {subtract, intersect} = BooleanOp;\r\n\r\nclass BooleanTest extends Component {\r\n    state={\r\n        done:false\r\n    };\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n            let layers = this.props.layers;\r\n\r\n            let layer = Layers.newLayer(stage, layers);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.name = \"features\";\r\n            layer.title = \"features\";\r\n            layer.affected = true;\r\n            layer.displayed = true;\r\n\r\n            let myPoly = new Polygon();\r\n            myPoly.addFace([point(6, 6), point(6,114), point(114, 114), point(114, 6)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);  // 0\r\n\r\n            let myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,0),84.5779281026111, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 1\r\n\r\n            myPoly = intersect(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 2\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,0),84.49938828627135, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 3\r\n\r\n            myPoly = subtract(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 4\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,120),84.8710637077582, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 5\r\n\r\n            myPoly = intersect(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 6\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(0,120),84.79252389141845, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 7\r\n\r\n            myPoly = subtract(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 8\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(120,120),85.20624291591454, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 9\r\n\r\n            myPoly = intersect(myPoly,myCircle);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 10\r\n\r\n            myCircle = new Polygon();\r\n            myCircle.addFace([arc(point(120,120), 85.1277030995748, 0, 2*Math.PI, Flatten.CW)]);\r\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 11\r\n\r\n            layers[0].color = Layers.getNextColor(layers);\r\n            layers[0].affected = true;\r\n            layers[0].displayed = true;\r\n\r\n            this.props.panAndZoomToShape(stage, layers[0]);\r\n\r\n            this.setState({done:true});\r\n        }\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch({\r\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n            stage: stage,\r\n            shape: layer\r\n        }),\r\n        addNewLayer: (layer) => dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        })\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BooleanTest);\r\n","import /*React,*/ {Component} from 'react';\r\nimport * as ActionTypes from \"../../store/actionTypes\";\r\nimport { connect } from 'react-redux';\r\n\r\nclass SkeletonRecognition extends Component {\r\n    componentDidMount() {\r\n        this.props.applySkeletonRecognition();\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        applySkeletonRecognition: () => dispatch({type: ActionTypes.SKELETON_RECOGNITION_URI})\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SkeletonRecognition);\r\n","import Flatten from \"flatten-js\";\r\n// let Flatten = require('flatten-js');\r\n\r\nlet {Vector, Segment, Arc, Line, Box, Polygon} = Flatten;\r\n\r\nclass CollisionDistance {\r\n    static apply(polygon1, polygon2) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        for (let edge of [...polygon2.edges]) {\r\n            let distance = CollisionDistance.edge2polygon(edge, polygon1);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static edge2polygon(edge2, polygon1) {\r\n        let shapeBox = edge2.shape.box;\r\n        let box = new Box(\r\n            Number.NEGATIVE_INFINITY,\r\n            shapeBox.ymin,\r\n            Number.POSITIVE_INFINITY,\r\n            shapeBox.ymax\r\n        );\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        let resp_edges =  polygon1.edges.search(box);\r\n        for (let edge1 of resp_edges) {\r\n            let distance;\r\n            if (edge1.shape instanceof Segment && edge2.shape instanceof Segment) {\r\n                distance = CollisionDistance.segment2segment(edge1.shape, edge2.shape);\r\n            }\r\n            else if (edge1.shape instanceof Arc && edge2.shape instanceof Segment) {\r\n                distance = CollisionDistance.segment2arc(edge2.shape, edge1.shape);\r\n            }\r\n            else if (edge1.shape instanceof Segment && edge2.shape instanceof Arc) {\r\n                distance = CollisionDistance.segment2arc(edge1.shape, edge2.shape);\r\n            }\r\n            else if (edge1.shape instanceof Arc && edge2.shape instanceof Arc) {\r\n                distance = CollisionDistance.arc2arc(edge1.shape, edge2.shape);\r\n            }\r\n\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static point2shape(point, shape) {\r\n        let line = new Line(point, new Vector(0,1));\r\n        let intersections = line.intersect(shape);          // segment or arc\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        for (let ip of intersections) {\r\n            // eslint-disable-next-line\r\n            let [distance, shortest_segment] = point.distanceTo(ip);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static segment2segment(segment1, segment2) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        for (let point of segment1.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, segment2);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        for (let point of segment2.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, segment1);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static segment2arc(segment, arc) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        let v_s = new Vector(segment.start, segment.end);\r\n        v_s = v_s.normalize();\r\n\r\n        let v_n = [v_s.rotate90CCW().multiply(arc.r), v_s.rotate90CW().multiply(arc.r)];\r\n        let distance;\r\n\r\n        // Distance between tangent point and segment\r\n        for (let v of v_n) {\r\n            let tangent_point = arc.center.translate(v);  // tangent point in direction of the normal vector\r\n            if (tangent_point.on(arc)) {\r\n                distance = CollisionDistance.point2shape(tangent_point, segment);\r\n                if (distance < collision_distance) {\r\n                    collision_distance = distance;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let point of arc.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, segment);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        for (let point of segment.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, arc);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static arc2arc(arc1, arc2) {\r\n        let collision_distance = Number.POSITIVE_INFINITY;\r\n        let distance;\r\n\r\n        // test translation of arc2.center to arc1 enlarged by r2\r\n        let arc_enlarged = arc1.clone();\r\n        arc_enlarged.r += arc2.r;\r\n        distance = CollisionDistance.point2shape(arc2.center, arc_enlarged);\r\n        if (distance < collision_distance) {\r\n            // additional check that transformed arc actually touching\r\n            // eslint-disable-next-line\r\n            let [dist_tmp, shortest_segment_tmp] =\r\n                arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\r\n            if (Flatten.Utils.EQ_0(dist_tmp)) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n\r\n        // test translation of arc2.center to arc1 reduced by r2\r\n        if (Flatten.Utils.GE(arc1.r, arc2.r)) {\r\n            let arc_reduced = arc1.clone();\r\n            arc_reduced.r -= arc2.r;\r\n            distance = CollisionDistance.point2shape(arc2.center, arc_reduced);\r\n            if (distance < collision_distance) {\r\n                // additional check that transformed arc actually touching\r\n                // eslint-disable-next-line\r\n                let [dist_tmp, shortest_segment_tmp] =\r\n                    arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\r\n                if (Flatten.Utils.EQ_0(dist_tmp)) {\r\n                    collision_distance = distance;\r\n                }\r\n            }\r\n        }\r\n\r\n        // test translation of arc1.center to arc2 reduced by r1\r\n        if (Flatten.Utils.LT(arc1.r, arc2.r)) {\r\n            let arc_reduced = arc2.clone();\r\n            arc_reduced.r -= arc1.r;\r\n            distance = CollisionDistance.point2shape(arc1.center, arc_reduced);\r\n            if (distance < collision_distance) {\r\n                // additional check that transformed arc actually touching\r\n                // eslint-disable-next-line\r\n                let [dist_tmp, shortest_segment_tmp] =\r\n                    arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\r\n                if (Flatten.Utils.EQ_0(dist_tmp)) {\r\n                    collision_distance = distance;\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let point of arc1.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, arc2);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        for (let point of arc2.vertices) {\r\n            let distance = CollisionDistance.point2shape(point, arc1);\r\n            if (distance < collision_distance) {\r\n                collision_distance = distance;\r\n            }\r\n        }\r\n        return collision_distance;\r\n    }\r\n\r\n    static translateArc(arc, vec) {\r\n        let arc_tmp = arc.clone();\r\n        arc_tmp.pc = arc_tmp.pc.translate(vec);\r\n        return arc_tmp;\r\n    }\r\n\r\n    static translate(polygon, vec) {\r\n        let newPolygon = new Polygon();\r\n        for (let face of polygon.faces) {\r\n            let shapes = [];\r\n            for (let edge of face) {\r\n                if (edge.shape instanceof Segment) {\r\n                    shapes.push(\r\n                        new Segment(edge.shape.ps.translate(vec), edge.shape.pe.translate(vec))\r\n                    )\r\n                }\r\n                else if (edge.shape instanceof  Arc) {\r\n                    let arc_trans = edge.shape.clone();\r\n                    arc_trans.pc = edge.shape.pc.translate(vec);\r\n                    shapes.push(arc_trans);\r\n                }\r\n            }\r\n            newPolygon.addFace(shapes);\r\n        }\r\n        return newPolygon;\r\n    }\r\n\r\n};\r\n\r\nCollisionDistance.Flatten = Flatten;\r\n\r\nexport default CollisionDistance;\r\n","import /*React,*/ {Component} from 'react';\r\nimport Flatten from 'flatten-js';\r\nimport CollisionDistance from \"../../models/collisionDistance\";\r\nimport axios from \"axios\";\r\nimport Layers from \"../../models/layers\";\r\n// import {Model} from \"../../models/model\";\r\nimport * as ActionTypes from \"../../store/actionTypes\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../store/actions/appActions\";\r\n\r\nlet {vector} = Flatten;\r\n\r\nclass CollisionDemo extends Component {\r\n    state={\r\n        done:false,\r\n        data:[]\r\n    };\r\n    componentDidUpdate() {\r\n        if (this.props.stage && !this.state.done) {\r\n            let stage = this.props.stage;\r\n            let layers = this.props.layers;\r\n\r\n            let layer = Layers.newLayer(stage, layers);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.name = \"collision_demo\";\r\n            layer.title = \"collision_demo\";\r\n            layer.affected = true;\r\n            layer.displayed = true;\r\n\r\n            axios(\"https://gist.githubusercontent.com/alexbol99/81893d40ec5eaa00d0336c35e069dd73/raw/b9328a4c6d7d6a44f375c68b4ec207690f40fd19/Block_53388_2parts_Cont.txt\")\r\n                .then( (resp) => {\r\n                    let parser = this.props.parser;\r\n                    let polygon1 = parser.parseToPolygon(resp.data);\r\n                    layer.add(polygon1);\r\n\r\n                    let vec = vector( 2*(polygon1.box.xmax - polygon1.box.xmin), 0 );\r\n                    let polygon2 = polygon1.translate(vec);\r\n                    layer.add(polygon2);\r\n\r\n                    let collision = CollisionDistance.apply(polygon2, polygon1);\r\n                    let polygon3 = polygon2.translate(vector(-collision, 0));\r\n                    layer.add(polygon3);\r\n\r\n                    // layers.push(layer);\r\n\r\n                    this.props.panAndZoomToShape(stage, layer);\r\n                    this.props.addNewLayer(layer);\r\n                    this.props.applyCollisionDemo();\r\n                    this.props.asyncOperationEnded();\r\n                });\r\n            this.setState({done:true});\r\n            this.props.asyncOperationStarted();\r\n        }\r\n    }\r\n    render() {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        layers: state.layers,\r\n        stage: state.app.stage,\r\n        parser: state.app.parser\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        panAndZoomToShape: (stage, layer) => dispatch({\r\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n            stage: stage,\r\n            shape: layer\r\n        }),\r\n        addNewLayer: (layer) => dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        }),\r\n        applyCollisionDemo: () => dispatch({\r\n            type: ActionTypes.COLLISION_DEMO_URI\r\n        }),\r\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\r\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded())\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CollisionDemo);\r\n","import React from 'react';\r\nimport classes from \"./DocumentComponentCell.module.css\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst documentComponentCell = ({id, document, deleteDocumentFromDatabase, documentSelectedFromList}) => {\r\n    const deleteDocumentButtonClicked = (event) => {\r\n        event.stopPropagation();\r\n        deleteDocumentFromDatabase(id);\r\n    };\r\n\r\n    const onClick = () => {\r\n        documentSelectedFromList({\r\n            id: id,\r\n            name: document.name,\r\n            owner: document.owner,\r\n            lastUpdated: document.lastUpdated\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className={classes.DocumentComponentCell}>\r\n            <Link to={\"/documents/\" + id} onClick={onClick} >\r\n                <div>\r\n                    <img src={document.dataURL} alt={document.name} width=\"400px\"/>\r\n                </div>\r\n            </Link>\r\n            <div className={classes.DocumentComponentCellBottom}>\r\n                <div>\r\n                    <h4>{document.name}</h4>\r\n                    <h6>Last updated: {document.lastUpdated}</h6>\r\n                </div>\r\n                <button onClick={deleteDocumentButtonClicked}>Delete</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default documentComponentCell;","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\n// import {Link/*, Switch*/} from 'react-router-dom';\r\nimport * as cloudActions from '../../store/actions/cloudStorageActions';\r\nimport * as actions from \"../../store/actions/appActions\";\r\nimport classes from './DocumentsComponent.module.css';\r\nimport DocumentComponentCell from '../../components/Documents/DocumentComponentCell';\r\n\r\nclass DocumentsComponent extends Component {\r\n    state = {\r\n        updated: false\r\n    };\r\n\r\n    deleteDocumentFromDatabase = (id) => {\r\n        cloudActions.deleteDocumentFromDatabase(id)\r\n            .then((response) => {\r\n                // const index = this.props.documentsList.findIndex((doc) => doc.id === id);\r\n                this.props.deleteDocumentFromDatabaseSucceed(id);\r\n                this.props.asyncOperationEnded();\r\n            });\r\n        this.props.asyncOperationStarted();\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        if (!this.props.token) return;\r\n        // if (this.state.updated) return;\r\n        cloudActions.fetchDocumentsFromDatabase(this.props.token, this.props.userId)\r\n            .then((response) => {\r\n                this.props.requestFetchDocumentsFromDatabaseSucceed(response.data);\r\n                this.props.asyncOperationEnded();\r\n\r\n            });\r\n        if (this.props.documentsList.length === 0) {\r\n            this.props.asyncOperationStarted();\r\n        }\r\n        // this.setState({updated:true});\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className={classes.DocumentComponent}>\r\n                <h2>My Cloud Documents</h2>\r\n                {/*<hr />*/}\r\n                <div className={classes.DocumentComponentGrid}>\r\n                    {Object.keys(this.props.documentsList).map(key => {\r\n                        let document = this.props.documentsList[key];\r\n                        return (<DocumentComponentCell\r\n                            key={key}\r\n                            id={key}\r\n                            document={document}\r\n                            deleteDocumentFromDatabase={this.deleteDocumentFromDatabase}\r\n                            documentSelectedFromList={this.props.documentSelectedFromList}\r\n                        />)\r\n                    })}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({auth,cloudStorage}) => {\r\n    return {\r\n        documentsList: cloudStorage.documentsList,\r\n        token: auth.token,\r\n        userId: auth.userId\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\r\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded()),\r\n        requestFetchDocumentsFromDatabaseSucceed: (documentsList) =>\r\n            dispatch(cloudActions.requestFetchDocumentsFromDatabaseSucceed(documentsList)),\r\n        deleteDocumentFromDatabaseSucceed: (id) =>\r\n            dispatch(cloudActions.deleteDocumentFromDatabaseSucceed(id)),\r\n        documentSelectedFromList: (document) => dispatch(cloudActions.updateCurrentDocument(document))\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentsComponent);\r\n","import React, {Component} from 'react';\r\nimport {Route, Switch, withRouter} from 'react-router-dom';\r\n\r\nimport AppBody from './AppBody';\r\nimport HeaderComponent from './components/Layout/HeaderComponent/HeaderComponent';\r\nimport Signup from './containers/Auth/SignUp/Signup';\r\nimport Login from './containers/Auth/Login/Login';\r\nimport Logout from './containers/Auth/Logout';\r\nimport {connect} from 'react-redux';\r\n\r\nimport './App.css';\r\n\r\n// import CloudDocument from './components/Constructions/CloudDocument';\r\nimport Demo from './components/Constructions/Demo';\r\nimport BooleanTest from './components/Constructions/BooleanTest';\r\nimport SkeletonRecognition from './components/Constructions/SkeletonRecognition';\r\nimport CollisionDemo from \"./components/Constructions/CollisionDemo\";\r\nimport Spinner from \"./components/UI/Spinner/Spinner\";\r\nimport DocumentsComponent from \"./containers/DocumentsComponent/DocumentsComponent\";\r\nimport * as authActions from \"./store/actions/auth\";\r\n\r\nclass App extends Component {\r\n    componentDidMount() {\r\n        this.props.authCheckState();\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.location.pathname === '/' && this.props.document.id !== undefined) {\r\n            this.props.history.push(\"/documents/\" + this.props.document.id)\r\n        }\r\n\r\n        // if (this.props.location.pathname.split('/').length > 2 &&\r\n        //     this.props.location.pathname.split('/')[2].length > 0 &&\r\n        //     this.props.document.id === undefined) {\r\n        //     this.props.history.push(\"/\");\r\n        // }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"App\">\r\n                <HeaderComponent\r\n                    title={this.props.title}\r\n                    version={this.props.version}\r\n                    isAuthenticated={this.props.isAuthenticated}\r\n                    username={this.props.username}\r\n                />\r\n\r\n                <Switch>\r\n                    <Route path=\"/documents\" exact component={DocumentsComponent}/>\r\n                    <Route path=\"/signup\" component={Signup} />\r\n                    <Route path=\"/login\" component={Login} />\r\n                    <Route path=\"/logout\" component={Logout} />\r\n\r\n                    <Route path=\"/\" component={AppBody}/>\r\n\r\n                    {/*<Route path=\"/documents/:id\" component={CloudDocument}/>*/}\r\n\r\n                    <Route path=\"/demo\" component={Demo}/>\r\n                    <Route path=\"/boolean-test\" component={BooleanTest}/>\r\n                    <Route path=\"/skeleton\" component={SkeletonRecognition}/>\r\n                    <Route path=\"/collision-distance\" component={CollisionDemo}/>\r\n\r\n                </Switch>\r\n\r\n                {this.props.showSpinner ? <Spinner/> : null}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({auth, app, cloudStorage}) => {\r\n    return {\r\n        title: app.title,\r\n        version: app.version,\r\n        showSpinner: app.showSpinner,\r\n        document: cloudStorage.document,\r\n        isAuthenticated: auth.token !== null,\r\n        username: auth.username\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        authCheckState: () => dispatch(authActions.authCheckState())\r\n    }\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));\r\n","import * as ActionTypes from '../store/actionTypes';\r\n\r\nconst log = ({ getState, dispatch }) => next => action => {\r\n\r\n    if(action.type !== ActionTypes.MOUSE_MOVED_ON_STAGE) {\r\n        console.log('ACTION: ' + action.type, action);\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\nexport default log;","import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nlet {Point, Segment, Arc, Polygon} = Flatten;\r\nlet { vector } = Flatten;\r\n\r\nfunction parseEdges(edgesXML) {\r\n    let edges = [];\r\n\r\n    for (let edge of Array.from(edgesXML)) {\r\n        let type = edge.getAttribute('type');\r\n\r\n        if (type === \"segment\") {\r\n            let ps = new Point(parseInt(edge.getAttribute('xs'),10), parseInt(edge.getAttribute('ys'),10));\r\n            let pe = new Point(parseInt(edge.getAttribute('xe'),10), parseInt(edge.getAttribute('ye'),10));\r\n\r\n            edges.push(new Segment(ps, pe));\r\n        }\r\n\r\n        if (type === \"curve\") {\r\n            let ps = new Point(parseInt(edge.getAttribute('xs'),10), parseInt(edge.getAttribute('ys'),10));\r\n            let pe = new Point(parseInt(edge.getAttribute('xe'),10), parseInt(edge.getAttribute('ye'),10));\r\n            let pc = new Point(parseInt(edge.getAttribute('xc'),10), parseInt(edge.getAttribute('yc'),10));\r\n\r\n            let counterClockwise = edge.getAttribute('cw') === 'no' ? true : false;\r\n\r\n            let startAngle = vector(pc,ps).slope;\r\n            let endAngle = vector(pc, pe).slope;\r\n\r\n            if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n                endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\r\n            }\r\n\r\n            let r = vector(pc, ps).length;\r\n\r\n            edges.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\r\n        }\r\n    }\r\n\r\n    return edges;\r\n}\r\n\r\nfunction parsePolygon(polygonsXML) {\r\n    let polygon = new Polygon();\r\n\r\n    // let nedges = parseInt(profile.getAttribute(\"n_edges\"), 10);\r\n\r\n    // Augment Flatten object with style\r\n    let color = polygonsXML.getAttribute(\"color\");\r\n    polygon.style = {\r\n        stroke: color || undefined,\r\n        fill: color || undefined,\r\n        alpha: 1.0\r\n    };\r\n\r\n    // Augment Flatten object with label\r\n    let label = polygonsXML.getAttribute(\"label\");\r\n    polygon.label = label;\r\n\r\n    // Add islands\r\n    let islands = polygonsXML.getElementsByTagName('island');\r\n    for (let island of Array.from(islands)) {\r\n        let edgesXML = island.getElementsByTagName('edge');\r\n        polygon.addFace(parseEdges(edgesXML));\r\n    }\r\n\r\n    // Add holes\r\n    let holes = polygonsXML.getElementsByTagName('hole');\r\n    for (let hole of Array.from(holes)) {\r\n        let edgesXML = hole.getElementsByTagName('edge');\r\n        polygon.addFace(parseEdges(edgesXML));\r\n    }\r\n\r\n    return polygon;\r\n}\r\n\r\nfunction parseSegment(segmentXML) {\r\n    let ps = new Point(parseInt(segmentXML.getAttribute('xs'),10), parseInt(segmentXML.getAttribute('ys'),10));\r\n    let pe = new Point(parseInt(segmentXML.getAttribute('xe'),10), parseInt(segmentXML.getAttribute('ye'),10));\r\n\r\n    let segment = new Segment(ps, pe);\r\n\r\n    // Augment Flatten object with label property\r\n    let label = segmentXML.getAttribute(\"label\");\r\n    segment.label = label;\r\n\r\n    return segment;\r\n}\r\n\r\nfunction parseCurve(curveXML) {\r\n    let ps = new Point(parseInt(curveXML.getAttribute('xs'),10), parseInt(curveXML.getAttribute('ys'),10));\r\n    let pe = new Point(parseInt(curveXML.getAttribute('xe'),10), parseInt(curveXML.getAttribute('ye'),10));\r\n    let pc = new Point(parseInt(curveXML.getAttribute('xc'),10), parseInt(curveXML.getAttribute('yc'),10));\r\n\r\n    let counterClockwise = curveXML.getAttribute('cw') === 'yes' ? true : false;\r\n\r\n    let startAngle = vector(pc,ps).slope;\r\n    let endAngle = vector(pc, pe).slope;\r\n\r\n    if (Flatten.Utils.EQ(startAngle, endAngle)) {\r\n        endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\r\n    }\r\n\r\n    let r = vector(pc, ps).length;\r\n\r\n    let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\r\n\r\n    // Augment Flatten object with label property\r\n    let label = curveXML.getAttribute(\"label\");\r\n    arc.label = label;\r\n\r\n    return arc;\r\n}\r\n\r\nfunction parsePoint(pointXML) {\r\n    let point = new Point(parseInt(pointXML.getAttribute('x'),10), parseInt(pointXML.getAttribute('y'),10));\r\n\r\n    // Augment Flatten object with label property\r\n    let label = pointXML.getAttribute(\"label\");\r\n    point.label = label;\r\n\r\n    return point;\r\n}\r\nexport function parseXML(filename, str) {\r\n    let job = new Job();\r\n\r\n    job.filename = filename;\r\n\r\n    let parser = new DOMParser();\r\n    let xmlDoc = parser.parseFromString(str, \"text/xml\");\r\n\r\n    // Parse document title\r\n    let titles = xmlDoc.getElementsByTagName('title');\r\n    if (titles && titles.length > 0) {\r\n        job.title = titles[0].firstChild.nodeValue;          // take the first title if more than one\r\n    }\r\n\r\n    // Parse profiles and add polygons to the job\r\n    let profilesXML = xmlDoc.getElementsByTagName('profile');\r\n    for (let profileXML of Array.from(profilesXML)) {\r\n        let polygon = parsePolygon(profileXML);\r\n        job.profiles.push(polygon);\r\n    }\r\n\r\n    // Parse materials and add polygons to the job\r\n    let materialXML = xmlDoc.getElementsByTagName('material');\r\n    for (let shapeXML of Array.from(materialXML)) {\r\n        let polygon = parsePolygon(shapeXML);\r\n        job.materials.push(polygon);\r\n    }\r\n\r\n    // Parse segments\r\n    let segmentsXML = xmlDoc.getElementsByTagName('segment');\r\n    for (let segmentXML of Array.from(segmentsXML)) {\r\n        let segment = parseSegment(segmentXML);\r\n        job.shapes.push(segment);\r\n    }\r\n\r\n    // Parse segments\r\n    let curvesXML = xmlDoc.getElementsByTagName('curve');\r\n    for (let curveXML of Array.from(curvesXML)) {\r\n        let curve = parseCurve(curveXML);\r\n        job.shapes.push(curve);\r\n    }\r\n\r\n    // Parse points\r\n    let pointsXML = xmlDoc.getElementsByTagName('point');\r\n    for (let pointXML of Array.from(pointsXML)) {\r\n        let point = parsePoint(pointXML);\r\n        job.shapes.push(point);\r\n    }\r\n    return job;\r\n}\r\n","import Flatten from 'flatten-js';\r\n\r\nconst pgmResolution = 25.500025;\r\nconst microns2pixels = 400;\r\n// const inch2pixels = 10160;\r\n// const offsetX = 12.322830;\r\n// const offsetY = 8.326776;\r\nconst sizeX = 3.0303;\r\n\r\nfunction toPixels(str) {\r\n    let num = Number(str);\r\n    return Math.round(num*pgmResolution*microns2pixels,0);\r\n}\r\n\r\nexport function parseImage(file) {\r\n    let image = {};          // TODO: to be Flatten.Image\r\n\r\n    let terms = file.name.split('_');\r\n    let yStr = terms[0].substr(1);\r\n    let xStr = terms[1] ? terms[1].substr(1) : undefined;\r\n\r\n    let x = isNaN(xStr) ? 0 : toPixels(xStr) + 90000;\r\n    let y = isNaN(yStr) ? 0 : toPixels(yStr) - 40000;\r\n\r\n    image.center = new Flatten.Point(x,y);\r\n    image.width = sizeX*microns2pixels*1000;    // 2 mm\r\n    image.box = new Flatten.Box(\r\n        image.center.x - image.width/2,\r\n        image.center.y - image.width/2,\r\n        image.center.x + image.width/2,\r\n        image.center.y + image.width/2,\r\n    );\r\n\r\n    return image;\r\n}","import { Job } from '../models/job';\r\nimport Flatten from 'flatten-js';\r\n\r\nlet {point} = Flatten;\r\n\r\nconst micron2pixels = 400;\r\nfunction micronToPixels(str) {\r\n    return Math.round(Number(str)*micron2pixels,0);\r\n}\r\n\r\nexport function parseCSV(filename, str) {\r\n    let job = new Job();\r\n    job.filename = filename;\r\n\r\n    let arrayOfLines = str.match(/[^\\r\\n]+/g);\r\n\r\n    for (let i = 0; i < arrayOfLines.length; i++) {\r\n        let line = arrayOfLines[i];\r\n        let terms = line.split(',');\r\n\r\n        let px = micronToPixels(terms[0]);\r\n        let py = micronToPixels(terms[1]);\r\n        let nx = Number(terms[2]);\r\n        let ny = Number(terms[3]);\r\n        let shape = point(px,py);\r\n        shape.nx = nx\r\n        shape.ny = ny;\r\n        job.shapes.push(shape)\r\n    }\r\n\r\n    return job\r\n}","import * as ActionTypes from '../store/actionTypes';\r\nimport Layers from '../models/layers';\r\n// import { Shape } from '../models/shape';\r\nimport Model from \"../models/model\";\r\nimport { parseXML } from '../dataParsers/parserXML';\r\nimport { parseODB } from \"../dataParsers/parserODB\";\r\nimport { parseImage } from \"../dataParsers/parsePGM\";\r\nimport { parseCSV } from \"../dataParsers/parseCSV\";\r\nimport { parseTXT } from \"../dataParsers/parseTXT\";\r\n\r\nconst readAsText = (reader, file, stage, layers, dispatch, files) => {\r\n\r\n    // Closure to capture file information and parameters\r\n    reader.onload = (function(theFile, stage, layers, dispatch, files) {\r\n        return (event) => {\r\n            let string = event.target.result;\r\n\r\n            let namesplitted = theFile.name.split('.');\r\n            let extension = namesplitted[namesplitted.length-1];\r\n            let job;\r\n            if (extension === 'xml') {\r\n                job = parseXML(theFile.name, string);\r\n            }\r\n            else if (extension === 'csv') {\r\n                job = parseCSV(theFile.name, string);\r\n            }\r\n            else if (extension === 'txt') {\r\n                job = parseTXT(theFile.name, string);\r\n            }\r\n            else {\r\n                job = parseODB(theFile.name, string);\r\n            }\r\n            let layer = Layers.newLayer(stage, layers);\r\n            if (theFile.name !== \"\") {\r\n                layer.name = theFile.name;\r\n            }\r\n            layer.title = job.title;\r\n\r\n            for (let polygon of job.profiles) {\r\n                if (polygon.edges.size > 0 && polygon.faces.size > 0) {\r\n                    // let watch = undefined; //  parser.parseToWatchArray(string);\r\n                    // let shape = new Shape(polygon, stage, polygon.style, watch);\r\n                    let shape = new Model(polygon, undefined, polygon.label);\r\n\r\n                    layer.add(shape);\r\n                }\r\n            }\r\n\r\n            for (let polygon of job.materials) {\r\n                if (polygon.edges.size > 0 && polygon.faces.size > 0) {\r\n                    // let watch = undefined; //  parser.parseToWatchArray(string);\r\n                    // let shape = new Shape(polygon, stage, polygon.style, watch);\r\n                    let shape = new Model(polygon, undefined, polygon.label);\r\n\r\n                    layer.add(shape);\r\n                }\r\n            }\r\n\r\n            for (let shape of job.shapes) {\r\n                let model = new Model(shape, undefined, shape.label);\r\n                layer.add(model);\r\n            }\r\n\r\n            // layers.push(layer);\r\n\r\n            if (theFile === files[0]) {\r\n                Layers.setAffected(layers, layer);\r\n                layer.color = Layers.getNextColor(layers);\r\n                layer.displayed = true;\r\n                dispatch({\r\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                    stage: stage,\r\n                    shape: layer\r\n                });\r\n            }\r\n            dispatch({\r\n                type: ActionTypes.ADD_NEW_LAYER,\r\n                layer: layer\r\n            });\r\n\r\n            dispatch({\r\n                type: ActionTypes.ASYNC_OPERATION_ENDED\r\n            });\r\n        }\r\n    })(file, stage, layers, dispatch, files);\r\n\r\n    reader.readAsText(file);\r\n\r\n    dispatch({\r\n        type: ActionTypes.ASYNC_OPERATION_STARTED\r\n    })\r\n\r\n};\r\n\r\nconst readAsImage = (reader, file, stage, layers, dispatch, files) => {\r\n    reader.addEventListener(\"load\", function () {\r\n        // let image = {};          // TODO: to be Flatten.Image\r\n        // image.uri = this.result;\r\n        // image.center = new Flatten.Point(0,0);\r\n        // image.width = 2*400000;    // 2 micron\r\n        // image.box = new Flatten.Box(\r\n        //     image.center.x - image.width/2,\r\n        //     image.center.y - image.width/2,\r\n        //     image.center.x + image.width/2,\r\n        //     image.center.y + image.width/2,\r\n        // );\r\n\r\n        let image = parseImage(file);\r\n        image.uri = this.result;\r\n\r\n        let model = new Model(image);\r\n\r\n        let layer = Layers.newLayer(stage, layers);\r\n        if (file.name !== \"\") {\r\n            layer.name = file.name;\r\n        }\r\n\r\n        layer.add(model);\r\n\r\n        // layers.push(layer);\r\n\r\n        if (file === files[0]) {\r\n            Layers.setAffected(layers, layer);\r\n            layer.color = Layers.getNextColor(layers);\r\n            layer.displayed = true;\r\n            dispatch({\r\n                type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                stage: stage,\r\n                shape: layer\r\n            });\r\n        }\r\n\r\n        dispatch({\r\n            type: ActionTypes.ADD_NEW_LAYER,\r\n            layer: layer\r\n        });\r\n\r\n        dispatch({\r\n            type: ActionTypes.ASYNC_OPERATION_ENDED\r\n        });\r\n\r\n    }, false);\r\n\r\n    reader.readAsDataURL(file);\r\n};\r\n\r\nconst readFile = (file, stage, layers, dispatch, files) => {\r\n    if (file.type !== \"\" &&\r\n        !(file.type.match('text.*') || file.type.match('application.*') ||\r\n        file.type.match('image.*')) ) return;   // validate type is text\r\n\r\n    let reader = new FileReader();\r\n\r\n    if (file.type.match('text.*') || file.type.match('application.*') || file.name.match('features*')) {\r\n        readAsText(reader, file, stage, layers, dispatch, files);\r\n    }\r\n\r\n    else if (file.type.match('image.*')) {\r\n        readAsImage(reader, file, stage, layers, dispatch, files);\r\n    }\r\n\r\n};\r\n\r\nconst readFiles = ({ dispatch, getState }) => next => action => {\r\n\r\n    if (action.type !== ActionTypes.FILENAME_LIST_SELECTED) {\r\n        return next(action);\r\n    }\r\n\r\n    let stage = action.stage;\r\n    let layers = action.layers;\r\n\r\n    // Load and parse files\r\n    // in MS Edge FilesList is not array. It is indexable but not iterable\r\n    // for (let i=0; i < action.files.length; i++) {\r\n    //     readFile(action.files[i], stage, layers, dispatch, action.files);\r\n    // }\r\n    for (let file of Array.from(action.files)) {\r\n        readFile(file, stage, layers, dispatch, action.files);\r\n    }\r\n};\r\n\r\nexport default readFiles;\r\n\r\n","import { Job } from '../models/job';\r\nimport {Parser} from './parser';\r\n\r\nexport function parseTXT(filename, str) {\r\n    let job = new Job();\r\n    job.filename = filename;\r\n\r\n    let parser = new Parser();\r\n\r\n    let shapesArray = parser.parse(str);\r\n\r\n    if (shapesArray.length > 0) {\r\n        for (let shape of shapesArray) {\r\n            job.shapes.push(shape)\r\n        }\r\n    }\r\n\r\n    return job\r\n}","import * as ActionTypes from \"../store/actionTypes\";\r\nimport Layers from \"../models/layers\";\r\n\r\nconst pasteData = ({ dispatch, getState }) => next => action => {\r\n\r\n    if (action.type !== ActionTypes.DATA_FROM_BUFFER_PASTED) {\r\n        return next(action);\r\n    }\r\n\r\n    let state = getState();\r\n    let stage = state.app.stage;\r\n    let layers = state.layers;\r\n    let parser = state.app.parser;\r\n\r\n    let layer = undefined;\r\n    if (state.app.importDataToNewLayer) {   // import data to new layer\r\n        layer = Layers.newLayer(stage, layers);\r\n        layers.push(layer);\r\n    }\r\n    else {                                  // import data to affected layer\r\n        layer = layers.find((lay) => lay.affected);\r\n        if (!layer) {                       // if no layer affected, add new\r\n            layer = Layers.newLayer(stage, layers);\r\n            layers.push(layer);\r\n        }\r\n    }\r\n\r\n    // Paste data from ClipBoard\r\n    for (let item of action.data.items) {\r\n        item.getAsString((string) => {\r\n            let shapesArray = parser.parse(string);\r\n\r\n            // TODO: add something like poly.valid()\r\n\r\n            if (shapesArray.length > 0) {\r\n                for (let shape of shapesArray) {\r\n                    layer.add(shape);\r\n                }\r\n            }\r\n\r\n            if (layer.shapes.length > 0) {\r\n                dispatch({\r\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                    shape: layer,\r\n                    stage: stage\r\n                });\r\n                dispatch({\r\n                    type: ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED,\r\n                    layer: layer\r\n                })\r\n            }\r\n\r\n        });\r\n\r\n        break;\r\n    }\r\n\r\n};\r\n\r\nexport default pasteData;\r\n","import * as ActionTypes from '../store/actionTypes';\r\n\r\nconst stageController = ({getState, dispatch}) => next => action => {\r\n\r\n    const mouse = getState().mouse;\r\n    let stage = action.stage;\r\n\r\n\r\n    if (stage) {\r\n        switch (action.type) {\r\n            case ActionTypes.STAGE_RESIZED:\r\n                stage.resize();\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_DOWN_ON_STAGE:\r\n                stage.panByMouseStart();\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_MOVED_ON_STAGE:\r\n                if (action.dx !== undefined && action.dy !== undefined) {\r\n                    stage.panByMouseMove(action.dx, action.dy);\r\n                }\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_UP_ON_STAGE:\r\n                stage.panByMouseStop();\r\n                break;\r\n\r\n            case ActionTypes.PAN_AND_ZOOM_TO_SHAPE:\r\n                let center = action.shape.center;\r\n                let box = action.shape.box;\r\n                if (isNaN(center.x) || isNaN(center.y)) return;\r\n                stage.panToCoordinate(center.x, center.y);\r\n                stage.zoomToLimits(box.xmax - box.xmin, box.ymax - box.ymin);\r\n                break;\r\n\r\n            case ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE:\r\n                let bIn = action.delta > 0;\r\n                // stage.zoomByMouse(action.x, action.y, bIn, 1 + Math.abs(action.delta)/100.);\r\n                stage.zoomByMouse(action.x, action.y, bIn, 1.2);\r\n                break;\r\n\r\n            case ActionTypes.CLEAR_ALL:\r\n                stage.removeAllChildren();\r\n                stage.removeAllListeners();\r\n                break;\r\n\r\n            case ActionTypes.PINCH_DOWN_ON_STAGE:\r\n                stage.zoomByPinchStart(action.x1, action.y1);\r\n                break;\r\n\r\n            case ActionTypes.PINCH_MOVED_ON_STAGE:\r\n                if (mouse.touchPoints) {\r\n                    let dx = mouse.touchPoints[0].x - mouse.touchPoints[1].x;\r\n                    let dy = mouse.touchPoints[0].y - mouse.touchPoints[1].y;\r\n                    let distStart = Math.sqrt(dx*dx + dy*dy);\r\n\r\n                    dx = action.x1 - action.x2;\r\n                    dy = action.y1 - action.y2;\r\n                    let distCurrent = Math.sqrt(dx*dx + dy*dy);\r\n                    let ratio = distCurrent / distStart;\r\n                    console.log(ratio);\r\n                    stage.zoomByPinchMove(action.x1, action.y1, ratio);\r\n                }\r\n                break;\r\n\r\n            case ActionTypes.PINCH_UP_ON_STAGE:\r\n                stage.zoomByPinchStop();\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    next(action);\r\n};\r\n\r\nexport default stageController;","import * as ActionTypes from '../store/actionTypes';\r\nimport Layers from \"../models/layers\";\r\n\r\nimport Flatten from 'flatten-js';\r\nlet {point, arc, segment} = Flatten;\r\nlet Algorithmia = window.Algorithmia;\r\n\r\n// function zoomHome(shape, stage) {\r\n//     let box = shape.box;\r\n//     let x = (box.xmin + box.xmax)/2;\r\n//     let y = (box.ymin + box.ymax)/2;\r\n//     stage.panToCoordinate(x, y);\r\n//     stage.zoomToLimits(box.xmax - box.xmin, box.ymax - box.ymin);\r\n// }\r\n\r\nconst skeleton_recognition = ({dispatch, getState}) => next => action => {\r\n\r\n    if (action.type === ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED) {\r\n\r\n        let state = getState();\r\n        let stage = state.app.stage;\r\n\r\n        let layers = state.layers;\r\n        let currentLayer = Layers.getAffected(layers);\r\n        let shapes = currentLayer.shapes;\r\n        let input = shapes.map(shape =>\r\n            [shape.geom.x / 400., shape.geom.y / 400., shape.geom.nx, shape.geom.ny]\r\n        );\r\n\r\n        let client = Algorithmia.client(\"simby4RUwqQmtMDaHAPj5wsQwlD1\");\r\n        let algorithm = \"alexbol99/SeketonRecognition\";\r\n\r\n        client.algo(algorithm)\r\n            .pipe(input)\r\n            .then(function (output) {\r\n                if (output.error) return console.error(\"error: \" + output.error);\r\n\r\n                let newLayer = Layers.newLayer(stage, layers);\r\n                newLayer.name = \"recognized\";\r\n                newLayer.title = \"recognized\";\r\n                // newLayer.displayed = true;\r\n\r\n                for (let row of output.result) {\r\n                    let shape;\r\n                    if (row[0] instanceof Array && row[0].length === 2) {\r\n                        let pc = point(row[0][0] * 400, row[0][1] * 400);\r\n                        let r = row[1] * 400;\r\n                        /********center radius startAng endAng **********/\r\n                        shape = arc(pc, r, row[2], row[3], Flatten.CCW)\r\n                    }\r\n                    else {\r\n                        shape = segment(\r\n                            point(row[0] * 400, row[1] * 400),\r\n                            point(row[2] * 400, row[3] * 400))\r\n                    }\r\n                    if (row[4]) {\r\n                        shape.label = row[4]\r\n                    }\r\n                    newLayer.add(shape)\r\n                }\r\n                layers.push(newLayer);\r\n\r\n                dispatch({\r\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\r\n                    stage: stage,\r\n                    shape: currentLayer\r\n                })\r\n            });\r\n    }\r\n\r\n    return next(action);\r\n};\r\n\r\n\r\nexport default skeleton_recognition;\r\n","import React from 'react';\r\nimport './index.css';\r\nimport {createStore, applyMiddleware, compose} from 'redux';\r\nimport {Provider} from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport reducer from './store/reducer';\r\n\r\nimport App from './App';\r\nimport log from './middleware/log';\r\nimport readFiles from './middleware/readFiles';\r\nimport pasteData from './middleware/pasteData';\r\nimport stageController from './middleware/stageController';\r\nimport skeleton_recognition from './middleware/skeleton_recognition';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(reducer,\r\n    composeEnhancers(\r\n        applyMiddleware(log, readFiles, pasteData, skeleton_recognition, stageController, thunk)\r\n    )\r\n);\r\n\r\nconst Preloader = () => {\r\n    return (\r\n        <Provider store={store}>\r\n            <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n                <App/>\r\n            </BrowserRouter>\r\n        </Provider>\r\n    );\r\n};\r\n\r\nexport default Preloader;\r\n\r\n"],"sourceRoot":""}