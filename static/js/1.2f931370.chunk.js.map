{"version":3,"sources":["components/MainComponent/GraphicsEditor/LabelsLayerComponent/labelsLayer.module.css","components/UI/ModalPopup/ModalPopup.module.css","components/AboutPopup/AboutPopup.module.css","containers/MainComponent/MainComponent.module.css","components/LayersList/LayerListToolbar/LayerListToolbar.module.css","components/LayersList/LayerEditForm/LayerEditForm.module.css","components/LayersList/LayerListElement/LayerListElement.module.css","containers/LayerList/LayersList.module.css","components/Layout/AsideComponent/AsideComponent.module.css","components/Layout/HeaderComponent/HeaderComponent.module.css","assets/images/debug-viewer-logo3-notext.png","components/Layout/Logo/Logo.module.css","components/UI/Spinner/Spinner.module.css","components/MainComponent/ToolbarComponent/ToolbarComponent.js","models/stage.js","components/MainComponent/CanvasComponent/CanvasComponent.js","store/actions/stageActions.js","store/actionTypes.js","components/Layout/StatusComponent/StatusComponent.js","components/MainComponent/GraphicsEditor/stageComponent.js","models/graphics.js","models/utils.js","components/MainComponent/GraphicsEditor/graphics/shapeComponent.js","components/MainComponent/GraphicsEditor/graphics/imageComponent.js","components/MainComponent/GraphicsEditor/layerComponent.js","components/MainComponent/GraphicsEditor/domelements/labelComponent.js","components/MainComponent/GraphicsEditor/LabelsLayerComponent/labelsLayerComponent.js","components/MainComponent/GraphicsEditor/layersComponent.js","models/model.js","models/layer.js","models/layers.js","tools/measurePointsTool.js","tools/measureShapesTool.js","tools/displayCoordsTool.js","components/UI/Modal.js","components/UI/ModalPopup/ModalPopup.js","components/AboutPopup/AboutPopup.js","containers/MainComponent/MainComponent.js","store/actions/appActions.js","components/LayersList/LayerListToolbar/LayerListToolbar.js","components/LayersList/LayerEditForm/LayerEditForm.js","components/LayersList/LayerListElement/LayerListElement.js","containers/LayerList/LayersList.js","store/actions/layersActions.js","components/Layout/AsideComponent/AsideComponent.js","AppBody.js","components/Layout/Logo/Logo.js","components/Layout/HeaderComponent/HeaderComponent.js","models/job.js","models/parserODB.js","components/Constructions/Demo.js","components/Constructions/BooleanTest.js","components/Constructions/SkeletonRecognition.js","models/collisionDistance.js","components/Constructions/CollisionDemo.js","components/UI/Spinner/Spinner.js","App.js","models/parser.js","store/reducers/app.js","store/reducers/layers.js","store/reducers/mouse.js","store/reducers/measureShapesTool.js","store/reducer.js","middleware/log.js","models/parserXML.js","models/parsePGM.js","models/parseCSV.js","middleware/readFiles.js","models/parseTXT.js","middleware/pasteData.js","middleware/stageController.js","middleware/skeleton_recognition.js","Preloader.js","assets/icons/measureContour.png","assets/icons/measurePoints.png","assets/icons/WidthOn.png","assets/icons/editContourVertextOnOff.png","components/MainComponent/ToolbarComponent/ToolbarComponent.module.css","components/MainComponent/CanvasComponent/CanvasComponent.module.css","components/Layout/StatusComponent/StatusComponent.module.css"],"names":["module","exports","LabelsLayer","LabelComponent","BackDrop","ModalPopup","fadeIn","AboutPopup","Main-content","Layer-list-toolbar","Layer-edit-form","Layer","LayerSelectionBox","LayerSelectionMark","LayerNameBox","Layer-displayed","Layer-undisplayed","App-layers","App-aside","App-header","Logo","App-logo-spin","Loader","load2","ToolbarComponent","openJobButtonClicked","_this","refs","browseFiles","click","notImplemented","alert","react_default","a","createElement","className","styles","title","onClick","this","lib_default","name","size","style","color","fontSize","marginTop","marginBottom","display","type","id","ref","multiple","onChange","props","onFileSelected","onHomeButtonPressed","onPanByDragPressed","onMeasurePointsButtonPressed","src","measurePoints","alt","onMeasureBetweenShapesButtonPressed","measureShapes","onToggleWidthModePressed","width","onToggleVerticesPressed","vertices","onToggleLabelsPressed","showSkeletonRecognitionButton","onSkeletonRecognitionButtonPressed","onShowAboutPopupPressed","position","top","onUnitClicked","units","Component","createjs","window","Stage","canvas","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Touch","enable","assertThisInitialized","mouseMoveOutside","enableMouseOver","clientWidth","clientHeight","height","origin","x","y","oldOrigin","undefined","resolution","zoomFactor","stage","assign","shape","addChild","scalar","scalingFactor","canvasX","canvasY","worldX","worldY","point","W2C_X","W2C_Y","newOrigin","deltaX","deltaY","ratio","curRatio","Math","min","max","focusX","focusY","bIn","C2W_X","C2W_Y","zoomIn","zoomOut","newFocusX","newFocusY","panBy","zoom","dx","dy","tx","ty","minX","minY","maxX","maxY","Flatten","Box","CanvasComponent","canvasElement","React","createRef","handleMouseMove","event","focus","stageX","stageY","mouse","startX","startY","handleMouseDown","handleMouseUp","stopPropagation","preventDefault","panByMouseStop","handleMouseLeave","blur","document","body","handleMouseWheel","delta","detail","wheelDelta","handleMouseWheelMove","offsetX","offsetY","handleMouseWheelFox","layerX","layerY","current","on","addEventListener","registerStage","tabIndex","connect","state","app","dispatch","actions","StatusComponent","StageComponent","_Component","apply","arguments","inherits","createClass","key","value","getContext","setTransform","update","Fragment","children","Point","Segment","Circle","Arc","Polygon","graphics","length","radius","fill","Graphics","beginFill","command","circle","drawCircle","graphics_point","segment","strokeStyle","ignoreScale","stroke","setStrokeStyle","beginStroke","moveTo","ps","lineTo","pe","endStroke","graphics_segment","arc","pc","r","startAngle","endAngle","counterClockwise","graphics_arc","graphics_circle","box","drawRect","xmin","ymin","xmax","ymax","graphics_box","polygon","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","faces","Symbol","iterator","next","done","face","setGraphicsFace","err","return","graphics_polygon","setGraphicsEdge","edge","setGraphicsEdgeSegment","setGraphicsEdgeArc","first","start","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Utils","is_equal","obj1","obj2","equal","_arr","keys","_i","ShapeComponent","params","handleMouseOver","onMouseOver","model","handleMouseOut","onMouseOut","handleClick","layer","Shape","vertexShapes","geom","vertex","vertexShape","mouseEnabled","push","alpha","isEmpty","hovered","selected","widthOn","aperture","displayVertices","displayed","redrawVertices","redraw","nextProps","nextState","off","removeChild","clear","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","ImageComponent","bitmap","Bitmap","uri","image","naturalWidth","naturalHeight","scaleX","scaleY","center","regX","regY","LayerComponent","shapes","map","index","imageComponent_ImageComponent","hoveredShape","firstMeasuredShape","secondMeasuredShape","displayLabels","shapeComponent_ShapeComponent","labelComponent","_ref","left","offsetLeft","offsetTop","classes","label","labelsLayerComponent","trim","domelements_labelComponent","LayersComponent","layers","layerComponent_LayerComponent","LabelsLayerComponent_labelsLayerComponent","defaultStyle","Model","get","edited","affected","newShape","add","clone","merge","colors","Layers","getNewName","defaultName","inc","comparator","find","lay","currentAffectedLayer","getAffected","_loop","col","findIndex","l","newLayers","filter","getNextColor","slice","sort","l1","l2","name1","toUpperCase","name2","MeasurePointsTool","_getPrototypeOf2","_len","args","Array","_key","concat","endX","endY","measureStarted","measureCanvas","clearRect","coordX","originalEvent","coordY","cursor","draw","onMouseWheelMove","onMousewheelMove","context","textX","textY","textWidth","backX","backY","pllX","pllY","abs","W2C_Scalar","beginPath","rect","lineWidth","text","measurement","font","measureText","textAlign","fillStyle","globalAlpha","fillRect","textHeight","fillText","dist","sqrt","format","num","divisor","toFixed","decimals","mainCanvas","MeasureShapesTool","labelShape","Text","shortestSegment","unscale","redrawLabel","firstMeasuredLayer","secondMeasuredLayer","DisplayCoordsTool","margin","padding","modalRoot","getElementById","Modal","el","appendChild","ReactDOM","createPortal","onBackDropClicked","ev","target","closePopup","handleKeyDown","code","elementDrag","dragX","clientX","dragY","clientY","element","closeDragElement","onmouseup","onmousemove","dragMouseDown","removeEventListener","showPopup","UI_Modal","onMouseDown","version","MainComponent","handleFileSelect","File","FileReader","FileList","files","setHomeView","e","toggleWidthMode","toggleDisplayVertices","onresize","resizeStage","handleKeyUp","displayCoordsTool","displayCoordsTool_DisplayCoordsTool","measurePointsTool","measurePointsActive","measurePointsTool_MeasurePointsTool","measuredLayersDisplayed","measureShapesTool","distance","measureShapesTool_MeasureShapesTool","MainComponent_ToolbarComponent_ToolbarComponent","togglePanByDrag","toggleMeasureBetweenPoints","toggleMeasureBetweenShapes","toggleDisplayLabels","toggleAboutPopup","applySkeletonRecognition","toggleUnits","MainComponent_CanvasComponent_CanvasComponent","stageComponent_StageComponent","layersComponent","handleMouseRollOverShape","handleMouseRollOutShape","handleClickOnShape","Layout_StatusComponent_StatusComponent","UI_ModalPopup_ModalPopup","showAboutPopup","components_AboutPopup_AboutPopup","build","LayerListToolbar","onAddLayerButtonClicked","onEditLayerButtonClicked","onDeleteLayerButtonClicked","onSortLayersButtonClicked","LayerEditForm","onSubmitLayerEditForm","form","parentElement","newLayer","layerName","layerTitle","setFocus","onSubmit","defaultValue","cols","rows","onEscapeLayerEditForm","LayerListElement","activeElement","nodeName","elem","hex","opacity","g","b","percent","replace","parseInt","substring","rgba","bgcolor","layerNameOpacity","onLayerClicked","onDoubleClick","onLayerDoubleClicked","onAffectedBoxClicked","backgroundColor","LayersList_LayerEditForm_LayerEditForm","LayersList","setAffectedNextLayer","setAffectedPrevLayer","_this2","onLayerListClicked","LayersList_LayerListToolbar_LayerListToolbar","maxHeight","LayersList_LayerListElement_LayerListElement","AsideComponent","pasteDataFromBuffer","data","clipboardData","onPaste","containers_MainComponent_MainComponent","LayerList_LayersList","Layout_AsideComponent_AsideComponent","logo","logoImg","HeaderComponent","Job","filename","profiles","materials","vector","inch2pixels","mils2pixels","InchToPixels","str","round","Number","MilsToPixels","parsePolygon","lines","i","line","terms","split","end_of_face","CW","CCW","slope","EQ","PI","parseLine","apertures","ap_value","parseArc","parseODB","job","arrayOfLines","match","substr","polarity","addFace","odbLine","odbArc","ap_key","Demo","axios","then","resp","panAndZoomToShape","addNewLayer","asyncOperationEnded","setState","asyncOperationStarted","subtract","BooleanOp","intersect","BooleanTest","myPoly","myCircle","SkeletonRecognition","Vector","Line","CollisionDistance","polygon1","polygon2","collision_distance","POSITIVE_INFINITY","toConsumableArray","edges","edge2polygon","edge2","shapeBox","NEGATIVE_INFINITY","resp_edges","search","edge1","segment2segment","segment2arc","arc2arc","intersections","ip","_point$distanceTo","distanceTo","_point$distanceTo2","slicedToArray","segment1","segment2","point2shape","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","v_s","end","v_n","normalize","rotate90CCW","multiply","rotate90CW","_i2","v","tangent_point","translate","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","arc1","arc2","arc_enlarged","_arc1$distanceTo","translateArc","_arc1$distanceTo2","dist_tmp","EQ_0","GE","arc_reduced","_arc1$distanceTo3","_arc1$distanceTo4","LT","_arc1$distanceTo5","_arc1$distanceTo6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","vec","arc_tmp","newPolygon","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","arc_trans","CollisionDemo","parser","parseToPolygon","collision","polygon3","applyCollisionDemo","spinner","App","Layout_HeaderComponent_HeaderComponent","Route","path","component","AppBody","showSpinner","Spinner","Parser","watchArray","indexOf","termArr","psArr","peArr","pcArr","nedgesStr","nedges","j","parseToSegment","parseToArc","points","pointArr","parseToPoints","parseToSegmentsArcs","unitsList","defaultAppState","process","originX","originY","importDataToNewLayer","action","curUnitsId","newUnits","measureShapesFirstClick","affectedLayer","affectedLayerId","delete","setAffected","toggleDisplayed","setEdited","setNameAndTitle","nextLayer","newCurLayer","newNextLayer","defaultMouseState","defaultMeasureShapesTool","measureShapesActive","shape1","shape2","_Flatten$Distance$dis","Distance","_Flatten$Distance$dis2","reducer","combineReducers","log","getState","console","parseEdges","edgesXML","from","getAttribute","polygonsXML","islands","getElementsByTagName","_arr2","holes","_arr3","_i3","parseSegment","segmentXML","parseCurve","curveXML","parsePoint","pointXML","pgmResolution","microns2pixels","sizeX","toPixels","micron2pixels","micronToPixels","readAsText","reader","file","onload","theFile","string","result","namesplitted","extension","xmlDoc","DOMParser","parseFromString","titles","firstChild","nodeValue","profilesXML","_arr4","_i4","materialXML","_arr5","_i5","segmentsXML","_arr6","_i6","curvesXML","_arr7","_i7","curve","pointsXML","_arr8","_i8","parseXML","px","py","nx","ny","parseCSV","shapesArray","parse","parseTXT","readAsImage","yStr","xStr","isNaN","parseImage","readAsDataURL","readFile","readFiles","pasteData","items","getAsString","stageController","resize","panByMouseStart","panByMouseMove","panToCoordinate","zoomToLimits","zoomByMouse","Algorithmia","skeleton_recognition","currentLayer","input","client","algo","pipe","output","error","row","store","createStore","applyMiddleware","Preloader","es","BrowserRouter","basename","src_App_0","App-toolbar","App-canvas","App-status-bar"],"mappings":"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","file":"static/js/1.2f931370.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"LabelsLayer\":\"labelsLayer_LabelsLayer__1O9Hj\",\"LabelComponent\":\"labelsLayer_LabelComponent__3GWlj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BackDrop\":\"ModalPopup_BackDrop__3HTI8\",\"ModalPopup\":\"ModalPopup_ModalPopup__yAVS4\",\"fadeIn\":\"ModalPopup_fadeIn__3ymPT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AboutPopup\":\"AboutPopup_AboutPopup__2Ghnq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Main-content\":\"MainComponent_Main-content__1ZoSP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer-list-toolbar\":\"LayerListToolbar_Layer-list-toolbar__GYX1Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer-edit-form\":\"LayerEditForm_Layer-edit-form__ihOJE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer\":\"LayerListElement_Layer__1WgQk\",\"LayerSelectionBox\":\"LayerListElement_LayerSelectionBox__2DXrV\",\"LayerSelectionMark\":\"LayerListElement_LayerSelectionMark__2zYS5\",\"LayerNameBox\":\"LayerListElement_LayerNameBox__1m2fQ\",\"Layer-displayed\":\"LayerListElement_Layer-displayed__223Ba\",\"Layer-undisplayed\":\"LayerListElement_Layer-undisplayed__3_DcN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-layers\":\"LayersList_App-layers__dDR80\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-aside\":\"AsideComponent_App-aside__1yhWy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-header\":\"HeaderComponent_App-header__19h2h\"};","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Logo\":\"Logo_Logo__PNO_b\",\"App-logo-spin\":\"Logo_App-logo-spin__2ndIi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BackDrop\":\"Spinner_BackDrop__19thA\",\"Loader\":\"Spinner_Loader__2rJlS\",\"load2\":\"Spinner_load2__2_wJ9\"};","/**\n * Created by alexanderbol on 17/04/2017.\n */\n\nimport React, {Component} from 'react';\nimport FontAwesome from 'react-fontawesome';\n\nimport measureShapes from '../../../assets/icons/measureContour.png';\nimport measurePoints from '../../../assets/icons/measurePoints.png';\nimport width from '../../../assets/icons/WidthOn.png';\nimport vertices from '../../../assets/icons/editContourVertextOnOff.png';\n\nimport styles from './ToolbarComponent.module.css';\nimport '@fortawesome/fontawesome-free/css/all.css';\n\nclass ToolbarComponent extends Component {\n    openJobButtonClicked = () => this.refs.browseFiles.click();\n\n    notImplemented = () => alert(\"Not implemented yet\");\n\n    render() {\n        return (\n            <div className={styles[\"App-toolbar\"]}>\n                {/*<h4>Toolbar</h4>*/}\n                <button title=\"Open file\" onClick={this.openJobButtonClicked}>\n                    {/*<img src={open} alt=\"open\" />*/}\n                    <FontAwesome\n                        name='folder-open'\n                        size='2x'\n                        style={{color:\"grey\"}}\n                    />\n                </button>\n\n                <input style={{fontSize: 16, marginTop: 5, marginBottom: 5, display: \"none\"}}\n                       type=\"file\" id=\"browseFiles\" ref=\"browseFiles\" name=\"files[]\" multiple\n                       onChange={this.props.onFileSelected}\n                />\n\n                <button title=\"Zoom and pan to home view\" onClick={this.props.onHomeButtonPressed}>\n                    {/*<img src={home} alt=\"home\" />*/}\n                    <FontAwesome\n                        name='home'\n                        size='2x'\n                        style={{color:\"grey\"}}\n                    />\n                </button>\n                <button title=\"Pan by drag\" onClick={this.props.onPanByDragPressed}>\n                    {/*<img src={pan} alt=\"panByDrag\" />*/}\n                    <FontAwesome\n                        name='arrows-alt'\n                        size='2x'\n                        style={{color:\"grey\"}}\n                    />\n                </button>\n                <button title=\"Measure distance between points\" onClick={this.props.onMeasurePointsButtonPressed}>\n                    <img src={measurePoints} alt=\"measurePoints\" />\n                </button>\n                <button title=\"Measure distance between shapes\" onClick={this.props.onMeasureBetweenShapesButtonPressed}>\n                    <img src={measureShapes} alt=\"measureShapes\" />\n                </button>\n                <button title=\"Display solid or wire\" onClick={this.props.onToggleWidthModePressed}>\n                    <img src={width} alt=\"width\" />\n                </button>\n                <button title=\"Display vertices on/off\" onClick={this.props.onToggleVerticesPressed}>\n                    <img src={vertices} alt=\"vertices\" />\n                </button>\n                <button title=\"Display labels on/off\" onClick={this.props.onToggleLabelsPressed}>\n                    {/*<img src={label} alt=\"labels\" />*/}\n                    <FontAwesome\n                        name='tag'\n                        size='2x'\n                        style={{color:\"grey\"}}\n                    />\n                </button>\n                {/*<button title=\"Settings\" onClick={this.notImplemented}>*/}\n                    {/*<img src={setting} alt=\"setting\" />*/}\n                {/*</button>*/}\n\n                {/*{this.props.showCollisionDemoToolButton ? (*/}\n                    {/*<button title=\"Collision Distance Demo\" onClick={this.props.onCollisionDemoButtonPressed}>*/}\n                        {/*<FontAwesome*/}\n                            {/*name='arrows-h'*/}\n                            {/*size='2x'*/}\n                            {/*style={{color: \"grey\"}}*/}\n                        {/*/>*/}\n                    {/*</button>*/}\n                {/*) : null}*/}\n\n                {this.props.showSkeletonRecognitionButton ? (\n                    <button title=\"Skeleton Recognition Demo\" onClick={this.props.onSkeletonRecognitionButtonPressed}>\n                        <FontAwesome\n                            name='tree'\n                            size='2x'\n                            style={{color: \"grey\"}}\n                        />\n                    </button>\n                ) : null}\n\n                <button title=\"About\" onClick={this.props.onShowAboutPopupPressed}>\n                    {/*<img src={about} alt=\"about\" />*/}\n                    <FontAwesome\n                        name='info'\n                        size='2x'\n                        style={{color:\"grey\"}}\n                    />\n                </button>\n\n                <button>\n                    <FontAwesome\n                        name='ellipsis-v'\n                        size='2x'\n                        style={{color:\"white\"}}\n                    />\n                </button>\n\n                <span style={{position:\"relative\", top:-3}}>\n                    Units:\n                </span>\n                <button\n                    style={{position:\"relative\", top:-3}}\n                    onClick={this.props.onUnitClicked}\n                >\n                    <h3>{this.props.units}</h3>\n                </button>\n            </div>\n        )\n    }\n}\n\nexport default ToolbarComponent;","/**\n * Created by alexanderbol on 21/04/2017.\n */\nimport Flatten from 'flatten-js';\nlet createjs = window.createjs;\n\nclass Stage extends createjs.Stage {\n    constructor(canvas) {\n        super(canvas);\n\n        createjs.Touch.enable(this);\n        this.mouseMoveOutside = false;   // true;\n        // this.enableDOMEvents(false);\n        this.enableMouseOver(20);\n\n        if (this.canvas.clientWidth > 0 && this.canvas.clientHeight > 0) {\n            this.canvas.width = this.canvas.clientWidth;\n            this.canvas.height = this.canvas.clientHeight;\n            // this.updateViewport(this.canvas.width, this.canvas.height);\n        }\n        this.origin = {x: this.canvas.width / 2, y: this.canvas.height / 2};\n        this.oldOrigin = {x: undefined, y: undefined};   // used by pan\n        this.resolution = 0.00001;          // MM 2 Pixels when zoomFactor = 1;\n        this.zoomFactor = 1.0;\n    }\n\n    get box() {\n        let minX = this.C2W_X(0);\n        let minY = this.C2W_Y(this.canvas.height);\n        let maxX = this.C2W_X(this.canvas.width);\n        let maxY = this.C2W_Y(0);\n\n        return ( new Flatten.Box(minX, minY, maxX, maxY) );\n    }\n\n    clone() {\n        let stage = new Stage(this.canvas);\n        return Object.assign(stage, this);\n    }\n\n    add(shape) {\n        this.addChild(shape);\n        return this;\n    }\n\n    scalingFactor() {\n        return this.resolution * this.zoomFactor;\n    }\n\n    C2W_Scalar(scalar) {\n        return (scalar / this.scalingFactor());\n    }\n\n    W2C_Scalar(scalar) {\n        return (this.scalingFactor() * scalar);\n    }\n\n    C2W_X(canvasX) {\n        return ((canvasX - this.origin.x) / this.scalingFactor());\n    }\n\n    C2W_Y(canvasY) {\n        return ((this.origin.y - canvasY) / this.scalingFactor());\n    }\n\n    W2C_X(worldX) {\n        return (this.scalingFactor() * worldX + this.origin.x);\n    }\n\n    W2C_Y(worldY) {\n        return (this.origin.y - this.scalingFactor() * worldY);\n    }\n\n    W2C(point) {\n        return {x: this.W2C_X(point.x), y: this.W2C_Y(point.y)}\n    }\n\n    panTo(newOrigin) {\n        this.origin = {x: newOrigin.x, y: newOrigin.y}\n    }\n\n    panBy(deltaX, deltaY) {\n        this.origin = {\n            x: this.origin.x + deltaX,\n            y: this.origin.y + deltaY\n        }\n    }\n\n    // zoom by 10% each time\n    zoomIn(ratio) {\n        let curRatio = ratio || 1.1;\n        this.zoomFactor = Math.min(10000000, curRatio * this.zoomFactor);\n    }\n\n    zoomOut(ratio) {\n        let curRatio = ratio || 1.1;\n        this.zoomFactor = Math.max(0.001, this.zoomFactor / curRatio);\n    }\n\n    // ZoomIn/Out + \"Focus follows mouse\"\n    zoom(focusX, focusY, bIn, ratio) {\n        let worldX = this.C2W_X(focusX);    // world coordinate of mouse focus before zoom\n        let worldY = this.C2W_Y(focusY);\n\n        bIn ? this.zoomIn(ratio) : this.zoomOut(ratio);\n\n        let newFocusX = this.W2C_X(worldX); // canvas coordinate after zoom\n        let newFocusY = this.W2C_Y(worldY);\n\n        this.panBy(focusX - newFocusX, focusY - newFocusY);\n\n        return [newFocusX, newFocusY];\n    }\n\n    zoomByMouse(focusX, focusY, bIn, ratio) {\n        this.zoom(focusX, focusY, bIn, ratio);\n    }\n\n    zoomToLimits(width, height) {\n        // prevent zero division in case of single point box\n        if (width === 0) width = 400000;\n        if (height === 0) height = 400000;\n        let resolution = Math.min(this.canvas.width / (1.1*width), this.canvas.height / (1.1*height));\n        let zoomFactor = resolution / this.resolution;\n        let ratio = zoomFactor / this.zoomFactor;\n        let bIn = true; //ratio > 1;\n\n        let focusX = this.canvas.width/2;\n        let focusY = this.canvas.height/2;\n        this.zoom(focusX, focusY, bIn, ratio);\n    }\n\n    resize() {\n        // this.origin.x = this.canvas.width / 2;\n        // this.origin.y = this.canvas.height / 2;\n        if (this.canvas.clientWidth > 0 && this.canvas.clientHeight > 0) {\n            this.canvas.width = this.canvas.clientWidth;\n            this.canvas.height = this.canvas.clientHeight;\n        }\n    }\n\n    // drawSomething() {\n    //     let shape = new Shape();\n    //     shape.graphics.beginFill('red').drawRect(0, 0, 20, 20);\n    //     this.addChild(shape);\n    //     this.update();\n    // }\n\n    panByMouseStart() {\n        this.oldOrigin.x = this.origin.x;\n        this.oldOrigin.y = this.origin.y;\n    }\n\n    panByMouseMove(dx, dy) {\n        if (dx !== undefined && dy !== undefined &&\n            this.oldOrigin.x !== undefined && this.oldOrigin.y !== undefined) {\n            this.origin = {\n                    x: this.oldOrigin.x + dx,\n                    y: this.oldOrigin.y + dy\n                };\n        }\n    }\n\n    panByMouseStop() {\n        this.oldOrigin.x = undefined;\n        this.oldOrigin.y = undefined;\n        this.tx = undefined;\n        this.ty = undefined;\n    }\n\n    panToCoordinate(x, y) {\n        let canvasX = this.W2C_X(x);\n        let canvasY = this.W2C_Y(y);\n\n        let dx = this.canvas.width / 2 - canvasX;\n        let dy = this.canvas.height / 2 - canvasY;\n        this.panBy(dx, dy);\n    }\n}\n\nexport default Stage;\n","/**\n * Created by alexanderbol on 21/04/2017.\n */\n\nimport React, {Component} from 'react';\nimport styles from \"./CanvasComponent.module.css\";\nimport Stage from '../../../models/stage';\nimport { connect } from \"react-redux\";\n// import * as ActionTypes from \"../../../store/actionTypes\";\nimport * as actions from '../../../store/actions/stageActions';\n\nclass CanvasComponent extends Component {\n    canvasElement = React.createRef();\n\n    handleMouseMove = (event) => {\n        this.props.stage.canvas.focus();\n        this.props.handleMouseMove(\n            this.props.stage,\n            event.stageX,\n            event.stageY,\n            this.props.mouse.startX ? event.stageX - this.props.mouse.startX : undefined,\n            this.props.mouse.startY ? event.stageY - this.props.mouse.startY : undefined\n        );\n    };\n\n    handleMouseDown = (event) => {\n        this.props.handleMouseDown(this.props.stage, event.stageX, event.stageY);\n    };\n\n    handleMouseUp = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        this.props.stage.panByMouseStop();\n        this.props.handleMouseUp(this.props.stage, event.stageX, event.stageY);\n    };\n\n    handleMouseLeave = (event) => {   // nothing works except click\n        this.props.stage.canvas.blur();\n        document.body.focus();\n    };\n\n    handleMouseWheel = (event) => {\n        event.preventDefault();\n\n        let delta = event.detail || event.wheelDelta;\n        if (delta !== 0) {\n            this.props.handleMouseWheelMove(this.props.stage, event.offsetX, event.offsetY, delta);\n        }\n    };\n\n    handleMouseWheelFox = (event) => {\n        event.preventDefault();\n        if (event.detail !== 0) {\n            this.props.handleMouseWheelMove(this.props.stage, event.layerX, event.layerY, -event.detail);\n        }\n    };\n\n    componentDidMount() {\n        let stage = new Stage(this.canvasElement.current);\n\n        // stage.setClearColor(\"#FFFFFF\");\n        // stage.update();\n\n        stage.on(\"stagemousemove\", this.handleMouseMove);\n        stage.on(\"stagemousedown\", this.handleMouseDown);\n        stage.on(\"stagemouseup\", this.handleMouseUp);\n        stage.on(\"mouseleave\", this.handleMouseLeave);\n        stage.canvas.addEventListener(\"mousewheel\", this.handleMouseWheel);\n        stage.canvas.addEventListener(\"DOMMouseScroll\", this.handleMouseWheelFox);\n\n        this.props.registerStage(stage);\n    }\n\n    render() {\n        return (\n            <canvas tabIndex=\"1\" ref={this.canvasElement} id=\"mainCanvas\" className={styles[\"App-canvas\"]}>\n            </canvas>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        stage: state.app.stage,\n        mouse: state.mouse\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        registerStage: (stage) => dispatch(actions.registerStage(stage)),\n        handleMouseDown: (stage, x, y) => dispatch(actions.handleMouseDown(stage, x, y)),\n        handleMouseUp: (stage, x, y) => dispatch(actions.handleMouseUp(stage, x, y)),\n        handleMouseMove: (stage, x, y, dx, dy) => dispatch(actions.handleMouseMove(stage, x, y, dx, dy)),\n        handleMouseWheelMove: (stage, x, y, delta) => dispatch(actions.handleMouseWheelMove(stage, x, y, delta))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CanvasComponent);\n","import * as ActionTypes from '../actionTypes';\n\nexport const registerStage = (stage) => {\n    return {\n        type: ActionTypes.NEW_STAGE_CREATED,\n        stage: stage\n    }\n};\n\nexport const handleMouseDown = (stage, x, y) => {\n    return {\n        type: ActionTypes.MOUSE_DOWN_ON_STAGE,\n        stage: stage,\n        x: x,\n        y: y\n    }\n};\n\nexport const handleMouseUp = (stage, x, y) => {\n    return {\n        type: ActionTypes.MOUSE_UP_ON_STAGE,\n        stage: stage,\n        x: x,\n        y: y\n    }\n};\n\nexport const handleMouseMove = (stage, x, y, dx, dy) => {\n    return {\n        type: ActionTypes.MOUSE_MOVED_ON_STAGE,\n        stage: stage,\n        x: x,\n        y: y,\n        dx: dx,\n        dy: dy\n    }\n};\n\nexport const handleMouseWheelMove = (stage, x, y, delta) => {\n    return {\n        type: ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE,\n        stage: stage,\n        x: x,\n        y: y,\n        delta: delta\n    }\n};\n","/**\n * Created by alexanderbol on 13/04/2017.\n */\nexport const NEW_STAGE_CREATED = \"NEW_STAGE_CREATED\";\nexport const STAGE_RESIZED = \"STAGE_RESIZED\";\n\nexport const NEW_SHAPE_PASTED = \"NEW_SHAPE_PASTED\";\n\n/** Toolbar buttons **/\nexport const PAN_BY_DRAG_BUTTON_CLICKED = \"PAN_BY_DRAG_BUTTON_CLICKED\";\nexport const MEASURE_POINTS_BUTTON_PRESSED = \"MEASURE_POINTS_BUTTON_PRESSED\";\nexport const MEASURE_SHAPES_BUTTON_PRESSED = \"MEASURE_SHAPES_BUTTON_PRESSED\";\nexport const TOGGLE_ABOUT_POPUP_CLICKED = \"TOGGLE_ABOUT_POPUP_CLICKED\";\n// export const CLOSE_ABOUT_POPUP_BUTTON_PRESSED = \"CLOSE_ABOUT_POPUP_BUTTON_PRESSED\";\nexport const TOGGLE_UNITS_CLICKED = \"TOGGLE_UNITS_CLICKED\";\nexport const TOGGLE_WIDTH_MODE_CLICKED = \"TOGGLE_WIDTH_MODE_CLICKED\";\nexport const TOGGLE_DISPLAY_VERTICES_CLICKED = \"TOGGLE_DISPLAY_VERTICES_CLICKED\";\nexport const TOGGLE_DISPLAY_LABELS_CLICKED = \"TOGGLE_DISPLAY_LABELS_CLICKED\";\n\nexport const MOUSE_MOVED_ON_STAGE = \"MOUSE_MOVED_ON_STAGE\";\nexport const MOUSE_DOWN_ON_STAGE = \"MOUSE_DOWN_ON_STAGE\";\nexport const MOUSE_UP_ON_STAGE = \"MOUSE_UP_ON_STAGE\";\nexport const MOUSE_WHEEL_MOVE_ON_STAGE = \"MOUSE_WHEEL_MOVE_ON_STAGE\";\n\nexport const MOUSE_ROLL_OVER_SHAPE = \"MOUSE_ROLL_OVER_SHAPE\";\nexport const MOUSE_ROLL_OUT_SHAPE = \"MOUSE_ROLL_OUT_SHAPE\";\nexport const MOUSE_CLICKED_ON_SHAPE = \"MOUSE_CLICKED_ON_SHAPE\";\n\n// export const HOME_BUTTON_CLICKED = \"HOME_BUTTON_CLICKED\";\nexport const PAN_TO_COORDINATE = \"PAN_TO_COORDINATE\";\nexport const PAN_AND_ZOOM_TO_SHAPE = \"PAN_AND_ZOOM_TO_SHAPE\";\n\nexport const LAYER_LIST_PANEL_PRESSED = \"LAYER_LIST_PANEL_PRESSED\";\nexport const ADD_LAYER_BUTTON_PRESSED = \"ADD_LAYER_BUTTON_PRESSED\";\nexport const ADD_NEW_LAYER = \"ADD_NEW_LAYER\";\nexport const DELETE_LAYER_BUTTON_PRESSED = \"DELETE_LAYER_BUTTON_PRESSED\";\nexport const SORT_LAYERS_BUTTON_PRESSED = \"SORT_LAYERS_BUTTON_PRESSED\";\n\nexport const TOGGLE_DISPLAY_LAYER_PRESSED = \"TOGGLE_DISPLAY_LAYER_PRESSED\";\nexport const TOGGLE_AFFECTED_LAYER_PRESSED=\"TOGGLE_AFFECTED_LAYER_PRESSED\";\nexport const OPEN_LAYER_EDIT_FORM_PRESSED = \"OPEN_LAYER_EDIT_FORM_PRESSED\";\nexport const SUBMIT_LAYER_EDIT_FORM_PRESSED = \"SUBMIT_LAYER_EDIT_FORM_PRESSED\";\nexport const ESCAPE_LAYER_EDIT_FORM_PRESSED = \"ESCAPE_LAYER_EDIT_FORM_PRESSED\";\n\nexport const LAYERS_LIST_ARROW_DOWN_PRESSED = \"LAYERS_LIST_ARROW_DOWN_PRESSED\";\nexport const LAYERS_LIST_ARROW_UP_PRESSED = \"LAYERS_LIST_ARROW_UP_PRESSED\";\n\n// export const TOGGLE_WATCH_EXPAND_CLICKED = \"TOGGLE_WATCH_EXPAND_CLICKED\";\n\nexport const FILENAME_LIST_SELECTED = \"FILENAME_LIST_SELECTED\";\nexport const INPUT_FILE_LOADED = \"INPUT_FILE_LOADED\";\nexport const DATA_FROM_BUFFER_PASTED = \"DATA_FROM_BUFFER_PASTED\";\n\n/** AABB Distance Measurement Demo **/\nexport const AABB_DEMO_URI = \"AABB_DEMO_URI\";\nexport const AABB_DEMO_NEXT_DIST_STEP = \"AABB_DEMO_NEXT_DIST_STEP\";\nexport const AABB_TREE_NEXT_LEVEL = \"AABB_TREE_NEXT_LEVEL\";\n\n/** Collision demo **/\nexport const COLLISION_DEMO_URI = \"COLLISION_DEMO_URI\";\nexport const COLLISION_DEMO_BUTTON_PRESSED = \"COLLISION_DEMO_BUTTON_PRESSED\";\n\n/** Skeleton recognition demo **/\nexport const SKELETON_RECOGNITION_URI = \"SKELETON_RECOGNITION_URI\";\nexport const SKELETON_RECOGNITION_BUTTON_PRESSED=\"SKELETON_RECOGNITION_BUTTON_PRESSED\";\n\nexport const ASYNC_OPERATION_STARTED = \"ASYNC_OPERATION_STARTED\";\nexport const ASYNC_OPERATION_ENDED = \"ASYNC_OPERATION_ENDED\";","/**\n * Created by alexanderbol on 17/06/2017.\n */\nimport React from 'react';\nimport styles from './StatusComponent.module.css';\n\nconst StatusComponent = () => {\n    return (\n        <div className={styles[\"App-status-bar\"]}>\n            <div>\n                <h5>\n                    &nbsp;\n                </h5>\n            </div>\n        </div>\n    )\n}\n\nexport default StatusComponent;","import React, {Component} from 'react';\n// import Utils from \"../utils\";\n\nexport class StageComponent extends Component {\n    // shouldComponentUpdate useless because always returns \"true\",\n    // Don't know why, maybe because of children?\n    // ----------------------------------------------------------\n    // shouldComponentUpdate(nextProps, nextState) {\n    //     if (Utils.is_equal(this.props, nextProps)) {\n    //         return false;\n    //     }\n    //     return true;\n    // }\n\n    componentDidUpdate() {\n        if (this.props.stage.canvas && this.props.stage.canvas.getContext('2d')) {\n\n            let origin = this.props.stage.origin;\n            let zoomFactor = this.props.stage.zoomFactor*this.props.stage.resolution;\n            this.props.stage.setTransform(origin.x, origin.y, zoomFactor, -zoomFactor);\n\n            this.props.stage.update();\n        }\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                {this.props.children}\n            </React.Fragment>\n        )\n    }\n}","import Flatten from 'flatten-js';\n\n// import * as createjs from '@createjs/easeljs';\nlet createjs = window.createjs;\nlet {Point, Segment, Circle, Arc, Polygon, Box} = Flatten;\n\n/* Provide conversion methods from FlattenJS objects to CreateJS Graphics */\nexport function graphics(shape, style = undefined) {\n    if (shape instanceof Point) {\n        return graphics_point(shape, style);\n    }\n    if (shape instanceof Segment) {\n        return graphics_segment(shape, style);\n    }\n    if (shape instanceof Arc) {\n        return graphics_arc(shape, style);\n    }\n    if (shape instanceof Circle) {\n        return graphics_circle(shape, style);\n    }\n    if (shape instanceof Box) {\n        return graphics_box(shape, style);\n    }\n    if (shape instanceof Polygon) {\n        return graphics_polygon(shape, style);\n    }\n    return null;\n}\n\n// Point.prototype.graphics = function(style) {\nfunction graphics_point(point, style) {\n    let radius = (style && style.radius) ? style.radius : 3;\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\n    let graphics = new createjs.Graphics();\n    graphics.fill = graphics.beginFill(fill).command;\n    graphics.circle = graphics.drawCircle(point.x, point.y, radius).command;\n    return graphics;\n};\n\n// Segment.prototype.graphics = function(style) {\nfunction graphics_segment(segment, style) {\n    let graphics = new createjs.Graphics();\n    let strokeStyle = style && style.strokeStyle !== undefined ? style.strokeStyle : 2;\n    let ignoreScale = style && style.ignoreScale !== undefined ? style.ignoreScale : true;\n    let stroke = style && style.stroke ? style.stroke : \"black\";\n    return graphics\n        .setStrokeStyle(strokeStyle,1,0,10,ignoreScale)\n        .beginStroke(stroke)\n        .moveTo(segment.ps.x, segment.ps.y)\n        .lineTo(segment.pe.x, segment.pe.y)\n        .endStroke();\n};\n\n// Arc.prototype.graphics = function(style) {\nfunction graphics_arc(arc, style) {\n    // let startAngle = 2 * Math.PI - this.startAngle;\n    // let endAngle =  2 * Math.PI - this.endAngle;\n    let graphics = new createjs.Graphics();\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 2;\n    let ignoreScale = style && style.ignoreScale !== undefined ? style.ignoreScale : true;\n    let stroke = style && style.stroke ? style.stroke : \"black\";\n    return graphics\n        .setStrokeStyle(strokeStyle,1,0,10,ignoreScale)\n        .beginStroke(stroke)\n        .arc(arc.pc.x, arc.pc.y, arc.r, arc.startAngle, arc.endAngle, !arc.counterClockwise)\n        .endStroke();\n};\n\n// Circle.prototype.graphics = function(style) {\nfunction graphics_circle(circle, style) {\n    let graphics = new createjs.Graphics();\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 2;\n    let stroke = style && style.stroke ? style.stroke : \"black\";\n    // graphics.setStrokeStyle(2).beginStroke(\"black\").beginFill(\"red\").drawCircle(pcx, pcy, r);\n    return graphics\n        .setStrokeStyle(strokeStyle,0,0,10,true)\n        .beginStroke(stroke)\n        .drawCircle(circle.pc.x, circle.pc.y, circle.r)\n        .endStroke();\n};\n\n// Box.prototype.graphics = function(style) {\nfunction graphics_box(box, style) {\n    let graphics = new createjs.Graphics();\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\n    let stroke = style && style.stroke ? style.stroke : \"black\";\n    // graphics.setStrokeStyle(2).beginStroke(\"black\").beginFill(\"red\").drawCircle(pcx, pcy, r);\n    return graphics\n        .setStrokeStyle(strokeStyle,0,0,10,true)\n        .beginStroke(stroke)\n        .drawRect(box.xmin, box.ymin, box.xmax-box.xmin, box.ymax-box.ymin);\n};\n\nfunction setGraphicsEdgeSegment(graphics, segment) {\n    graphics.lineTo(segment.pe.x, segment.pe.y);\n}\n\nfunction setGraphicsEdgeArc(graphics, arc) {\n    // let startAngle = 2 * Math.PI - arc.startAngle;\n    // let endAngle = 2 * Math.PI - arc.endAngle;\n    graphics.arc(arc.pc.x, arc.pc.y, arc.r, arc.startAngle, arc.endAngle, !arc.counterClockwise);\n}\n\nfunction setGraphicsEdge(graphics, edge) {\n    if (edge.shape instanceof Segment) {\n        setGraphicsEdgeSegment(graphics, edge.shape);\n    }\n    else if (edge.shape instanceof Arc) {\n        setGraphicsEdgeArc(graphics, edge.shape);\n    }\n}\n\nfunction setGraphicsFace(graphics, face) {\n    let ps = face.first.start;\n    graphics.moveTo(ps.x, ps.y);\n\n    for (let edge of face) {\n        setGraphicsEdge(graphics, edge);\n    }\n}\n\n// Polygon.prototype.graphics = function(style) {\nfunction graphics_polygon(polygon, style) {\n    let graphics = new createjs.Graphics();\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\n    let stroke = style && style.stroke ? style.stroke : \"#FF0303\";\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\n    graphics.setStrokeStyle(strokeStyle,0,0,10,true);\n    graphics.stroke = graphics.beginStroke(stroke).command;\n    graphics.fill = graphics.beginFill(fill).command;\n\n    for (let face of polygon.faces) {\n        setGraphicsFace(graphics, face);\n    }\n\n    graphics.endStroke();\n    return graphics;\n};\n\n","const Utils = {\n    is_equal: (obj1, obj2) => {\n        let equal = true;\n        for (let key of Object.keys(obj2)) {\n            if (obj2[key] !== obj1[key]) {\n                equal = false;\n                break;\n            }\n        }\n        return equal;\n    }\n};\n\nexport default Utils;","/**\n * Created by alexanderbol on 19/06/2017.\n */\n\nimport {Component} from 'react';\n// import * as createjs from '@createjs/easeljs';\nimport {graphics} from '../../../../models/graphics';\nimport Utils from '../../../../models/utils';\n\nlet createjs = window.createjs;\nexport class ShapeComponent extends Component {\n    constructor(params) {\n        super();\n\n        this.shape = new createjs.Shape();\n        params.stage.addChild(this.shape);\n\n        this.vertexShapes = [];\n\n        for (let vertex of params.model.geom.vertices) {\n            let vertexShape = new createjs.Shape();\n            vertexShape.geom = vertex;   // augment Shape with geom struct\n            vertexShape.mouseEnabled = false;\n            params.stage.addChild(vertexShape);\n            this.vertexShapes.push(vertexShape);\n        }\n    }\n\n    handleMouseOver = (event) => {\n        this.props.onMouseOver(this.props.model);\n    };\n\n    handleMouseOut = (event) => {\n        this.props.onMouseOut();\n    };\n\n    handleClick = (event) => {\n        this.props.onClick(this.props.model, this.props.layer);\n    };\n\n    redrawVertices(stroke, fill, alpha) {\n        let stage = this.props.stage;\n\n        for (let vertexShape of this.vertexShapes) {\n            let vertex = vertexShape.geom;\n            if (vertexShape.graphics.isEmpty()) {\n                vertexShape.graphics = graphics(vertex,   // vertex.graphics({\n                    {\n                        stroke: stroke,     // this.props.color,\n                        fill: fill,\n                        radius: 3. / (stage.zoomFactor * stage.resolution)\n                    });\n            }\n            else {\n                vertexShape.graphics.circle.radius = 3. / (stage.zoomFactor * stage.resolution);\n                vertexShape.graphics.fill.style = fill;\n            }\n            vertexShape.alpha = alpha;\n        }\n    }\n\n    redraw() {\n        // Draw shape\n        let stage = this.props.stage;\n        let color = (this.props.hovered || this.props.selected) ? \"black\" : this.props.color;\n        let alpha = (this.props.hovered || this.props.selected) ? 1.0 : 0.6;\n        let widthOn = this.props.widthOn;\n\n        let strokeStyle = this.props.model.geom.aperture ? this.props.model.geom.aperture : undefined;\n        let fill = (widthOn && !this.props.displayVertices) ? this.props.color : \"white\";\n\n        if (this.shape.graphics.isEmpty()) {\n            this.shape.graphics = graphics(this.props.model.geom,{\n                strokeStyle: strokeStyle,\n                ignoreScale: true,\n                stroke: color,\n                fill: fill,\n                radius: 3. / (stage.zoomFactor * stage.resolution)\n            });\n\n            // this.skeletonShape = new createjs.Shape();\n            // this.skeletonShape.graphics = this.props.model.geom.graphics({\n            //     strokeStyle: 1,\n            //     ignoreScale: true,\n            //     stroke: color,\n            //     fill: fill,\n            //     radius: 3. / (stage.zoomFactor * stage.resolution)\n            // });\n            // this.skeletonShape.alpha = 1;\n            // this.props.stage.addChild(this.skeletonShape);\n        }\n        else {\n            if (this.shape.graphics.stroke) this.shape.graphics.stroke.style = color;\n            if (this.shape.graphics.fill) this.shape.graphics.fill.style = fill;\n            if (this.shape.graphics.circle) this.shape.graphics.circle.radius =\n                3. / (stage.zoomFactor * stage.resolution);\n        }\n        this.shape.alpha = this.props.displayed ? alpha : 0.0;\n\n        // let box = this.props.model.geom.box;\n        // this.shape.cache(box.xmin, box.ymin, box.xmax - box.xmin, box.ymax - box.ymin);\n\n        // Draw vertices\n        alpha = this.props.displayed && this.props.displayVertices ? 1.0 : 0.0;\n        this.redrawVertices(color, color, alpha);\n    }\n\n    componentDidMount() {\n        this.shape.on(\"mouseover\", this.handleMouseOver);\n        this.shape.on(\"mouseout\", this.handleMouseOut);\n        this.shape.on(\"click\", this.handleClick);\n\n        // this.shape.mouseEnabled = false;\n\n        this.redraw();\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (Utils.is_equal(this.props, nextProps)) {\n            return false;\n        }\n        return true;\n    }\n\n    componentDidUpdate() {\n        this.redraw();\n    }\n\n    componentWillUnmount() {\n        this.shape.off(\"mouseover\", this.handleMouseOver);\n        this.shape.off(\"mouseout\", this.handleMouseOut);\n        this.shape.off(\"click\", this.handleClick);\n        this.props.stage.removeChild(this.shape);\n        this.shape.graphics.clear();\n        for (let vertexShape of this.vertexShapes) {\n            this.props.stage.removeChild(vertexShape);\n        }\n        this.vertexShapes = [];\n    }\n\n    render() {\n        return null;\n    }\n}\n","/**\n * Created by alexanderbol on 19/06/2017.\n */\n\nimport {Component} from 'react';\n// import * as createjs from '@createjs/easeljs';\nimport '../../../../models/graphics';\nimport Utils from '../../../../models/utils';\n\nlet createjs = window.createjs;\n\nexport class ImageComponent extends Component {\n    constructor(params) {\n        super();\n\n        this.bitmap = new createjs.Bitmap(params.model.geom.uri);\n        params.stage.addChild(this.bitmap);\n    }\n\n    handleMouseOver = (event) => {\n        this.props.onMouseOver(this.props.model);\n    };\n\n    handleMouseOut = (event) => {\n        this.props.onMouseOut();\n    };\n\n    handleClick = (event) => {\n        this.props.onClick(this.props.model, this.props.layer);\n    };\n\n    redraw() {\n        // Draw shape\n\n        let alpha = 0.5; // (this.props.hovered || this.props.selected) ? 1.0 : 0.6;\n\n        this.bitmap.alpha = this.props.displayed ? alpha : 0.0;\n\n        let width = this.props.model.geom.width;\n\n        let ratio = this.bitmap.image.naturalWidth/this.bitmap.image.naturalHeight;\n        let scaleX = width/this.bitmap.image.naturalWidth; // 1. / (stage.zoomFactor * stage.resolution);\n        let scaleY = width/(this.bitmap.image.naturalHeight*ratio);\n        let tx = this.props.model.geom.center.x; // stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\n        let ty = this.props.model.geom.center.y; // -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\n\n        this.bitmap.setTransform(tx, ty, scaleX, -scaleY);\n\n        this.bitmap.regX = this.bitmap.image.naturalWidth/2;\n        this.bitmap.regY = this.bitmap.image.naturalHeight/2;\n\n        // let box = this.state.polygon.geom.box;\n        // this.shape.cache(box.xmin, box.ymin, box.xmax - box.xmin, box.ymax - box.ymin);\n    }\n\n    componentDidMount() {\n        this.bitmap.on(\"mouseover\", this.handleMouseOver);\n        this.bitmap.on(\"mouseout\", this.handleMouseOut);\n        this.bitmap.on(\"click\", this.handleClick);\n\n        // this.shape.mouseEnabled = false;\n\n        this.redraw();\n    }\n\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (Utils.is_equal(this.props, nextProps)) {\n            return false;\n        }\n        return true;\n    }\n\n    componentDidUpdate() {\n        this.redraw();\n    }\n\n    componentWillUnmount() {\n        this.bitmap.off(\"mouseover\", this.handleMouseOver);\n        this.bitmap.off(\"mouseout\", this.handleMouseOut);\n        this.bitmap.off(\"click\", this.handleClick);\n    }\n\n    render() {\n        return null;\n    }\n}\n","import React, {Component} from 'react';\nimport {ShapeComponent} from './graphics/shapeComponent';\nimport {ImageComponent} from \"./graphics/imageComponent\";\n\nexport class LayerComponent extends Component {\n    render() {\n        return (\n            this.props.layer.shapes.map((shape, index) => {\n                return shape.geom.uri ? (\n                    <ImageComponent\n                        key={index}\n                        stage={this.props.stage}\n                        layer={this.props.layer}\n                        model={shape}\n                        displayed={this.props.layer.displayed}\n                        hovered={shape === this.props.hoveredShape}\n                        selected={\n                            shape === this.props.firstMeasuredShape ||\n                            shape === this.props.secondMeasuredShape\n                        }\n                        color={this.props.layer.color}\n                        widthOn={this.props.widthOn}\n                        displayLabels={this.props.displayLabels}\n                        zoomFactor={this.props.zoomFactor}\n                        onMouseOver={this.props.onMouseOver}\n                        onMouseOut={this.props.onMouseOut}\n                        onClick={this.props.onClick}\n                    />\n                    ) : (\n                    <ShapeComponent\n                        key={index}\n                        stage={this.props.stage}\n                        layer={this.props.layer}\n                        model={shape}\n                        displayed={this.props.layer.displayed}\n                        hovered={shape === this.props.hoveredShape}\n                        selected={\n                            shape === this.props.firstMeasuredShape ||\n                            shape === this.props.secondMeasuredShape\n                        }\n                        color={this.props.layer.color}\n                        widthOn={this.props.widthOn}\n                        displayVertices={this.props.displayVertices}\n                        zoomFactor={this.props.zoomFactor}\n                        onMouseOver={this.props.onMouseOver}\n                        onMouseOut={this.props.onMouseOut}\n                        onClick={this.props.onClick}\n                    /> )\n                }\n            )\n        )\n    }\n}\n","import React from 'react';\nimport classes from '../LabelsLayerComponent/labelsLayer.module.css';\n\nconst labelComponent = ( {stage, shape} ) => {\n    let center = shape.geom.center || shape.geom;  // Point has no method center\n    let left = stage.canvas.offsetLeft + stage.W2C_X(center.x) + 6;\n    let top = stage.canvas.offsetTop + stage.W2C_Y(center.y) - 4;\n    let inside = left > stage.canvas.offsetLeft && left < stage.canvas.offsetLeft + stage.canvas.width &&\n        top > stage.canvas.offsetTop && top < stage.canvas.height;\n\n    return inside ? (\n        <div style={{position:\"absolute\", left:left+\"px\", top: top+\"px\"}} className={classes.LabelComponent}>\n            <h5>{shape.label}</h5>\n        </div>\n    ) : null;\n};\n\nexport default labelComponent;","import React from 'react';\nimport LabelComponent from '../domelements/labelComponent';\n\nconst labelsLayerComponent = ({stage, layer, displayLabels}) => {\n    return (layer.displayed && displayLabels) ? (\n        layer.shapes.map((shape, index) => {\n                return (shape.label && shape.label.trim() !== \"\") ? (\n                    <LabelComponent\n                        key={index}\n                        stage={stage}\n                        shape={shape}\n                    />) : null;\n            }\n        )\n    ) : null;\n};\n\nexport default labelsLayerComponent;","import React, {Component} from 'react';\nimport {LayerComponent} from \"./layerComponent\";\nimport LabelsLayerComponent from \"./LabelsLayerComponent/labelsLayerComponent\";\n\nclass LayersComponent extends Component {\n\n    render() {\n        return this.props.layers.map((layer) =>\n            <React.Fragment key={layer.name}>\n                <LayerComponent\n                    stage={this.props.stage}\n                    layer={layer}\n                    color={layer.color}\n                    displayed={layer.displayed}\n                    displayVertices={this.props.displayVertices}\n                    displayLabels={this.props.displayLabels}\n                    widthOn={this.props.widthOn}\n                    hoveredShape={this.props.hoveredShape}\n                    firstMeasuredShape={this.props.firstMeasuredShape}\n                    secondMeasuredShape={this.props.secondMeasuredShape}\n                    zoomFactor={this.props.zoomFactor}\n                    onMouseOver={this.props.onMouseOver}\n                    onMouseOut={this.props.onMouseOut}\n                    onClick={this.props.onClick}\n                />\n                <LabelsLayerComponent\n                    stage={this.props.stage}\n                    layer={layer}\n                    displayed={layer.displayed}\n                    displayLabels={this.props.displayLabels}\n\n                />\n            </React.Fragment>\n        )\n    }\n}\n\nexport default LayersComponent;\n","\nlet defaultStyle = {\n    strokeStyle: 1,\n    stroke: \"#FF0303\",\n    fill: \"#FF0303\",\n    alpha: 1.0\n};\n\n/* Class Model represents data model that will be added to layer */\nexport class Model {\n    constructor(geom = undefined, style = undefined, label = \"\") {\n        this.geom = geom;\n        this.style = style || defaultStyle;\n        this.label = label;\n    }\n\n    clone() {\n        let model = new Model(this.geom, this.style, this.label);\n        return Object.assign(model, this);\n    }\n\n    get box() {\n        return this.geom.box;\n    }\n/*\n    static transformPoint(pt, stage) {\n        return new Flatten.Point(stage.W2C_X(pt.x), stage.W2C_Y(pt.y));\n    }\n\n    static transformSegment(segment, stage) {\n        return new Flatten.Segment(\n            Model.transformPoint(segment.ps, stage),\n            Model.transformPoint(segment.pe, stage)\n        )\n    }\n\n    static transformArc(arc, stage) {\n        return new Flatten.Arc(\n            Model.transformPoint(arc.pc, stage),\n            stage.W2C_Scalar(arc.r),\n            arc.startAngle,\n            arc.endAngle,\n            arc.counterClockwise\n        )\n    }\n\n    static transformEdge(shape, stage) {\n        if (shape instanceof Flatten.Segment) {\n            return Model.transformSegment(shape, stage);\n        }\n        else if (shape instanceof Flatten.Arc) {\n            return Model.transformArc(shape, stage);\n        }\n    }\n\n    static transformFace(face, stage) {\n        // Get shapes of face as array\n        let shapes = [];\n        for (let edge of face) {\n            shapes.push(edge.shape);\n        }\n\n        // Transform array of edges\n        return shapes.map(shape => Model.transformEdge(shape, stage));\n    }\n\n    static transformPolygon(polygon, stage) {\n        let newPolygon = new Flatten.Polygon();\n        let shapes = [];\n        for (let face of polygon.faces) {\n            shapes = Model.transformFace(face, stage);\n            newPolygon.addFace(shapes);\n        }\n        return newPolygon;\n    }\n*/\n}\n","/**\n * Created by alexanderbol on 17/04/2017.\n */\n\nimport Flatten from 'flatten-js';\n// import { Shape } from '../models/shape';\nimport { Model } from './model';\n\nexport class Layer {\n    constructor(stage) {\n        // super();\n        // cannot define Layer as extension of PlanarSet due to bug in compiler ?\n        this.stage = stage;\n        this.shapes = [];         // new Flatten.PlanarSet();\n        this.name = \"\";\n        this.color = \"\";\n        this.title = \"\";\n        this.displayed = false;\n        this.edited = false;\n        this.affected = false;\n    }\n\n    clone() {\n        let layer = new Layer(this.stage);\n        return Object.assign(layer, this);\n    }\n\n    add(shape) {\n        if (shape instanceof Model) {\n            this.shapes.push(shape);       // add(shape)\n        }\n        else {\n            let geom = shape;\n            let newShape = new Model(geom, {}, shape.label) // , this.stage);\n            this.shapes.push(newShape);     // add(newShape);\n        }\n        return this;\n    }\n\n    addShapesArray(shapes) {\n        for (let shape of shapes) {\n            this.add(shape);\n        }\n        return this;\n    }\n\n    get box() {\n        let box = new Flatten.Box();\n        for (let shape of this.shapes) {\n            box = box.merge(shape.box);\n        }\n        return box;\n    }\n\n    get center() {\n        let box = this.box;\n        return new Flatten.Point((box.xmin + box.xmax)/2, (box.ymin + box.ymax)/2);\n    }\n\n    toggleDisplayed(color) {\n        let displayed = !this.displayed;\n        return Object.assign(this.clone(),\n            {\n                displayed : displayed,\n                color: color\n            });\n    }\n\n    setAffected(affected) {\n        this.affected = affected;\n        return this;\n        // return Object.assign(this.clone(),\n        //     {\n        //         affected : affected\n        //     });\n    }\n\n    setEdited(edited) {\n        return Object.assign(this.clone(),\n            {\n                edited : edited\n            });\n    }\n\n    setNameAndTitle(name,title) {\n        return Object.assign(this.clone(),\n            {\n                name : name,\n                title: title,\n                edited: false\n            });\n    }\n\n    setAlpha() {\n        for(let shape of this.shapes) {\n            shape.alpha = this.displayed ? 1 : 0;\n        }\n        return this.shapes;\n    }\n\n    // toggleExpanded(shapeToggle) {\n    //     for(let shape of this.shapes) {\n    //         if (shape === shapeToggle) {\n    //             shape.expanded = !shape.expanded;\n    //         }\n    //     }\n    //     return this;\n    // }\n}","/**\n * Created by alexanderbol on 20/04/2017.\n */\n\nimport { Layer } from '../models/layer';\n\nconst colors = [\n    \"#FF0303\",\n    \"#4AA403\",\n    \"#540080\",\n    \"#FFFF40\",\n    \"#FF0080\",\n    \"#AED424\",\n    \"#545400\",\n    \"#FFA980\",\n    \"#A95480\",\n    \"#A9A9FF\",\n    \"#00FF00\",\n    \"#FFEE76\",\n    \"#A40576\",\n    \"#4385C8\",\n    \"#1CC826\",\n    \"#BDBD00\",\n    \"#48316E\",\n    \"#14616E\",\n    \"#8040BD\",\n    \"#DC7676\",\n    \"#924845\",\n    \"#A90000\",\n    \"#FFA900\"\n];\n\nexport class Layers {\n\n    static newLayer(stage, layers) {\n        let layer = new Layer(stage);\n        layer.name = Layers.getNewName(layers);\n        if (layers.length === 0) { // first layer\n            // layer.color = Layers.getNextColor(layers);\n            layer.displayed = false;\n            layer.affected = false;\n        }\n        return layer;\n    }\n\n    static get defaultName() {\n        return \"layer\";\n    }\n\n    static getNewName(layers) {\n        let name = Layers.defaultName;\n        let inc = 1;\n        let comparator = (layer) => layer.name === name;\n        while (layers.find(comparator) ) {\n            name = Layers.defaultName + inc;\n            inc++;\n        }\n        return name;\n    }\n\n    static getAffected(layers) {\n        return layers.find((lay) => lay.affected);\n    }\n\n    static setAffected(layers, layer) {\n        let currentAffectedLayer = Layers.getAffected(layers);\n        if (currentAffectedLayer) {\n            currentAffectedLayer.affected = false;\n        }\n        layer.affected = true;\n    }\n\n    static getNextColor(layers) {\n        let color = \"\";\n        for (let col of colors) {\n            if (!layers.find((layer) =>\n                layer.displayed && layer.color === col)) {\n                color = col;\n                break;\n            }\n        }\n        return color;\n    }\n\n    static delete(layers, layer) {\n        let index = layers.findIndex((l) => l === layer);\n        let newLayers = layers.filter(l => l !== layer);\n        if (index > 0) {\n            newLayers[index-1].affected = true;\n            if (newLayers[index-1].color === \"\") {\n                newLayers[index - 1].color = Layers.getNextColor(newLayers);\n            }\n            newLayers[index-1].displayed = true;\n        }\n        return newLayers;\n        // another option to delete from array:\n        // const newLayers = [...layers]\n        // return newLayers.splice( index, 1);\n    }\n\n    static sort(layers) {\n        let newLayers = layers.slice();\n        newLayers.sort( function(l1, l2) {\n            let name1 = l1.name.toUpperCase();\n            let name2 = l2.name.toUpperCase();\n            if (name1 < name2) {\n                return -1;\n            }\n            if (name1 > name2) {\n                return 1;\n            }\n            return 0;\n        });\n        return newLayers;\n    }\n}","/**\n * Created by alexanderbol on 21/04/2017.\n */\n\nimport React, {Component} from 'react';\n\nexport class MeasurePointsTool extends Component {\n    startX = undefined;\n    startY = undefined;\n    endX = undefined;\n    endY = undefined;\n    measureStarted = false;\n\n    handleMouseDown = (event) => {\n        event.preventDefault();\n\n        let canvas = this.refs.measureCanvas;\n        let stage = this.props.stage;\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\n\n        let coordX = event.offsetX || event.originalEvent.layerX;    // layerX for Firefox\n        let coordY = event.offsetY || event.originalEvent.layerY;    // layery for Firefox\n\n        if (this.measureStarted) {   // second click - clear measurement\n            this.startX = undefined;\n            this.startY = undefined;\n            this.endX = undefined;\n            this.endY = undefined;\n            this.measureStarted = false;\n            canvas.style.cursor = \"auto\";\n        }\n        else {                       // first click - start measurment\n            this.startX = stage.C2W_X(coordX);\n            this.startY = stage.C2W_Y(coordY);\n            this.measureStarted = true;\n            canvas.style.cursor = \"crosshair\";\n        }\n    };\n\n\n    handleMouseMove = (event) => {\n        let stage = this.props.stage;\n\n        let coordX = event.offsetX /*|| event.originalEvent ? event.originalEvent.layerX : undefined*/;    // layerX for Firefox\n        let coordY = event.offsetY /*|| event.originalEvent ? event.originalEvent.layerY : undefined*/;    // layerY for Firefox\n\n        if (this.measureStarted) {\n            this.endX = stage.C2W_X(coordX);\n            this.endY = stage.C2W_Y(coordY);\n\n            this.draw();\n        }\n    };\n\n    handleMouseUp = (event) => {}\n\n    handleMouseWheel = (event) => {\n        event.preventDefault();\n\n        let delta = event.detail || event.wheelDelta;\n        if (delta !== 0) {\n            this.props.onMouseWheelMove(event.offsetX, event.offsetY, delta);\n        }\n    };\n\n    handleMouseWheelFox = (event) => {\n        event.preventDefault();\n\n        if (event.detail !== 0) {\n            this.props.onMousewheelMove(event.layerX, event.layerY, -event.detail);\n        }\n    };\n\n    draw() {\n        let canvas = this.refs.measureCanvas;\n        let context = canvas.getContext('2d');\n        let stage = this.props.stage;\n\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\n\n        // Draw rectangle\n        let pllX = Math.min(stage.W2C_X(this.startX), stage.W2C_X(this.endX));\n        let pllY = Math.min(stage.W2C_Y(this.startY), stage.W2C_Y(this.endY));\n        let width = Math.abs(stage.W2C_Scalar(this.startX - this.endX));\n        let height = Math.abs(stage.W2C_Scalar(this.startY - this.endY));\n\n        context.beginPath();\n        context.rect(pllX, pllY, width, height);\n\n        // Draw segment\n        context.moveTo(stage.W2C_X(this.startX), stage.W2C_Y(this.startY));\n        context.lineTo(stage.W2C_X(this.endX), stage.W2C_Y(this.endY));\n\n        context.lineWidth = 1;\n        context.strokeStyle = 'black';\n        context.stroke();\n\n        // Draw text\n        let textX, textY, textHeight, textWidth;\n        let backX, backY;                      // background rectangle\n        let text = this.measurement();\n\n        context.font = \"12pt Arial\";\n\n        textHeight = 12;         /* font size*/\n        textWidth = context.measureText(text).width;\n\n        // Rectangle to the right of current point, text aligned left\n        if (Math.abs(stage.W2C_X(this.endX) - pllX) <= 2) {\n            context.textAlign = \"left\";\n            textX = pllX + 3;\n            backX = pllX;\n        }\n        // Rectangle to the left of current point, text aligned right\n        else {\n            context.textAlign = \"right\";\n            textX = pllX + width - 3;\n            backX = textX - textWidth - 3;\n        }\n\n        if (Math.abs(stage.W2C_Y(this.endY) - pllY) <= 2) {\n            textY = pllY - 3;\n        }\n        else {\n            textY = pllY + height + textHeight + 3;\n        }\n        backY = textY - textHeight - 3;\n\n        context.fillStyle = 'white';\n        context.globalAlpha = 0.4;\n        context.fillRect(backX, backY, textWidth + 6, textHeight + 6);\n\n        context.fillStyle = \"black\";\n        context.globalAlpha = 1;\n        context.fillText(this.measurement(), textX, textY);\n    }\n\n    measurement() {\n        let dx = this.endX - this.startX;\n        let dy = this.endY - this.startY;\n        let dist = Math.sqrt(dx * dx + dy * dy);\n        let message = \"DX=\" + this.format(dx) + \",DY=\" + this.format(dy) + \",D=\" + this.format(dist);\n        return message;\n    }\n\n    format(num) {\n        return (num/this.props.divisor).toFixed(this.props.decimals);\n    }\n\n    componentWillMount() {\n        // this.dispatch = this.props.store.dispatch;\n        // this.setState(this.props.store.getState());\n    }\n\n    componentDidMount() {\n        let canvas = this.refs.measureCanvas;\n        canvas.addEventListener(\"mousedown\", this.handleMouseDown);\n        canvas.addEventListener(\"mousemove\", this.handleMouseMove);\n        canvas.addEventListener(\"mouseup\", this.handleMouseUp);\n\n        canvas.addEventListener(\"mousewheel\", this.handleMouseWheel);\n        canvas.addEventListener(\"DOMMouseScroll\", this.handleMouseWheelFox);\n    }\n\n    componentDidUpdate() {\n        if (this.measureStarted) {\n            this.draw();\n        }\n    }\n\n    componentWillUnmount() {\n        let canvas = this.refs.measureCanvas;\n        canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\n    }\n\n    render() {\n        let mainCanvas = this.props.stage.canvas;\n        let width = mainCanvas.width;\n        let height = mainCanvas.height;\n        let top = mainCanvas.offsetTop;\n        let left = mainCanvas.offsetLeft;\n        return (\n            <canvas tabIndex=\"1\" ref=\"measureCanvas\" id=\"measurePoints\"\n                    width={width}\n                    height={height}\n                    style={{position:'absolute',top:top,left:left}}\n            >\n            </canvas>\n        )\n    }\n}\n","/**\n * Created by alexanderbol on 21/04/2017.\n */\n\nimport {Component} from 'react';\n// import createjs from 'easel-js';\n// import * as createjs from '@createjs/easeljs';\nimport {graphics} from '../models/graphics';\n// import '../../public/styles/App.css';\nlet createjs = window.createjs;\nexport class MeasureShapesTool extends Component {\n    constructor(params) {\n        super();\n        this.segment = new createjs.Shape();\n        params.stage.addChild(this.segment);\n\n        this.labelShape = new createjs.Text();\n        this.labelShape.x = 0;\n        this.labelShape.y = 0;\n        params.stage.addChild(this.labelShape);\n\n        // var html = document.createElement('div');\n        // html.innerText = \"\"; // params.model.label;\n        // html.style.position = \"absolute\";\n        // html.style.top = 0;\n        // html.style.left = 0;\n        //\n        // document.body.appendChild(html);\n        // this.labelShape = new createjs.DOMElement(html);\n        // params.stage.addChild(this.labelShape);\n    }\n\n    // redrawLabel() {\n    //     if (!this.labelShape) return;\n    //\n    //     let stage = this.props.stage;\n    //\n    //     this.labelShape.htmlElement.style.display = \"block\";\n    //\n    //     let box = this.props.shortestSegment.box;\n    //     let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\n    //     let dx = 6. / (stage.zoomFactor * stage.resolution);\n    //     let dy = 4. / (stage.zoomFactor * stage.resolution);\n    //\n    //     this.labelShape.htmlElement.style.font = \"16px Arial\";\n    //     this.labelShape.htmlElement.innerText = this.props.shortestSegment.length;\n    //\n    //     let unscale = 1. / (stage.zoomFactor * stage.resolution);\n    //     let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\n    //     let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\n    //     this.labelShape.setTransform(tx, ty, unscale, -unscale);\n    // }\n\n    format(num) {\n        return (num/this.props.divisor).toFixed(this.props.decimals);\n    }\n\n    redrawLabel() {\n        if (!this.labelShape) return;\n\n        let stage = this.props.stage;\n\n        let box = this.props.shortestSegment.box;\n        let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\n        let dx = 6. / (stage.zoomFactor * stage.resolution);\n        let dy = 4. / (stage.zoomFactor * stage.resolution);\n\n        if (box.ymin === box.ymax) {\n            dx = 0;\n            dy = -dy;\n        }\n\n        // this.labelShape.htmlElement.style.display = \"block\";\n        // this.labelShape.htmlElement.style.font = \"16px Arial\";\n        // this.labelShape.htmlElement.innerText = this.props.shortestSegment.length;\n\n        this.labelShape.text = this.format(this.props.shortestSegment.length);\n\n        let fontSize = 14.; // / (stage.zoomFactor * stage.resolution);\n        this.labelShape.font = `${fontSize}px Arial`;\n\n        let unscale = 1. / (stage.zoomFactor * stage.resolution);\n        // let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\n        // let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\n        let tx = point.x + dx;\n        let ty = point.y + dy;\n        this.labelShape.setTransform(tx, ty, unscale, -unscale);\n    }\n\n    draw() {\n        if (this.props.shortestSegment) {\n            this.segment.graphics = graphics(this.props.shortestSegment);\n            this.redrawLabel();\n        }\n    }\n    componentDidMount() {\n        this.draw();\n    }\n    componentDidUpdate() {\n        this.segment.graphics.clear();\n        if (this.props.firstMeasuredShape && this.props.secondMeasuredShape &&\n            this.props.firstMeasuredLayer.displayed &&\n            this.props.secondMeasuredLayer.displayed) {\n\n            this.draw();\n            this.redrawLabel();\n        }\n    }\n\n    componentWillUnmount() {\n        this.props.stage.removeChild(this.segment);\n        this.segment.graphics.clear();\n        this.props.stage.removeChild(this.labelShape);\n        this.labelShape.text = \"\";\n    }\n\n    render() {\n        return null;\n    }\n}\n","/**\n * Created by alexanderbol on 21/04/2017.\n */\nimport React from 'react';\nexport const DisplayCoordsTool = ({stage, coordX, coordY, divisor, decimals}) => {\n    const format = (num) => {\n        return (num/divisor).toFixed(decimals);\n    };\n\n    let mainCanvas = stage.canvas;\n    let top = mainCanvas.offsetTop + 10;\n    let left = mainCanvas.offsetLeft + 10;\n    let x = stage.C2W_X(coordX);\n    let y = stage.C2W_Y(coordY);\n    return (\n        <div style={{position: 'absolute', top: top, left: left}}>\n            <h5 style={{margin: 0, padding: 3}}>\n                X: {format(x)} Y: {format(y)}\n            </h5>\n        </div>\n    )\n}\n","import {Component} from 'react';\nimport ReactDOM from 'react-dom';\n\nconst modalRoot = document.getElementById('modal-root');\n\n// A Modal component that is an abstraction around the portal API.\nclass Modal extends Component {\n    constructor(props) {\n        super(props);\n        // Create a div that we'll render the modal into. Because each\n        // Modal component has its own element, we can render multiple\n        // modal components into the modal container.\n        this.el = document.createElement('div');\n    }\n\n    componentDidMount() {\n        // Append the element into the DOM on mount. We'll render\n        // into the modal container element (see the HTML tab).\n        modalRoot.appendChild(this.el);\n    }\n\n    componentWillUnmount() {\n        // Remove the element from the DOM when we unmount\n        modalRoot.removeChild(this.el);\n    }\n\n    render() {\n        // Use a portal to render the children into the element\n        return ReactDOM.createPortal(\n            // Any valid React child: JSX, strings, arrays, etc.\n            this.props.children,\n            // A DOM element\n            this.el,\n        );\n    }\n}\n\nexport default Modal;","import React, {Component} from 'react';\nimport Modal from '../Modal';\nimport classes from './ModalPopup.module.css';\n\nclass ModalPopup extends Component {\n    offsetX;\n    offsetY;\n    dragX;\n    dragY;\n\n    onBackDropClicked = (ev) => {\n        if (ev.target.id === \"backDrop\") {\n            this.props.closePopup();\n        }\n    };\n\n    handleKeyDown = (ev) => {\n        if (ev.code === \"Escape\") {\n            this.props.closePopup();\n        }\n    };\n\n    elementDrag = (ev) => {\n        ev = ev || window.event;\n        // calculate the new cursor position:\n        this.offsetX = this.dragX - ev.clientX;\n        this.offsetY = this.dragY - ev.clientY;\n        this.dragX = ev.clientX;\n        this.dragY = ev.clientY;\n        // set the element's new position:\n        let element = ev.target;\n        element.style.top = (element.offsetTop - this.offsetY) + \"px\";\n        element.style.left = (element.offsetLeft - this.offsetX) + \"px\";\n    };\n\n    closeDragElement = (ev) => {\n        /* stop moving when mouse button is released:*/\n        ev.target.onmouseup = null;\n        ev.target.onmousemove = null;\n    };\n\n    dragMouseDown = (ev) => {\n        ev = ev || window.event;\n        // get the mouse cursor position at startup:\n        this.dragX = ev.clientX;\n        this.dragY = ev.clientY;\n        ev.target.onmouseup = this.closeDragElement;\n        // call a function whenever the cursor moves:\n        ev.target.onmousemove = this.elementDrag;\n    };\n\n    componentDidMount() {\n        document.addEventListener('keydown', this.handleKeyDown);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.handleKeyDown);\n    }\n\n    render() {\n        return this.props.showPopup ? (\n            <Modal>\n                <div\n                    id=\"backDrop\"\n                    className={classes.BackDrop}\n                    onClick={this.onBackDropClicked}\n                >\n                    <div className={classes.ModalPopup}\n                         onMouseDown={this.dragMouseDown}\n                    >\n                        {this.props.children}\n                    </div>\n                </div>\n            </Modal>\n        ) : null;\n    }\n}\n\nexport default ModalPopup;","/**\n * Created by alexanderbol on 13/04/2017.\n */\n\nimport React from 'react';\nimport classes from './AboutPopup.module.css';\n\nconst AboutPopup = (props) => {\n    return (\n        <div className={classes.AboutPopup}>\n            <h2>{props.title} v{props.version}</h2>\n            <h4>Build October 2018</h4>\n        </div>\n    )\n};\n\nexport default AboutPopup;","/**\n * Created by alexanderbol on 17/04/2017.\n */\n\nimport React, {Component} from 'react';\nimport ToolbarComponent from '../../components/MainComponent/ToolbarComponent/ToolbarComponent';\nimport CanvasComponent from '../../components/MainComponent/CanvasComponent/CanvasComponent';\nimport StatusComponent from '../../components/Layout/StatusComponent/StatusComponent';\n\nimport {StageComponent} from \"../../components/MainComponent/GraphicsEditor/stageComponent\";\nimport LayersComponent from '../../components/MainComponent/GraphicsEditor/layersComponent';\n\nimport * as actions from '../../store/actions/appActions';\n\nimport {Layers} from '../../models/layers';\nimport {MeasurePointsTool} from '../../tools/measurePointsTool';\nimport {MeasureShapesTool} from \"../../tools/measureShapesTool\";\nimport {DisplayCoordsTool} from \"../../tools/displayCoordsTool\";\n\nimport ModalPopup from \"../../components/UI/ModalPopup/ModalPopup\";\nimport AboutPopup from \"../../components/AboutPopup/AboutPopup\";\n\nimport styles from './MainComponent.module.css';\nimport { connect } from \"react-redux\";\n\nclass MainComponent extends Component {\n    handleFileSelect = (event) => {\n        if (!(File && FileReader && FileList)) return;\n        let files = event.target.files; // FileList object\n        this.props.handleFileSelect(files, this.props.stage, this.props.layers);\n    };\n\n    setHomeView = () => {\n        let layer = Layers.getAffected(this.props.layers);\n        if (!layer) return;\n        this.props.setHomeView(this.props.stage, layer);\n    };\n\n    handleKeyDown = (e) => {\n        // let ctrl = e.ctrlKey;\n        if (e.target.id !== \"mainCanvas\")\n            return;\n        switch (e.code) {\n            case \"KeyH\":\n                this.setHomeView();\n                break;\n\n            case \"KeyW\":\n                this.props.toggleWidthMode();     // toggle width On/Off in graphics model\n                break;\n\n            case \"KeyE\":\n                this.props.toggleDisplayVertices();  // toggle vertices On/Off\n                break;\n\n            case \"ArrowRight\":\n                break;\n\n            case \"ArrowLeft\":\n                break;\n            case \"ArrowUp\":\n                break;\n            case \"ArrowDown\":\n                break;\n            default:\n                break;\n        }\n    };\n\n    componentDidMount() {\n        window.onresize = this.props.resizeStage;\n        // Keyboard event\n        // var _keydown = _.throttle(this.keydown, 100);\n        document.addEventListener('keydown', this.handleKeyDown);\n        // var _keyup = _.throttle(this.keyup, 500);\n        document.addEventListener('keyup', this.handleKeyUp);\n    }\n\n    render() {\n        let displayCoordsTool = this.props.stage ? (\n            <DisplayCoordsTool\n                key=\"displayCoordinatedTool\"\n                stage={this.props.stage}\n                units={this.props.units}\n                divisor={this.props.divisor}\n                decimals={this.props.decimals}\n                coordX={this.props.mouse.x}\n                coordY={this.props.mouse.y}\n            />\n        ) : null;\n\n        let measurePointsTool =\n            this.props.measurePointsActive ? (\n                <MeasurePointsTool\n                    stage={this.props.stage}\n                    divisor={this.props.divisor}\n                    decimals={this.props.decimals}\n                    onMouseWheelMove={this.handleMouseWheelMove}\n                />\n            ) : null;\n\n        let measuredLayersDisplayed = this.props.measureShapesTool.firstMeasuredShape &&\n            this.props.measureShapesTool.secondMeasuredShape &&\n            this.props.measureShapesTool.firstMeasuredLayer.displayed &&\n            this.props.measureShapesTool.secondMeasuredLayer.displayed;\n\n        let measureShapesTool = this.props.measureShapesTool.distance &&\n        this.props.measureShapesTool.shortestSegment && measuredLayersDisplayed ? (\n            <MeasureShapesTool\n                key=\"MeasureShapesTool\"\n                stage={this.props.stage}\n                firstMeasuredShape={this.props.measureShapesTool.firstMeasuredShape}\n                secondMeasuredShape={this.props.measureShapesTool.secondMeasuredShape}\n                firstMeasuredLayer={this.props.measureShapesTool.firstMeasuredLayer}\n                secondMeasuredLayer={this.props.measureShapesTool.secondMeasuredLayer}\n                distance={this.props.measureShapesTool.distance}\n                shortestSegment={this.props.measureShapesTool.shortestSegment}\n                divisor={this.props.divisor}\n                decimals={this.props.decimals}\n            />\n        ) : null;\n\n        return (\n            <main className={styles[\"Main-content\"]}>\n                <ToolbarComponent\n                    units={this.props.units}\n                    showSkeletonRecognitionButton={this.props.showSkeletonRecognitionButton}\n                    onFileSelected={this.handleFileSelect}\n                    onHomeButtonPressed={this.setHomeView}\n                    onPanByDragPressed={this.props.togglePanByDrag}\n                    onMeasurePointsButtonPressed={this.props.toggleMeasureBetweenPoints}\n                    onMeasureBetweenShapesButtonPressed={this.props.toggleMeasureBetweenShapes}\n                    onToggleWidthModePressed={this.props.toggleWidthMode}\n                    onToggleVerticesPressed={this.props.toggleDisplayVertices}\n                    onToggleLabelsPressed={this.props.toggleDisplayLabels}\n                    onShowAboutPopupPressed={this.props.toggleAboutPopup}\n                    onSkeletonRecognitionButtonPressed={this.props.applySkeletonRecognition}\n                    onUnitClicked={this.props.toggleUnits}\n                />\n\n                <CanvasComponent />\n\n                <StageComponent\n                    stage={this.props.stage}\n                >\n                    <LayersComponent\n                        stage={this.props.stage}\n                        layers={this.props.layers}\n                        displayVertices={this.props.displayVertices}\n                        displayLabels={this.props.displayLabels}\n                        widthOn={this.props.widthOn}\n                        zoomFactor={this.props.zoomFactor}\n                        hoveredShape={this.props.measureShapesTool.hoveredShape}\n                        firstMeasuredShape={this.props.measureShapesTool.firstMeasuredShape}\n                        secondMeasuredShape={this.props.measureShapesTool.secondMeasuredShape}\n                        onMouseOver={this.props.handleMouseRollOverShape}\n                        onMouseOut={this.props.handleMouseRollOutShape}\n                        onClick={this.props.handleClickOnShape}\n                    />\n                    {displayCoordsTool}\n                    {measurePointsTool}\n                    {measureShapesTool}\n                </StageComponent>\n\n                <StatusComponent />\n\n                <ModalPopup\n                    showPopup={this.props.showAboutPopup}\n                    closePopup={this.props.toggleAboutPopup}\n                >\n                    <AboutPopup\n                        title={this.props.title}\n                        version={this.props.version}\n                        build={this.props.build}\n                        // onCloseAboutPopupPressed={this.closeAboutPopup}\n                    />\n                </ModalPopup>\n\n            </main>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        stage: state.app.stage,\n        title: state.app.title,\n        version: state.app.version,\n        build: state.app.build,\n        displayVertices: state.app.displayVertices,\n        displayLabels: state.app.displayLabels,\n        widthOn: state.app.widthOn,\n        zoomFactor: state.app.zoomFactor,\n        units: state.app.units,\n        showSkeletonRecognitionButton: state.app.showSkeletonRecognitionButton,\n        divisor: state.app.divisor,\n        decimals: state.app.decimals,\n        measurePointsActive: state.app.measurePointsActive,\n        showAboutPopup: state.app.showAboutPopup,\n        layers: state.layers,\n        mouse: state.mouse,\n        measureShapesTool: state.measureShapesTool,\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        resizeStage: () => dispatch(actions.resizeStage()),\n        handleFileSelect: (files, stage, layers) => dispatch(actions.handleFileSelect(files, stage, layers)),\n        setHomeView: (stage, shape) => dispatch(actions.setHomeView(stage, shape)),\n        toggleUnits: () => dispatch(actions.toggleUnits()),\n        toggleWidthMode: () => dispatch(actions.toggleWidthMode()),\n        toggleDisplayVertices: () => dispatch(actions.toggleDisplayVertices()),\n        toggleDisplayLabels: () => dispatch(actions.toggleDisplayLabels()),\n        toggleAboutPopup: () => dispatch(actions.toggleAboutPopup()),\n        toggleMeasureBetweenPoints: () => dispatch(actions.toggleMeasureBetweenPoints()),\n        toggleMeasureBetweenShapes: () => dispatch(actions.toggleMeasureBetweenShapes()),\n        togglePanByDrag: () => dispatch(actions.togglePanByDrag()),\n        applySkeletonRecognition: () => dispatch(actions.applySkeletonRecognition()),\n        handleMouseRollOverShape: (shape) => dispatch(actions.handleMouseRollOverShape(shape)),\n        handleMouseRollOutShape: () => dispatch(actions.handleMouseRollOutShape()),\n        handleClickOnShape: (shape, layer) => dispatch(actions.handleClickOnShape(shape, layer)),\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainComponent);\n","import * as ActionTypes from '../actionTypes';\n\nexport const resizeStage = () => {\n    return {\n        type: ActionTypes.STAGE_RESIZED\n    }\n};\n\nexport const toggleUnits = () => {\n    return {\n        type: ActionTypes.TOGGLE_UNITS_CLICKED\n    }\n};\n\nexport const toggleWidthMode = () => {\n    return {\n        type: ActionTypes.TOGGLE_WIDTH_MODE_CLICKED\n    }\n};\n\nexport const toggleDisplayVertices = () => {\n    return {\n        type: ActionTypes.TOGGLE_DISPLAY_VERTICES_CLICKED\n    }\n};\n\nexport const toggleDisplayLabels = () => {\n    return {\n        type: ActionTypes.TOGGLE_DISPLAY_LABELS_CLICKED\n    }\n};\n\nexport const toggleAboutPopup = () => {\n    return {\n        type: ActionTypes.TOGGLE_ABOUT_POPUP_CLICKED\n    }\n};\n\n// export const closeAboutPopup = () => {\n//     return {\n//         type: ActionTypes.CLOSE_ABOUT_POPUP_BUTTON_PRESSED\n//     }\n// };\n\nexport const toggleMeasureBetweenPoints = () => {\n    return {\n        type: ActionTypes.MEASURE_POINTS_BUTTON_PRESSED\n    }\n};\n\nexport const toggleMeasureBetweenShapes = () => {\n    return {\n        type: ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED\n    }\n};\n\nexport const applySkeletonRecognition = () => {\n    return {\n        type: ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED\n    }\n};\n\nexport const handleFileSelect = (files, stage, layers) => {\n    return {\n        type: ActionTypes.FILENAME_LIST_SELECTED,\n        files,\n        stage,\n        layers\n    }\n};\n\nexport const setHomeView = (stage, shape) => {\n    return {\n        type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n        stage,\n        shape\n    }\n};\n\nexport const togglePanByDrag = () => {\n    return {\n        type: ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED\n    }\n};\n\nexport const handleMouseRollOverShape = (shape) => {\n    return {\n        type: ActionTypes.MOUSE_ROLL_OVER_SHAPE,\n        shape\n    }\n};\n\nexport const handleMouseRollOutShape = () => {\n    return {\n        type: ActionTypes.MOUSE_ROLL_OUT_SHAPE\n    }\n};\n\nexport const handleClickOnShape = (shape, layer) => {\n    return {\n        type: ActionTypes.MOUSE_CLICKED_ON_SHAPE,\n        shape,\n        layer\n    }\n};\n\nexport const asyncOperationStarted = () => {\n    return {\n        type: ActionTypes.ASYNC_OPERATION_STARTED\n    }\n};\n\nexport const asyncOperationEnded = () => {\n    return {\n        type: ActionTypes.ASYNC_OPERATION_ENDED\n    }\n};\n","/**\n * Created by alexanderbol on 17/04/2017.\n */\nimport React from 'react';\nimport FontAwesome from 'react-fontawesome';\n\nimport styles from './LayerListToolbar.module.css';\nimport '@fortawesome/fontawesome-free/css/all.css';\n\nconst LayerListToolbar = (props) => {\n    return (\n        <div className={styles[\"Layer-list-toolbar\"]}>\n            <button title=\"Add layer\" onClick={props.onAddLayerButtonClicked}>\n                <FontAwesome\n                    name='plus'\n                    size='2x'\n                    style={{color: \"grey\"}}\n                />\n            </button>\n            <button title=\"Edit selected layer's name and info\" onClick={props.onEditLayerButtonClicked}>\n                <FontAwesome\n                    name='pencil-alt'\n                    size='2x'\n                    style={{color: \"grey\"}}\n                />\n            </button>\n            <button title=\"Delete selected layer\" onClick={props.onDeleteLayerButtonClicked}>\n                <FontAwesome\n                    name='times'\n                    size='2x'\n                    style={{color: \"grey\"}}\n                />\n            </button>\n            <button title=\"Sort layer list\" onClick={props.onSortLayersButtonClicked}>\n                <FontAwesome\n                    name='sort-alpha-down'\n                    size='2x'\n                    style={{color: \"grey\"}}\n                />\n            </button>\n        </div>\n    )\n};\n\nexport default LayerListToolbar;","/**\n * Created by alexanderbol on 13/04/2017.\n */\n\nimport React from 'react';\nimport styles from './LayerEditForm.module.css';\n\nconst LayerEditForm = (props) => {\n    let onSubmitLayerEditForm = (ev) => {\n        ev.stopPropagation();\n        ev.preventDefault();\n        let form = ev.target.parentElement;\n        let newLayer = Object.assign({}, props.layer, {\n            name: form.layerName.value,\n            title: form.layerTitle.value\n        });\n        props.onSubmitLayerEditForm(newLayer);\n        return false;\n    };\n\n    let setFocus = (ev) => {\n        ev.stopPropagation();\n        ev.target.focus();\n    };\n\n    let onCancelLayerEditForm = () => {\n        props.onEscapeLayerEditForm();\n    };\n\n    return (\n        <form className={styles[\"Layer-edit-form\"]}\n              id=\"layerEditForm\"\n              onSubmit={onSubmitLayerEditForm}\n        >\n            <label>Layer name:</label><br/>\n            <input type=\"text\" id=\"layer-name\" name=\"layerName\" size=\"80\" defaultValue={props.layer.name}\n                   onClick={setFocus}/><br/>\n            <label>Layer info:</label><br/>\n            <textarea id=\"layer-title\" name=\"layerTitle\" cols=\"78\" rows=\"3\" defaultValue={props.layer.title}\n                      onClick={setFocus}></textarea><br/>\n            <button onClick={onCancelLayerEditForm}>Cancel</button>\n            <button onClick={onSubmitLayerEditForm}>OK</button>\n        </form>\n    )\n};\n\nexport default LayerEditForm;","/**\n * Created by alexanderbol on 17/04/2017.\n */\n\nimport React, {Component} from 'react';\nimport ModalPopup from \"../../UI/ModalPopup/ModalPopup\";\nimport LayerEditForm from \"../LayerEditForm/LayerEditForm\";\nimport styles from './LayerListElement.module.css';\n\nclass LayerListElement extends Component {\n    componentDidUpdate() {\n        if (document.activeElement.nodeName === \"CANVAS\")\n            return;\n        let elem = this.refs.layerName;\n        if (this.props.layer.affected) {\n            elem.focus();\n        }\n    }\n\n    rgba(hex, opacity) {\n        let r, g, b, percent;\n        if (hex) {\n            hex = hex.replace('#', '');\n            r = parseInt(hex.substring(0, 2), 16);\n            g = parseInt(hex.substring(2, 4), 16);\n            b = parseInt(hex.substring(4, 6), 16);\n            percent = opacity;\n        }\n        else {\n            r = 147;\n            g = 128;\n            b = 108;\n            percent = 0;\n        }\n        let result = `rgba(${r},${g},${b},${percent / 100})`;\n\n        return result;\n    }\n\n    render() {\n        // let style = this.props.layer.displayed ?\n        //     styleSheet.displayed : styleSheet.undisplayed;\n\n        let displayed = this.props.layer.displayed ? \"Layer-displayed\" : \"Layer-undisplayed\";\n        let color = displayed ? this.rgba(this.props.layer.color, 100) : this.rgba();\n        let bgcolor = displayed ? this.rgba(this.props.layer.color, 30) : this.rgba();\n        let alpha = this.props.layer.affected ? 1 : 0;\n        let layerNameOpacity = this.props.layer.shapes.length === 0 ? 0.6 : 1.0;\n        return [\n            <li key={1}\n                className={styles.Layer}\n                onClick={this.props.onLayerClicked}\n                onDoubleClick={this.props.onLayerDoubleClicked}>\n\n                <div className={styles.LayerSelectionBox}\n                     onClick={this.props.onAffectedBoxClicked}\n                >\n                    <h4 className={styles.LayerSelectionMark}\n                        style={{opacity: alpha, color: color}}>\n                        \n                    </h4>\n                </div>\n\n                <div className={styles.LayerNameBox}\n                     style={{backgroundColor: bgcolor, opacity: layerNameOpacity}}>\n                    <h4 ref=\"layerName\"\n                        title={this.props.layer.name}\n                        tabIndex='1'\n                    >\n                        {this.props.layer.name}\n                    </h4>\n                </div>\n\n            </li>,\n\n            <ModalPopup\n                key={2}\n                showPopup={this.props.layer.edited}\n                closePopup={this.props.onEscapeLayerEditForm}\n            >\n                <LayerEditForm\n                    layer={this.props.layer}\n                    onSubmitLayerEditForm={this.props.onSubmitLayerEditForm}\n                    onEscapeLayerEditForm={this.props.onEscapeLayerEditForm}\n                />\n            </ModalPopup>\n        ]\n    }\n}\n\nexport default LayerListElement;\n","/**\n * Created by alexanderbol on 17/04/2017.\n */\n\nimport React, {Component} from 'react';\nimport LayerListToolbar from \"../../components/LayersList/LayerListToolbar/LayerListToolbar\";\nimport LayerListElement from '../../components/LayersList/LayerListElement/LayerListElement';\nimport * as actions from '../../store/actions/layersActions';\nimport { connect } from 'react-redux';\nimport styles from './LayersList.module.css';\n\nclass LayersList extends Component {\n    height = 0;\n\n    handleKeyDown = (e) => {\n        // e.stopPropagation();\n        // e.preventDefault();\n\n        if (e.target.parentElement.parentElement &&\n            e.target.parentElement.parentElement.parentElement &&\n            e.target.parentElement.parentElement.parentElement.id &&\n            e.target.parentElement.parentElement.parentElement.id === \"layersList\") {\n\n\n            switch (e.code) {\n                case \"ArrowRight\":\n                case \"ArrowDown\":\n                    this.props.setAffectedNextLayer();\n                    // this.dispatch({\n                    //     type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\n                    // });\n                    break;\n                case \"ArrowLeft\":\n                case \"ArrowUp\":\n                    this.props.setAffectedPrevLayer();\n                    // this.dispatch({\n                    //     type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\n                    // });\n                    break;\n                /* tab does not work properly\n            case \"Tab\":\n                if (e.shiftKey) {\n                    this.dispatch({\n                        type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\n                    });\n                }\n                else {\n                    this.dispatch({\n                        type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\n                    });\n                }\n                break;\n                */\n                default:\n                    break;\n            }\n        }\n\n    };\n\n    componentDidMount() {\n        // Keyboard event\n        // var _keydown = _.throttle(this.keydown, 100);\n        document.addEventListener('keydown', this.handleKeyDown);\n        // var _keyup = _.throttle(this.keyup, 500);\n        // document.addEventListener('keyup', this.handleKeyUp);\n    }\n\n    componentDidUpdate() {\n        this.height = this.refs.layersComponent.clientHeight;\n        // let container = this.refs.watchContainer;\n        // let parentHeight = container.parentElement.clientHeight;\n        // container.style.maxHeight = 0.7*parentHeight;\n    }\n\n    render() {\n        return (\n            <div className={styles[\"App-layers\"]}\n                 ref=\"layersComponent\"\n                 onClick={this.props.onLayerListClicked}\n            >\n                {/*<h5>Layers</h5>*/}\n                <LayerListToolbar\n                    onAddLayerButtonClicked={() => this.props.onAddLayerButtonClicked(this.props.stage)}\n                    onEditLayerButtonClicked={this.props.onEditLayerButtonClicked}\n                    onDeleteLayerButtonClicked={this.props.onDeleteLayerButtonClicked}\n                    onSortLayersButtonClicked={this.props.onSortLayersButtonClicked}\n                />\n                <ul id=\"layersList\"\n                    style={{maxHeight:0.82*(this.height-40)}}>\n                { this.props.layers.map((layer) =>\n                    <LayerListElement\n                        key={layer.name}\n                        layer={layer}\n                        onLayerClicked={() => this.props.onLayerClicked(layer)}\n                        onAffectedBoxClicked={(event) => this.props.onAffectedBoxClicked(event, layer)}\n                        onSubmitLayerEditForm={this.props.onSubmitLayerEditForm}\n                        onEscapeLayerEditForm={this.props.onEscapeLayerEditForm}\n                    />)\n                }\n                </ul>\n                {/*{addLayer}*/}\n            </div>\n        )\n\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        layers: state.layers,\n        stage: state.app.stage\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onAddLayerButtonClicked: (stage) => dispatch(actions.addEmptyLayer(stage)),\n        onEditLayerButtonClicked: () => dispatch(actions.openAffectedLayerEditForm()),\n        onDeleteLayerButtonClicked: () => dispatch(actions.deleteAffectedLayer()),\n        onSortLayersButtonClicked: () => dispatch(actions.sortLayers()),\n        onLayerClicked: (layer) => dispatch(actions.toggleDisplayLayer(layer)),\n        onAffectedBoxClicked: (event, layer) => dispatch(actions.toggleAffectedLayer(event, layer)),\n        onSubmitLayerEditForm: (newLayer) => dispatch(actions.updateLayer(newLayer)),\n        onEscapeLayerEditForm: () => dispatch(actions.closeEditLayerForm()),\n        onLayerListClicked: () => dispatch(actions.refreshLayerList()),\n        setAffectedNextLayer: () => dispatch(actions.setAffectedNextLayer()),\n        setAffectedPrevLayer: () => dispatch(actions.setAffectedPrevLayer())\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LayersList);\n\n// export default LayersList;","import * as ActionTypes from '../actionTypes';\n\nexport const addEmptyLayer = (stage) => {\n    return {\n        type: ActionTypes.ADD_LAYER_BUTTON_PRESSED,\n        stage: stage\n    }\n};\n\nexport const addNewLayer = (layer) => {\n    return {\n        type: ActionTypes.ADD_NEW_LAYER,\n        stage: layer\n    }\n};\n\nexport const deleteAffectedLayer = () => {\n    return {\n        type: ActionTypes.DELETE_LAYER_BUTTON_PRESSED\n    };\n};\n\nexport const sortLayers = () => {\n    return {\n        type: ActionTypes.SORT_LAYERS_BUTTON_PRESSED\n    };\n};\n\nexport const toggleDisplayLayer = (layer) => {\n    return {\n        type: ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED,\n        layer: layer\n    }\n};\n\nexport const toggleAffectedLayer = (event, layer) => {\n    event.stopPropagation();\n    return {\n        type: ActionTypes.TOGGLE_AFFECTED_LAYER_PRESSED,\n        layer: layer\n    };\n};\n\nexport const updateLayer = (newLayer) => {\n    return {\n        type: ActionTypes.SUBMIT_LAYER_EDIT_FORM_PRESSED,\n        newLayer: newLayer\n    };\n};\n\nexport const closeEditLayerForm = () => {\n    return {\n        type: ActionTypes.ESCAPE_LAYER_EDIT_FORM_PRESSED\n    };\n};\n\nexport const openAffectedLayerEditForm = () => {\n    return {\n        type: ActionTypes.OPEN_LAYER_EDIT_FORM_PRESSED,\n    }\n};\n\nexport const refreshLayerList = () => {\n    return {\n        type: ActionTypes.LAYER_LIST_PANEL_PRESSED\n    }\n};\n\nexport const setAffectedNextLayer = () => {\n    return {\n        type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\n    }\n};\n\nexport const setAffectedPrevLayer = () => {\n    return {\n        type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\n    }\n};\n\n\n","/**\n * Created by alexanderbol on 06/05/2017.\n */\n\nimport React from 'react';\nimport styles from './AsideComponent.module.css';\n\nconst AsideComponent = () => {\n    return (\n        <aside className={styles[\"App-aside\"]}>\n            <h5>&nbsp;</h5>\n        </aside>\n    )\n};\n\nexport default AsideComponent;\n","import React from 'react';\nimport MainComponent from \"./containers/MainComponent/MainComponent\";\nimport LayersList from \"./containers/LayerList/LayersList\";\nimport AsideComponent from \"./components/Layout/AsideComponent/AsideComponent\";\n\nimport * as ActionTypes from \"./store/actionTypes\";\nimport { connect } from \"react-redux\";\n\nconst appBody = (props) => {\n    return (\n        <div className=\"App-body\" onPaste={props.pasteDataFromBuffer}>\n            <MainComponent />\n            <LayersList />\n            <AsideComponent />\n        </div>\n    );\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        pasteDataFromBuffer: (event) => dispatch({\n            type: ActionTypes.DATA_FROM_BUFFER_PASTED,\n            data: event.clipboardData\n        })\n    }\n};\n\nexport default connect(null, mapDispatchToProps)(appBody);\n","import React from 'react';\nimport logoImg from \"../../../assets/images/debug-viewer-logo3-notext.png\";\nimport classes from \"./Logo.module.css\";\n\nconst logo = () => {\n    return (\n        <div className={classes.Logo}>\n            <img src={logoImg} alt=\"Debug Viewer Logo\" height=\"70px\" />\n        </div>\n    );\n};\n\nexport default logo;","/**\n * Created by alexanderbol on 13/04/2017.\n */\n\nimport React from 'react';\nimport classes from './HeaderComponent.module.css';\nimport Logo from '../Logo/Logo';\n\nconst HeaderComponent = (props) => {\n    return (\n        <header className={classes[\"App-header\"]}>\n            <Logo />\n            <h2>{props.title} v{props.version}</h2>\n        </header>\n    )\n};\n\nexport default HeaderComponent;","import Flatten from 'flatten-js';\n\nlet {Box} = Flatten;\n\nexport class Job {\n    constructor() {\n        this.filename = \"\";\n        this.title = \"\";\n        this.profiles = [];   // array of FlattenJS Polygons\n        this.materials = [];  // array of FlattenJS Polygons\n        this.shapes = [];     // array of other FlattenJS shapes\n    }\n\n    get box() {\n        let b = new Box();\n        for (let shape of this.profiles) {\n            b.merge(shape.box);\n        }\n        for (let shape of this.materials) {\n            b.merge(shape.box);\n        }\n        for (let shape of this.shapes) {\n            b.merge(shape.box);\n        }\n        return b;\n    }\n}","import { Job } from '../models/job';\nimport Flatten from 'flatten-js';\n\nlet {Point, Segment, Arc, Polygon} = Flatten;\nlet { vector } = Flatten;\n\nconst inch2pixels = 10160000;\nconst mils2pixels = 10160;\nfunction InchToPixels(str) {\n    return Math.round(Number(str)*inch2pixels,0);\n}\nfunction MilsToPixels(str) {\n    return Math.round(Number(str)*mils2pixels,0);\n}\n\nfunction parsePolygon(lines, start) {\n    let shapes = [];\n    let i = start;\n    let line = lines[i];\n    let terms = line.split(' ');\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\n    let pe;\n    let pc;\n    let end_of_face = false;\n    while(true) {\n        line = lines[i];\n        terms = line.split(' ');\n        switch (terms[0]) {\n            case 'OS':\n                pe = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\n                shapes.push( new Segment(ps, pe));\n\n                ps = pe.clone();\n                break;\n            case 'OC':\n                pe = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\n                pc = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\n\n                let cwStr = terms[5];\n                let counterClockwise = cwStr === 'Y' ? Flatten.CW : Flatten.CCW; /* sic ! */\n\n                let startAngle = vector(pc,ps).slope;\n                let endAngle = vector(pc, pe).slope;\n                if (Flatten.Utils.EQ(startAngle, endAngle)) {\n                    endAngle += 2*Math.PI;\n                    counterClockwise = true;\n                }\n                let r = vector(pc, ps).length;\n\n                shapes.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\n\n                ps = pe.clone();\n                break;\n            case 'OE':\n                end_of_face = true;\n                break;\n            default:\n                break;\n        }\n        if (end_of_face) {\n            break;\n        }\n\n        i++;\n    }\n    return shapes;\n}\n\nfunction parseLine(str, apertures) {\n    let terms = str.split(' ');\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\n    let pe = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\n    let segment = new Segment(ps, pe);\n    let ap_key = Number(terms[5]);\n    let ap_value = apertures[ap_key];\n    segment.aperture = ap_value;     // augmentation\n    return segment;\n}\n\nfunction parseArc(str, apertures) {\n    let terms = str.split(' ');\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\n    let pe = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\n    let pc = new Point( InchToPixels(terms[5]), InchToPixels(terms[6]) );\n\n    let cwStr = terms[10];\n    let counterClockwise = cwStr === 'Y' ? Flatten.CW : Flatten.CCW; /* sic ! */\n\n    let startAngle = vector(pc,ps).slope;\n    let endAngle = vector(pc, pe).slope;\n    if (Flatten.Utils.EQ(startAngle, endAngle)) {\n        endAngle += 2*Math.PI;\n        counterClockwise = true;\n    }\n    let r = vector(pc, ps).length;\n\n    let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\n\n    let ap_key = Number(terms[7]);\n    let ap_value = apertures[ap_key];\n    arc.aperture = ap_value;     // augmentation\n\n    return arc;\n}\n\nexport function parseODB(filename, str) {\n    let job = new Job();\n    job.filename = filename;\n\n    let arrayOfLines = str.match(/[^\\r\\n]+/g);\n    let polygon;\n\n    let apertures = [];\n\n    for (let i=0; i < arrayOfLines.length; i++) {\n        let line = arrayOfLines[i];\n        let terms = line.split(' ');\n\n        if (terms[0].substr(0,1) === '$') {\n            let ap_key = Number(terms[0].substr(1));\n            let ap_value = MilsToPixels(terms[1].substr(1));\n            apertures[ap_key] = ap_value;\n            continue;\n        }\n\n        switch (terms[0]) {\n            case 'S':                  // surface started\n                polygon = new Polygon();\n                let termArr = line.split(' ');\n                let polarity = termArr[1];      // consider later\n                polygon.polarity = polarity;\n                break;\n            case 'OB':                  // polygon started\n                let start = i;\n                let shapes = parsePolygon(arrayOfLines, start);\n                polygon.addFace(shapes);\n                i = start + shapes.length + 1;\n                break;\n            case 'SE':     // surface ended\n                job.shapes.push(polygon);\n                break;\n            case 'L':                  // line\n                let odbLine = parseLine(line, apertures);\n                job.shapes.push(odbLine);\n                break;\n            case 'A':                  // Arc\n                let odbArc = parseArc(line, apertures);\n                job.shapes.push(odbArc);\n                break;\n            default:\n                break;\n        }\n    }\n    return job;\n}","import /*React,*/ {Component} from 'react';\nimport axios from \"axios\";\n\nimport {Layers} from \"../../models/layers\";\nimport {parseODB} from \"../../models/parserODB\";\nimport {Model} from \"../../models/model\";\nimport * as ActionTypes from \"../../store/actionTypes\";\nimport * as actions from '../../store/actions/appActions';\nimport { connect } from 'react-redux';\n\nclass Demo extends Component {\n    state={\n        done:false\n    };\n    componentDidUpdate() {\n        if (this.props.stage && !this.state.done) {\n            let stage = this.props.stage;\n            let layers = this.props.layers;\n\n            let layer = Layers.newLayer(stage, layers);\n            layer.color = Layers.getNextColor(layers);\n            layer.name = \"features\";\n            layer.title = \"features\";\n            layer.affected = true;\n            layer.displayed = true;\n\n            axios(\"https://gist.githubusercontent.com/alexbol99/825fdf2dd508467cc852eb22aa36183d/raw/d10e853338afd8294eeb3ffdebe3bc380477a978/features\")\n                .then( (resp) => {\n                    let job = parseODB(\"features\", resp.data);\n\n                    for (let shape of job.shapes) {\n                        let model = new Model(shape, undefined, shape.label);\n                        layer.add(model);\n                    }\n\n                    this.props.panAndZoomToShape(stage, layer);\n                    this.props.addNewLayer(layer);\n                    this.props.asyncOperationEnded();\n                });\n            this.setState({done:true});\n            this.props.asyncOperationStarted();\n        }\n    }\n    componentDidMount() {\n\n    }\n    render() {\n        return null;\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        layers: state.layers,\n        stage: state.app.stage\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        panAndZoomToShape: (stage, layer) => dispatch({\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n            stage: stage,\n            shape: layer\n        }),\n        addNewLayer: (layer) => dispatch({\n            type: ActionTypes.ADD_NEW_LAYER,\n            layer: layer\n        }),\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded())\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Demo);\n","import /*React,*/ {Component} from 'react';\nimport Flatten from 'flatten-js';\nimport BooleanOp from 'flatten-boolean-op';\nimport {Layers} from \"../../models/layers\";\nimport * as ActionTypes from '../../store/actionTypes';\nimport { connect } from 'react-redux';\n\nlet {point, arc, Polygon} = Flatten;\nlet {subtract, intersect} = BooleanOp;\n\nclass BooleanTest extends Component {\n    state={\n        done:false\n    };\n    componentDidUpdate() {\n        if (this.props.stage && !this.state.done) {\n            let stage = this.props.stage;\n            let layers = this.props.layers;\n\n            let layer = Layers.newLayer(stage, layers);\n            layer.color = Layers.getNextColor(layers);\n            layer.name = \"features\";\n            layer.title = \"features\";\n            layer.affected = true;\n            layer.displayed = true;\n\n            let myPoly = new Polygon();\n            myPoly.addFace([point(6, 6), point(6,114), point(114, 114), point(114, 6)]);\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);  // 0\n\n            let myCircle = new Polygon();\n            myCircle.addFace([arc(point(0,0),84.5779281026111, 0, 2*Math.PI, Flatten.CW)]);\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 1\n\n            myPoly = intersect(myPoly,myCircle);\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 2\n\n            myCircle = new Polygon();\n            myCircle.addFace([arc(point(0,0),84.49938828627135, 0, 2*Math.PI, Flatten.CW)]);\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 3\n\n            myPoly = subtract(myPoly,myCircle);\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 4\n\n            myCircle = new Polygon();\n            myCircle.addFace([arc(point(0,120),84.8710637077582, 0, 2*Math.PI, Flatten.CW)]);\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 5\n\n            myPoly = intersect(myPoly,myCircle);\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 6\n\n            myCircle = new Polygon();\n            myCircle.addFace([arc(point(0,120),84.79252389141845, 0, 2*Math.PI, Flatten.CW)]);\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 7\n\n            myPoly = subtract(myPoly,myCircle);\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 8\n\n            myCircle = new Polygon();\n            myCircle.addFace([arc(point(120,120),85.20624291591454, 0, 2*Math.PI, Flatten.CW)]);\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 9\n\n            myPoly = intersect(myPoly,myCircle);\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myPoly);   // 10\n\n            myCircle = new Polygon();\n            myCircle.addFace([arc(point(120,120), 85.1277030995748, 0, 2*Math.PI, Flatten.CW)]);\n            layers[layers.length] = Layers.newLayer(stage, layers).add(myCircle);  // 11\n\n            layers[0].color = Layers.getNextColor(layers);\n            layers[0].affected = true;\n            layers[0].displayed = true;\n\n            this.props.panAndZoomToShape(stage, layers[0]);\n\n            this.setState({done:true});\n        }\n    }\n    render() {\n        return null;\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        layers: state.layers,\n        stage: state.app.stage\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        panAndZoomToShape: (stage, layer) => dispatch({\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n            stage: stage,\n            shape: layer\n        }),\n        addNewLayer: (layer) => dispatch({\n            type: ActionTypes.ADD_NEW_LAYER,\n            layer: layer\n        })\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BooleanTest);\n","import /*React,*/ {Component} from 'react';\nimport * as ActionTypes from \"../../store/actionTypes\";\nimport { connect } from 'react-redux';\n\nclass SkeletonRecognition extends Component {\n    componentDidMount() {\n        this.props.applySkeletonRecognition();\n    }\n    render() {\n        return null;\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        layers: state.layers,\n        stage: state.app.stage\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        applySkeletonRecognition: () => dispatch({type: ActionTypes.SKELETON_RECOGNITION_URI})\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SkeletonRecognition);\n","import Flatten from \"flatten-js\";\n// let Flatten = require('flatten-js');\n\nlet {Vector, Segment, Arc, Line, Box, Polygon} = Flatten;\n\nclass CollisionDistance {\n    static apply(polygon1, polygon2) {\n        let collision_distance = Number.POSITIVE_INFINITY;\n        for (let edge of [...polygon2.edges]) {\n            let distance = CollisionDistance.edge2polygon(edge, polygon1);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        return collision_distance;\n    }\n\n    static edge2polygon(edge2, polygon1) {\n        let shapeBox = edge2.shape.box;\n        let box = new Box(\n            Number.NEGATIVE_INFINITY,\n            shapeBox.ymin,\n            Number.POSITIVE_INFINITY,\n            shapeBox.ymax\n        );\n        let collision_distance = Number.POSITIVE_INFINITY;\n        let resp_edges =  polygon1.edges.search(box);\n        for (let edge1 of resp_edges) {\n            let distance;\n            if (edge1.shape instanceof Segment && edge2.shape instanceof Segment) {\n                distance = CollisionDistance.segment2segment(edge1.shape, edge2.shape);\n            }\n            else if (edge1.shape instanceof Arc && edge2.shape instanceof Segment) {\n                distance = CollisionDistance.segment2arc(edge2.shape, edge1.shape);\n            }\n            else if (edge1.shape instanceof Segment && edge2.shape instanceof Arc) {\n                distance = CollisionDistance.segment2arc(edge1.shape, edge2.shape);\n            }\n            else if (edge1.shape instanceof Arc && edge2.shape instanceof Arc) {\n                distance = CollisionDistance.arc2arc(edge1.shape, edge2.shape);\n            }\n\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        return collision_distance;\n    }\n\n    static point2shape(point, shape) {\n        let line = new Line(point, new Vector(0,1));\n        let intersections = line.intersect(shape);          // segment or arc\n        let collision_distance = Number.POSITIVE_INFINITY;\n        for (let ip of intersections) {\n            // eslint-disable-next-line\n            let [distance, shortest_segment] = point.distanceTo(ip);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        return collision_distance;\n    }\n\n    static segment2segment(segment1, segment2) {\n        let collision_distance = Number.POSITIVE_INFINITY;\n        for (let point of segment1.vertices) {\n            let distance = CollisionDistance.point2shape(point, segment2);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        for (let point of segment2.vertices) {\n            let distance = CollisionDistance.point2shape(point, segment1);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        return collision_distance;\n    }\n\n    static segment2arc(segment, arc) {\n        let collision_distance = Number.POSITIVE_INFINITY;\n        let v_s = new Vector(segment.start, segment.end);\n        v_s = v_s.normalize();\n\n        let v_n = [v_s.rotate90CCW().multiply(arc.r), v_s.rotate90CW().multiply(arc.r)];\n        let distance;\n\n        // Distance between tangent point and segment\n        for (let v of v_n) {\n            let tangent_point = arc.center.translate(v);  // tangent point in direction of the normal vector\n            if (tangent_point.on(arc)) {\n                distance = CollisionDistance.point2shape(tangent_point, segment);\n                if (distance < collision_distance) {\n                    collision_distance = distance;\n                }\n            }\n        }\n\n        for (let point of arc.vertices) {\n            let distance = CollisionDistance.point2shape(point, segment);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        for (let point of segment.vertices) {\n            let distance = CollisionDistance.point2shape(point, arc);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        return collision_distance;\n    }\n\n    static arc2arc(arc1, arc2) {\n        let collision_distance = Number.POSITIVE_INFINITY;\n        let distance;\n\n        // test translation of arc2.center to arc1 enlarged by r2\n        let arc_enlarged = arc1.clone();\n        arc_enlarged.r += arc2.r;\n        distance = CollisionDistance.point2shape(arc2.center, arc_enlarged);\n        if (distance < collision_distance) {\n            // additional check that transformed arc actually touching\n            // eslint-disable-next-line\n            let [dist_tmp, shortest_segment_tmp] =\n                arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\n            if (Flatten.Utils.EQ_0(dist_tmp)) {\n                collision_distance = distance;\n            }\n        }\n\n        // test translation of arc2.center to arc1 reduced by r2\n        if (Flatten.Utils.GE(arc1.r, arc2.r)) {\n            let arc_reduced = arc1.clone();\n            arc_reduced.r -= arc2.r;\n            distance = CollisionDistance.point2shape(arc2.center, arc_reduced);\n            if (distance < collision_distance) {\n                // additional check that transformed arc actually touching\n                // eslint-disable-next-line\n                let [dist_tmp, shortest_segment_tmp] =\n                    arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\n                if (Flatten.Utils.EQ_0(dist_tmp)) {\n                    collision_distance = distance;\n                }\n            }\n        }\n\n        // test translation of arc1.center to arc2 reduced by r1\n        if (Flatten.Utils.LT(arc1.r, arc2.r)) {\n            let arc_reduced = arc2.clone();\n            arc_reduced.r -= arc1.r;\n            distance = CollisionDistance.point2shape(arc1.center, arc_reduced);\n            if (distance < collision_distance) {\n                // additional check that transformed arc actually touching\n                // eslint-disable-next-line\n                let [dist_tmp, shortest_segment_tmp] =\n                    arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\n                if (Flatten.Utils.EQ_0(dist_tmp)) {\n                    collision_distance = distance;\n                }\n            }\n        }\n\n        for (let point of arc1.vertices) {\n            let distance = CollisionDistance.point2shape(point, arc2);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        for (let point of arc2.vertices) {\n            let distance = CollisionDistance.point2shape(point, arc1);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        return collision_distance;\n    }\n\n    static translateArc(arc, vec) {\n        let arc_tmp = arc.clone();\n        arc_tmp.pc = arc_tmp.pc.translate(vec);\n        return arc_tmp;\n    }\n\n    static translate(polygon, vec) {\n        let newPolygon = new Polygon();\n        for (let face of polygon.faces) {\n            let shapes = [];\n            for (let edge of face) {\n                if (edge.shape instanceof Segment) {\n                    shapes.push(\n                        new Segment(edge.shape.ps.translate(vec), edge.shape.pe.translate(vec))\n                    )\n                }\n                else if (edge.shape instanceof  Arc) {\n                    let arc_trans = edge.shape.clone();\n                    arc_trans.pc = edge.shape.pc.translate(vec);\n                    shapes.push(arc_trans);\n                }\n            }\n            newPolygon.addFace(shapes);\n        }\n        return newPolygon;\n    }\n\n};\n\nCollisionDistance.Flatten = Flatten;\n\nexport default CollisionDistance;\n","import /*React,*/ {Component} from 'react';\nimport Flatten from 'flatten-js';\nimport CollisionDistance from \"../../models/collisionDistance\";\nimport axios from \"axios\";\nimport {Layers} from \"../../models/layers\";\n// import {Model} from \"../../models/model\";\nimport * as ActionTypes from \"../../store/actionTypes\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../store/actions/appActions\";\n\nlet {vector} = Flatten;\n\nclass CollisionDemo extends Component {\n    state={\n        done:false,\n        data:[]\n    };\n    componentDidUpdate() {\n        if (this.props.stage && !this.state.done) {\n            let stage = this.props.stage;\n            let layers = this.props.layers;\n\n            let layer = Layers.newLayer(stage, layers);\n            layer.color = Layers.getNextColor(layers);\n            layer.name = \"collision_demo\";\n            layer.title = \"collision_demo\";\n            layer.affected = true;\n            layer.displayed = true;\n\n            axios(\"https://gist.githubusercontent.com/alexbol99/81893d40ec5eaa00d0336c35e069dd73/raw/b9328a4c6d7d6a44f375c68b4ec207690f40fd19/Block_53388_2parts_Cont.txt\")\n                .then( (resp) => {\n                    let parser = this.props.parser;\n                    let polygon1 = parser.parseToPolygon(resp.data);\n                    layer.add(polygon1);\n\n                    let vec = vector( 2*(polygon1.box.xmax - polygon1.box.xmin), 0 );\n                    let polygon2 = polygon1.translate(vec);\n                    layer.add(polygon2);\n\n                    let collision = CollisionDistance.apply(polygon2, polygon1);\n                    let polygon3 = polygon2.translate(vector(-collision, 0));\n                    layer.add(polygon3);\n\n                    // layers.push(layer);\n\n                    this.props.panAndZoomToShape(stage, layer);\n                    this.props.addNewLayer(layer);\n                    this.props.applyCollisionDemo();\n                    this.props.asyncOperationEnded();\n                });\n            this.setState({done:true});\n            this.props.asyncOperationStarted();\n        }\n    }\n    render() {\n        return null;\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        layers: state.layers,\n        stage: state.app.stage,\n        parser: state.app.parser\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        panAndZoomToShape: (stage, layer) => dispatch({\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n            stage: stage,\n            shape: layer\n        }),\n        addNewLayer: (layer) => dispatch({\n            type: ActionTypes.ADD_NEW_LAYER,\n            layer: layer\n        }),\n        applyCollisionDemo: () => dispatch({\n            type: ActionTypes.COLLISION_DEMO_URI\n        }),\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded())\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CollisionDemo);\n","import React from 'react';\nimport Modal from '../Modal';\nimport classes from './Spinner.module.css';\n\nconst spinner = () => {\n    return (\n        <Modal>\n            <div className={classes.BackDrop} >\n                <div className={classes.Loader}>Loading ...</div>\n            </div>\n        </Modal>\n    );\n};\n\nexport default spinner;","import React, {Component} from 'react';\nimport { Route } from 'react-router-dom';\n\nimport AppBody from './AppBody';\n\nimport HeaderComponent from './components/Layout/HeaderComponent/HeaderComponent';\nimport { connect } from 'react-redux';\n\nimport './App.css';\n\nimport Demo from './components/Constructions/Demo';\nimport BooleanTest from './components/Constructions/BooleanTest';\nimport SkeletonRecognition from './components/Constructions/SkeletonRecognition';\nimport CollisionDemo from \"./components/Constructions/CollisionDemo\";\nimport Spinner from \"./components/UI/Spinner/Spinner\";\n\nclass App extends Component {\n    render() {\n        return (\n            <div className=\"App\">\n                <HeaderComponent\n                    title={this.props.title}\n                    version={this.props.version}\n                />\n\n                <Route path=\"/\" component={AppBody}/>\n\n                <Route path=\"/demo\" component={Demo}/>\n                <Route path=\"/boolean-test\" component={BooleanTest}/>\n                <Route path=\"/skeleton\" component={SkeletonRecognition}/>\n                <Route path=\"/collision-distance\" component={CollisionDemo}/>\n\n                {this.props.showSpinner ? <Spinner /> : null}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = ({app}) => {\n    return {\n        title: app.title,\n        version: app.version,\n        showSpinner: app.showSpinner\n    }\n};\n\nexport default connect(mapStateToProps, null)(App);\n","/**\n * Created by alexanderbol on 01/05/2017.\n */\n\nimport Flatten from 'flatten-js';\nlet {Point, Segment, Arc, Polygon} = Flatten;\nlet { vector } = Flatten;\n\n/*\nlet debug_str = `+\t\t[0]\t{nrec=27 nalloc=27 h_ind_id=-1 ...} mat_cont_hdr_struc\tmat_cont_struc\n    +\t\t[1]\t{pmin=59146400,5973200 pmax=59606001,6438000} mat_cont_lim_struc\tmat_cont_struc\n+\t\t[2]\t{nedge=23 nalloc=25 ntop=2 ...} mat_cont_poly_struc\tmat_cont_struc\n+\t\t[3]\t{pmin=59146400,5973200 pmax=59606001,6438000} mat_cont_lim_struc\tmat_cont_struc\n+\t\t[4]\t{ps=59192738,6363124 pe=59216000,6372800 pc=59216000,6340000 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[5]\t{ps=59216000,6372800 pe=59267652,6372800} mat_seg_struc\tmat_cont_struc\n+\t\t[6]\t{ps=59267652,6372800 pe=59267652,6307200 pc=59360000,6340000 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[7]\t{ps=59267652,6307200 pe=59229586,6307200} mat_seg_struc\tmat_cont_struc\n+\t\t[8]\t{ps=59229586,6307200 pe=59212000,6289614} mat_seg_struc\tmat_cont_struc\n+\t\t[9]\t{ps=59212000,6289614 pe=59212000,6056386} mat_seg_struc\tmat_cont_struc\n+\t\t[10]\t{ps=59212000,6056386 pe=59229586,6038800} mat_seg_struc\tmat_cont_struc\n+\t\t[11]\t{ps=59229586,6038800 pe=59469614,6038800} mat_seg_struc\tmat_cont_struc\n+\t\t[12]\t{ps=59469614,6038800 pe=59487200,6056386} mat_seg_struc\tmat_cont_struc\n+\t\t[13]\t{ps=59487200,6056386 pe=59487200,6100500} mat_seg_struc\tmat_cont_struc\n+\t\t[14]\t{ps=59487200,6100500 pe=59434000,6180000 pc=59520000,6180000 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[15]\t{ps=59434000,6180000 pe=59552800,6100500 pc=59520000,6180000 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[16]\t{ps=59552800,6100500 pe=59552800,6042800} mat_seg_struc\tmat_cont_struc\n+\t\t[17]\t{ps=59552800,6042800 pe=59543124,6019538 pc=59520000,6042800 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[18]\t{ps=59543124,6019538 pe=59506462,5982876} mat_seg_struc\tmat_cont_struc\n+\t\t[19]\t{ps=59506462,5982876 pe=59483200,5973200 pc=59483200,6006000 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[20]\t{ps=59483200,5973200 pe=59216000,5973200} mat_seg_struc\tmat_cont_struc\n+\t\t[21]\t{ps=59216000,5973200 pe=59192738,5982876 pc=59216000,6006000 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[22]\t{ps=59192738,5982876 pe=59156076,6019538} mat_seg_struc\tmat_cont_struc\n+\t\t[23]\t{ps=59156076,6019538 pe=59146400,6042800 pc=59179200,6042800 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[24]\t{ps=59146400,6042800 pe=59146400,6303200} mat_seg_struc\tmat_cont_struc\n+\t\t[25]\t{ps=59146400,6303200 pe=59156076,6326462 pc=59179200,6303200 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[26]\t{ps=59156076,6326462 pe=59192738,6363124} mat_seg_struc\tmat_cont_struc\n`;\n*/\n\nexport class Parser {\n    parseToWatchArray(str) {\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\n        let watchArray = [];\n        for (let line of arrayOfLines) {\n            watchArray.push(line.substring(line.indexOf('{')));\n        }\n        return watchArray;\n    }\n\n    parseToSegment(line) {\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\n\n        let psArr = termArr[0].split('=')[1].split(',');\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\n\n        let peArr = termArr[1].split('=')[1].split(',');\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\n\n        return new Segment(ps, pe);\n    }\n\n    parseToArc(line) {\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\n\n        let psArr = termArr[0].split('=')[1].split(',');\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\n\n        let peArr = termArr[1].split('=')[1].split(',');\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\n\n        let pcArr = termArr[2].split('=')[1].split(',');\n        let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\n\n        let cwStr = termArr[3].split('=')[1];\n        let counterClockwise = cwStr === '0' ? true : false;\n\n        let startAngle = vector(pc,ps).slope;\n        let endAngle = vector(pc, pe).slope;\n\n        if (Flatten.Utils.EQ(startAngle, endAngle)) {\n            endAngle += 2*Math.PI;\n        }\n        let r = vector(pc, ps).length;\n\n        return new Arc(pc, r, startAngle, endAngle, counterClockwise);\n    }\n\n    parseToPolygon(str) {\n        let polygon = new Polygon();\n        // let mulitystr = debug_str;\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\n\n        for (let i=0; i < arrayOfLines.length; i++) {\n            let line = arrayOfLines[i];\n            if (line.search('mat_cont_poly_struc') >= 0) {\n                let parenth = line.match(/\\{([^)]+)\\}/)[1];       // string inside {..}\n                let termArr = parenth.split(' ');                 // array of terms \"attr=value\"\n                let nedgesTerm = termArr[0];                      // \"nedge=nn\"\n                let nedgesStr = nedgesTerm.split('=')[1];\n                let nedges = parseInt(nedgesStr,10);\n\n                // Create new face from next #nedges of segments and arcs\n                let edges = [];\n                for (let j=i+2; j < i+2+nedges; j++) {\n                    line = arrayOfLines[j];\n                    // let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n                    // let termArr = parenth.split(' ');             // array of terms \"attr=value\"\n\n                    if (line.search('mat_seg_struc') >= 0) {\n                        let segment = this.parseToSegment(line);\n                        edges.push(segment);\n\n                        // let psArr = termArr[0].split('=')[1].split(',');\n                        // let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\n                        //\n                        // let peArr = termArr[1].split('=')[1].split(',');\n                        // let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\n                        //\n                        // edges.push(new Segment(ps, pe));\n                    }\n                    else if (line.search('mat_curve_struc') >= 0) {\n                        let arc = this.parseToArc(line);\n                        edges.push(arc);\n\n                        // let psArr = termArr[0].split('=')[1].split(',');\n                        // let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\n                        //\n                        // let peArr = termArr[1].split('=')[1].split(',');\n                        // let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\n                        //\n                        // let pcArr = termArr[2].split('=')[1].split(',');\n                        // let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\n                        //\n                        // let cwStr = termArr[3].split('=')[1];\n                        // let counterClockwise = cwStr === '0' ? true : false;\n                        //\n                        // let startAngle = vector(pc,ps).slope;\n                        // let endAngle = vector(pc, pe).slope;\n                        //\n                        // if (Flatten.Utils.EQ(startAngle, endAngle)) {\n                        //     endAngle += 2*Math.PI;\n                        // }\n                        // let r = vector(pc, ps).length;\n                        //\n                        // edges.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\n                    }\n                }\n                polygon.addFace(edges);\n            }\n        }\n        return polygon;\n    }\n\n    parseToPoints(str) {\n        let points = [];\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\n        for (let line of arrayOfLines) {\n            if (line.search('point_struc') >= 0) {\n                let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n                let pointArr = parenth.split('=')[1].split(',');\n                let point = new Point(parseInt(pointArr[0],10), parseInt(pointArr[1],10));\n                point.label = line.split(/\\s+/)[1];\n                points.push(point);\n            }\n        }\n        return points;\n    }\n\n    parseToSegmentsArcs(str) {\n        let shapes = [];\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\n        for (let line of arrayOfLines) {\n            if (line.search('mat_seg_struc') >= 0) {\n                let segment = this.parseToSegment(line);\n                shapes.push(segment);\n            }\n            else if (line.search('mat_curve_struc') >= 0) {\n                let arc = this.parseToArc(line);\n                shapes.push(arc);\n            }\n        }\n        return shapes;\n    }\n\n    parse(str) {\n        /* try polygon */\n        let polygon = this.parseToPolygon(str);\n        if (polygon.edges.size > 0 && polygon.faces.size > 0) {\n            return [polygon];\n        }\n\n        /* try array of points */\n        let points = this.parseToPoints(str);\n        if (points.length > 0) {\n            return points;\n        }\n\n        /* try array of segments and arcs */\n        let shapes = this.parseToSegmentsArcs(str);\n        if (shapes.length > 0) {\n            return shapes;\n        }\n    }\n}\n\n","import * as ActionTypes from \"../actionTypes\";\nimport {Parser} from \"../../models/parser\";\n\nconst unitsList = [\n    {\n        name: \"pixels\",\n        decimals: 0,\n        divisor: 1\n    },\n    {\n        name: \"inch\",\n        decimals: 7,\n        divisor: 10160000\n    },\n    {\n        name: \"mm\",\n        decimals: 6,\n        divisor: 400000\n    }];\n\nconst defaultAppState = {\n    title: \"Debug Viewer\",\n    version: process.env.REACT_APP_VERSION,\n    build: \"\",\n    units: \"pixels\",\n    decimals: 0,\n    divisor: 1,\n    // bg: \"#F1F1F1\",\n    parser: new Parser(),\n    widthOn: true,\n    displayVertices: false,\n    displayLabels: true,\n    measurePointsActive: false,\n    zoomFactor: undefined,\n    originX: undefined,\n    originY: undefined,\n    showAboutPopup: false,\n    importDataToNewLayer: true,       // if false, import data to affected layer\n    showSkeletonRecognitionButton: false,\n    applySkeletonRecognition: false,\n    stage: null,\n    showSpinner: false\n};\n\nconst app = (state = defaultAppState, action) => {\n    switch (action.type) {\n        case ActionTypes.NEW_STAGE_CREATED:\n            return Object.assign({}, state, {\n                stage: action.stage,\n                zoomFactor: action.stage.zoomFactor * action.stage.resolution,\n                originX: action.stage.origin.x,\n                originY: action.stage.origin.y,\n            });\n\n        case ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE:\n        case ActionTypes.PAN_AND_ZOOM_TO_SHAPE:\n            return Object.assign({}, state, {\n                zoomFactor: action.stage.zoomFactor * action.stage.resolution,\n                originX: action.stage.origin.x,\n                originY: action.stage.origin.y,\n            });\n        case ActionTypes.MOUSE_MOVED_ON_STAGE:\n            return Object.assign({}, state, {\n                originX: action.stage.origin.x,\n                originY: action.stage.origin.y\n            });\n        case ActionTypes.TOGGLE_UNITS_CLICKED:\n            let curUnitsId = unitsList.findIndex(units => state.units === units.name);\n            let newUnits = unitsList[(curUnitsId + 1) % 3];\n            return Object.assign({}, state, {\n                units: newUnits.name,\n                decimals: newUnits.decimals,\n                divisor: newUnits.divisor\n            });\n        case ActionTypes.TOGGLE_WIDTH_MODE_CLICKED:\n            return Object.assign({}, state, {\n                widthOn: !state.widthOn,\n                displayVertices: state.widthOn ? state.displayVertices : false\n            });\n        case ActionTypes.TOGGLE_DISPLAY_VERTICES_CLICKED:\n            if (state.displayVertices) {\n                return Object.assign({}, state, {\n                    displayVertices: false\n                });\n            }\n            else {\n                return Object.assign({}, state, {\n                    widthOn: false,\n                    displayVertices: true\n                });\n            }\n\n        case ActionTypes.TOGGLE_DISPLAY_LABELS_CLICKED:\n            return Object.assign({}, state, {\n                displayLabels: !state.displayLabels\n            });\n\n        case ActionTypes.TOGGLE_ABOUT_POPUP_CLICKED:\n            return Object.assign({}, state, {\n                showAboutPopup: !state.showAboutPopup\n            });\n\n        // case ActionTypes.CLOSE_ABOUT_POPUP_BUTTON_PRESSED:\n        //     return Object.assign({}, state, {\n        //         showAboutPopup: false\n        //     });\n\n        case ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED:\n            return Object.assign({}, state, {\n                measurePointsActive: false\n            });\n\n        case ActionTypes.MEASURE_POINTS_BUTTON_PRESSED:\n            return Object.assign({}, state, {\n                measurePointsActive: true\n            });\n        case ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED:\n            return Object.assign({}, state, {\n                measurePointsActive: false\n            });\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\n            if (state.hoveredShape) {\n                return state\n            }\n            else {\n                return Object.assign({}, state, {\n                    measureShapesFirstClick: true,\n                    firstMeasuredShape: null,\n                    firstMeasuredLayer: null,\n                    secondMeasuredShape: null,\n                    secondMeasuredLayer: null,\n                    distance: undefined,\n                    shortestSegment: null\n                });\n            }\n        case ActionTypes.SKELETON_RECOGNITION_URI:\n            return Object.assign({}, state, {\n                showSkeletonRecognitionButton: true\n            });\n        case ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED:\n            return Object.assign({}, state, {\n                applySkeletonRecognition: true\n            });\n        case ActionTypes.ASYNC_OPERATION_STARTED:\n            return Object.assign({}, state, {\n                showSpinner: true\n            });\n        case ActionTypes.ASYNC_OPERATION_ENDED:\n            return Object.assign({}, state, {\n                showSpinner: false\n            });\n        case ActionTypes.LAYER_LIST_PANEL_PRESSED:\n            return state;  // only to cause refresh of layers list component\n        case ActionTypes.AABB_TREE_NEXT_LEVEL:\n            return state;\n        default:\n            return state;\n    }\n};\n\nexport default app;","import * as ActionTypes from \"../actionTypes\";\nimport {Layers} from \"../../models/layers\";\n\nconst layers = (state = [], action) => {\n    let affectedLayer = state.find(layer => layer.affected);\n    let affectedLayerId = state.findIndex(layer => layer.affected);\n    let newLayer;\n\n    switch (action.type) {\n        case ActionTypes.ADD_LAYER_BUTTON_PRESSED:\n            newLayer = Layers.newLayer(action.stage, state);\n            return [...state, newLayer];\n\n        case ActionTypes.ADD_NEW_LAYER:\n            return [...state, action.layer];\n\n        case ActionTypes.DELETE_LAYER_BUTTON_PRESSED:\n            if (affectedLayer) {\n                return Layers.delete(state, affectedLayer);\n            }\n            else {\n                return state;\n            }\n\n        case ActionTypes.SORT_LAYERS_BUTTON_PRESSED:\n            return Layers.sort(state);\n\n        case ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED:\n            let color = \"\";\n            if (!action.layer.displayed) {\n                color = Layers.getNextColor(state);\n                if (color === \"\") return;  // no free colors\n            }\n            return state.map((layer) => {\n                if (layer !== action.layer) {\n                    // if action.layer will be undisplayed,\n                    // it cannot become affected, then\n                    // keep affected on this layer\n                    if (action.layer.displayed) {\n                        return layer;\n                    }\n                    else {\n                        return layer.setAffected(false);\n                    }\n                }\n                else {\n                    let newLayer = layer.toggleDisplayed(color);\n                    newLayer.affected = newLayer.displayed;\n                    return newLayer;\n                }\n                // return layer.toggleDisplayed(color);\n            });\n\n        case ActionTypes.TOGGLE_AFFECTED_LAYER_PRESSED:\n            return state.map((layer) => {\n                if (layer !== action.layer) {\n                    return layer.setAffected(false);\n                }\n                else {\n                    return layer.setAffected(!layer.affected);\n                }\n            });\n\n        // case ActionTypes.NEW_SHAPE_PASTED:\n        //     return state.map((layer) => {\n        //         if (layer.affected) {\n        //             return layer.addShapesArray(action.shapesArray);\n        //         }\n        //         else {\n        //             return layer;\n        //         }\n        //     });\n\n        case ActionTypes.OPEN_LAYER_EDIT_FORM_PRESSED:\n            return state.map((layer) => {\n                if (layer !== affectedLayer) {\n                    return layer;\n                }\n                else {\n                    return layer.setEdited(true);\n                }\n            });\n\n        case ActionTypes.SUBMIT_LAYER_EDIT_FORM_PRESSED:\n            return state.map((layer) => {\n                if (layer.edited) {\n                    return layer.setNameAndTitle(action.newLayer.name, action.newLayer.title);\n                }\n                else {\n                    return layer;\n                }\n            });\n\n        case ActionTypes.ESCAPE_LAYER_EDIT_FORM_PRESSED:\n            return state.map((layer) => {\n                if (layer.edited) {             // !== action.layer) {\n                    return layer.setEdited(false);\n                }\n                else {\n                    return layer;\n                }\n            });\n\n        case ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED:\n            if (affectedLayerId === state.length - 1) {\n                return state;\n            }\n            else {\n\n                let nextLayer = state[affectedLayerId + 1];\n\n                return state.map(layer => {\n                    if (layer === affectedLayer) {\n                        let newCurLayer = layer.toggleDisplayed(\"\");\n                        newCurLayer.affected = false;\n                        return newCurLayer;\n                    }\n                    else if (layer === nextLayer) {\n                        let color = affectedLayer.color;\n                        let newNextLayer = layer.toggleDisplayed(color);\n                        newNextLayer.affected = true;\n                        return newNextLayer;\n                    }\n                    else {\n                        return layer;\n                    }\n                });\n            }\n\n        case ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED:\n            if (affectedLayerId === 0) {\n                return state;\n            }\n            else {\n                let nextLayer = state[affectedLayerId - 1];\n\n                return state.map(layer => {\n                    if (layer === affectedLayer) {\n                        let newCurLayer = layer.toggleDisplayed(\"\");\n                        newCurLayer.affected = false;\n                        return newCurLayer;\n                    }\n                    else if (layer === nextLayer) {\n                        let newNextLayer = layer.toggleDisplayed(affectedLayer.color);\n                        newNextLayer.displayed = true;\n                        newNextLayer.affected = true;\n                        return newNextLayer;\n                    }\n                    else {\n                        return layer;\n                    }\n                });\n            }\n\n        default:\n            return state;\n    }\n};\n\nexport default layers;","import * as ActionTypes from \"../actionTypes\";\n\nconst defaultMouseState = {\n    x: 0,\n    y: 0,\n    startX: undefined,\n    startY: undefined\n};\n\nconst mouse = (state = defaultMouseState, action) => {\n    switch (action.type) {\n        case ActionTypes.MOUSE_MOVED_ON_STAGE:\n            return Object.assign({}, state, {\n                x: action.x,\n                y: action.y\n            });\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\n            return Object.assign({}, state, {\n                startX: action.x,\n                startY: action.y\n            });\n        case ActionTypes.MOUSE_UP_ON_STAGE:\n            return Object.assign({}, state, {\n                startX: undefined,\n                startY: undefined\n            });\n        default:\n            return state;\n    }\n};\n\nexport default mouse;","import * as ActionTypes from \"../actionTypes\";\nimport Flatten from \"flatten-js\";\n\nconst defaultMeasureShapesTool = {\n    measureShapesActive: false,\n    measureShapesFirstClick: true,\n    hoveredShape: null,\n    firstMeasuredShape: null,\n    secondMeasuredShape: null,\n    firstMeasuredLayer: null,\n    secondMeasuredLayer: null,\n    distance: undefined,\n    shortestSegment: null\n};\n\nconst measureShapesTool = (state = defaultMeasureShapesTool, action) => {\n    switch (action.type) {\n        case ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED:\n            return Object.assign({}, defaultMeasureShapesTool, {\n                measureShapesActive: true\n            });\n        case ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED:\n            return Object.assign({}, defaultMeasureShapesTool);\n\n        case ActionTypes.MEASURE_POINTS_BUTTON_PRESSED:\n            return Object.assign({}, defaultMeasureShapesTool);\n\n        case ActionTypes.MOUSE_ROLL_OVER_SHAPE:\n            return Object.assign({}, state, {\n                hoveredShape: state.measureShapesActive ? action.shape : null\n            });\n        case ActionTypes.MOUSE_ROLL_OUT_SHAPE:\n            return Object.assign({}, state, {\n                hoveredShape: null\n            });\n        case ActionTypes.MOUSE_CLICKED_ON_SHAPE:\n            if (!state.measureShapesActive) {\n                return state;\n            }\n            // measureShapesActive\n\n            if (state.measureShapesFirstClick) {\n                return Object.assign({}, state, {\n                    firstMeasuredShape: action.shape,\n                    firstMeasuredLayer: action.layer,\n                    secondMeasuredShape: null,\n                    secondMeasuredLayer: null,\n                    measureShapesFirstClick: false,\n                    distance: undefined,\n                    shortestSegment: null\n                })\n            }\n            else {    // second click\n                if (action.shape === state.firstMeasuredShape) {\n                    return state;  // second click on the same shape\n                }\n\n                let shape1 = state.firstMeasuredShape.geom;\n                let shape2 = action.shape.geom;\n                let distance, shortestSegment;\n                // if (shape1 instanceof Flatten.Polygon && shape2 instanceof Flatten.Polygon) {\n                //     [distance, shortestSegment] = Flatten.Distance.polygon2polygon(shape1, shape2);\n                // }\n                // else {\n                [distance, shortestSegment] = Flatten.Distance.distance(shape1, shape2);\n                // }\n\n\n                return Object.assign({}, state, {\n                    secondMeasuredShape: action.shape,\n                    secondMeasuredLayer: action.layer,\n                    measureShapesFirstClick: true,\n                    distance: distance,\n                    shortestSegment: shortestSegment\n                });\n            }\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\n            if (state.hoveredShape) {\n                return state\n            }\n            else {\n                return Object.assign({}, state, {\n                    measureShapesFirstClick: true,\n                    firstMeasuredShape: null,\n                    firstMeasuredLayer: null,\n                    secondMeasuredShape: null,\n                    secondMeasuredLayer: null,\n                    distance: undefined,\n                    shortestSegment: null\n                });\n            }\n\n        case ActionTypes.DELETE_LAYER_BUTTON_PRESSED:\n            if (action.layer === state.firstMeasuredLayer ||\n                action.layer === state.secondMeasuredLayer) {\n                return Object.assign({}, defaultMeasureShapesTool);\n            }\n            else {\n                return state;\n            }\n\n        case ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED:\n            if (action.layer.displayed &&\n                (action.layer === state.firstMeasuredLayer ||\n                    action.layer === state.secondMeasuredLayer)) {\n                return Object.assign({}, defaultMeasureShapesTool);\n            }\n            else {\n                return state;\n            }\n\n        default:\n            return state;\n    }\n}\n\nexport default measureShapesTool;","/**\n * Created by alexanderbol on 13/04/2017.\n */\n\nimport {combineReducers} from 'redux';\n\nimport app from \"./reducers/app\";\nimport layers from \"./reducers/layers\";\nimport mouse from \"./reducers/mouse\";\nimport measureShapesTool from \"./reducers/measureShapesTool\";\n\nconst reducer = combineReducers({\n    app,\n    layers,\n    measureShapesTool,\n    mouse\n});\n\nexport default reducer;\n","import * as ActionTypes from '../store/actionTypes';\n\nconst log = ({ getState, dispatch }) => next => action => {\n\n    if(action.type !== ActionTypes.MOUSE_MOVED_ON_STAGE) {\n        console.log('ACTION: ' + action.type, action);\n    }\n\n    next(action);\n};\n\nexport default log;","import { Job } from '../models/job';\nimport Flatten from 'flatten-js';\n\nlet {Point, Segment, Arc, Polygon} = Flatten;\nlet { vector } = Flatten;\n\nfunction parseEdges(edgesXML) {\n    let edges = [];\n\n    for (let edge of Array.from(edgesXML)) {\n        let type = edge.getAttribute('type');\n\n        if (type === \"segment\") {\n            let ps = new Point(parseInt(edge.getAttribute('xs'),10), parseInt(edge.getAttribute('ys'),10));\n            let pe = new Point(parseInt(edge.getAttribute('xe'),10), parseInt(edge.getAttribute('ye'),10));\n\n            edges.push(new Segment(ps, pe));\n        }\n\n        if (type === \"curve\") {\n            let ps = new Point(parseInt(edge.getAttribute('xs'),10), parseInt(edge.getAttribute('ys'),10));\n            let pe = new Point(parseInt(edge.getAttribute('xe'),10), parseInt(edge.getAttribute('ye'),10));\n            let pc = new Point(parseInt(edge.getAttribute('xc'),10), parseInt(edge.getAttribute('yc'),10));\n\n            let counterClockwise = edge.getAttribute('cw') === 'no' ? true : false;\n\n            let startAngle = vector(pc,ps).slope;\n            let endAngle = vector(pc, pe).slope;\n\n            if (Flatten.Utils.EQ(startAngle, endAngle)) {\n                endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\n            }\n\n            let r = vector(pc, ps).length;\n\n            edges.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\n        }\n    }\n\n    return edges;\n}\n\nfunction parsePolygon(polygonsXML) {\n    let polygon = new Polygon();\n\n    // let nedges = parseInt(profile.getAttribute(\"n_edges\"), 10);\n\n    // Augment Flatten object with style\n    let color = polygonsXML.getAttribute(\"color\");\n    polygon.style = {\n        stroke: color || undefined,\n        fill: color || undefined,\n        alpha: 1.0\n    };\n\n    // Augment Flatten object with label\n    let label = polygonsXML.getAttribute(\"label\");\n    polygon.label = label;\n\n    // Add islands\n    let islands = polygonsXML.getElementsByTagName('island');\n    for (let island of Array.from(islands)) {\n        let edgesXML = island.getElementsByTagName('edge');\n        polygon.addFace(parseEdges(edgesXML));\n    }\n\n    // Add holes\n    let holes = polygonsXML.getElementsByTagName('hole');\n    for (let hole of Array.from(holes)) {\n        let edgesXML = hole.getElementsByTagName('edge');\n        polygon.addFace(parseEdges(edgesXML));\n    }\n\n    return polygon;\n}\n\nfunction parseSegment(segmentXML) {\n    let ps = new Point(parseInt(segmentXML.getAttribute('xs'),10), parseInt(segmentXML.getAttribute('ys'),10));\n    let pe = new Point(parseInt(segmentXML.getAttribute('xe'),10), parseInt(segmentXML.getAttribute('ye'),10));\n\n    let segment = new Segment(ps, pe);\n\n    // Augment Flatten object with label property\n    let label = segmentXML.getAttribute(\"label\");\n    segment.label = label;\n\n    return segment;\n}\n\nfunction parseCurve(curveXML) {\n    let ps = new Point(parseInt(curveXML.getAttribute('xs'),10), parseInt(curveXML.getAttribute('ys'),10));\n    let pe = new Point(parseInt(curveXML.getAttribute('xe'),10), parseInt(curveXML.getAttribute('ye'),10));\n    let pc = new Point(parseInt(curveXML.getAttribute('xc'),10), parseInt(curveXML.getAttribute('yc'),10));\n\n    let counterClockwise = curveXML.getAttribute('cw') === 'yes' ? true : false;\n\n    let startAngle = vector(pc,ps).slope;\n    let endAngle = vector(pc, pe).slope;\n\n    if (Flatten.Utils.EQ(startAngle, endAngle)) {\n        endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\n    }\n\n    let r = vector(pc, ps).length;\n\n    let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\n\n    // Augment Flatten object with label property\n    let label = curveXML.getAttribute(\"label\");\n    arc.label = label;\n\n    return arc;\n}\n\nfunction parsePoint(pointXML) {\n    let point = new Point(parseInt(pointXML.getAttribute('x'),10), parseInt(pointXML.getAttribute('y'),10));\n\n    // Augment Flatten object with label property\n    let label = pointXML.getAttribute(\"label\");\n    point.label = label;\n\n    return point;\n}\nexport function parseXML(filename, str) {\n    let job = new Job();\n\n    job.filename = filename;\n\n    let parser = new DOMParser();\n    let xmlDoc = parser.parseFromString(str, \"text/xml\");\n\n    // Parse document title\n    let titles = xmlDoc.getElementsByTagName('title');\n    if (titles && titles.length > 0) {\n        job.title = titles[0].firstChild.nodeValue;          // take the first title if more than one\n    }\n\n    // Parse profiles and add polygons to the job\n    let profilesXML = xmlDoc.getElementsByTagName('profile');\n    for (let profileXML of Array.from(profilesXML)) {\n        let polygon = parsePolygon(profileXML);\n        job.profiles.push(polygon);\n    }\n\n    // Parse materials and add polygons to the job\n    let materialXML = xmlDoc.getElementsByTagName('material');\n    for (let shapeXML of Array.from(materialXML)) {\n        let polygon = parsePolygon(shapeXML);\n        job.materials.push(polygon);\n    }\n\n    // Parse segments\n    let segmentsXML = xmlDoc.getElementsByTagName('segment');\n    for (let segmentXML of Array.from(segmentsXML)) {\n        let segment = parseSegment(segmentXML);\n        job.shapes.push(segment);\n    }\n\n    // Parse segments\n    let curvesXML = xmlDoc.getElementsByTagName('curve');\n    for (let curveXML of Array.from(curvesXML)) {\n        let curve = parseCurve(curveXML);\n        job.shapes.push(curve);\n    }\n\n    // Parse points\n    let pointsXML = xmlDoc.getElementsByTagName('point');\n    for (let pointXML of Array.from(pointsXML)) {\n        let point = parsePoint(pointXML);\n        job.shapes.push(point);\n    }\n    return job;\n}\n","import Flatten from 'flatten-js';\n\nconst pgmResolution = 25.500025;\nconst microns2pixels = 400;\n// const inch2pixels = 10160;\n// const offsetX = 12.322830;\n// const offsetY = 8.326776;\nconst sizeX = 3.0303;\n\nfunction toPixels(str) {\n    let num = Number(str);\n    return Math.round(num*pgmResolution*microns2pixels,0);\n}\n\nexport function parseImage(file) {\n    let image = {};          // TODO: to be Flatten.Image\n\n    let terms = file.name.split('_');\n    let yStr = terms[0].substr(1);\n    let xStr = terms[1] ? terms[1].substr(1) : undefined;\n\n    let x = isNaN(xStr) ? 0 : toPixels(xStr) + 90000;\n    let y = isNaN(yStr) ? 0 : toPixels(yStr) - 40000;\n\n    image.center = new Flatten.Point(x,y);\n    image.width = sizeX*microns2pixels*1000;    // 2 mm\n    image.box = new Flatten.Box(\n        image.center.x - image.width/2,\n        image.center.y - image.width/2,\n        image.center.x + image.width/2,\n        image.center.y + image.width/2,\n    );\n\n    return image;\n}","import { Job } from '../models/job';\nimport Flatten from 'flatten-js';\n\nlet {point} = Flatten;\n\nconst micron2pixels = 400;\nfunction micronToPixels(str) {\n    return Math.round(Number(str)*micron2pixels,0);\n}\n\nexport function parseCSV(filename, str) {\n    let job = new Job();\n    job.filename = filename;\n\n    let arrayOfLines = str.match(/[^\\r\\n]+/g);\n\n    for (let i = 0; i < arrayOfLines.length; i++) {\n        let line = arrayOfLines[i];\n        let terms = line.split(',');\n\n        let px = micronToPixels(terms[0]);\n        let py = micronToPixels(terms[1]);\n        let nx = Number(terms[2]);\n        let ny = Number(terms[3]);\n        let shape = point(px,py);\n        shape.nx = nx\n        shape.ny = ny;\n        job.shapes.push(shape)\n    }\n\n    return job\n}","import * as ActionTypes from '../store/actionTypes';\nimport { Layers } from '../models/layers';\n// import { Shape } from '../models/shape';\nimport { Model } from \"../models/model\";\nimport { parseXML } from '../models/parserXML';\nimport { parseODB } from \"../models/parserODB\";\nimport { parseImage } from \"../models/parsePGM\";\nimport { parseCSV } from \"../models/parseCSV\";\nimport { parseTXT } from \"../models/parseTXT\";\n\nconst readAsText = (reader, file, stage, layers, dispatch, files) => {\n\n    // Closure to capture file information and parameters\n    reader.onload = (function(theFile, stage, layers, dispatch, files) {\n        return (event) => {\n            let string = event.target.result;\n\n            let namesplitted = theFile.name.split('.');\n            let extension = namesplitted[namesplitted.length-1];\n            let job;\n            if (extension === 'xml') {\n                job = parseXML(theFile.name, string);\n            }\n            else if (extension === 'csv') {\n                job = parseCSV(theFile.name, string);\n            }\n            else if (extension === 'txt') {\n                job = parseTXT(theFile.name, string);\n            }\n            else {\n                job = parseODB(theFile.name, string);\n            }\n            let layer = Layers.newLayer(stage, layers);\n            if (theFile.name !== \"\") {\n                layer.name = theFile.name;\n            }\n            layer.title = job.title;\n\n            for (let polygon of job.profiles) {\n                if (polygon.edges.size > 0 && polygon.faces.size > 0) {\n                    // let watch = undefined; //  parser.parseToWatchArray(string);\n                    // let shape = new Shape(polygon, stage, polygon.style, watch);\n                    let shape = new Model(polygon, undefined, polygon.label);\n\n                    layer.add(shape);\n                }\n            }\n\n            for (let polygon of job.materials) {\n                if (polygon.edges.size > 0 && polygon.faces.size > 0) {\n                    // let watch = undefined; //  parser.parseToWatchArray(string);\n                    // let shape = new Shape(polygon, stage, polygon.style, watch);\n                    let shape = new Model(polygon, undefined, polygon.label);\n\n                    layer.add(shape);\n                }\n            }\n\n            for (let shape of job.shapes) {\n                let model = new Model(shape, undefined, shape.label);\n                layer.add(model);\n            }\n\n            // layers.push(layer);\n\n            if (theFile === files[0]) {\n                Layers.setAffected(layers, layer);\n                layer.color = Layers.getNextColor(layers);\n                layer.displayed = true;\n                dispatch({\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n                    stage: stage,\n                    shape: layer\n                });\n            }\n            dispatch({\n                type: ActionTypes.ADD_NEW_LAYER,\n                layer: layer\n            });\n\n            dispatch({\n                type: ActionTypes.ASYNC_OPERATION_ENDED\n            });\n        }\n    })(file, stage, layers, dispatch, files);\n\n    reader.readAsText(file);\n\n    dispatch({\n        type: ActionTypes.ASYNC_OPERATION_STARTED\n    })\n\n};\n\nconst readAsImage = (reader, file, stage, layers, dispatch, files) => {\n    reader.addEventListener(\"load\", function () {\n        // let image = {};          // TODO: to be Flatten.Image\n        // image.uri = this.result;\n        // image.center = new Flatten.Point(0,0);\n        // image.width = 2*400000;    // 2 micron\n        // image.box = new Flatten.Box(\n        //     image.center.x - image.width/2,\n        //     image.center.y - image.width/2,\n        //     image.center.x + image.width/2,\n        //     image.center.y + image.width/2,\n        // );\n\n        let image = parseImage(file);\n        image.uri = this.result;\n\n        let model = new Model(image);\n\n        let layer = Layers.newLayer(stage, layers);\n        if (file.name !== \"\") {\n            layer.name = file.name;\n        }\n\n        layer.add(model);\n\n        // layers.push(layer);\n\n        if (file === files[0]) {\n            Layers.setAffected(layers, layer);\n            layer.color = Layers.getNextColor(layers);\n            layer.displayed = true;\n            dispatch({\n                type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n                stage: stage,\n                shape: layer\n            });\n        }\n\n        dispatch({\n            type: ActionTypes.ADD_NEW_LAYER,\n            layer: layer\n        });\n\n        dispatch({\n            type: ActionTypes.ASYNC_OPERATION_ENDED\n        });\n\n    }, false);\n\n    reader.readAsDataURL(file);\n};\n\nconst readFile = (file, stage, layers, dispatch, files) => {\n    if (file.type !== \"\" &&\n        !(file.type.match('text.*') || file.type.match('application.*') ||\n        file.type.match('image.*')) ) return;   // validate type is text\n\n    let reader = new FileReader();\n\n    if (file.type.match('text.*') || file.type.match('application.*') || file.name.match('features*')) {\n        readAsText(reader, file, stage, layers, dispatch, files);\n    }\n\n    else if (file.type.match('image.*')) {\n        readAsImage(reader, file, stage, layers, dispatch, files);\n    }\n\n};\n\nconst readFiles = ({ dispatch, getState }) => next => action => {\n\n    if (action.type !== ActionTypes.FILENAME_LIST_SELECTED) {\n        return next(action);\n    }\n\n    let stage = action.stage;\n    let layers = action.layers;\n\n    // Load and parse files\n    // in MS Edge FilesList is not array. It is indexable but not iterable\n    // for (let i=0; i < action.files.length; i++) {\n    //     readFile(action.files[i], stage, layers, dispatch, action.files);\n    // }\n    for (let file of Array.from(action.files)) {\n        readFile(file, stage, layers, dispatch, action.files);\n    }\n};\n\nexport default readFiles;\n\n","import { Job } from '../models/job';\nimport {Parser} from '../models/parser';\n\nexport function parseTXT(filename, str) {\n    let job = new Job();\n    job.filename = filename;\n\n    let parser = new Parser();\n\n    let shapesArray = parser.parse(str);\n\n    if (shapesArray.length > 0) {\n        for (let shape of shapesArray) {\n            job.shapes.push(shape)\n        }\n    }\n\n    return job\n}","import * as ActionTypes from \"../store/actionTypes\";\nimport {Layers} from \"../models/layers\";\n\nconst pasteData = ({ dispatch, getState }) => next => action => {\n\n    if (action.type !== ActionTypes.DATA_FROM_BUFFER_PASTED) {\n        return next(action);\n    }\n\n    let state = getState();\n    let stage = state.app.stage;\n    let layers = state.layers;\n    let parser = state.app.parser;\n\n    let layer = undefined;\n    if (state.app.importDataToNewLayer) {   // import data to new layer\n        layer = Layers.newLayer(stage, layers);\n        layers.push(layer);\n    }\n    else {                                  // import data to affected layer\n        layer = layers.find((lay) => lay.affected);\n        if (!layer) {                       // if no layer affected, add new\n            layer = Layers.newLayer(stage, layers);\n            layers.push(layer);\n        }\n    }\n\n    // Paste data from ClipBoard\n    for (let item of action.data.items) {\n        item.getAsString((string) => {\n            let shapesArray = parser.parse(string);\n\n            // TODO: add something like poly.valid()\n\n            if (shapesArray.length > 0) {\n                for (let shape of shapesArray) {\n                    layer.add(shape);\n                }\n            }\n\n            if (layer.shapes.length > 0) {\n                dispatch({\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n                    shape: layer,\n                    stage: stage\n                });\n                dispatch({\n                    type: ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED,\n                    layer: layer\n                })\n            }\n\n        });\n\n        break;\n    }\n\n};\n\nexport default pasteData;\n","import * as ActionTypes from '../store/actionTypes';\n\nconst stageController = ({ getState, dispatch }) => next => action => {\n\n    // let state = getState();\n    let stage = action.stage;\n\n    if (stage) {\n        switch (action.type) {\n            case ActionTypes.STAGE_RESIZED:\n                stage.resize();\n                break;\n\n            case ActionTypes.MOUSE_DOWN_ON_STAGE:\n                stage.panByMouseStart();\n                break;\n\n            case ActionTypes.MOUSE_MOVED_ON_STAGE:\n                if (action.dx !== undefined && action.dy !== undefined) {\n                    stage.panByMouseMove(action.dx, action.dy);\n                }\n                break;\n\n            case ActionTypes.MOUSE_UP_ON_STAGE:\n                stage.panByMouseStop();\n                break;\n\n            case ActionTypes.PAN_AND_ZOOM_TO_SHAPE:\n                let center = action.shape.center;\n                let box = action.shape.box;\n                if (isNaN(center.x) || isNaN(center.y)) return;\n                stage.panToCoordinate(center.x, center.y);\n                stage.zoomToLimits(box.xmax - box.xmin, box.ymax - box.ymin);\n                break;\n\n            case ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE:\n                let bIn = action.delta > 0;\n                // stage.zoomByMouse(action.x, action.y, bIn, 1 + Math.abs(action.delta)/100.);\n                stage.zoomByMouse(action.x, action.y, bIn, 1.2);\n                break;\n\n            default:\n                break;\n        }\n    }\n\n    next(action);\n};\n\nexport default stageController;","import * as ActionTypes from '../store/actionTypes';\nimport {Layers} from \"../models/layers\";\n\nimport Flatten from 'flatten-js';\nlet {point, arc, segment} = Flatten;\nlet Algorithmia = window.Algorithmia;\n\n// function zoomHome(shape, stage) {\n//     let box = shape.box;\n//     let x = (box.xmin + box.xmax)/2;\n//     let y = (box.ymin + box.ymax)/2;\n//     stage.panToCoordinate(x, y);\n//     stage.zoomToLimits(box.xmax - box.xmin, box.ymax - box.ymin);\n// }\n\nconst skeleton_recognition = ({dispatch, getState}) => next => action => {\n\n    if (action.type === ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED) {\n\n        let state = getState();\n        let stage = state.app.stage;\n\n        let layers = state.layers;\n        let currentLayer = Layers.getAffected(layers);\n        let shapes = currentLayer.shapes;\n        let input = shapes.map(shape =>\n            [shape.geom.x / 400., shape.geom.y / 400., shape.geom.nx, shape.geom.ny]\n        );\n\n        let client = Algorithmia.client(\"simby4RUwqQmtMDaHAPj5wsQwlD1\");\n        let algorithm = \"alexbol99/SeketonRecognition\";\n\n        client.algo(algorithm)\n            .pipe(input)\n            .then(function (output) {\n                if (output.error) return console.error(\"error: \" + output.error);\n\n                let newLayer = Layers.newLayer(stage, layers);\n                newLayer.name = \"recognized\";\n                newLayer.title = \"recognized\";\n                // newLayer.displayed = true;\n\n                for (let row of output.result) {\n                    let shape;\n                    if (row[0] instanceof Array && row[0].length === 2) {\n                        let pc = point(row[0][0] * 400, row[0][1] * 400);\n                        let r = row[1] * 400;\n                        /********center radius startAng endAng **********/\n                        shape = arc(pc, r, row[2], row[3], Flatten.CCW)\n                    }\n                    else {\n                        shape = segment(\n                            point(row[0] * 400, row[1] * 400),\n                            point(row[2] * 400, row[3] * 400))\n                    }\n                    if (row[4]) {\n                        shape.label = row[4]\n                    }\n                    newLayer.add(shape)\n                }\n                layers.push(newLayer);\n\n                dispatch({\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n                    stage: stage,\n                    shape: currentLayer\n                })\n            });\n    }\n\n    return next(action);\n};\n\n\nexport default skeleton_recognition;\n","import React from 'react';\nimport './index.css';\n\nimport App from './App';\nimport {createStore, applyMiddleware} from 'redux';\nimport {Provider} from 'react-redux';\nimport {BrowserRouter} from 'react-router-dom';\nimport reducer from './store/reducer';\n\nimport log from './middleware/log';\nimport readFiles from './middleware/readFiles';\nimport pasteData from './middleware/pasteData';\nimport stageController from './middleware/stageController'\nimport skeleton_recognition from './middleware/skeleton_recognition'\n\nconst store = createStore(reducer,\n    applyMiddleware(log, readFiles, pasteData, skeleton_recognition, stageController));\n\nconst Preloader = () => {\n    return (\n        <Provider store={store}>\n            <BrowserRouter basename={process.env.PUBLIC_URL}>\n                <App/>\n            </BrowserRouter>\n        </Provider>\n    );\n};\n\nexport default Preloader;\n\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAACWUExURezp2L3CsAAAAH91jbamy9Sx1NXVxL2u0MvA2yEeEZy460hBJUU/JAC+ACQhE4qi2Zaw5JCp3se72Ap3Hsi82cq+2qK/8XeKtWNfTb+x0nSEsG19pH6QtWFfU8S31nt1Wpax5Xp0WoeeynBrVMm92WhkVsGz02JfU21oU5m06Mq/2se62MS21bmqzsW517ipzbyu0P///wUDcXkAAAAydFJOU/////////////////////////////////////////////////////////////////8ADVCY7wAAAO1JREFUeNpiMMQCAAKIAZsgQABhFQQIIAZDeW5uZTgXwgEIIAZFKX5+aQk2iBiUAxBADDwCClyCfIwQQSgHIICAglxigny8wmAI4TACBBCDhoymkrg6KwMIsEI4jAABxGCoyskpy8gEFmSCcNgAAojBkI2RkZENqhLIMWRkMwQIIKg7YSohACCAoIIwlRAAEEBYVQIEEFaVAAHEwIwJDAECiIGZg4NJSAiE5OSYJCWZWFiYGAECCCgowi6qwi6iza6jxs6uywISBAggoKCoFoeoioiemoE+CxgwMQIEEAMzEwZgBAggBkNGTAAQYABIRSX4H75PxQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAABOUExURezp2AAAAH91jb3CsE9PT83C3CQhE7amy9Sx1ImFdL2u0AC+AMq+2si82Qp3Hsm92cvA28Gz07ipzcq/2se62LmqzsS21cW517yu0P///44+OfEAAAAadFJOU/////////////////////////////////8AFCIA2gAAAMxJREFUeNpikMQCAAKIAZsgQABhFQQIIAYWFklJTjYoD8oBCCAGIAMuJgnlAAQQUDsLG5JOMAcggBiAykGaoADCAQggBqByDhYWbj4w5GTjAJkLEEAg2xkZEIARpB4ggECCHEiCHCBBgADCqhIggLCqBAggrCoBAgirSoAAYmDCBJIAAcTAxMrKiIy4uBiZAQIIKMjLxcPPxSvCJSbIxSXKzs7OyAwQQAxMAjzCAjz8vOKCEkLsYMDIDBBADEyMGIAZIIAYJJkxAUCAAQCiZRN3sUCgAwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MEYwOEQ4MDMwMzJFNDExOUZGN0MyRjAwQkZFNDkwMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4NkNFODE2MzMyM0QxMUU0OTc2NkEyNzVGRDRDQUREMiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NkNFODE2MjMyM0QxMUU0OTc2NkEyNzVGRDRDQUREMiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM3Q0UwRDg3MzgzMkU0MTE5RkY3QzJGMDBCRkU0OTAxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjcwRjA4RDgwMzAzMkU0MTE5RkY3QzJGMDBCRkU0OTAxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+nXk3UAAAAjtJREFUeNrU1ktIVFEcx/FRhExEei0kULQkiijMKduo0RNCEHuQRohgggsVJbRSNy2qRSK4qIjohRARk5YgGvmoVSEWRe9EzHJVkFZEoInT9w+/gXGasjngwgMf7uDcOeee/+Nco/x+v2cuR7RnjkdM4MPh+jOBj+moxVYsxnvcQhO+Bf/48umjEe+gAHcxgM1YgkNIxGOsjHQHUYEcsIP1XHqQg7dIk36Mo8JugxfTf5swdFfBO6jDSU1+CvdRrRDdwFn8wB7XJG9XrFejCOvQhgnkoxE+3ee0gMX7E1bgmfLRgG0qBrvuwiKnKmJ8xCol0ybLxBaUoBcH8QqjrjvwKZGf8QAJeI0NWsRC9Ut/b3SpIgvRUyX6Es4rD7sxhevqgyOqtj71yz+rKThEY9iJOziAVtX9S31vE5ZhEjvwSCU9gi8K4+3QEg5ttEFYP1zBRnzVwtYHVZp8IZoRiyTE4Y2+f4KU2c6iKdV9qXaSgYfoVPwvahEr57VYjmTtxh6sW/fNzEGYM2lGrnAOWYjHGizFBZWuR6EtxFV8IAcnIjlN7SnKdbXfLECL+sXK+Ttytah1/D6X49omH1a8LVzZCmUHjqt/NuEdUl3fB2MKxXMtaP1ioWhXTuwBlqk4nBawA3CvwnVPlWRHygtcUxXuV8n+0Qf/M27qfCpGnp7WynlIrMRr9LIKX0XhRkhlpakUu1RZg3oh2ZMfQ6UdO4FOdnknDwU1ocX+p15KXh2SvrBn0bz9r+K3AAMAvVSdlmlN6ucAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAB3RJTUUH1AgfBgU3vDbVaQAAAAlwSFlzAAAPPAAADzwBFzqfWQAAAwBQTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Bz0LCAAAAAJ0Uk5T/wDltzBKAAAARUlEQVR42mNgxAIYsPEYkMUZoGwGJNVwNoLAUIWmngHVNFQ2iitQnQQTZACqRkfYVaJrg1qFUE20IMnehGtFNZhIQSAAABhlAUeIwcHOAAAAAElFTkSuQmCC\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-toolbar\":\"ToolbarComponent_App-toolbar__3E3eP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-canvas\":\"CanvasComponent_App-canvas__3v_so\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-status-bar\":\"StatusComponent_App-status-bar__21gqW\"};"],"sourceRoot":""}