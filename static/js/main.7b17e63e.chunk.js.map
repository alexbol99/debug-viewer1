{"version":3,"sources":["serviceWorker.js","store/reducers/auth.js","store/actionTypes.js","models/createArcs.js","models/polygonOffset.js","dataParsers/parser.js","store/reducers/app.js","models/model.js","models/layer.js","models/layers.js","store/reducers/layers.js","store/reducers/mouse.js","store/reducers/measureShapesTool.js","store/reducers/cloudStorage.js","store/reducers/upload.js","store/reducer.js","middleware/log.js","middleware/pasteData.js","middleware/stageController.js","middleware/skeleton_recognition.js","axios-database.js","store/actions/appActions.js","store/actions/layersActions.js","models/job.js","dataParsers/parseJSON.js","store/actions/cloudStorageActions.js","components/UI/Button/Button.js","components/UI/ButtonSeparator/ButtonSeparator.js","components/MainComponent/ToolbarComponent/ToolbarComponent.js","models/stage.js","store/actions/stageActions.js","components/MainComponent/CanvasComponent/CanvasComponent.js","components/Layout/StatusComponent/StatusComponent.js","components/MainComponent/GraphicsComponent/stageComponent.js","models/graphics.js","models/utils.js","components/MainComponent/GraphicsComponent/graphics/shapeComponent.js","components/MainComponent/GraphicsComponent/graphics/imageComponent.js","components/MainComponent/GraphicsComponent/layerComponent.js","components/MainComponent/GraphicsComponent/domelements/labelComponent.js","components/MainComponent/GraphicsComponent/LabelsLayerComponent/labelsLayerComponent.js","components/MainComponent/GraphicsComponent/domelements/VertexLabel/VertexLabel.js","components/MainComponent/GraphicsComponent/graphics/vertexComponent.js","components/MainComponent/GraphicsComponent/graphics/verticesComponent.js","components/MainComponent/GraphicsComponent/verticesLayerComponent.js","components/MainComponent/GraphicsComponent/layersComponent.js","tools/measurePointsTool.js","tools/measureShapesTool.js","tools/displayCoordsTool.js","components/UI/Modal.js","components/UI/ModalPopup/ModalPopup.js","components/AboutPopup/AboutPopup.js","dataParsers/createXML.js","components/DownloadPopup/DownloadPopup.js","components/UI/SnackbarRoot.js","components/UI/Snackbar/Snackbar.js","dataParsers/parserXML.js","dataParsers/parserODB.js","dataParsers/parsePGM.js","dataParsers/parseCSV.js","dataParsers/parseTXT.js","store/actions/upload.js","components/UploadPopup/UploadPopup.js","components/Constructions/CloudDocument.js","containers/MainComponent/MainComponent.js","components/LayersList/LayerListToolbar/LayerListToolbar.js","components/LayersList/LayerEditForm/LayerEditForm.js","components/LayersList/LayerListElement/LayerListElement.js","containers/LayerList/LayersList.js","components/Layout/AsideComponent/AsideComponent.js","AppBody.js","components/Layout/HeaderComponent/HeaderComponent.js","components/Constructions/Demo.js","components/Constructions/SkeletonRecognition.js","models/collisionDistance.js","components/Constructions/CollisionDemo.js","components/UI/Spinner/Spinner.js","store/actions/auth.js","App.js","index.js","components/UI/Button/Button.module.css","components/UploadPopup/UploadPopup.module.css","components/LayersList/LayerListElement/LayerListElement.module.css","components/UI/ButtonSeparator/ButtonSeparator.module.css","components/MainComponent/ToolbarComponent/ToolbarComponent.module.css","components/UI/ModalPopup/ModalPopup.module.css","containers/LayerList/LayersList.module.css","components/Layout/HeaderComponent/HeaderComponent.module.css","components/UI/Spinner/Spinner.module.css","components/MainComponent/CanvasComponent/CanvasComponent.module.css","components/Layout/StatusComponent/StatusComponent.module.css","components/MainComponent/GraphicsComponent/LabelsLayerComponent/labelsLayer.module.css","components/MainComponent/GraphicsComponent/domelements/VertexLabel/VertexLabel.module.css","components/AboutPopup/AboutPopup.module.css","components/DownloadPopup/DownloadPopup.module.css","components/UI/Snackbar/Snackbar.module.css","containers/MainComponent/MainComponent.module.css","components/LayersList/LayerListToolbar/LayerListToolbar.module.css","components/LayersList/LayerEditForm/LayerEditForm.module.css","components/Layout/AsideComponent/AsideComponent.module.css"],"names":["Boolean","window","location","hostname","match","initialState","token","userId","username","error","loading","auth","state","arguments","length","undefined","action","type","Object","objectSpread","arcSE","center","start","end","counterClockwise","startAngle","vector","slope","endAngle","Utils","EQ","Math","PI","r","Arc","offsetArc","arc","value","arc_cap1","arc_cap2","w","abs","polygon","Polygon","arc_outer","clone","sweep","arcStartSweep","arcEndSweep","arc_inner","pc","CW","CCW","Segment","addFace","toConsumableArray","faces","setArcLength","ips","Face","getSelfIntersections","edges","slice","edge_cap1","edge_cap2","int_points","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","Symbol","iterator","next","done","pt","addToIntPoints","err","return","int_points_sorted","getSortedArray","splitByIntersections","bv","OUTSIDE","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","int_point","edge_before","edge_after","INSIDE","op","BOOLEAN_UNION","removeNotRelevantChains","num","prev","removeOldFaces","restoreFaces","orientation","ORIENTATION","reverse","offsetSegment","seg","v_seg_unit","x","y","normalize","v_left","rotate90CCW","multiply","v_right","rotate90CW","seg_left","translate","seg_right","cap1","cap2","Parser","classCallCheck","this","createClass","key","str","arrayOfLines","watchArray","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","line","push","substring","indexOf","pointArr","split","point","Point","parseInt","label","termArr","psArr","ps","peArr","pe","pcArr","Flatten","Circle","pllArr","xmin","ymin","width","height","box","Box","segment","i","search","nedgesStr","nedges","j","parseToSegment","parseToArc","points","shape","shapes","parseToPoint","parseToCircle","parseToRectangle","parseToODBLine","parseToODBArc","parseToPolygon","size","parseToShapes","parseToPoints","unitsList","name","decimals","divisor","defaultAppState","title","version","process","build","units","parser","widthOn","displayVertices","displayLabels","measurePointsActive","zoomFactor","originX","originY","showAboutPopup","importDataToNewLayer","showSkeletonRecognitionButton","applySkeletonRecognition","stage","showSpinner","showLayerList","showDownloadPopup","showUploadPopup","app","assign","resolution","origin","curUnitsId","findIndex","newUnits","defaultStyle","strokeStyle","stroke","fill","alpha","Model","geom","style","model","Layer","color","displayed","edited","affected","layer","newShape","add","JSON","stringify","merge","xmax","ymax","colors","Layers","layers","getNewName","defaultName","inc","comparator","find","lay","currentAffectedLayer","getAffected","_loop","col","_colors","_i","index","l","newLayers","filter","getNextColor","sort","l1","l2","name1","toUpperCase","name2","map","toJSON","newLayer","affectedLayer","affectedLayerId","concat","delete","setAffected","toggleDisplayed","setEdited","setNameAndTitle","nextLayer","newCurLayer","newNextLayer","defaultMouseState","startX","startY","touchPoints","mouse","x1","y1","x2","y2","defaultMeasureShapesTool","measureShapesActive","measureShapesFirstClick","hoveredShape","firstMeasuredShape","secondMeasuredShape","firstMeasuredLayer","secondMeasuredLayer","distance","shortestSegment","is_mobile","mobilecheck","measureShapesTool","shape1","shape2","_Flatten$Distance$dis","Distance","_Flatten$Distance$dis2","slicedToArray","documentDefaultState","id","owner","lastUpdated","cloudStorageDefaultState","document","documentsList","cloudStorage","_state$documentsList","_action$id","newList","objectWithoutProperties","_toPropertyKey","stateDocumentsList","actionDocumentsList","keys","hasOwnProperty","isUpToDate","defaultState","uploadStarted","uploadCompleted","uploadedFiles","upload","reducer","combineReducers","log","_ref","getState","dispatch","console","pasteData","data","items","getAsString","string","shapesArray","parse","stageController","resize","panByMouseStart","dx","dy","panByMouseMove","panByMouseStop","isNaN","panToCoordinate","zoomToLimits","bIn","delta","zoomByMouse","removeAllChildren","removeAllListeners","zoomByPinchStart","distStart","sqrt","ratio","zoomByPinchMove","zoomByPinchStop","Algorithmia","skeleton_recognition","currentLayer","input","nx","ny","client","algo","pipe","then","output","result","row","Array","instance","axios","create","baseURL","setHomeView","addNewLayer","toggleDisplayLayer","Job","filename","profiles","materials","get","b","parseJSON","job","jsonArray","faceArray","Image","uri","documents","values","button","props","iconStyle","classes","IconTrigger","active","IconModeActive","IconModeNotActive","buttonStyle","mobileOnly","react_default","a","createElement","onClick","className","lib_default","iconName","buttonSeparator","ButtonSeparator","IconSeparator","ToolbarComponent","Button","onShowUploadPopupPressed","onLayerListButtonClicked","onClearAllButtonClicked","onShowDownloadPopupPressed","onHomeButtonPressed","onPanByDragPressed","onMeasurePointsButtonPressed","onMeasureBetweenShapesButtonPressed","onToggleWidthModePressed","onToggleVerticesPressed","onToggleLabelsPressed","onSkeletonRecognitionButtonPressed","onUnitClicked","onShowAboutPopupPressed","Component","Stage","canvas","_this","possibleConstructorReturn","getPrototypeOf","call","Touch","enable","assertThisInitialized","mouseMoveOutside","enableMouseOver","clientWidth","clientHeight","oldOrigin","oldZoomFactor","pinchAnchorX","pinchAnchorY","pinchStarted","addChild","scalar","scalingFactor","canvasX","canvasY","worldX","worldY","W2C_X","W2C_Y","newOrigin","deltaX","deltaY","curRatio","min","max","focusX","focusY","C2W_X","C2W_Y","zoomIn","zoomOut","newFocusX","newFocusY","panBy","zoom","getContext","clearRect","minX","minY","maxX","maxY","CreatejsStage","handleMouseWheelMove","CanvasComponent","canvasElement","React","createRef","handleMouseMove","event","focus","nativeEvent","touches","clientX","target","offsetLeft","clientY","offsetTop","handlePinchMove","stageX","stageY","handleMouseDown","handlePinchDown","handleMouseUp","stopPropagation","preventDefault","handlePinchUp","handleMouseLeave","blur","body","handleMouseWheel","detail","wheelDelta","offsetX","offsetY","handleMouseWheelFox","layerX","layerY","current","on","addEventListener","passive","registerStage","tabIndex","ref","styles","connect","actions","StatusComponent","StageComponent","setTransform","update","onStageUnmounted","Fragment","children","graphics","radius","Graphics","beginFill","command","circle","drawCircle","graphics_point","ignoreScale","setStrokeStyle","beginStroke","moveTo","lineTo","endStroke","graphics_segment","graphics_arc","graphics_circle","drawRect","graphics_box","face","setGraphicsFace","graphics_polygon","setGraphicsEdge","edge","setGraphicsEdgeSegment","setGraphicsEdgeArc","first","is_equal","obj1","obj2","equal","_Object$keys","format","toFixed","ShapeComponent","_Component","params","handleMouseOver","onMouseOver","handleMouseOut","onMouseOut","handleClick","Shape","inherits","hovered","selected","aperture","isEmpty","redraw","nextProps","nextState","off","removeChild","clear","ImageComponent","_getPrototypeOf2","_len","args","_key","apply","bitmap","image","naturalWidth","naturalHeight","scaleX","scaleY","tx","ty","regX","regY","_this2","img","onload","Bitmap","onImageLoaded","setAttribute","src","loadImage","LayerComponent","forceUpdate","imageComponent_ImageComponent","shapeComponent_ShapeComponent","handleMouseRollOverShape","handleMouseRollOutShape","handleClickOnShape","labelComponent","left","top","position","LabelComponent","trim","domelements_labelComponent","VertexLabel","vertex","VertexComponent","shadow","Shadow","setState","mouseEnabled","domelements_VertexLabel_VertexLabel","VerticesComponent","vertices","vertexComponent","verticesComponent","LayersComponent","layerComponent","LabelsLayerComponent_labelsLayerComponent","GraphicsComponent_verticesLayerComponent","MeasurePointsTool","measureCanvas","measureStage","endX","endY","measureStarted","cursor","draw","context","textX","textY","textWidth","backX","backY","pllX","pllY","W2C_Scalar","beginPath","rect","lineWidth","text","measurement","font","measureText","textAlign","fillStyle","globalAlpha","fillRect","textHeight","fillText","dist","removeAllEventListeners","mainCanvas","MeasureShapesTool","labelShape","Text","unscale","redrawLabel","DisplayCoordsTool","coordX","coordY","backgroundColor","opacity","margin","padding","modalRoot","getElementById","Modal","el","appendChild","ReactDOM","createPortal","ModalPopup","onBackDropClicked","ev","closePopup","handleKeyDown","code","elementDrag","dragX","dragY","element","closeDragElement","onmouseup","onmousemove","dragMouseDown","removeEventListener","showPopup","UI_Modal","BackDrop","onMouseDown","header","AboutPopup","UI_ModalPopup_ModalPopup","toggleAboutPopup","href","pointToXMLString","xw","startElement","writeAttribute","endElement","segmentToXMLString","arcToXMLString","round","circleToXMLString","polygonToXMlString","createXMLString","XMLWriter","startDocument","endDocument","toString","DownloadPopup","downloadData","xmlString","encodeURIComponent","download","snackbarRoot","SnackbarRoot","Snackbar","display","onAnimationEnd","UI_SnackbarRoot","message","parseEdges","edgesXML","_Array$from","from","getAttribute","parsePolygon","polygonsXML","islands","getElementsByTagName","_i2","_Array$from2","holes","_i3","_Array$from3","parseSegment","segmentXML","parseCurve","curveXML","parsePoint","pointXML","parseImage","imageXML","inch2pixels","mils2pixels","InchToPixels","Number","MilsToPixels","lines","terms","end_of_face","parseLine","apertures","ap_value","parseArc","pgmResolution","microns2pixels","sizeX","toPixels","micron2pixels","micronToPixels","parseTXT","readAsText","reader","file","files","promise","Promise","resolve","reject","theFile","namesplitted","extension","xmlDoc","DOMParser","parseFromString","titles","firstChild","nodeValue","profilesXML","_i4","_Array$from4","materialXML","_i5","_Array$from5","segmentsXML","_i6","_Array$from6","curvesXML","_i7","_Array$from7","curve","pointsXML","_i8","_Array$from8","imagesXML","_i9","_Array$from9","parseXML","px","py","parseCSV","substr","polarity","odbLine","odbArc","ap_key","parseODB","readAsImage","yStr","xStr","readAsDataURL","readFile","FileReader","readFiles","promises","all","filesUploadCompleted","catch","alert","UploadPopup","inputElement","clipboardWindowRef","clipboardWindowWidth","clipboardWindowHeight","dragOver","clipboardData","openFilesButtonClicked","click","pasteHandler","onPaste","dropHandler","dataTransfer","kind","getAsFile","dragOverHandler","dragLeaveHandler","filesSelectedHandler","File","FileList","initUploadState","pX","pY","snackbarMessage","newFilesNum","UploadTarget","UploadTargetDragOver","UploadTargetDragLeave","paddingLeft","paddingRight","paddingTop","paddingBottom","onDrop","onDragOverCapture","onDragLeaveCapture","multiple","onChange","UI_Snackbar_Snackbar","CloudDocument","fetchDocumentFromDatabase","firstLayer","docUrl","geomUrl","responses","layerData","layerActions","requestFetchDocumentFromDatabaseSucceed","appActions","cloudActions","MainComponent","onSaveDocumentButtonClicked","dataURL","toDataURL","e","payload","Date","toLocaleDateString","toLocaleTimeString","updateDocumentInDatabase","addDocumentToDatabase","history","clearCurrentDocument","clearAllLayers","toggleWidthMode","toggleDisplayVertices","onresize","resizeStage","handleKeyUp","displayCoordsTool","tools_displayCoordsTool","measurePointsTool","tools_measurePointsTool","measuredLayersDisplayed","tools_measureShapesTool","MainComponent_ToolbarComponent_ToolbarComponent","togglePanByDrag","toggleMeasureBetweenPoints","toggleMeasureBetweenShapes","toggleDisplayLabels","toggleUnits","toggleLayerList","toggleDownloadPopup","toggleUploadPopup","MainComponent_CanvasComponent_CanvasComponent","stageComponent","destroyStage","layersComponent","Layout_StatusComponent_StatusComponent","components_AboutPopup_AboutPopup","components_DownloadPopup_DownloadPopup","components_UploadPopup_UploadPopup","pasteDataFromBuffer","react_router","path","component","ownProps","post","response","layersJSON","geomPayload","registerDocumentAddedToDatabase","now","put","url","geomId","reponse","LayerListToolbar","onAddLayerButtonClicked","onEditLayerButtonClicked","onDeleteLayerButtonClicked","onSortLayersButtonClicked","LayerEditForm","onSubmitLayerEditForm","currentTarget","setFocus","onSubmit","onMouseMove","defaultValue","cols","rows","onEscapeLayerEditForm","parent","LayerListElement","activeElement","nodeName","elem","refs","layerName","hex","g","percent","replace","rgba","bgcolor","layerNameOpacity","onLayerClicked","onDoubleClick","onLayerDoubleClicked","LayerSelectionBox","onAffectedBoxClicked","LayerSelectionMark","LayerNameBox","LayersList_LayerEditForm_LayerEditForm","LayersList","parentElement","setAffectedNextLayer","setAffectedPrevLayer","onLayerListClicked","LayersList_LayerListToolbar_LayerListToolbar","maxHeight","LayersList_LayerListElement_LayerListElement","AsideComponent","updateDocumentName","containers_MainComponent_MainComponent","onManageCloudStorageButtonClicked","LayerList_LayersList","Layout_AsideComponent_AsideComponent","withRouter","pathname","Demo","resp","panAndZoomToShape","asyncOperationEnded","asyncOperationStarted","SkeletonRecognition","CollisionDistance","polygon1","polygon2","collision_distance","POSITIVE_INFINITY","_arr","edge2polygon","edge2","shapeBox","NEGATIVE_INFINITY","resp_edges","edge1","segment2segment","segment2arc","arc2arc","intersections","Line","Vector","intersect","ip","_point$distanceTo","distanceTo","_point$distanceTo2","segment1","segment2","point2shape","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","v_s","_v_n","v","tangent_point","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","arc1","arc2","arc_enlarged","_arc1$distanceTo","translateArc","_arc1$distanceTo2","dist_tmp","EQ_0","GE","arc_reduced","_arc1$distanceTo3","_arc1$distanceTo4","LT","_arc1$distanceTo5","_arc1$distanceTo6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","vec","arc_tmp","newPolygon","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","arc_trans","CollisionDemo","collision","polygon3","applyCollisionDemo","spinner","Loader","authSucceed","authFailed","logout","localStorage","removeItem","checkAuthTimeout","expirationTime","setTimeout","email","getItem","password","logIn","authData","returnSecureToken","setItem","expirationDate","getTime","expiresIn","idToken","localId","queryParams","authSetUsername","App","authCheckState","Layout_HeaderComponent_HeaderComponent","isAuthenticated","AppBody","exact","Spinner","timeLeft","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","render","es","react_router_dom","basename","src_App_0","navigator","serviceWorker","ready","registration","unregister","module","exports","DrawerButton","fadeIn","Layer-displayed","Layer-undisplayed","App-toolbar","App-toolbar-units","App-layers","App-layers-displayed","App-header","App-header-documents-page","load2","App-canvas","App-status-bar","LabelsLayer","Open","Close","fadeInOut","Main-content","Layer-list-toolbar","Layer-edit-form","App-aside"],"mappings":"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","file":"static/js/main.7b17e63e.chunk.js","sourcesContent":["// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import * as actionTypes from '../actionTypes';\n\nconst initialState = {\n    token: null,\n    userId: null,\n    username: null,\n    error: null,\n    loading: false\n};\n\nconst auth = (state=initialState, action) => {\n    switch (action.type) {\n        case actionTypes.AUTHENTICATION_STARTED:\n            return {\n                ...state,\n                error: null,\n                loading: true\n            };\n        case actionTypes.AUTHENTICATION_SUCCEED:\n            return {\n                ...state,\n                error: null,\n                token: action.token,\n                userId: action.userId,\n                username: action.username,\n                loading: false\n            };\n        case actionTypes.AUTHENTICATION_FAILED:\n            return {\n                ...state,\n                error: action.error,\n                token: null,\n                userId: null,\n                username: null,\n                loading: false\n            };\n        case actionTypes.AUTHENTICATION_LOGOUT:\n            return {\n                ...state,\n                token: null,\n                userId: null,\n                username: null\n            };\n        case actionTypes.AUTHENTICATION_SET_USERNAME:\n            return {\n                ...state,\n                username: action.username\n            };\n        default:\n            return state\n    }\n};\n\nexport default auth;","/**\n * Created by alexanderbol on 13/04/2017.\n */\nexport const NEW_STAGE_CREATED = \"NEW_STAGE_CREATED\";\nexport const STAGE_RESIZED = \"STAGE_RESIZED\";\nexport const NEW_SHAPE_PASTED = \"NEW_SHAPE_PASTED\";\nexport const CLEAR_ALL = \"CLEAR_ALL\";\nexport const STAGE_UNMOUNTED = \"STAGE_UNMOUNTED\";\n\n/** Toolbar buttons **/\nexport const PAN_BY_DRAG_BUTTON_CLICKED = \"PAN_BY_DRAG_BUTTON_CLICKED\";\n// export const SAVE_DOCUMENT_BUTTON_CLICKED = \"SAVE_DOCUMENT_BUTTON_CLICKED\";\nexport const MANAGE_CLOUD_STORAGE_BUTTON_CLICKED = \"MANAGE_CLOUD_STORAGE_BUTTON_CLICKED\";\n\nexport const MEASURE_POINTS_BUTTON_PRESSED = \"MEASURE_POINTS_BUTTON_PRESSED\";\nexport const MEASURE_SHAPES_BUTTON_PRESSED = \"MEASURE_SHAPES_BUTTON_PRESSED\";\nexport const TOGGLE_ABOUT_POPUP_CLICKED = \"TOGGLE_ABOUT_POPUP_CLICKED\";\n// export const CLOSE_ABOUT_POPUP_BUTTON_PRESSED = \"CLOSE_ABOUT_POPUP_BUTTON_PRESSED\";\nexport const TOGGLE_UNITS_CLICKED = \"TOGGLE_UNITS_CLICKED\";\nexport const TOGGLE_WIDTH_MODE_CLICKED = \"TOGGLE_WIDTH_MODE_CLICKED\";\nexport const TOGGLE_DISPLAY_VERTICES_CLICKED = \"TOGGLE_DISPLAY_VERTICES_CLICKED\";\nexport const TOGGLE_DISPLAY_LABELS_CLICKED = \"TOGGLE_DISPLAY_LABELS_CLICKED\";\nexport const TOGGLE_SHOW_LAYER_LIST_CLICKED = \"TOGGLE_SHOW_LAYER_LIST_CLICKED\";\nexport const TOGGLE_DOWNLOAD_POPUP_CLICKED = \"TOGGLE_DOWNLOAD_POPUP_CLICKED\";\nexport const TOGGLE_UPLOAD_POPUP_CLICKED=\"TOGGLE_UPLOAD_POPUP_CLICKED\";\n\nexport const MOUSE_MOVED_ON_STAGE = \"MOUSE_MOVED_ON_STAGE\";\nexport const MOUSE_DOWN_ON_STAGE = \"MOUSE_DOWN_ON_STAGE\";\nexport const MOUSE_UP_ON_STAGE = \"MOUSE_UP_ON_STAGE\";\nexport const MOUSE_WHEEL_MOVE_ON_STAGE = \"MOUSE_WHEEL_MOVE_ON_STAGE\";\n\nexport const MOUSE_ROLL_OVER_SHAPE = \"MOUSE_ROLL_OVER_SHAPE\";\nexport const MOUSE_ROLL_OUT_SHAPE = \"MOUSE_ROLL_OUT_SHAPE\";\nexport const MOUSE_CLICKED_ON_SHAPE = \"MOUSE_CLICKED_ON_SHAPE\";\n\nexport const PINCH_DOWN_ON_STAGE = \"PINCH_DOWN_ON_STAGE\";\nexport const PINCH_MOVED_ON_STAGE = \"PINCH_MOVED_ON_STAGE\";\nexport const PINCH_UP_ON_STAGE = \"PINCH_UP_ON_STAGE\";\n\n// export const HOME_BUTTON_CLICKED = \"HOME_BUTTON_CLICKED\";\nexport const PAN_TO_COORDINATE = \"PAN_TO_COORDINATE\";\nexport const PAN_AND_ZOOM_TO_SHAPE = \"PAN_AND_ZOOM_TO_SHAPE\";\n\nexport const LAYER_LIST_PANEL_PRESSED = \"LAYER_LIST_PANEL_PRESSED\";\nexport const ADD_LAYER_BUTTON_PRESSED = \"ADD_LAYER_BUTTON_PRESSED\";\nexport const ADD_NEW_LAYER = \"ADD_NEW_LAYER\";\nexport const DELETE_LAYER_BUTTON_PRESSED = \"DELETE_LAYER_BUTTON_PRESSED\";\nexport const SORT_LAYERS_BUTTON_PRESSED = \"SORT_LAYERS_BUTTON_PRESSED\";\nexport const CLEAN_AND_UPDATE_LAYERS = \"CLEAN_AND_UPDATE_LAYERS\";\n\nexport const TOGGLE_DISPLAY_LAYER_PRESSED = \"TOGGLE_DISPLAY_LAYER_PRESSED\";\nexport const TOGGLE_AFFECTED_LAYER_PRESSED=\"TOGGLE_AFFECTED_LAYER_PRESSED\";\nexport const OPEN_LAYER_EDIT_FORM_PRESSED = \"OPEN_LAYER_EDIT_FORM_PRESSED\";\nexport const SUBMIT_LAYER_EDIT_FORM_PRESSED = \"SUBMIT_LAYER_EDIT_FORM_PRESSED\";\nexport const ESCAPE_LAYER_EDIT_FORM_PRESSED = \"ESCAPE_LAYER_EDIT_FORM_PRESSED\";\n\nexport const LAYERS_LIST_ARROW_DOWN_PRESSED = \"LAYERS_LIST_ARROW_DOWN_PRESSED\";\nexport const LAYERS_LIST_ARROW_UP_PRESSED = \"LAYERS_LIST_ARROW_UP_PRESSED\";\n\n// export const TOGGLE_WATCH_EXPAND_CLICKED = \"TOGGLE_WATCH_EXPAND_CLICKED\";\n\n// export const FILENAME_LIST_SELECTED = \"FILENAME_LIST_SELECTED\";\nexport const FILES_UPLOAD_COMPLETED = \"FILES_UPLOAD_COMPLETED\";\nexport const INITIALIZE_UPLOAD_STATE = \"INITIALIZE_UPLOAD_STATE\";\nexport const DATA_FROM_BUFFER_PASTED = \"DATA_FROM_BUFFER_PASTED\";\n\n/** AABB Distance Measurement Demo **/\nexport const AABB_DEMO_URI = \"AABB_DEMO_URI\";\nexport const AABB_DEMO_NEXT_DIST_STEP = \"AABB_DEMO_NEXT_DIST_STEP\";\nexport const AABB_TREE_NEXT_LEVEL = \"AABB_TREE_NEXT_LEVEL\";\n\n/** Collision demo **/\nexport const COLLISION_DEMO_URI = \"COLLISION_DEMO_URI\";\nexport const COLLISION_DEMO_BUTTON_PRESSED = \"COLLISION_DEMO_BUTTON_PRESSED\";\n\n/** Skeleton recognition demo **/\nexport const SKELETON_RECOGNITION_URI = \"SKELETON_RECOGNITION_URI\";\nexport const SKELETON_RECOGNITION_BUTTON_PRESSED=\"SKELETON_RECOGNITION_BUTTON_PRESSED\";\n\nexport const ASYNC_OPERATION_STARTED = \"ASYNC_OPERATION_STARTED\";\nexport const ASYNC_OPERATION_ENDED = \"ASYNC_OPERATION_ENDED\";\n\n/** Documents list **/\nexport const REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED = \"REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED\";\nexport const REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED = \"REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED\";\nexport const REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED = \"REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED\";\nexport const REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED = \"REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED\";\nexport const DELETE_DOCUMENT_FROM_DATABASE_SUCCEED = \"DELETE_DOCUMENT_FROM_DATABASE_SUCCEED\";\nexport const DOCUMENT_SELECTED_FROM_LIST = \"DOCUMENT_SELECTED_FROM_LIST\";\nexport const DOCUMENT_NAME_UPDATED = \"DOCUMENT_NAME_UPDATED\";\nexport const CLEAR_ALL_BUTTON_CLICKED = \"CLEAR_ALL_BUTTON_CLICKED\";\n\n/* Authentication */\nexport const AUTHENTICATION_STARTED = \"AUTHENTICATION_STARTED\";\nexport const AUTHENTICATION_SUCCEED = \"AUTHENTICATION_SUCCEED\";\nexport const AUTHENTICATION_FAILED = \"AUTHENTICATION_FAILED\";\nexport const AUTHENTICATION_LOGOUT = \"AUTHENTICATION_LOGOUT\";\nexport const AUTHENTICATION_SET_USERNAME = \"AUTENTICATION_SET_USERNAME\";\n\n","import {Utils, Arc, vector} from \"@flatten-js/core\";\n\nexport function arcSE(center, start, end, counterClockwise) {\n    let startAngle = vector(center,start).slope;\n    let endAngle = vector(center, end).slope;\n    if (Utils.EQ(startAngle, endAngle)) {\n        endAngle += 2*Math.PI;\n        counterClockwise = true;\n    }\n    let r = vector(center, start).length;\n\n    return new Arc(center, r, startAngle, endAngle, counterClockwise);\n}\n\nexport function arcStartSweep(center, start, sweep, counterClockwise) {\n    let startAngle = vector(center,start).slope;\n    let endAngle = startAngle + sweep;\n    if (Utils.EQ(startAngle, endAngle)) {\n        endAngle += 2*Math.PI;\n        counterClockwise = true;\n    }\n    let r = vector(center, start).length;\n\n    return new Arc(center, r, startAngle, endAngle, counterClockwise);\n}\n\nexport function arcEndSweep(center, end, sweep, counterClockwise) {\n    let endAngle = vector(center,end).slope;\n    let startAngle = endAngle - sweep;\n    if (Utils.EQ(startAngle, endAngle)) {\n        endAngle += 2*Math.PI;\n        counterClockwise = true;\n    }\n    let r = vector(center, end).length;\n\n    return new Arc(center, r, startAngle, endAngle, counterClockwise);\n}\n\n","\n/**\n * Created by Alex Bol on 12/02/2018.\n */\nimport {Segment, Arc, Polygon, Face} from \"@flatten-js/core\";\nimport {CW, CCW, INSIDE, OUTSIDE, ORIENTATION} from \"@flatten-js/core\";\nimport {vector} from \"@flatten-js/core\";\nimport {unify,subtract} from \"@flatten-js/boolean-op\";\nimport  {BOOLEAN_UNION} from \"@flatten-js/boolean-op\";\n\nimport {addToIntPoints, getSortedArray, splitByIntersections} from \"@flatten-js/boolean-op\";\nimport {removeNotRelevantChains, removeOldFaces, restoreFaces} from \"@flatten-js/boolean-op\";\n\nimport {arcSE, arcStartSweep, arcEndSweep} from \"./createArcs\";\n\n/**\n * Offset polygon by given value\n * @param {Polygon} polygon - input polygon\n * @param {number} value - offset value, may be positive or negative\n * @returns {Polygon} offsetPolygon\n */\n\n/**\n *\n * @param polygon\n * @param value\n *\n */\nexport function offset(polygon, value) {\n    let w = value;\n\n    let edges = [...polygon.edges];\n    let offsetPolygon = polygon.clone();\n    let offsetEdge;\n\n    if (w !== 0) {\n\n        for (let edge of edges) {\n            if (edge.isSegment()) {\n                offsetEdge = offsetSegment(edge.shape, w);\n            }\n            else {\n                offsetEdge = offsetArc(edge.shape, w);\n            }\n\n            if (w > 0) {\n                offsetPolygon = unify(offsetPolygon, offsetEdge);\n            }\n            else {\n                offsetPolygon = subtract(offsetPolygon, offsetEdge);\n            }\n        }\n    }\n\n    return offsetPolygon;\n}\n\nexport function offsetArc(arc, value) {\n\n    let w = Math.abs(value);\n\n    // Define outline polygon\n    let polygon = new Polygon();\n    let arc_cap1,arc_cap2;\n\n    let arc_outer = arc.clone();\n    arc_outer.r = arc.r + w;\n\n    arc_cap1 = arcStartSweep(arc.end, arc_outer.end, Math.PI, arc.counterClockwise);\n    arc_cap2 = arcEndSweep(arc.start, arc_outer.start, Math.PI, arc.counterClockwise);\n\n    let arc_inner = undefined;\n    if (arc.r > w) {\n        arc_inner = new Arc(arc.pc, arc.r - w, arc.endAngle, arc.startAngle,\n            arc.counterClockwise === CW ? CCW : CW);\n    }\n    else {\n        // arc_inner = new Arc(arc.pc, w - arc.r, arc.startAngle, arc.endAngle, arc.counterClockwise);\n        arc_inner = new Segment(arc_cap1.end, arc_cap2.start);\n    }\n\n    polygon.addFace([arc_outer, arc_cap1, arc_inner, arc_cap2]);\n    [...polygon.faces][0].setArcLength();\n\n    // Create intersection points\n    let ips = Face.getSelfIntersections([...polygon.faces][0], polygon.edges, false);\n\n    // TODO: getSelfIntersections returns points with correspondent edges - avoid duplication\n    ips = ips.slice(0,ips.length/2);    // for now slice array to avoid duplication in points\n\n    let int_points = [];\n    let edge_cap1;\n    let edge_cap2;\n\n    edge_cap1 = [...polygon.edges][1];\n    edge_cap2 = [...polygon.edges][3];\n\n    for (let pt of ips) {\n        addToIntPoints(edge_cap1, pt, int_points);\n        addToIntPoints(edge_cap2, pt, int_points);\n    }\n\n    // Sort intersection points and insert them as new vertices\n    let int_points_sorted = getSortedArray(int_points);\n    splitByIntersections(polygon, int_points_sorted);\n\n\n    // Set BV flags\n    let bv = OUTSIDE;\n    for (let int_point of int_points_sorted) {\n        int_point.edge_before.bv = bv;\n        int_point.edge_after.bv = (bv === OUTSIDE ? INSIDE : OUTSIDE);\n        bv = int_point.edge_after.bv;   // invert flag on each iteration\n    }\n\n    // Remove inner \"chains\"\n    let op = BOOLEAN_UNION;\n    removeNotRelevantChains(polygon, op, int_points_sorted, true);\n\n    // return int_points_sorted;\n    // Swap links\n    let num = int_points.length;\n    if (num > 0) {\n        let edge_before;\n        let edge_after;\n        // 0 => 3\n        edge_before = int_points_sorted[0].edge_before;\n        edge_after = int_points_sorted[num-1].edge_after;\n        edge_before.next = edge_after;\n        edge_after.prev = edge_before;\n\n        // Fill in missed links in intersection points\n        int_points_sorted[0].edge_after = int_points_sorted[num-1].edge_after;\n        int_points_sorted[num-1].edge_before = int_points_sorted[0].edge_before;\n\n        if (num === 4) {\n            // 2 => 1\n            edge_before = int_points_sorted[2].edge_before;\n            edge_after = int_points_sorted[1].edge_after;\n            edge_before.next = edge_after;\n            edge_after.prev = edge_before;\n\n            // Fill in missed links in intersection points\n            int_points_sorted[2].edge_after = int_points_sorted[1].edge_after;\n            int_points_sorted[1].edge_before = int_points_sorted[2].edge_before;\n        }\n\n        // remove old faces\n        removeOldFaces(polygon, int_points);\n        // restore faces\n        restoreFaces(polygon, int_points, int_points);\n    }\n\n    let face0 = [...polygon.faces][0];\n    if (face0.orientation() === ORIENTATION.CCW) {\n        polygon.reverse();\n    }\n    return polygon;\n}\n\nexport function offsetSegment(seg, value) {\n    let w = Math.abs(value);\n\n    let polygon = new Polygon();\n    let v_seg = vector(seg.end.x-seg.start.x, seg.end.y-seg.start.y);\n    let v_seg_unit = v_seg.normalize();\n    let v_left = v_seg_unit.rotate90CCW().multiply(w);\n    let v_right = v_seg_unit.rotate90CW().multiply(w);\n    let seg_left = seg.translate(v_left);\n    let seg_right = seg.translate(v_right).reverse();\n    let cap1 = arcSE(seg.end, seg_left.end, seg_right.start, CW);\n    let cap2 = arcSE(seg.start, seg_right.end, seg_left.start, CW);\n\n    polygon.addFace([seg_left, cap1, seg_right, cap2]);\n    return polygon;\n}\n","/**\n * Created by alexanderbol on 01/05/2017.\n */\n\nimport {Point, Segment, Arc, Circle, Box, Polygon, vector} from '@flatten-js/core';\nimport Flatten from '@flatten-js/core';\nimport {offsetSegment, offsetArc} from \"../models/polygonOffset\";\n\n/*\nlet debug_str = `\n+\t\t[0]\t{nrec=27 nalloc=27 h_ind_id=-1 ...} mat_cont_hdr_struc\tmat_cont_struc\n+\t\t[1]\t{pmin=59146400,5973200 pmax=59606001,6438000} mat_cont_lim_struc\tmat_cont_struc\n+\t\t[2]\t{nedge=23 nalloc=25 ntop=2 ...} mat_cont_poly_struc\tmat_cont_struc\n+\t\t[3]\t{pmin=59146400,5973200 pmax=59606001,6438000} mat_cont_lim_struc\tmat_cont_struc\n+\t\t[4]\t{ps=59192738,6363124 pe=59216000,6372800 pc=59216000,6340000 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[5]\t{ps=59216000,6372800 pe=59267652,6372800} mat_seg_struc\tmat_cont_struc\n+\t\t[6]\t{ps=59267652,6372800 pe=59267652,6307200 pc=59360000,6340000 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[7]\t{ps=59267652,6307200 pe=59229586,6307200} mat_seg_struc\tmat_cont_struc\n+\t\t[8]\t{ps=59229586,6307200 pe=59212000,6289614} mat_seg_struc\tmat_cont_struc\n+\t\t[9]\t{ps=59212000,6289614 pe=59212000,6056386} mat_seg_struc\tmat_cont_struc\n+\t\t[10]\t{ps=59212000,6056386 pe=59229586,6038800} mat_seg_struc\tmat_cont_struc\n+\t\t[11]\t{ps=59229586,6038800 pe=59469614,6038800} mat_seg_struc\tmat_cont_struc\n+\t\t[12]\t{ps=59469614,6038800 pe=59487200,6056386} mat_seg_struc\tmat_cont_struc\n+\t\t[13]\t{ps=59487200,6056386 pe=59487200,6100500} mat_seg_struc\tmat_cont_struc\n+\t\t[14]\t{ps=59487200,6100500 pe=59434000,6180000 pc=59520000,6180000 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[15]\t{ps=59434000,6180000 pe=59552800,6100500 pc=59520000,6180000 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[16]\t{ps=59552800,6100500 pe=59552800,6042800} mat_seg_struc\tmat_cont_struc\n+\t\t[17]\t{ps=59552800,6042800 pe=59543124,6019538 pc=59520000,6042800 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[18]\t{ps=59543124,6019538 pe=59506462,5982876} mat_seg_struc\tmat_cont_struc\n+\t\t[19]\t{ps=59506462,5982876 pe=59483200,5973200 pc=59483200,6006000 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[20]\t{ps=59483200,5973200 pe=59216000,5973200} mat_seg_struc\tmat_cont_struc\n+\t\t[21]\t{ps=59216000,5973200 pe=59192738,5982876 pc=59216000,6006000 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[22]\t{ps=59192738,5982876 pe=59156076,6019538} mat_seg_struc\tmat_cont_struc\n+\t\t[23]\t{ps=59156076,6019538 pe=59146400,6042800 pc=59179200,6042800 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[24]\t{ps=59146400,6042800 pe=59146400,6303200} mat_seg_struc\tmat_cont_struc\n+\t\t[25]\t{ps=59146400,6303200 pe=59156076,6326462 pc=59179200,6303200 cw=1} mat_curve_struc\tmat_cont_struc\n+\t\t[26]\t{ps=59156076,6326462 pe=59192738,6363124} mat_seg_struc\tmat_cont_struc\n`;\n*/\n\n/*\n+\t\tcircle\t{pc=40445880,-10500080 r=41327880}\tmat_circle_struc\n+\t\tcircle\t{pc=38215880,-7700040 r=92456}\tmat_circle_struc\n+\t\trect\t{pll=38215880,-7700040 w=92456 h=50000}\tmat_rect_struc\n+\t\tshape1\t{type=512 s={...} }\t_mat_shape_struc\n+\t\tline\t{ps=-18423,529080 pe=1047776,480195 r=60000 cap=0}\tmat_line_struc\n+\t\tarc\t{ps=1001217,249728 pe=752127,51853 pc=853697,179712 cw=??? r=60000 cap=0}\tmat_arc_struc\n */\n\nexport class Parser {\n    parseToWatchArray(str) {\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\n        let watchArray = [];\n        for (let line of arrayOfLines) {\n            watchArray.push(line.substring(line.indexOf('{')));\n        }\n        return watchArray;\n    }\n\n    parseToPoint(line) {\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n        let pointArr = parenth.split('=')[1].split(',');\n        let point = new Point(parseInt(pointArr[0],10), parseInt(pointArr[1],10));\n        point.label = line.split(/\\s+/)[1];\n        return point;\n    }\n\n    parseToSegment(line) {\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\n\n        let psArr = termArr[0].split('=')[1].split(',');\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\n\n        let peArr = termArr[1].split('=')[1].split(',');\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\n\n        return new Segment(ps, pe);\n    }\n\n    parseToArc(line) {\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\n\n        let psArr = termArr[0].split('=')[1].split(',');\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\n\n        let peArr = termArr[1].split('=')[1].split(',');\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\n\n        let pcArr = termArr[2].split('=')[1].split(',');\n        let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\n\n        let cwStr = termArr[3].split('=')[1];\n        let counterClockwise = cwStr === '0' ? true : false;\n\n        let startAngle = vector(pc,ps).slope;\n        let endAngle = vector(pc, pe).slope;\n\n        if (Flatten.Utils.EQ(startAngle, endAngle)) {\n            // endAngle += 2*Math.PI;\n            endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\n        }\n        let r = vector(pc, ps).length;\n\n        return new Arc(pc, r, startAngle, endAngle, counterClockwise);\n    }\n\n    parseToCircle(line) {\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\n\n        let pcArr = termArr[0].split('=')[1].split(',');\n        let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\n        let r = parseInt(termArr[1].split('=')[1],10);\n        // let circle = new Circle(pc, r);\n        // let polygon = new Polygon();\n        // polygon.addFace(circle);\n        return new Circle(pc, r);;\n    }\n\n    parseToRectangle(line) {\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\n\n        let pllArr = termArr[0].split('=')[1].split(',');\n        let xmin = parseInt(pllArr[0],10);\n        let ymin = parseInt(pllArr[1],10);\n        let width = parseInt(termArr[1].split('=')[1],10);\n        let height = parseInt(termArr[2].split('=')[1],10);\n\n        let box = new Box(xmin, ymin, xmin + width, ymin + height);\n        let polygon = new Polygon();\n        polygon.addFace(box);\n        return polygon;\n        // return new Box(xmin, ymin, xmin + width, ymin + height);\n    }\n\n    parseToODBLine(line) {\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\n\n        let psArr = termArr[0].split('=')[1].split(',');\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\n\n        let peArr = termArr[1].split('=')[1].split(',');\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\n\n        let w = parseInt(termArr[2].split('=')[1],10);\n\n        let segment = new Segment(ps, pe);\n        let polygon = w > 0 ? offsetSegment(segment, w) : new Polygon();\n\n        return polygon;\n    }\n\n    parseToODBArc(line) {\n        let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n        let termArr = parenth.split(' ');             // array of terms \"attr=value\"\n\n        let psArr = termArr[0].split('=')[1].split(',');\n        let ps = new Point(parseInt(psArr[0],10), parseInt(psArr[1],10));\n\n        let peArr = termArr[1].split('=')[1].split(',');\n        let pe = new Point(parseInt(peArr[0],10), parseInt(peArr[1],10));\n\n        let pcArr = termArr[2].split('=')[1].split(',');\n        let pc = new Point(parseInt(pcArr[0],10), parseInt(pcArr[1],10));\n\n        let cwStr = termArr[3].split('=')[1];\n        let counterClockwise = cwStr === '0' ? true : false;\n\n        let startAngle = vector(pc,ps).slope;\n        let endAngle = vector(pc, pe).slope;\n\n        if (Flatten.Utils.EQ(startAngle, endAngle)) {\n            // endAngle += 2*Math.PI;\n            endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\n        }\n        let r = vector(pc, ps).length;\n\n        let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\n\n        let w = parseInt(termArr[4].split('=')[1],10);\n\n        let polygon = w > 0 ? offsetArc(arc, w) : new Polygon();\n\n        return polygon;\n    }\n\n    parseToPolygon(str) {\n        let polygon = new Polygon();\n        // let mulitystr = debug_str;\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\n\n        for (let i=0; i < arrayOfLines.length; i++) {\n            let line = arrayOfLines[i];\n            if (line.search('mat_cont_poly_struc') >= 0) {\n                let parenth = line.match(/\\{([^)]+)\\}/)[1];       // string inside {..}\n                let termArr = parenth.split(' ');                 // array of terms \"attr=value\"\n                let nedgesTerm = termArr[0];                      // \"nedge=nn\"\n                let nedgesStr = nedgesTerm.split('=')[1];\n                let nedges = parseInt(nedgesStr,10);\n\n                // Create new face from next #nedges of segments and arcs\n                let edges = [];\n                for (let j=i+2; j < i+2+nedges; j++) {\n                    line = arrayOfLines[j];\n                    // let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n                    // let termArr = parenth.split(' ');             // array of terms \"attr=value\"\n\n                    if (line.search('mat_seg_struc') >= 0) {\n                        let segment = this.parseToSegment(line);\n                        edges.push(segment);\n                    }\n                    else if (line.search('mat_curve_struc') >= 0) {\n                        let arc = this.parseToArc(line);\n                        edges.push(arc);\n                    }\n                }\n                polygon.addFace(edges);\n            }\n        }\n        return polygon;\n    }\n\n    parseToPoints(str) {\n        let points = [];\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\n        for (let line of arrayOfLines) {\n            if (line.search('point_struc') >= 0) {\n                let parenth = line.match(/\\{([^)]+)\\}/)[1];   // string inside {..}\n                let pointArr = parenth.split('=')[1].split(',');\n                let point = new Point(parseInt(pointArr[0],10), parseInt(pointArr[1],10));\n                point.label = line.split(/\\s+/)[1];\n                points.push(point);\n            }\n        }\n        return points;\n    }\n\n    parseToShapes(str) {\n        let shapes = [];\n        let shape;\n        let arrayOfLines = str.match(/[^\\r\\n]+/g);\n        for (let line of arrayOfLines) {\n            if (line.search('point_struc') >= 0) {\n                shape = this.parseToPoint(line);\n            }\n            else if (line.search('_seg_struc') >= 0) {\n                shape = this.parseToSegment(line);\n            }\n            else if (line.search('_curve_struc') >= 0) {\n                shape = this.parseToArc(line);\n            }\n            else if (line.search('_circle_struc') >= 0) {\n                shape = this.parseToCircle(line);\n            }\n            else if (line.search('_rect_struc') >= 0) {\n                shape = this.parseToRectangle(line);\n            }\n            else if (line.search('_line_struc') >= 0) {\n                shape = this.parseToODBLine(line);\n            }\n            else if (line.search('_arc_struc') >= 0) {\n                shape = this.parseToODBArc(line);\n            }\n            shapes.push(shape);\n        }\n        return shapes;\n    }\n\n    parse(str) {\n        /* try polygon */\n        let polygon = this.parseToPolygon(str);\n        if (polygon.edges.size > 0 && polygon.faces.size > 0) {\n            return [polygon];\n        }\n\n        /* try array of shapes excluding polygon */\n        let shapes = this.parseToShapes(str);\n        if (shapes.length > 0) {\n            return shapes;\n        }\n\n        /* try array of points */\n        let points = this.parseToPoints(str);\n        if (points.length > 0) {\n            return points;\n        }\n\n    }\n}\n\n","import * as ActionTypes from \"../actionTypes\";\nimport {Parser} from \"../../dataParsers/parser\";\n\nconst unitsList = [\n    {\n        name: \"pixels\",\n        decimals: 0,\n        divisor: 1\n    },\n    {\n        name: \"inch\",\n        decimals: 7,\n        divisor: 10160000\n    },\n    {\n        name: \"mm\",\n        decimals: 6,\n        divisor: 400000\n    }];\n\nconst defaultAppState = {\n    title: \"Debug Viewer\",\n    version: process.env.REACT_APP_VERSION,\n    build: \"\",\n    units: \"pixels\",\n    decimals: 0,\n    divisor: 1,\n    // bg: \"#F1F1F1\",\n    parser: new Parser(),\n    widthOn: true,\n    displayVertices: false,\n    displayLabels: true,\n    measurePointsActive: false,\n    zoomFactor: undefined,\n    originX: undefined,\n    originY: undefined,\n    showAboutPopup: false,\n    importDataToNewLayer: true,       // if false, import data to affected layer\n    showSkeletonRecognitionButton: false,\n    applySkeletonRecognition: false,\n    stage: null,\n    showSpinner: false,\n    showLayerList: false,\n    showDownloadPopup: false,\n    showUploadPopup: false,\n};\n\nconst app = (state = defaultAppState, action) => {\n    switch (action.type) {\n        case ActionTypes.NEW_STAGE_CREATED:\n            return Object.assign({}, state, {\n                stage: action.stage,\n                zoomFactor: action.stage.zoomFactor * action.stage.resolution,\n                originX: action.stage.origin.x,\n                originY: action.stage.origin.y,\n            });\n\n        case ActionTypes.STAGE_UNMOUNTED:\n            return Object.assign({}, state, {\n                stage: null,\n                zoomFactor: undefined,\n                originX: undefined,\n                originY: undefined\n            });\n\n        case ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE:\n        case ActionTypes.PAN_AND_ZOOM_TO_SHAPE:\n        case ActionTypes.PINCH_MOVED_ON_STAGE:\n            return Object.assign({}, state, {\n                zoomFactor: action.stage.zoomFactor * action.stage.resolution,\n                originX: action.stage.origin.x,\n                originY: action.stage.origin.y,\n            });\n        case ActionTypes.MOUSE_MOVED_ON_STAGE:\n            return Object.assign({}, state, {\n                originX: action.stage.origin.x,\n                originY: action.stage.origin.y\n            });\n        case ActionTypes.TOGGLE_UNITS_CLICKED:\n            let curUnitsId = unitsList.findIndex(units => state.units === units.name);\n            let newUnits = unitsList[(curUnitsId + 1) % 3];\n            return Object.assign({}, state, {\n                units: newUnits.name,\n                decimals: newUnits.decimals,\n                divisor: newUnits.divisor\n            });\n        case ActionTypes.TOGGLE_WIDTH_MODE_CLICKED:\n            return Object.assign({}, state, {\n                widthOn: !state.widthOn,\n                displayVertices: state.widthOn ? state.displayVertices : false\n            });\n        case ActionTypes.TOGGLE_DISPLAY_VERTICES_CLICKED:\n            if (state.displayVertices) {\n                return Object.assign({}, state, {\n                    displayVertices: false\n                });\n            }\n            else {\n                return Object.assign({}, state, {\n                    widthOn: false,\n                    displayVertices: true\n                });\n            }\n\n        case ActionTypes.TOGGLE_DISPLAY_LABELS_CLICKED:\n            return Object.assign({}, state, {\n                displayLabels: !state.displayLabels\n            });\n\n        case ActionTypes.TOGGLE_ABOUT_POPUP_CLICKED:\n            return Object.assign({}, state, {\n                showAboutPopup: !state.showAboutPopup\n            });\n\n        // case ActionTypes.CLOSE_ABOUT_POPUP_BUTTON_PRESSED:\n        //     return Object.assign({}, state, {\n        //         showAboutPopup: false\n        //     });\n\n        case ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED:\n            return Object.assign({}, state, {\n                measurePointsActive: false\n            });\n\n        case ActionTypes.MEASURE_POINTS_BUTTON_PRESSED:\n            return Object.assign({}, state, {\n                measurePointsActive: true\n            });\n        case ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED:\n            return Object.assign({}, state, {\n                measurePointsActive: false\n            });\n        case ActionTypes.SKELETON_RECOGNITION_URI:\n            return Object.assign({}, state, {\n                showSkeletonRecognitionButton: true\n            });\n        case ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED:\n            return Object.assign({}, state, {\n                applySkeletonRecognition: true\n            });\n        case ActionTypes.ASYNC_OPERATION_STARTED:\n            return Object.assign({}, state, {\n                showSpinner: true\n            });\n        case ActionTypes.ASYNC_OPERATION_ENDED:\n            return Object.assign({}, state, {\n                showSpinner: false\n            });\n        case ActionTypes.AABB_TREE_NEXT_LEVEL:\n            return state;\n        case ActionTypes.TOGGLE_SHOW_LAYER_LIST_CLICKED:\n            return {\n                ...state,\n                showLayerList: !state.showLayerList\n            };\n        case ActionTypes.TOGGLE_DOWNLOAD_POPUP_CLICKED:\n            return {\n                ...state,\n                showDownloadPopup: !state.showDownloadPopup\n            };\n        case ActionTypes.TOGGLE_UPLOAD_POPUP_CLICKED:\n            return {\n                ...state,\n                showUploadPopup: !state.showUploadPopup\n            }\n        default:\n            return state;\n    }\n};\n\nexport default app;\n","\nlet defaultStyle = {\n    strokeStyle: 1,\n    stroke: \"#FF0303\",\n    fill: \"#FF0303\",\n    alpha: 1.0\n};\n\n/* Class Model represents data model that will be added to layer */\nclass Model {\n    constructor(geom = undefined, style = undefined, label = \"\") {\n        this.geom = geom;\n        this.style = style || defaultStyle;\n        this.label = label;\n    }\n\n    clone() {\n        let model = new Model(this.geom, this.style, this.label);\n        return Object.assign(model, this);\n    }\n\n    get box() {\n        return this.geom.box;\n    }\n/*\n    static transformPoint(pt, stage) {\n        return new Flatten.Point(stage.W2C_X(pt.x), stage.W2C_Y(pt.y));\n    }\n\n    static transformSegment(segment, stage) {\n        return new Flatten.Segment(\n            Model.transformPoint(segment.ps, stage),\n            Model.transformPoint(segment.pe, stage)\n        )\n    }\n\n    static transformArc(arc, stage) {\n        return new Flatten.Arc(\n            Model.transformPoint(arc.pc, stage),\n            stage.W2C_Scalar(arc.r),\n            arc.startAngle,\n            arc.endAngle,\n            arc.counterClockwise\n        )\n    }\n\n    static transformEdge(shape, stage) {\n        if (shape instanceof Flatten.Segment) {\n            return Model.transformSegment(shape, stage);\n        }\n        else if (shape instanceof Flatten.Arc) {\n            return Model.transformArc(shape, stage);\n        }\n    }\n\n    static transformFace(face, stage) {\n        // Get shapes of face as array\n        let shapes = [];\n        for (let edge of face) {\n            shapes.push(edge.shape);\n        }\n\n        // Transform array of edges\n        return shapes.map(shape => Model.transformEdge(shape, stage));\n    }\n\n    static transformPolygon(polygon, stage) {\n        let newPolygon = new Flatten.Polygon();\n        let shapes = [];\n        for (let face of polygon.faces) {\n            shapes = Model.transformFace(face, stage);\n            newPolygon.addFace(shapes);\n        }\n        return newPolygon;\n    }\n*/\n}\n\nexport default Model;","/**\n * Created by alexanderbol on 17/04/2017.\n */\n\nimport {Point, Box} from '@flatten-js/core';\n// import { Shape } from '../models/shape';\nimport Model from './model';\n\nclass Layer {\n    constructor(stage) {\n        // super();\n        // cannot define Layer as extension of PlanarSet due to bug in compiler ?\n        this.stage = stage;\n        this.shapes = [];         // new Flatten.PlanarSet();\n        this.name = \"\";\n        this.color = \"\";\n        this.title = \"\";\n        this.displayed = false;\n        this.edited = false;\n        this.affected = false;\n    }\n\n    clone() {\n        let layer = new Layer(this.stage);\n        return Object.assign(layer, this);\n    }\n\n    add(shape) {\n        if (shape instanceof Model) {\n            this.shapes.push(shape);       // add(shape)\n        }\n        else {\n            let geom = shape;\n            let newShape = new Model(geom, {}, shape.label) // , this.stage);\n            this.shapes.push(newShape);     // add(newShape);\n        }\n        return this;\n    }\n\n    addShapesArray(shapes) {\n        for (let shape of shapes) {\n            this.add(shape);\n        }\n        return this;\n    }\n\n    get box() {\n        let box = new Box();\n        for (let shape of this.shapes) {\n            box = box.merge(shape.geom instanceof Box ? shape.clone() : shape.box);\n        }\n        return box;\n    }\n\n    get center() {\n        let box = this.box;\n        return new Point((box.xmin + box.xmax)/2, (box.ymin + box.ymax)/2);\n    }\n\n    toggleDisplayed(color) {\n        let displayed = !this.displayed;\n        return Object.assign(this.clone(),\n            {\n                displayed : displayed,\n                color: color\n            });\n    }\n\n    setAffected(affected) {\n        this.affected = affected;\n        return this;\n        // return Object.assign(this.clone(),\n        //     {\n        //         affected : affected\n        //     });\n    }\n\n    setEdited(edited) {\n        return Object.assign(this.clone(),\n            {\n                edited : edited\n            });\n    }\n\n    setNameAndTitle(name,title) {\n        return Object.assign(this.clone(),\n            {\n                name : name,\n                title: title,\n                edited: false\n            });\n    }\n\n    setAlpha() {\n        for(let shape of this.shapes) {\n            shape.alpha = this.displayed ? 1 : 0;\n        }\n        return this.shapes;\n    }\n\n    // toggleExpanded(shapeToggle) {\n    //     for(let shape of this.shapes) {\n    //         if (shape === shapeToggle) {\n    //             shape.expanded = !shape.expanded;\n    //         }\n    //     }\n    //     return this;\n    // }\n\n    toJSON() {\n        return {\n            name: this.name,\n            title: this.title,\n            shapes: JSON.stringify(this.shapes, null, ' ')\n        };\n    }\n}\n\nexport default Layer;\n","/**\n * Created by alexanderbol on 20/04/2017.\n */\n\nimport Layer from '../models/layer';\n\nconst colors = [\n    \"#FF0303\",\n    \"#4AA403\",\n    \"#540080\",\n    \"#FFFF40\",\n    \"#FF0080\",\n    \"#AED424\",\n    \"#545400\",\n    \"#FFA980\",\n    \"#A95480\",\n    \"#A9A9FF\",\n    \"#00FF00\",\n    \"#FFEE76\",\n    \"#A40576\",\n    \"#4385C8\",\n    \"#1CC826\",\n    \"#BDBD00\",\n    \"#48316E\",\n    \"#14616E\",\n    \"#8040BD\",\n    \"#DC7676\",\n    \"#924845\",\n    \"#A90000\",\n    \"#FFA900\"\n];\n\nclass Layers {\n\n    static newLayer(stage, layers) {\n        let layer = new Layer(stage);\n        layer.name = Layers.getNewName(layers);\n        if (layers.length === 0) { // first layer\n            // layer.color = Layers.getNextColor(layers);\n            layer.displayed = false;\n            layer.affected = false;\n        }\n        return layer;\n    }\n\n    static get defaultName() {\n        return \"layer\";\n    }\n\n    static getNewName(layers) {\n        let name = Layers.defaultName;\n        let inc = 1;\n        let comparator = (layer) => layer.name === name;\n        while (layers.find(comparator) ) {\n            name = Layers.defaultName + inc;\n            inc++;\n        }\n        return name;\n    }\n\n    static getAffected(layers) {\n        return layers.find((lay) => lay.affected);\n    }\n\n    static setAffected(layers, layer) {\n        let currentAffectedLayer = Layers.getAffected(layers);\n        if (currentAffectedLayer) {\n            currentAffectedLayer.affected = false;\n        }\n        layer.affected = true;\n    }\n\n    static getNextColor(layers) {\n        let color = \"\";\n        for (let col of colors) {\n            if (!layers.find((layer) =>\n                layer.displayed && layer.color === col)) {\n                color = col;\n                break;\n            }\n        }\n        return color;\n    }\n\n    static delete(layers, layer) {\n        let index = layers.findIndex((l) => l === layer);\n        let newLayers = layers.filter(l => l !== layer);\n        if (index > 0) {\n            newLayers[index-1].affected = true;\n            if (newLayers[index-1].color === \"\") {\n                newLayers[index - 1].color = Layers.getNextColor(newLayers);\n            }\n            newLayers[index-1].displayed = true;\n        }\n        return newLayers;\n        // another option to delete from array:\n        // const newLayers = [...layers]\n        // return newLayers.splice( index, 1);\n    }\n\n    static sort(layers) {\n        let newLayers = layers.slice();\n        newLayers.sort( function(l1, l2) {\n            let name1 = l1.name.toUpperCase();\n            let name2 = l2.name.toUpperCase();\n            if (name1 < name2) {\n                return -1;\n            }\n            if (name1 > name2) {\n                return 1;\n            }\n            return 0;\n        });\n        return newLayers;\n    }\n\n    static toJSON(layers) {\n        return layers.map( layer => layer.toJSON() );\n    }\n}\n\nexport default Layers;","import * as ActionTypes from \"../actionTypes\";\nimport Layers from \"../../models/layers\";\n\nconst layers = (state = [], action) => {\n    let affectedLayer = state.find(layer => layer.affected);\n    let affectedLayerId = state.findIndex(layer => layer.affected);\n    let newLayer;\n\n    switch (action.type) {\n        case ActionTypes.ADD_LAYER_BUTTON_PRESSED:\n            newLayer = Layers.newLayer(action.stage, state);\n            return [...state, newLayer];\n\n        case ActionTypes.ADD_NEW_LAYER:\n            return [...state, action.layer];\n\n        case ActionTypes.DELETE_LAYER_BUTTON_PRESSED:\n            if (affectedLayer) {\n                return Layers.delete(state, affectedLayer);\n            }\n            else {\n                return state;\n            }\n\n        case ActionTypes.CLEAR_ALL_BUTTON_CLICKED:\n            return [];\n\n        case ActionTypes.SORT_LAYERS_BUTTON_PRESSED:\n            return Layers.sort(state);\n\n        case ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED:\n            let color = \"\";\n            if (!action.layer.displayed) {\n                color = Layers.getNextColor(state);\n                if (color === \"\") return;  // no free colors\n            }\n            return state.map((layer) => {\n                if (layer !== action.layer) {\n                    // if action.layer will be undisplayed,\n                    // it cannot become affected, then\n                    // keep affected on this layer\n                    if (action.layer.displayed) {\n                        return layer;\n                    }\n                    else {\n                        return layer.setAffected(false);\n                    }\n                }\n                else {\n                    let newLayer = layer.toggleDisplayed(color);\n                    newLayer.affected = newLayer.displayed;\n                    return newLayer;\n                }\n                // return layer.toggleDisplayed(color);\n            });\n\n        case ActionTypes.TOGGLE_AFFECTED_LAYER_PRESSED:\n            return state.map((layer) => {\n                if (layer !== action.layer) {\n                    return layer.setAffected(false);\n                }\n                else {\n                    return layer.setAffected(!layer.affected);\n                }\n            });\n\n        // case ActionTypes.NEW_SHAPE_PASTED:\n        //     return state.map((layer) => {\n        //         if (layer.affected) {\n        //             return layer.addShapesArray(action.shapesArray);\n        //         }\n        //         else {\n        //             return layer;\n        //         }\n        //     });\n\n        case ActionTypes.OPEN_LAYER_EDIT_FORM_PRESSED:\n            return state.map((layer) => {\n                if (layer !== affectedLayer) {\n                    return layer;\n                }\n                else {\n                    return layer.setEdited(true);\n                }\n            });\n\n        case ActionTypes.SUBMIT_LAYER_EDIT_FORM_PRESSED:\n            return state.map((layer) => {\n                if (layer.edited) {\n                    return layer.setNameAndTitle(action.newLayer.name, action.newLayer.title);\n                }\n                else {\n                    return layer;\n                }\n            });\n\n        case ActionTypes.ESCAPE_LAYER_EDIT_FORM_PRESSED:\n            return state.map((layer) => {\n                if (layer.edited) {             // !== action.layer) {\n                    return layer.setEdited(false);\n                }\n                else {\n                    return layer;\n                }\n            });\n\n        case ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED:\n            if (affectedLayerId === state.length - 1) {\n                return state;\n            }\n            else {\n\n                let nextLayer = state[affectedLayerId + 1];\n\n                return state.map(layer => {\n                    if (layer === affectedLayer) {\n                        let newCurLayer = layer.toggleDisplayed(\"\");\n                        newCurLayer.affected = false;\n                        return newCurLayer;\n                    }\n                    else if (layer === nextLayer) {\n                        let color = affectedLayer.color;\n                        let newNextLayer = layer.toggleDisplayed(color);\n                        newNextLayer.affected = true;\n                        return newNextLayer;\n                    }\n                    else {\n                        return layer;\n                    }\n                });\n            }\n\n        case ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED:\n            if (affectedLayerId === 0) {\n                return state;\n            }\n            else {\n                let nextLayer = state[affectedLayerId - 1];\n\n                return state.map(layer => {\n                    if (layer === affectedLayer) {\n                        let newCurLayer = layer.toggleDisplayed(\"\");\n                        newCurLayer.affected = false;\n                        return newCurLayer;\n                    }\n                    else if (layer === nextLayer) {\n                        let newNextLayer = layer.toggleDisplayed(affectedLayer.color);\n                        newNextLayer.displayed = true;\n                        newNextLayer.affected = true;\n                        return newNextLayer;\n                    }\n                    else {\n                        return layer;\n                    }\n                });\n            }\n\n        default:\n            return state;\n    }\n};\n\nexport default layers;","import * as ActionTypes from \"../actionTypes\";\n\nconst defaultMouseState = {\n    x: 0,\n    y: 0,\n    startX: undefined,\n    startY: undefined,\n    touchPoints: undefined\n};\n\nconst mouse = (state = defaultMouseState, action) => {\n    switch (action.type) {\n        case ActionTypes.MOUSE_MOVED_ON_STAGE:\n            return Object.assign({}, state, {\n                x: action.x,\n                y: action.y\n            });\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\n            return Object.assign({}, state, {\n                startX: action.x,\n                startY: action.y\n            });\n        case ActionTypes.MOUSE_UP_ON_STAGE:\n            return Object.assign({}, state, {\n                startX: undefined,\n                startY: undefined\n            });\n\n        case ActionTypes.PINCH_DOWN_ON_STAGE: {\n            return {\n                ...state,\n                touchPoints: [\n                    {x: action.x1, y: action.y1},\n                    {x: action.x2, y: action.y2}\n                ]\n            }\n        }\n        // case ActionTypes.PINCH_MOVED_ON_STAGE: {\n        //     return {\n        //         ...state,\n        //         touchPoints: [\n        //             {x: action.x1, y: action.y1},\n        //             {x: action.x2, y: action.y2}\n        //         ]\n        //     }\n        // }\n        case ActionTypes.PINCH_UP_ON_STAGE: {\n            return {\n                ...state,\n                touchPoints: undefined\n            }\n        }\n\n        default:\n            return state;\n    }\n};\n\nexport default mouse;","import * as ActionTypes from \"../actionTypes\";\nimport Flatten from \"@flatten-js/core\";\n\nconst defaultMeasureShapesTool = {\n    measureShapesActive: false,\n    measureShapesFirstClick: true,\n    hoveredShape: null,\n    firstMeasuredShape: null,\n    secondMeasuredShape: null,\n    firstMeasuredLayer: null,\n    secondMeasuredLayer: null,\n    distance: undefined,\n    shortestSegment: null\n};\n\nconst is_mobile = window.mobilecheck();\n\nconst measureShapesTool = (state = defaultMeasureShapesTool, action) => {\n    switch (action.type) {\n        case ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED:\n            return Object.assign({}, defaultMeasureShapesTool, {\n                measureShapesActive: true\n            });\n        case ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED:\n            return Object.assign({}, defaultMeasureShapesTool);\n\n        case ActionTypes.MEASURE_POINTS_BUTTON_PRESSED:\n            return Object.assign({}, defaultMeasureShapesTool);\n\n        case ActionTypes.MOUSE_ROLL_OVER_SHAPE:\n            return Object.assign({}, state, {\n                hoveredShape: state.measureShapesActive ? action.shape : null\n            });\n        case ActionTypes.MOUSE_ROLL_OUT_SHAPE:\n            return Object.assign({}, state, {\n                hoveredShape: null\n            });\n        case ActionTypes.MOUSE_CLICKED_ON_SHAPE:\n            if (!state.measureShapesActive) {\n                return state;\n            }\n            // measureShapesActive\n\n            if (state.measureShapesFirstClick) {\n                return Object.assign({}, state, {\n                    firstMeasuredShape: action.shape,\n                    firstMeasuredLayer: action.layer,\n                    secondMeasuredShape: null,\n                    secondMeasuredLayer: null,\n                    measureShapesFirstClick: false,\n                    distance: undefined,\n                    shortestSegment: null\n                })\n            }\n            else {    // second click\n                if (action.shape === state.firstMeasuredShape) {\n                    return state;  // second click on the same shape\n                }\n\n                let shape1 = state.firstMeasuredShape.geom;\n                let shape2 = action.shape.geom;\n                let distance, shortestSegment;\n                // if (shape1 instanceof Flatten.Polygon && shape2 instanceof Flatten.Polygon) {\n                //     [distance, shortestSegment] = Flatten.Distance.polygon2polygon(shape1, shape2);\n                // }\n                // else {\n                [distance, shortestSegment] = Flatten.Distance.distance(shape1, shape2);\n                // }\n\n\n                return Object.assign({}, state, {\n                    secondMeasuredShape: action.shape,\n                    secondMeasuredLayer: action.layer,\n                    measureShapesFirstClick: true,\n                    distance: distance,\n                    shortestSegment: shortestSegment\n                });\n            }\n        case ActionTypes.MOUSE_DOWN_ON_STAGE:\n            if (state.hoveredShape || is_mobile) {\n                return state\n            }\n            else {\n                return Object.assign({}, state, {\n                    measureShapesFirstClick: true,\n                    firstMeasuredShape: null,\n                    firstMeasuredLayer: null,\n                    secondMeasuredShape: null,\n                    secondMeasuredLayer: null,\n                    distance: undefined,\n                    shortestSegment: null\n                });\n            }\n\n        case ActionTypes.DELETE_LAYER_BUTTON_PRESSED:\n            if (action.layer === state.firstMeasuredLayer ||\n                action.layer === state.secondMeasuredLayer) {\n                return Object.assign({}, defaultMeasureShapesTool);\n            }\n            else {\n                return state;\n            }\n\n        case ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED:\n            if (action.layer.displayed &&\n                (action.layer === state.firstMeasuredLayer ||\n                    action.layer === state.secondMeasuredLayer)) {\n                return Object.assign({}, defaultMeasureShapesTool);\n            }\n            else {\n                return state;\n            }\n\n        default:\n            return state;\n    }\n}\n\nexport default measureShapesTool;","import * as ActionTypes from \"../actionTypes\";\n\nconst documentDefaultState = {\n    id: undefined,\n    name: \"\",\n    owner: \"Alex Bol\",\n    lastUpdated: undefined\n};\n\nconst cloudStorageDefaultState = {\n    document: documentDefaultState,\n    documentsList: {}\n};\n\nfunction isUpToDate(stateDocumentsList, actionDocumentsList) {\n    if (actionDocumentsList === null || actionDocumentsList === undefined)\n        return true;\n\n    if (Object.keys(stateDocumentsList).length !== Object.keys(actionDocumentsList).length)\n        return false;\n    for (let key in stateDocumentsList) {\n        if (!(actionDocumentsList.hasOwnProperty(key) && (stateDocumentsList[key].lastUpdated !== actionDocumentsList[key].lastUpdated))) {\n            return false\n        }\n    }\n\n    return true;\n}\n\nconst cloudStorage = (state = cloudStorageDefaultState, action) => {\n    switch (action.type) {\n        case ActionTypes.REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED:\n            return {\n                ...state,\n                document: {\n                    id: action.id,\n                    name: action.name,\n                    owner: action.owner,\n                    lastUpdated: action.lastUpdated\n                }\n            };\n\n        case ActionTypes.REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED:\n            return {\n                ...state,\n                document: {\n                    id: action.id,\n                    name: action.name,\n                    owner: action.owner,\n                    lastUpdated: action.lastUpdated\n                }\n            };\n\n        case ActionTypes.REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED:\n            return {\n                ...state,\n                document: {\n                    ...state.document,\n                    lastUpdated: action.lastUpdated\n                }\n            };\n\n        case ActionTypes.DOCUMENT_NAME_UPDATED:\n            return {\n                ...state,\n                document: {\n                    ...state.document,\n                    name: action.name\n                }\n            };\n\n        case ActionTypes.DELETE_DOCUMENT_FROM_DATABASE_SUCCEED:\n            let { [action.id]: document, ...newList } = state.documentsList;\n            return {\n                ...state,\n                document: state.document.id === action.id ? documentDefaultState : state.document,\n                documentsList: newList\n            };\n\n        case ActionTypes.DOCUMENT_SELECTED_FROM_LIST:\n            return {\n                ...state,\n                document: action.document\n            };\n\n        case ActionTypes.CLEAR_ALL_BUTTON_CLICKED:\n            return {\n                ...state,\n                document: documentDefaultState\n            };\n\n        case ActionTypes.REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED:\n            return isUpToDate(state.documentsList, action.documentsList) ?\n                state :\n            {\n                ...state,\n                documentsList: action.documentsList\n            };\n\n        default:\n            return state;\n    }\n};\n\nexport default cloudStorage","import * as ActionTypes from \"../actionTypes\";\n\nconst defaultState = {\n    uploadStarted:  false,\n    uploadCompleted: false,\n    uploadedFiles: []\n};\n\nconst upload = (state=defaultState, action) => {\n    switch (action.type) {\n        case ActionTypes.INITIALIZE_UPLOAD_STATE:\n            return defaultState;\n\n        case ActionTypes.FILES_UPLOAD_COMPLETED:\n            return {\n                ...state,\n                uploadCompleted: true,\n                uploadedFiles: action.uploadedFiles\n            };\n        default:\n            return state\n    }\n};\n\nexport default upload","/**\n * Created by alexanderbol on 13/04/2017.\n */\n\nimport {combineReducers} from 'redux';\n\nimport auth from \"./reducers/auth\";\nimport app from \"./reducers/app\";\nimport layers from \"./reducers/layers\";\nimport mouse from \"./reducers/mouse\";\nimport measureShapesTool from \"./reducers/measureShapesTool\";\nimport cloudStorage from \"./reducers/cloudStorage\";\nimport upload from \"./reducers/upload\";\n\nconst reducer = combineReducers({\n    auth,\n    app,\n    layers,\n    upload,\n    cloudStorage,\n    measureShapesTool,\n    mouse\n});\n\nexport default reducer;\n","import * as ActionTypes from '../store/actionTypes';\n\nconst log = ({ getState, dispatch }) => next => action => {\n\n    if(action.type !== ActionTypes.MOUSE_MOVED_ON_STAGE) {\n        console.log('ACTION: ' + action.type, action);\n    }\n\n    next(action);\n};\n\nexport default log;","import * as ActionTypes from \"../store/actionTypes\";\nimport Layers from \"../models/layers\";\n\nconst pasteData = ({ dispatch, getState }) => next => action => {\n\n    if (action.type !== ActionTypes.DATA_FROM_BUFFER_PASTED) {\n        return next(action);\n    }\n\n    let state = getState();\n    let stage = state.app.stage;\n    let layers = state.layers;\n    let parser = state.app.parser;\n\n    let layer = undefined;\n    if (state.app.importDataToNewLayer) {   // import data to new layer\n        layer = Layers.newLayer(stage, layers);\n        layers.push(layer);\n    }\n    else {                                  // import data to affected layer\n        layer = layers.find((lay) => lay.affected);\n        if (!layer) {                       // if no layer affected, add new\n            layer = Layers.newLayer(stage, layers);\n            layers.push(layer);\n        }\n    }\n\n    // Paste data from ClipBoard\n    for (let item of action.data.items) {\n        item.getAsString((string) => {\n            let shapesArray = parser.parse(string);\n\n            // TODO: add something like poly.valid()\n\n            if (shapesArray.length > 0) {\n                for (let shape of shapesArray) {\n                    layer.add(shape);\n                }\n            }\n\n            if (layer.shapes.length > 0) {\n                dispatch({\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n                    shape: layer,\n                    stage: stage\n                });\n                dispatch({\n                    type: ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED,\n                    layer: layer\n                })\n            }\n\n        });\n\n        break;\n    }\n\n};\n\nexport default pasteData;\n","import * as ActionTypes from '../store/actionTypes';\n\nconst stageController = ({getState, dispatch}) => next => action => {\n\n    const mouse = getState().mouse;\n    let stage = action.stage;\n\n\n    if (stage) {\n        switch (action.type) {\n            case ActionTypes.STAGE_RESIZED:\n                stage.resize();\n                break;\n\n            case ActionTypes.MOUSE_DOWN_ON_STAGE:\n                stage.panByMouseStart();\n                break;\n\n            case ActionTypes.MOUSE_MOVED_ON_STAGE:\n                if (action.dx !== undefined && action.dy !== undefined) {\n                    stage.panByMouseMove(action.dx, action.dy);\n                }\n                break;\n\n            case ActionTypes.MOUSE_UP_ON_STAGE:\n                stage.panByMouseStop();\n                break;\n\n            case ActionTypes.PAN_AND_ZOOM_TO_SHAPE:\n                let center = action.shape.center;\n                let box = action.shape.box;\n                if (isNaN(center.x) || isNaN(center.y)) return;\n                stage.panToCoordinate(center.x, center.y);\n                stage.zoomToLimits(box.xmax - box.xmin, box.ymax - box.ymin);\n                break;\n\n            case ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE:\n                let bIn = action.delta > 0;\n                // stage.zoomByMouse(action.x, action.y, bIn, 1 + Math.abs(action.delta)/100.);\n                stage.zoomByMouse(action.x, action.y, bIn, 1.2);\n                break;\n\n            case ActionTypes.CLEAR_ALL:\n                stage.removeAllChildren();\n                stage.removeAllListeners();\n                break;\n\n            case ActionTypes.PINCH_DOWN_ON_STAGE:\n                stage.zoomByPinchStart(action.x1, action.y1);\n                break;\n\n            case ActionTypes.PINCH_MOVED_ON_STAGE:\n                if (mouse.touchPoints) {\n                    let dx = mouse.touchPoints[0].x - mouse.touchPoints[1].x;\n                    let dy = mouse.touchPoints[0].y - mouse.touchPoints[1].y;\n                    let distStart = Math.sqrt(dx*dx + dy*dy);\n\n                    dx = action.x2 - action.x1;\n                    dy = action.y2 - action.y1;\n                    let distCurrent = Math.sqrt(dx*dx + dy*dy);\n                    let ratio = distCurrent / distStart;\n                    stage.zoomByPinchMove(action.x1, action.y1, ratio);\n                }\n                break;\n\n            case ActionTypes.PINCH_UP_ON_STAGE:\n                stage.zoomByPinchStop();\n                break;\n\n            default:\n                break;\n        }\n    }\n\n    next(action);\n};\n\nexport default stageController;","import * as ActionTypes from '../store/actionTypes';\nimport Layers from \"../models/layers\";\nimport {point, arc, segment} from '@flatten-js/core';\nimport Flatten from '@flatten-js/core';\nlet Algorithmia = window.Algorithmia;\n\n// function zoomHome(shape, stage) {\n//     let box = shape.box;\n//     let x = (box.xmin + box.xmax)/2;\n//     let y = (box.ymin + box.ymax)/2;\n//     stage.panToCoordinate(x, y);\n//     stage.zoomToLimits(box.xmax - box.xmin, box.ymax - box.ymin);\n// }\n\nconst skeleton_recognition = ({dispatch, getState}) => next => action => {\n\n    if (action.type === ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED) {\n\n        let state = getState();\n        let stage = state.app.stage;\n\n        let layers = state.layers;\n        let currentLayer = Layers.getAffected(layers);\n        let shapes = currentLayer.shapes;\n        let input = shapes.map(shape =>\n            [shape.geom.x / 400., shape.geom.y / 400., shape.geom.nx, shape.geom.ny]\n        );\n\n        let client = Algorithmia.client(\"simby4RUwqQmtMDaHAPj5wsQwlD1\");\n        let algorithm = \"alexbol99/SeketonRecognition\";\n\n        client.algo(algorithm)\n            .pipe(input)\n            .then(function (output) {\n                if (output.error) return console.error(\"error: \" + output.error);\n\n                let newLayer = Layers.newLayer(stage, layers);\n                newLayer.name = \"recognized\";\n                newLayer.title = \"recognized\";\n                // newLayer.displayed = true;\n\n                for (let row of output.result) {\n                    let shape;\n                    if (row[0] instanceof Array && row[0].length === 2) {\n                        let pc = point(row[0][0] * 400, row[0][1] * 400);\n                        let r = row[1] * 400;\n                        /********center radius startAng endAng **********/\n                        shape = arc(pc, r, row[2], row[3], Flatten.CCW)\n                    }\n                    else {\n                        shape = segment(\n                            point(row[0] * 400, row[1] * 400),\n                            point(row[2] * 400, row[3] * 400))\n                    }\n                    if (row[4]) {\n                        shape.label = row[4]\n                    }\n                    newLayer.add(shape)\n                }\n                layers.push(newLayer);\n\n                dispatch({\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n                    stage: stage,\n                    shape: currentLayer\n                })\n            });\n    }\n\n    return next(action);\n};\n\n\nexport default skeleton_recognition;\n","import axios from 'axios';\n\nconst instance = axios.create({\n    baseURL: \"https://debug-viewer.firebaseio.com/\"\n});\n\nexport default instance;\n","import * as ActionTypes from '../actionTypes';\n\nexport const resizeStage = () => {\n    return {\n        type: ActionTypes.STAGE_RESIZED\n    }\n};\n\nexport const destroyStage = () => {\n    return {\n        type: ActionTypes.STAGE_UNMOUNTED\n    }\n};\n\nexport const toggleUnits = () => {\n    return {\n        type: ActionTypes.TOGGLE_UNITS_CLICKED\n    }\n};\n\nexport const toggleWidthMode = () => {\n    return {\n        type: ActionTypes.TOGGLE_WIDTH_MODE_CLICKED\n    }\n};\n\nexport const toggleDisplayVertices = () => {\n    return {\n        type: ActionTypes.TOGGLE_DISPLAY_VERTICES_CLICKED\n    }\n};\n\nexport const toggleDisplayLabels = () => {\n    return {\n        type: ActionTypes.TOGGLE_DISPLAY_LABELS_CLICKED\n    }\n};\n\nexport const toggleAboutPopup = () => {\n    return {\n        type: ActionTypes.TOGGLE_ABOUT_POPUP_CLICKED\n    }\n};\n\n// export const closeAboutPopup = () => {\n//     return {\n//         type: ActionTypes.CLOSE_ABOUT_POPUP_BUTTON_PRESSED\n//     }\n// };\n\nexport const toggleMeasureBetweenPoints = () => {\n    return {\n        type: ActionTypes.MEASURE_POINTS_BUTTON_PRESSED\n    }\n};\n\nexport const toggleMeasureBetweenShapes = () => {\n    return {\n        type: ActionTypes.MEASURE_SHAPES_BUTTON_PRESSED\n    }\n};\n\nexport const applySkeletonRecognition = () => {\n    return {\n        type: ActionTypes.SKELETON_RECOGNITION_BUTTON_PRESSED\n    }\n};\n\n// export const handleFileSelect = (files, stage, layers) => {\n//     return {\n//         type: ActionTypes.FILENAME_LIST_SELECTED,\n//         files,\n//         stage,\n//         layers\n//     }\n// };\n\nexport const setHomeView = (stage, shape) => {\n    return {\n        type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n        stage,\n        shape\n    }\n};\n\nexport const togglePanByDrag = () => {\n    return {\n        type: ActionTypes.PAN_BY_DRAG_BUTTON_CLICKED\n    }\n};\n\nexport const handleMouseRollOverShape = (shape) => {\n    return {\n        type: ActionTypes.MOUSE_ROLL_OVER_SHAPE,\n        shape\n    }\n};\n\nexport const handleMouseRollOutShape = () => {\n    return {\n        type: ActionTypes.MOUSE_ROLL_OUT_SHAPE\n    }\n};\n\nexport const handleClickOnShape = (shape, layer) => {\n    return {\n        type: ActionTypes.MOUSE_CLICKED_ON_SHAPE,\n        shape,\n        layer\n    }\n};\n\nexport const asyncOperationStarted = () => {\n    return {\n        type: ActionTypes.ASYNC_OPERATION_STARTED\n    }\n};\n\nexport const asyncOperationEnded = () => {\n    return {\n        type: ActionTypes.ASYNC_OPERATION_ENDED\n    }\n};\n\nexport const openDocumentOnCloud = () => {\n    return {\n        type: ActionTypes.MANAGE_CLOUD_STORAGE_BUTTON_CLICKED\n    }\n};\n\nexport const toggleLayerList = () => {\n    return {\n        type: ActionTypes.TOGGLE_SHOW_LAYER_LIST_CLICKED\n    }\n};\n\nexport const toggleDownloadPopup = () => {\n    return {\n        type: ActionTypes.TOGGLE_DOWNLOAD_POPUP_CLICKED\n    }\n};\n\nexport const toggleUploadPopup = () => {\n    return {\n        type: ActionTypes.TOGGLE_UPLOAD_POPUP_CLICKED\n    }\n};\n\nexport const pasteDataFromBuffer = (clipboardData) => {\n    return {\n        type: ActionTypes.DATA_FROM_BUFFER_PASTED,\n        data: clipboardData\n    }\n};\n\n\n","import * as ActionTypes from '../actionTypes';\n\nexport const addEmptyLayer = (stage) => {\n    return {\n        type: ActionTypes.ADD_LAYER_BUTTON_PRESSED,\n        stage: stage\n    }\n};\n\nexport const addNewLayer = (layer) => {\n    return {\n        type: ActionTypes.ADD_NEW_LAYER,\n        layer\n    }\n};\n\nexport const deleteAffectedLayer = () => {\n    return {\n        type: ActionTypes.DELETE_LAYER_BUTTON_PRESSED\n    };\n};\n\nexport const sortLayers = () => {\n    return {\n        type: ActionTypes.SORT_LAYERS_BUTTON_PRESSED\n    };\n};\n\nexport const toggleDisplayLayer = (layer) => {\n    return {\n        type: ActionTypes.TOGGLE_DISPLAY_LAYER_PRESSED,\n        layer\n    }\n};\n\nexport const toggleAffectedLayer = (event, layer) => {\n    event.stopPropagation();\n    return {\n        type: ActionTypes.TOGGLE_AFFECTED_LAYER_PRESSED,\n        layer: layer\n    };\n};\n\nexport const updateLayer = (newLayer) => {\n    return {\n        type: ActionTypes.SUBMIT_LAYER_EDIT_FORM_PRESSED,\n        newLayer: newLayer\n    };\n};\n\nexport const closeEditLayerForm = () => {\n    return {\n        type: ActionTypes.ESCAPE_LAYER_EDIT_FORM_PRESSED\n    };\n};\n\nexport const openAffectedLayerEditForm = () => {\n    return {\n        type: ActionTypes.OPEN_LAYER_EDIT_FORM_PRESSED,\n    }\n};\n\nexport const setAffectedNextLayer = () => {\n    return {\n        type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\n    }\n};\n\nexport const setAffectedPrevLayer = () => {\n    return {\n        type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\n    }\n};\n\nexport const deleteAllLayers = () => {\n    return {\n        type: ActionTypes.CLEAR_ALL_BUTTON_CLICKED,\n    }\n}\n\n\n\n","import {Box} from '@flatten-js/core';\n\nexport class Job {\n    constructor() {\n        this.filename = \"\";\n        this.title = \"\";\n        this.profiles = [];   // array of FlattenJS Polygons\n        this.materials = [];  // array of FlattenJS Polygons\n        this.shapes = [];     // array of other FlattenJS shapes\n    }\n\n    get box() {\n        let b = new Box();\n        for (let shape of this.profiles) {\n            b.merge(shape.box);\n        }\n        for (let shape of this.materials) {\n            b.merge(shape.box);\n        }\n        for (let shape of this.shapes) {\n            b.merge(shape.box);\n        }\n        return b;\n    }\n}","// import { Job } from '../models/job';\nimport Flatten from '@flatten-js/core';\n\n// import Model from '../models/model';\nimport {Job} from \"../models/job\";\n\nFlatten.Image = class Image {\n    constructor() {\n        this.uri = \"\";\n        /**\n         * Center in world coordinates\n         * @type {Flatten.Point}\n         */\n        this.center = new Flatten.Point();\n        /**\n         * Width in world units (inch/mm)\n         */\n        this.width = 0;\n        /**\n         * Height in world units (inch/mm)\n         */\n        this.height = 0;\n    }\n    get box() {\n        return new Flatten.Box(\n            this.center.x - this.width/2,\n            this.center.y - this.height/2,\n            this.center.x + this.height/2,\n            this.center.y + this.height/2\n        );\n\n    }\n};\n\n// export function parseJSON(shapes) {\n//     let models = [];\n//     let geom;\n//     let model;\n//     for (let shape of JSON.parse(shapes)) {\n//         if (shape.geom instanceof Array) {      // TODO: add \"name\" to polygon stringified\n//             geom = new Flatten.Polygon();\n//             for (let faceArray of shape.geom) {\n//                 geom.addFace(faceArray);\n//             }\n//         }\n//         else if (shape.geom.uri) {\n//             geom = new Flatten.Image();\n//             geom.uri = shape.geom.uri;\n//             geom.center = shape.geom.center;\n//             geom.width = shape.geom.width;\n//             geom.height = shape.geom.height;\n//         }\n//         else {\n//             geom = Flatten[shape.geom.name](shape.geom);\n//         }\n//         model = new Model(geom, shape.style, shape.label);\n//         models.push(model);\n//     }\n//\n//     return models;\n// }\n\nexport function parseJSON(filename, str) {\n    let job = new Job();\n\n    job.filename = filename;\n\n    let jsonArray = JSON.parse(str);\n\n    let polygon = new Flatten.Polygon();\n    for (let faceArray of jsonArray) {\n        polygon.addFace(faceArray);\n    }\n\n    job.shapes.push(polygon);\n\n    return job;\n}\n","import * as ActionTypes from \"../actionTypes\";\nimport axios from \"../../axios-database\";\nimport * as appActions from \"../actions/appActions\";\nimport * as layerActions from '../../store/actions/layersActions';\nimport Layer from \"../../models/layer\";\nimport {parseJSON} from \"../../dataParsers/parseJSON\";\nimport Layers from \"../../models/layers\";\n\nconst defaultName = \"document\";\n\nexport const getNewName = (documents) => {\n    let name = defaultName;\n    let inc = 1;\n    let comparator = (document) => document.name === name;\n    while (Object.values(documents).find(comparator)) {\n        name = defaultName + inc;\n        inc++;\n    }\n    return name;\n};\n\nexport const registerDocumentAddedToDatabase = (id, lastUpdated) => {\n    return {\n        type: ActionTypes.REQUEST_ADD_DOCUMENT_TO_DATABASE_SUCCEED,\n        id: id,\n        lastUpdated: lastUpdated\n    }\n};\n\nexport const updateDocumentTimeStamp = (lastUpdated) => {\n    return {\n        type: ActionTypes.REQUEST_UPDATE_DOCUMENT_IN_DATABASE_SUCCEED,\n        lastUpdated: lastUpdated\n    }\n};\n\nexport const updateDocumentName = (name) => {\n    return {\n        type: ActionTypes.DOCUMENT_NAME_UPDATED,\n        name\n    }\n};\n\nexport const clearCurrentDocument = () => {\n    return {\n        type: ActionTypes.CLEAR_ALL_BUTTON_CLICKED,\n    }\n};\n\nexport const updateCurrentDocument = (document) => {\n    return {\n        type: ActionTypes.DOCUMENT_SELECTED_FROM_LIST,\n        document\n    }\n};\n\nexport const requestFetchDocumentFromDatabaseSucceed = (id, name, owner, lastUpdated) => {\n    return {\n        type: ActionTypes.REQUEST_FETCH_DOCUMENT_FROM_DATABASE_SUCCEED,\n        id,\n        name,\n        owner,\n        lastUpdated\n    }\n};\n\nexport const deleteDocumentFromDatabaseSucceed = (id) => {\n    return {\n        type: ActionTypes.DELETE_DOCUMENT_FROM_DATABASE_SUCCEED,\n        id\n    }\n};\n\nexport const requestFetchDocumentsFromDatabaseSucceed = (documentsList) => {\n    return {\n        type: ActionTypes.REQUEST_FETCH_DOCUMENTS_FROM_DATABASE_SUCCEED,\n        documentsList\n    }\n};\n\nexport const fetchDocumentsFromDatabase = (token, userId) => {\n    return dispatch => {\n        dispatch(appActions.asyncOperationStarted());\n        const queryParams = '?auth=' + token + '&orderBy=\"userId\"&equalTo=\"' + userId + '\"';\n        const url = '/documents.json' + queryParams;\n        axios.get(url)\n            .then(response => {\n                dispatch(requestFetchDocumentsFromDatabaseSucceed(response.data));\n                dispatch(appActions.asyncOperationEnded());\n            })\n            .catch(error => {\n                alert(error.message);\n                dispatch(appActions.asyncOperationEnded());\n            })\n    }\n};\n\nexport const deleteDocumentFromDatabase = (id) => {\n    return dispatch => {\n        dispatch(appActions.asyncOperationStarted());\n        const url = '/documents/' + id + '.json';\n        axios.delete(url)\n            .then (response => {\n                // query geom by \"id\"\n                const queryParams = '?orderBy=\"id\"&equalTo=\"' + id + '\"';\n                const url = '/geom.json' + queryParams;\n                return axios.get(url)\n            })\n            .then (response => {\n                const geomId = Object.keys(response.data)[0];\n                return axios.delete(`/geom/${geomId}.json`)\n            })\n            .then(response => {\n                dispatch(deleteDocumentFromDatabaseSucceed(id));\n                dispatch(appActions.asyncOperationEnded());\n            })\n            .catch(error => {\n                alert(error.message);\n                dispatch(appActions.asyncOperationEnded());\n            })\n    }\n};\n\nexport const fetchDocumentFromDatabase = (stage, id) => {\n    return dispatch => {\n        dispatch(layerActions.deleteAllLayers());\n        dispatch(appActions.asyncOperationStarted());\n        let name = \"\";\n        let lastUpdated = undefined;\n        let owner = \"Alex Bol\";\n        let firstLayer = undefined;\n\n        const docUrl = '/documents/' + id + '.json';\n        const queryParams = '?orderBy=\"id\"&equalTo=\"' + id + '\"';\n        const geomUrl = '/geom.json' + queryParams;\n        Promise.all([axios.get(docUrl),axios.get(geomUrl)])\n            .then( responses => {\n                name = responses[0].data.name;\n                lastUpdated = responses[0].data.lastUpdated;\n\n                for (let layerData of Object.values(responses[1].data)[0].layers) {\n                    let layer = new Layer();\n                    layer.shapes = parseJSON(layerData.shapes);\n                    layer.name = layerData.name;\n\n                    if (!firstLayer) firstLayer = layer;\n                    dispatch(layerActions.addNewLayer(layer));\n                    dispatch(layerActions.toggleDisplayLayer(layer));\n                }\n                dispatch(requestFetchDocumentFromDatabaseSucceed(id, name, owner, lastUpdated));\n                dispatch(appActions.setHomeView(stage, firstLayer));\n                // dispatch(layerActions.toggleDisplayLayer(firstLayer));\n                dispatch(appActions.asyncOperationEnded());\n            })\n            .catch(error => {\n                alert(error.message);\n                dispatch(appActions.asyncOperationEnded());\n            })\n    }\n};\n\nexport const addDocumentToDatabase = (payload, layers, history) => {\n    return dispatch => {\n        let id = undefined;\n        dispatch(appActions.asyncOperationStarted());\n        axios.post('/documents.json', payload)\n            .then(response => {\n                id = response.data.name;\n                let layersJSON = Layers.toJSON(layers);\n                let geomPayload = {\n                    id: id,\n                    layers: layersJSON\n                };\n                return axios.post('/geom.json', geomPayload)\n            })\n            .then(response => {\n                dispatch(registerDocumentAddedToDatabase(id, Date.now()));\n                dispatch(appActions.asyncOperationEnded());\n\n                // update url\n                history.push('/documents/' + id);\n            })\n            .catch(error => {\n                alert(error.message);\n                dispatch(appActions.asyncOperationEnded());\n            })\n    }\n};\n\nexport const updateDocumentInDatabase = (id, payload, layers) => {\n    return dispatch => {\n        dispatch(appActions.asyncOperationStarted());\n        // update documents header\n        axios.put(`/documents/${id}.json`, payload)\n            .then(response => {\n                dispatch(updateDocumentTimeStamp(Date.now()));\n                // dispatch(appActions.asyncOperationEnded());\n\n                // query geom by \"id\"\n                const queryParams = '?orderBy=\"id\"&equalTo=\"' + id + '\"';\n                const url = '/geom.json' + queryParams;\n                return axios.get(url)\n            })\n            .then( response => {\n                let layersJSON = Layers.toJSON(layers);\n                let geomPayload = {\n                    id: id,\n                    layers: layersJSON\n                };\n                let geomId = Object.keys(response.data)[0];  // response.data.name;\n                return axios.put(`/geom/${geomId}.json`, geomPayload)\n            })\n            .then( reponse => {\n                dispatch(appActions.asyncOperationEnded());\n            })\n            .catch(error => {\n                alert(error.message);\n                dispatch(appActions.asyncOperationEnded());\n            })\n    }\n};\n\n\n\n","import React from 'react';\nimport FontAwesome from \"react-fontawesome\";\nimport classes from \"./Button.module.css\";\n\nconst button = (props) => {\n    let iconStyle;\n    switch (props.type) {\n        case \"trigger\":\n            iconStyle = classes.IconTrigger;\n            break;\n        case \"mode\":\n            iconStyle = props.active ? classes.IconModeActive : classes.IconModeNotActive;\n            break;\n        default:\n            iconStyle = classes.IconTrigger;\n            break;\n    }\n    // eslint-disable-next-line\n    let buttonStyle = props.mobileOnly ? classes[\"Button\",\"DrawerButton\"] : classes[\"Button\"];\n    return (\n        <button title={props.title} onClick={props.onClick} className={buttonStyle}>\n            <FontAwesome\n                name={props.iconName}\n                size='2x'\n                className={iconStyle}\n            />\n        </button>\n    );\n};\n\nexport default button;","import React from 'react';\nimport FontAwesome from \"react-fontawesome\";\nimport classes from \"./ButtonSeparator.module.css\";\n\nconst buttonSeparator = () => {\n    return (\n        <div className={classes.ButtonSeparator}>\n            <FontAwesome\n                name='ellipsis-v'\n                size='2x'\n                className={classes.IconSeparator}\n            />\n        </div>\n    );\n};\n\nexport default buttonSeparator;","/**\n * Created by alexanderbol on 17/04/2017.\n */\n\nimport React, {Component} from 'react';\nimport Button from '../../../components/UI/Button/Button';\nimport Separator from '../../../components/UI/ButtonSeparator/ButtonSeparator';\n\nimport classes from './ToolbarComponent.module.css';\nimport '@fortawesome/fontawesome-free/css/all.css';\n\nclass ToolbarComponent extends Component {\n    // openJobButtonClicked = () => this.refs.browseFiles.click();\n\n    render() {\n        return (\n            <div className={classes[\"App-toolbar\"]}>\n                {/*<h4>Toolbar</h4>*/}\n                <Button type=\"trigger\" title=\"Upload files\" iconName='folder-open'\n                        onClick={this.props.onShowUploadPopupPressed}\n                />\n\n                {/*<input style={{fontSize: 16, marginTop: 5, marginBottom: 5, display: \"none\"}}*/}\n                       {/*type=\"file\" id=\"browseFiles\" ref=\"browseFiles\" name=\"files[]\" multiple*/}\n                       {/*onChange={this.props.onFileSelected}*/}\n                {/*/>*/}\n\n                <Button type=\"trigger\" title=\"Show/hide layers\" iconName='layer-group' onClick={this.props.onLayerListButtonClicked} />\n\n                    {/*<Button type=\"trigger\" title=\"Save document on cloud\" iconName='save'*/}\n                        {/*onClick={this.props.onSaveDocumentButtonClicked}*/}\n                {/*/>*/}\n\n                <Button type=\"trigger\" title=\"Delete all layers\" iconName='broom'\n                        onClick={this.props.onClearAllButtonClicked}\n                />\n\n                <Button type=\"trigger\" title=\"Download layers\" iconName='file-download'\n                        onClick={this.props.onShowDownloadPopupPressed}\n                />\n\n                <Separator/>\n\n                <Button type=\"trigger\" title=\"Zoom and pan to home view\" iconName='home'\n                        onClick={this.props.onHomeButtonPressed}\n                />\n\n                <Separator/>\n\n                <Button type=\"mode\" title=\"Pan by drag\" iconName='arrows-alt'\n                        active={!this.props.measurePointsActive}\n                        onClick={this.props.onPanByDragPressed}\n                />\n\n                <Button type=\"mode\" title=\"Measure distance between points\" iconName='drafting-compass'\n                        active={this.props.measurePointsActive}\n                        onClick={this.props.onMeasurePointsButtonPressed}\n                />\n\n                <Separator/>\n\n                <Button type=\"trigger\" title=\"Measure distance between selected shapes\" iconName='ruler'\n                        onClick={this.props.onMeasureBetweenShapesButtonPressed}\n                />\n\n                <Button type=\"trigger\" title=\"Display solid or wire\" iconName='fill-drip'\n                        onClick={this.props.onToggleWidthModePressed}\n                />\n\n                <Button type=\"trigger\" title=\"Display vertices on/off\" iconName='draw-polygon'\n                        onClick={this.props.onToggleVerticesPressed}\n                />\n\n                <Button type=\"trigger\" title=\"Display labels on/off\" iconName='tag'\n                        onClick={this.props.onToggleLabelsPressed}\n                />\n\n                {this.props.showSkeletonRecognitionButton ? (\n                    <Button type=\"trigger\" title=\"Skeleton Recognition Demo\" iconName='tree'\n                            onClick={this.props.onSkeletonRecognitionButtonPressed}\n                    />\n                ) : null}\n\n                <Separator/>\n\n                <button className={classes[\"App-toolbar-units\"]}\n                        onClick={this.props.onUnitClicked}\n                >\n                    {this.props.units}\n                </button>\n\n                <Separator/>\n\n                <Button type=\"trigger\" title=\"About\" iconName='info'\n                        onClick={this.props.onShowAboutPopupPressed}\n                />\n\n                <Separator/>\n\n            </div>\n        )\n    }\n}\n\nexport default ToolbarComponent;\n","/**\n * Created by alexanderbol on 21/04/2017.\n */\nimport {Box} from '@flatten-js/core';\nimport { Stage as CreatejsStage, Touch } from \"@createjs/easeljs\";\n\nclass Stage extends CreatejsStage {\n    constructor(canvas) {\n        super(canvas);\n\n        Touch.enable(this);\n        this.mouseMoveOutside = false;   // true;\n        // this.enableDOMEvents(false);\n        this.enableMouseOver(20);\n\n        if (this.canvas.clientWidth > 0 && this.canvas.clientHeight > 0) {\n            this.canvas.width = this.canvas.clientWidth;\n            this.canvas.height = this.canvas.clientHeight;\n            // this.updateViewport(this.canvas.width, this.canvas.height);\n        }\n        this.origin = {x: this.canvas.width / 2, y: this.canvas.height / 2};\n        this.resolution = 0.00001;          // MM 2 Pixels when zoomFactor = 1;\n        this.zoomFactor = 1.0;\n\n        this.oldOrigin = {x: undefined, y: undefined};   // used by pan\n        // used by zoom by pinch\n        this.oldZoomFactor = undefined;\n        this.pinchAnchorX = undefined;\n        this.pinchAnchorY = undefined;\n        this.pinchStarted = false;\n    }\n\n    get box() {\n        let minX = this.C2W_X(0);\n        let minY = this.C2W_Y(this.canvas.height);\n        let maxX = this.C2W_X(this.canvas.width);\n        let maxY = this.C2W_Y(0);\n\n        return ( new Box(minX, minY, maxX, maxY) );\n    }\n\n    clone() {\n        let stage = new Stage(this.canvas);\n        return Object.assign(stage, this);\n    }\n\n    add(shape) {\n        this.addChild(shape);\n        return this;\n    }\n\n    scalingFactor() {\n        return this.resolution * this.zoomFactor;\n    }\n\n    C2W_Scalar(scalar) {\n        return (scalar / this.scalingFactor());\n    }\n\n    W2C_Scalar(scalar) {\n        return (this.scalingFactor() * scalar);\n    }\n\n    C2W_X(canvasX) {\n        return ((canvasX - this.origin.x) / this.scalingFactor());\n    }\n\n    C2W_Y(canvasY) {\n        return ((this.origin.y - canvasY) / this.scalingFactor());\n    }\n\n    W2C_X(worldX) {\n        return (this.scalingFactor() * worldX + this.origin.x);\n    }\n\n    W2C_Y(worldY) {\n        return (this.origin.y - this.scalingFactor() * worldY);\n    }\n\n    W2C(point) {\n        return {x: this.W2C_X(point.x), y: this.W2C_Y(point.y)}\n    }\n\n    panTo(newOrigin) {\n        this.origin = {x: newOrigin.x, y: newOrigin.y}\n    }\n\n    panBy(deltaX, deltaY) {\n        this.origin = {\n            x: this.origin.x + deltaX,\n            y: this.origin.y + deltaY\n        }\n    }\n\n    // zoom by 10% each time\n    zoomIn(ratio) {\n        let curRatio = ratio || 1.1;\n        this.zoomFactor = Math.min(10000000, curRatio * this.zoomFactor);\n    }\n\n    zoomOut(ratio) {\n        let curRatio = ratio || 1.1;\n        this.zoomFactor = Math.max(0.001, this.zoomFactor / curRatio);\n    }\n\n    // ZoomIn/Out + \"Focus follows mouse\"\n    zoom(focusX, focusY, bIn, ratio) {\n        let worldX = this.C2W_X(focusX);    // world coordinate of mouse focus before zoom\n        let worldY = this.C2W_Y(focusY);\n\n        bIn ? this.zoomIn(ratio) : this.zoomOut(ratio);\n\n        let newFocusX = this.W2C_X(worldX); // canvas coordinate after zoom\n        let newFocusY = this.W2C_Y(worldY);\n\n        this.panBy(focusX - newFocusX, focusY - newFocusY);\n\n        return [newFocusX, newFocusY];\n    }\n\n    zoomByMouse(focusX, focusY, bIn, ratio) {\n        this.zoom(focusX, focusY, bIn, ratio);\n    }\n\n    zoomToLimits(width, height) {\n        // prevent zero division in case of single point box\n        if (width === 0) width = 400000;\n        if (height === 0) height = 400000;\n        let resolution = Math.min(this.canvas.width / (1.1*width), this.canvas.height / (1.1*height));\n        let zoomFactor = resolution / this.resolution;\n        let ratio = zoomFactor / this.zoomFactor;\n        let bIn = true; //ratio > 1;\n\n        let focusX = this.canvas.width/2;\n        let focusY = this.canvas.height/2;\n        this.zoom(focusX, focusY, bIn, ratio);\n    }\n\n    resize() {\n        // this.origin.x = this.canvas.width / 2;\n        // this.origin.y = this.canvas.height / 2;\n        if (this.canvas.clientWidth > 0 && this.canvas.clientHeight > 0) {\n            this.canvas.width = this.canvas.clientWidth;\n            this.canvas.height = this.canvas.clientHeight;\n        }\n    }\n\n    // drawSomething() {\n    //     let shape = new Shape();\n    //     shape.graphics.beginFill('red').drawRect(0, 0, 20, 20);\n    //     this.addChild(shape);\n    //     this.update();\n    // }\n\n    panByMouseStart() {\n        this.oldOrigin.x = this.origin.x;\n        this.oldOrigin.y = this.origin.y;\n        this.zoomByPinchStop();\n    }\n\n    panByMouseMove(dx, dy) {\n        if (this.pinchStarted) return;\n        if (dx !== undefined && dy !== undefined &&\n            this.oldOrigin.x !== undefined && this.oldOrigin.y !== undefined) {\n            this.origin = {\n                    x: this.oldOrigin.x + dx,\n                    y: this.oldOrigin.y + dy\n                };\n        }\n    }\n\n    panByMouseStop() {\n        this.oldOrigin.x = undefined;\n        this.oldOrigin.y = undefined;\n    }\n\n    panToCoordinate(x, y) {\n        let canvasX = this.W2C_X(x);\n        let canvasY = this.W2C_Y(y);\n\n        let dx = this.canvas.width / 2 - canvasX;\n        let dy = this.canvas.height / 2 - canvasY;\n        this.panBy(dx, dy);\n    }\n\n    zoomByPinchStart(canvasX, canvasY) {\n        this.oldZoomFactor = this.zoomFactor;\n        this.pinchAnchorX = this.C2W_X(canvasX);\n        this.pinchAnchorY = this.C2W_Y(canvasY);\n        this.pinchStarted = true;\n        this.panByMouseStop();\n    }\n\n    zoomByPinchMove(canvasX, canvasY, ratio) {\n        this.zoomFactor = ratio * this.oldZoomFactor;\n        this.origin = {\n            x: canvasX - this.scalingFactor() * this.pinchAnchorX,\n            y: canvasY + this.scalingFactor() * this.pinchAnchorY\n        }\n    }\n\n    zoomByPinchStop() {\n        this.oldZoomFactor = undefined;\n        this.pinchAnchorX = undefined;\n        this.pinchAnchorY = undefined;\n        this.pinchStarted = false;\n    }\n\n    clear() {\n        this.canvas.getContext('2d').clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n}\n\nexport default Stage;\n","import * as ActionTypes from '../actionTypes';\n\nexport const registerStage = (stage) => {\n    return {\n        type: ActionTypes.NEW_STAGE_CREATED,\n        stage: stage\n    }\n};\n\nexport const handleMouseDown = (stage, x, y) => {\n    return {\n        type: ActionTypes.MOUSE_DOWN_ON_STAGE,\n        stage: stage,\n        x: x,\n        y: y\n    }\n};\n\nexport const handleMouseUp = (stage, x, y) => {\n    return {\n        type: ActionTypes.MOUSE_UP_ON_STAGE,\n        stage: stage,\n        x: x,\n        y: y\n    }\n};\n\nexport const handleMouseMove = (stage, x, y, dx, dy) => {\n    return {\n        type: ActionTypes.MOUSE_MOVED_ON_STAGE,\n        stage: stage,\n        x: x,\n        y: y,\n        dx: dx,\n        dy: dy\n    }\n};\n\nexport const handleMouseWheelMove = (stage, x, y, delta) => {\n    return {\n        type: ActionTypes.MOUSE_WHEEL_MOVE_ON_STAGE,\n        stage: stage,\n        x: x,\n        y: y,\n        delta: delta\n    }\n};\n\nexport const handlePinchDown = (stage, touchPoints) => {\n    return {\n        type: ActionTypes.PINCH_DOWN_ON_STAGE,\n        stage: stage,\n        x1: touchPoints[0].x,\n        y1: touchPoints[0].y,\n        x2: touchPoints[1].x,\n        y2: touchPoints[1].y\n    }\n};\n\nexport const handlePinchMove = (stage, touchPoints) => {\n    return {\n        type: ActionTypes.PINCH_MOVED_ON_STAGE,\n        stage: stage,\n        x1: touchPoints[0].x,\n        y1: touchPoints[0].y,\n        x2: touchPoints[1].x,\n        y2: touchPoints[1].y\n    }\n};\n\nexport const handlePinchUp = (stage) => {\n    return {\n        type: ActionTypes.PINCH_UP_ON_STAGE,\n        stage\n    }\n};\n\n","/**\n * Created by alexanderbol on 21/04/2017.\n */\n\nimport React, {Component} from 'react';\nimport styles from \"./CanvasComponent.module.css\";\nimport Stage from '../../../models/stage';\nimport { connect } from \"react-redux\";\n// import * as ActionTypes from \"../../../store/actionTypes\";\nimport * as actions from '../../../store/actions/stageActions';\n\nclass CanvasComponent extends Component {\n    canvasElement = React.createRef();\n\n    handleMouseMove = (event) => {\n        this.props.stage.canvas.focus();\n        if (!event.nativeEvent.touches || event.nativeEvent.touches.length === 1) {\n            this.props.handleMouseMove(\n                this.props.stage,\n                event.stageX,\n                event.stageY,\n                this.props.mouse.startX ? event.stageX - this.props.mouse.startX : undefined,\n                this.props.mouse.startY ? event.stageY - this.props.mouse.startY : undefined\n            );\n        }\n        else if (event.nativeEvent.touches && event.nativeEvent.touches.length === 2) {\n            let touchPoints = [\n                {\n                    x: event.nativeEvent.touches[0].clientX - event.nativeEvent.target.offsetLeft,\n                    y: event.nativeEvent.touches[0].clientY - event.nativeEvent.target.offsetTop\n                },\n                {\n                    x: event.nativeEvent.touches[1].clientX - event.nativeEvent.target.offsetLeft,\n                    y: event.nativeEvent.touches[1].clientY - event.nativeEvent.target.offsetTop\n                },\n            ];\n            this.props.handlePinchMove(this.props.stage, touchPoints);\n        }\n\n        // if (this.props.stage.pinchStarted) {\n        //     this.props.handleSecondTouchMove(this.props.stage, event.stageX, event.stageY);\n        // }\n        // else {\n        //     this.props.handleMouseMove(\n        //         this.props.stage,\n        //         event.stageX,\n        //         event.stageY,\n        //         this.props.mouse.startX ? event.stageX - this.props.mouse.startX : undefined,\n        //         this.props.mouse.startY ? event.stageY - this.props.mouse.startY : undefined\n        //     );\n        // }\n    };\n\n    handleMouseDown = (event) => {\n        // if (event.pointerID === -1 || event.pointerID === 0) {\n        if (!event.nativeEvent.touches || event.nativeEvent.touches.length === 1) {\n            this.props.handleMouseDown(this.props.stage, event.stageX, event.stageY);\n        }\n        else if (event.nativeEvent.touches && event.nativeEvent.touches.length === 2) {\n            let touchPoints = [\n                {\n                    x: event.nativeEvent.touches[0].clientX - event.nativeEvent.target.offsetLeft,\n                    y: event.nativeEvent.touches[0].clientY - event.nativeEvent.target.offsetTop\n                },\n                {\n                    x: event.nativeEvent.touches[1].clientX - event.nativeEvent.target.offsetLeft,\n                    y: event.nativeEvent.touches[1].clientY - event.nativeEvent.target.offsetTop\n                },\n            ];\n            this.props.handlePinchDown(this.props.stage, touchPoints);\n        }\n    };\n\n    handleMouseUp = (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        if (!event.nativeEvent.touches || event.nativeEvent.touches.length === 1) {\n            this.props.handleMouseUp(this.props.stage);\n        }\n        else if (event.nativeEvent.touches && event.nativeEvent.touches.length === 2) {\n            this.props.handlePinchUp(this.props.stage);\n        }\n    };\n\n    handleMouseLeave = (event) => {   // nothing works except click\n        this.props.stage.canvas.blur();\n        document.body.focus();\n    };\n\n    handleMouseWheel = (event) => {\n        /*event.preventDefault();*/\n\n        let delta = event.detail || event.wheelDelta;\n        if (delta !== 0) {\n            this.props.handleMouseWheelMove(this.props.stage, event.offsetX, event.offsetY, delta);\n        }\n    };\n\n    handleMouseWheelFox = (event) => {\n        /*event.preventDefault();*/\n        if (event.detail !== 0) {\n            this.props.handleMouseWheelMove(this.props.stage, event.layerX, event.layerY, -event.detail);\n        }\n    };\n\n    componentDidMount() {\n        let stage = new Stage(this.canvasElement.current);\n\n        // stage.setClearColor(\"#FFFFFF\");\n        // stage.update();\n\n        stage.on(\"stagemousedown\", this.handleMouseDown);\n        stage.on(\"stagemousemove\", this.handleMouseMove);\n        // stage.on(\"click\", this.handleMouseDown);\n        stage.on(\"stagemouseup\", this.handleMouseUp);\n        stage.on(\"mouseleave\", this.handleMouseLeave);\n        stage.canvas.addEventListener(\"mousewheel\", this.handleMouseWheel, {passive: true});\n        stage.canvas.addEventListener(\"DOMMouseScroll\", this.handleMouseWheelFox, {passive: true});\n\n        this.props.registerStage(stage);\n    }\n\n    render() {\n        return (\n            <canvas\n                tabIndex=\"1\"\n                ref={this.canvasElement}\n                id=\"mainCanvas\"\n                className={styles[\"App-canvas\"]}\n                width=\"100\"\n                height=\"100\"\n            >\n            </canvas>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        stage: state.app.stage,\n        mouse: state.mouse\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        registerStage: (stage) => dispatch(actions.registerStage(stage)),\n        handleMouseDown: (stage, x, y) => dispatch(actions.handleMouseDown(stage, x, y)),\n        handleMouseUp: (stage, x, y) => dispatch(actions.handleMouseUp(stage, x, y)),\n        handleMouseMove: (stage, x, y, dx, dy) => dispatch(actions.handleMouseMove(stage, x, y, dx, dy)),\n        handleMouseWheelMove: (stage, x, y, delta) => dispatch(actions.handleMouseWheelMove(stage, x, y, delta)),\n        handlePinchDown: (stage, touchPoints) => dispatch(actions.handlePinchDown(stage, touchPoints)),\n        handlePinchMove: (stage, touchPoints) => dispatch(actions.handlePinchMove(stage, touchPoints)),\n        handlePinchUp: (stage) => dispatch(actions.handlePinchUp(stage))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CanvasComponent);\n","/**\n * Created by alexanderbol on 17/06/2017.\n */\nimport React from 'react';\nimport styles from './StatusComponent.module.css';\n\nconst StatusComponent = () => {\n    return (\n        <div className={styles[\"App-status-bar\"]}>\n            <div>\n                <h5>\n                    &nbsp;\n                </h5>\n            </div>\n        </div>\n    )\n}\n\nexport default StatusComponent;","import React, {Component} from 'react';\n// import Utils from \"../utils\";\n\nclass StageComponent extends Component {\n    // shouldComponentUpdate useless because always returns \"true\",\n    // Don't know why, maybe because of children?\n    // ----------------------------------------------------------\n    // shouldComponentUpdate(nextProps, nextState) {\n    //     if (Utils.is_equal(this.props, nextProps)) {\n    //         return false;\n    //     }\n    //     return true;\n    // }\n\n    componentDidUpdate() {\n        if (this.props.stage.canvas && this.props.stage.canvas.getContext('2d')) {\n\n            let origin = this.props.stage.origin;\n            let zoomFactor = this.props.stage.zoomFactor*this.props.stage.resolution;\n            this.props.stage.setTransform(origin.x, origin.y, zoomFactor, -zoomFactor);\n\n            this.props.stage.update();\n        }\n    }\n\n    componentWillUnmount() {\n        this.props.onStageUnmounted();\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                {this.props.children}\n            </React.Fragment>\n        )\n    }\n}\n\nexport default StageComponent;","import {Point, Segment, Circle, Arc, Polygon, Box} from '@flatten-js/core';\nimport {Graphics} from '@createjs/easeljs';\n\n/* Provide conversion methods from FlattenJS objects to CreateJS Graphics */\nexport function graphics(shape, style = undefined) {\n    if (shape instanceof Point) {\n        return graphics_point(shape, style);\n    }\n    if (shape instanceof Segment) {\n        return graphics_segment(shape, style);\n    }\n    if (shape instanceof Arc) {\n        return graphics_arc(shape, style);\n    }\n    if (shape instanceof Circle) {\n        return graphics_circle(shape, style);\n    }\n    if (shape instanceof Box) {\n        return graphics_box(shape, style);\n    }\n    if (shape instanceof Polygon) {\n        return graphics_polygon(shape, style);\n    }\n    return null;\n}\n\n// Point.prototype.graphics = function(style) {\nfunction graphics_point(point, style) {\n    let radius = (style && style.radius) ? style.radius : 3;\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\n    let graphics = new Graphics();\n    graphics.fill = graphics.beginFill(fill).command;\n    graphics.circle = graphics.drawCircle(point.x, point.y, radius).command;\n    return graphics;\n};\n\n// Segment.prototype.graphics = function(style) {\nfunction graphics_segment(segment, style) {\n    let graphics = new Graphics();\n    let strokeStyle = style && style.strokeStyle !== undefined ? style.strokeStyle : 2;\n    let ignoreScale = style && style.ignoreScale !== undefined ? style.ignoreScale : true;\n    let stroke = style && style.stroke ? style.stroke : \"black\";\n    return graphics\n        .setStrokeStyle(strokeStyle,1,0,10,ignoreScale)\n        .beginStroke(stroke)\n        .moveTo(segment.ps.x, segment.ps.y)\n        .lineTo(segment.pe.x, segment.pe.y)\n        .endStroke();\n};\n\n// Arc.prototype.graphics = function(style) {\nfunction graphics_arc(arc, style) {\n    // let startAngle = 2 * Math.PI - this.startAngle;\n    // let endAngle =  2 * Math.PI - this.endAngle;\n    let graphics = new Graphics();\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 2;\n    let ignoreScale = style && style.ignoreScale !== undefined ? style.ignoreScale : true;\n    let stroke = style && style.stroke ? style.stroke : \"black\";\n    return graphics\n        .setStrokeStyle(strokeStyle,1,0,10,ignoreScale)\n        .beginStroke(stroke)\n        .arc(arc.pc.x, arc.pc.y, arc.r, arc.startAngle, arc.endAngle, !arc.counterClockwise)\n        .endStroke();\n};\n\n// Circle.prototype.graphics = function(style) {\nfunction graphics_circle(circle, style) {\n    let graphics = new Graphics();\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\n    // let stroke = style && style.stroke ? style.stroke : \"black\";\n    let stroke = style && style.stroke ? style.stroke : \"#FF0303\";\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\n    graphics.setStrokeStyle(strokeStyle,0,0,10,true);\n    graphics.stroke = graphics.beginStroke(stroke).command;\n    graphics.fill = graphics.beginFill(fill).command;\n    graphics.drawCircle(circle.pc.x, circle.pc.y, circle.r);\n    return graphics;\n};\n\n\nfunction graphics_box(box, style) {\n    let graphics = new Graphics();\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\n    let stroke = style && style.stroke ? style.stroke : \"#FF0303\";\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\n    graphics.setStrokeStyle(strokeStyle,0,0,10,true);\n    graphics.stroke = graphics.beginStroke(stroke).command;\n    graphics.fill = graphics.beginFill(fill).command;\n    graphics.drawRect(box.xmin, box.ymin, box.xmax-box.xmin, box.ymax-box.ymin);\n    return graphics;\n};\n\nfunction setGraphicsEdgeSegment(graphics, segment) {\n    graphics.lineTo(segment.pe.x, segment.pe.y);\n}\n\nfunction setGraphicsEdgeArc(graphics, arc) {\n    // let startAngle = 2 * Math.PI - arc.startAngle;\n    // let endAngle = 2 * Math.PI - arc.endAngle;\n    graphics.arc(arc.pc.x, arc.pc.y, arc.r, arc.startAngle, arc.endAngle, !arc.counterClockwise);\n}\n\nfunction setGraphicsEdge(graphics, edge) {\n    if (edge.shape instanceof Segment) {\n        setGraphicsEdgeSegment(graphics, edge.shape);\n    }\n    else if (edge.shape instanceof Arc) {\n        setGraphicsEdgeArc(graphics, edge.shape);\n    }\n}\n\nfunction setGraphicsFace(graphics, face) {\n    let ps = face.first.start;\n    graphics.moveTo(ps.x, ps.y);\n\n    for (let edge of face) {\n        setGraphicsEdge(graphics, edge);\n    }\n}\n\n// Polygon.prototype.graphics = function(style) {\nfunction graphics_polygon(polygon, style) {\n    let graphics = new Graphics();\n    let strokeStyle = style && style.strokeStyle ? style.strokeStyle : 1;\n    let stroke = style && style.stroke ? style.stroke : \"#FF0303\";\n    let fill = style && style.fill ? style.fill : \"#FF0303\";\n    graphics.setStrokeStyle(strokeStyle,0,0,10,true);\n    graphics.stroke = graphics.beginStroke(stroke).command;\n    graphics.fill = graphics.beginFill(fill).command;\n\n    for (let face of polygon.faces) {\n        setGraphicsFace(graphics, face);\n    }\n\n    graphics.endStroke();\n    return graphics;\n};\n\n","export const is_equal = (obj1, obj2) => {\n    let equal = true;\n    for (let key of Object.keys(obj2)) {\n        if (obj2[key] !== obj1[key]) {\n            equal = false;\n            break;\n        }\n    }\n    return equal;\n};\n\nexport const format = (num, divisor, decimals) => {\n    return (num/divisor).toFixed(decimals);\n};\n","/**\n * Created by alexanderbol on 19/06/2017.\n */\n\nimport {Component} from 'react';\nimport {Shape} from '@createjs/easeljs';\nimport {graphics} from '../../../../models/graphics';\nimport {is_equal} from '../../../../models/utils';\n\nexport class ShapeComponent extends Component {\n    constructor(params) {\n        super();\n        this.shape = new Shape();\n        params.stage.addChild(this.shape);\n    }\n\n    handleMouseOver = (event) => {\n        this.props.onMouseOver(this.props.model);\n    };\n\n    handleMouseOut = (event) => {\n        this.props.onMouseOut();\n    };\n\n    handleClick = (event) => {\n        this.props.onClick(this.props.model, this.props.layer);\n    };\n\n    redraw() {\n        // Draw shape\n        let stage = this.props.stage;\n        let color = (this.props.hovered || this.props.selected) ? \"black\" : this.props.color;\n        let alpha = (this.props.hovered || this.props.selected) ? 1.0 : 0.6;\n        let widthOn = this.props.widthOn;\n\n        let strokeStyle = this.props.model.geom.aperture ? this.props.model.geom.aperture : undefined;\n        let fill = widthOn ? this.props.color : \"white\";\n\n        if (this.shape.graphics.isEmpty()) {\n            this.shape.graphics = graphics(this.props.model.geom,{\n                strokeStyle: strokeStyle,\n                ignoreScale: true,\n                stroke: color,\n                fill: fill,\n                radius: 3. / (stage.zoomFactor * stage.resolution)\n            });\n\n            // this.skeletonShape = new Shape();\n            // this.skeletonShape.graphics = this.props.model.geom.graphics({\n            //     strokeStyle: 1,\n            //     ignoreScale: true,\n            //     stroke: color,\n            //     fill: fill,\n            //     radius: 3. / (stage.zoomFactor * stage.resolution)\n            // });\n            // this.skeletonShape.alpha = 1;\n            // this.props.stage.addChild(this.skeletonShape);\n        }\n        else {\n            if (this.shape.graphics.stroke) this.shape.graphics.stroke.style = color;\n            if (this.shape.graphics.fill) this.shape.graphics.fill.style = fill;\n            if (this.shape.graphics.circle) this.shape.graphics.circle.radius =\n                3. / (stage.zoomFactor * stage.resolution);\n        }\n        this.shape.alpha = this.props.displayed ? alpha : 0.0;\n\n        // let box = this.props.model.geom.box;\n        // this.shape.cache(box.xmin, box.ymin, box.xmax - box.xmin, box.ymax - box.ymin);\n    }\n\n    componentDidMount() {\n        this.shape.on(\"mouseover\", this.handleMouseOver);\n        this.shape.on(\"mouseout\", this.handleMouseOut);\n        this.shape.on(\"click\", this.handleClick);\n\n        // this.shape.mouseEnabled = false;\n\n        this.redraw();\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (is_equal(this.props, nextProps)) {\n            return false;\n        }\n        return true;\n    }\n\n    componentDidUpdate() {\n        this.redraw();\n    }\n\n    componentWillUnmount() {\n        this.shape.off(\"mouseover\", this.handleMouseOver);\n        this.shape.off(\"mouseout\", this.handleMouseOut);\n        this.shape.off(\"click\", this.handleClick);\n        this.props.stage.removeChild(this.shape);\n        this.shape.graphics.clear();\n    }\n\n    render() {\n        return null;\n    }\n}\n","/**\n * Created by alexanderbol on 19/06/2017.\n */\n\nimport {Component} from 'react';\nimport {Bitmap} from '@createjs/easeljs';\nimport '../../../../models/graphics';\nimport {is_equal} from '../../../../models/utils';\n// import storage from '../../../../firebase-storage';\n\nexport class ImageComponent extends Component {\n    handleMouseOver = (event) => {\n        this.props.onMouseOver(this.props.model);\n    };\n\n    handleMouseOut = (event) => {\n        this.props.onMouseOut();\n    };\n\n    handleClick = (event) => {\n        this.props.onClick(this.props.model, this.props.layer);\n    };\n\n    redraw() {\n        if (!this.bitmap) return;\n        // Draw shape\n        let alpha = 1; // (this.props.hovered || this.props.selected) ? 1.0 : 0.6;\n        this.bitmap.alpha = this.props.displayed ? alpha : 0.0;\n\n        let width = this.props.model.geom.width;\n        let ratio = this.bitmap.image.naturalWidth/this.bitmap.image.naturalHeight;\n        this.props.model.geom.height = this.props.model.geom.width / ratio;\n        let scaleX = width/this.bitmap.image.naturalWidth; // 1. / (stage.zoomFactor * stage.resolution);\n        let scaleY = width/(this.bitmap.image.naturalHeight*ratio);\n        let tx = this.props.model.geom.center.x; // stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\n        let ty = this.props.model.geom.center.y; // -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\n\n        this.bitmap.setTransform(tx, ty, scaleX, -scaleY);\n\n        this.bitmap.regX = this.bitmap.image.naturalWidth/2;\n        this.bitmap.regY = this.bitmap.image.naturalHeight/2;\n\n        // let box = this.state.polygon.geom.box;\n        // this.shape.cache(box.xmin, box.ymin, box.xmax - box.xmin, box.ymax - box.ymin);\n    }\n\n    loadImage() {\n        const img = new Image();\n\n        img.onload = () => {\n            // img.crossOrigin=\"Anonymous\";\n            this.bitmap = new Bitmap(img);\n            this.props.stage.addChild(this.bitmap);\n\n            // this.bitmap.on(\"mouseover\", this.handleMouseOver);\n            // this.bitmap.on(\"mouseout\", this.handleMouseOut);\n            // this.bitmap.on(\"click\", this.handleClick);\n\n            // this.shape.mouseEnabled = false;\n            this.redraw();\n\n            this.props.onImageLoaded(this.props.model, this.props.layer, img);\n        };\n        img.setAttribute('crossOrigin', 'anonymous'); // works for me\n\n        // Create a reference from a Google Cloud Storage URI\n        //const ref = storage.refFromURL(this.props.model.geom.uri);\n\n        // ref.getDownloadURL()\n        //    .then( url => {\n        //\n        //         img.src = url;\n        //     })\n        //     .catch( error => console.log(error))\n\n        img.src = this.props.model.geom.uri;\n    }\n\n    componentDidMount() {\n        this.loadImage()\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (is_equal(this.props, nextProps)) {\n            return false;\n        }\n        return true;\n    }\n\n    componentDidUpdate() {\n        this.redraw();\n    }\n\n    componentWillUnmount() {\n        // this.bitmap.off(\"mouseover\", this.handleMouseOver);\n        // this.bitmap.off(\"mouseout\", this.handleMouseOut);\n        // this.bitmap.off(\"click\", this.handleClick);\n\n        this.props.stage.removeChild(this.bitmap);\n    }\n\n    render() {\n        return null;\n    }\n}\n","import React, {Component} from 'react';\nimport {ShapeComponent} from './graphics/shapeComponent';\nimport {ImageComponent} from \"./graphics/imageComponent\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../../store/actions/appActions\";\n\nclass LayerComponent extends Component {\n    onImageLoaded = (model, layer, image) => {\n        this.props.setHomeView(this.props.stage, this.props.layer);\n        this.forceUpdate();       // ??? unclear why on Home button click not updated\n    }\n\n    render() {\n        return (\n            this.props.layer.shapes.map((shape, index) => {\n                return shape.geom.uri ? (\n                    <ImageComponent\n                        key={index}\n                        stage={this.props.stage}\n                        layer={this.props.layer}\n                        model={shape}\n                        displayed={this.props.layer.displayed}\n                        hovered={shape === this.props.hoveredShape}\n                        selected={\n                            shape === this.props.firstMeasuredShape ||\n                            shape === this.props.secondMeasuredShape\n                        }\n                        color={this.props.layer.color}\n                        widthOn={this.props.widthOn}\n                        displayLabels={this.props.displayLabels}\n                        zoomFactor={this.props.zoomFactor}\n                        onMouseOver={this.props.onMouseOver}\n                        onMouseOut={this.props.onMouseOut}\n                        onClick={this.props.onClick}\n                        onImageLoaded={this.onImageLoaded}\n                    />\n                    ) : (\n                    <ShapeComponent\n                        key={index}\n                        stage={this.props.stage}\n                        layer={this.props.layer}\n                        model={shape}\n                        displayed={this.props.layer.displayed}\n                        hovered={shape === this.props.hoveredShape}\n                        selected={\n                            shape === this.props.firstMeasuredShape ||\n                            shape === this.props.secondMeasuredShape\n                        }\n                        color={this.props.layer.color}\n                        widthOn={this.props.widthOn}\n                        displayVertices={this.props.displayVertices}\n                        zoomFactor={this.props.zoomFactor}\n                        onMouseOver={this.props.handleMouseRollOverShape}\n                        onMouseOut={this.props.handleMouseRollOutShape}\n                        onClick={this.props.handleClickOnShape}\n                    /> )\n                }\n            )\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        stage: state.app.stage,\n        layers: state.layers,\n        displayVertices: state.app.displayVertices,\n        displayLabels: state.app.displayLabels,\n        widthOn: state.app.widthOn,\n        zoomFactor: state.app.zoomFactor,\n        units: state.app.units,\n        divisor: state.app.divisor,\n        decimals: state.app.decimals,\n        measurePointsActive: state.app.measurePointsActive,\n        showAboutPopup: state.app.showAboutPopup,\n        showDownloadPopup: state.app.showDownloadPopup,\n        showUploadPopup: state.app.showUploadPopup,\n        measureShapesTool: state.measureShapesTool,\n        hoveredShape: state.measureShapesTool.hoveredShape,\n        firstMeasuredShape: state.measureShapesTool.firstMeasuredShape,\n        secondMeasuredShape: state.measureShapesTool.secondMeasuredShape\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setHomeView: (stage, shape) => dispatch(actions.setHomeView(stage, shape)),\n        handleMouseRollOverShape: (shape) => dispatch(actions.handleMouseRollOverShape(shape)),\n        handleMouseRollOutShape: () => dispatch(actions.handleMouseRollOutShape()),\n        handleClickOnShape: (shape, layer) => dispatch(actions.handleClickOnShape(shape, layer)),\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LayerComponent);\n","import React from 'react';\nimport classes from '../LabelsLayerComponent/labelsLayer.module.css';\n\nconst labelComponent = ( {stage, shape} ) => {\n    let center = shape.geom.center || shape.geom;  // Point has no method center\n    let left = stage.canvas.offsetLeft + stage.W2C_X(center.x) + 6;\n    let top = stage.canvas.offsetTop + stage.W2C_Y(center.y) - 4;\n    let inside = left > stage.canvas.offsetLeft && left < stage.canvas.offsetLeft + stage.canvas.width &&\n        top > stage.canvas.offsetTop && top < stage.canvas.offsetTop + stage.canvas.height;\n\n    return inside ? (\n        <div style={{position:\"absolute\", left:left+\"px\", top: top+\"px\"}} className={classes.LabelComponent}>\n            <h5>{shape.label}</h5>\n        </div>\n    ) : null;\n};\n\nexport default labelComponent;","import React from 'react';\nimport LabelComponent from '../domelements/labelComponent';\nimport { connect } from \"react-redux\";\n\nconst labelsLayerComponent = (props) => {\n\n    return (props.layer.displayed && props.displayLabels) ? (\n        props.layer.shapes.map((shape, index) => {\n                return (shape.label && shape.label.trim() !== \"\") ? (\n                    <LabelComponent\n                        key={index}\n                        stage={props.stage}\n                        shape={shape}\n                        zoomFactor={props.zoomFactor}\n                        originX={props.originX}\n                        originY={props.originY}\n                    />) : null;\n            }\n        )\n    ) : null;\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        stage: state.app.stage,\n        displayLabels: state.app.displayLabels,\n        zoomFactor: state.app.zoomFactor,\n        originX: state.app.originX,\n        originY: state.app.originY\n    }\n};\n\nconst mapDispatchToProps = dispatch => {return {}};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(labelsLayerComponent);\n","import React from 'react'\nimport {format} from \"../../../../../models/utils\";\nimport classes from './VertexLabel.module.css';\n\nconst VertexLabel = (props) => {\n    let stage = props.stage;\n    let left = stage.canvas.offsetLeft + stage.W2C_X(props.vertex.x) + 6;\n    let top = stage.canvas.offsetTop + stage.W2C_Y(props.vertex.y) - 10;\n    // let inside = left > stage.canvas.offsetLeft && left < stage.canvas.offsetLeft + stage.canvas.width &&\n    //     top > stage.canvas.offsetTop && top < stage.canvas.offsetTop + stage.canvas.height;\n    let x = format(props.vertex.x, props.divisor, props.decimals);\n    let y = format(props.vertex.y, props.divisor, props.decimals);\n\n    return (\n        <div className={classes.VertexLabel} style={{left:left, top:top}}>\n            <h5>\n                x={x} y={y}\n            </h5>\n        </div>\n    )\n};\n\nexport default VertexLabel;","/**\n * Created by alexanderbol on 19/06/2017.\n */\n\nimport React,{Component} from 'react';\nimport {Shape, Shadow} from '@createjs/easeljs';\nimport {graphics} from '../../../../models/graphics';\nimport {is_equal} from '../../../../models/utils';\nimport VertexLabel from '../domelements/VertexLabel/VertexLabel';\n\nclass VertexComponent extends Component {\n    constructor(props) {\n        super();\n        this.shape = new Shape();\n        props.stage.addChild(this.shape);\n\n        this.state = {\n            hovered: false\n        }\n    }\n\n    handleMouseOver = (event) => {\n        // this.props.onMouseOver(this.props.model);\n        this.shape.shadow = new Shadow(this.props.color, 0, 0, 10);\n        this.setState({hovered:true})\n    };\n\n    handleMouseOut = (event) => {\n        // this.props.onMouseOut();\n        this.shape.shadow = null;\n        this.setState({hovered:false})\n    };\n\n    handleClick = (event) => {\n        // this.props.onClick(this.props.model, this.props.layer);\n        console.log(this.props.vertex);\n    };\n\n    redraw() {\n        let stage = this.props.stage;\n        let stroke = this.props.color;\n        let fill = this.props.color;\n        let alpha = 1.0;\n\n\n        if (this.shape.graphics.isEmpty()) {\n            this.shape.graphics = graphics(this.props.vertex,\n                {\n                    stroke: stroke,     // this.props.color,\n                    fill: fill,\n                    radius: 3. / (stage.zoomFactor * stage.resolution)\n                });\n        }\n        else {\n            this.shape.graphics.circle.radius = 3. / (stage.zoomFactor * stage.resolution);\n            this.shape.graphics.fill.style = fill;\n        }\n        this.shape.alpha = alpha;\n    }\n\n    componentDidMount() {\n        this.shape.on(\"mouseover\", this.handleMouseOver);\n        this.shape.on(\"mouseout\", this.handleMouseOut);\n        this.shape.on(\"click\", this.handleClick);\n\n        this.shape.mouseEnabled = true;\n\n        this.redraw();\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (is_equal(this.props, nextProps) && is_equal(this.state, nextState)) {\n            return false;\n        }\n        return true;\n    }\n\n    componentDidUpdate() {\n        this.redraw();\n    }\n\n    componentWillUnmount() {\n        this.shape.off(\"mouseover\", this.handleMouseOver);\n        this.shape.off(\"mouseout\", this.handleMouseOut);\n        this.shape.off(\"click\", this.handleClick);\n\n        this.props.stage.removeChild(this.shape);\n        this.shape.graphics.clear();\n    }\n\n    render() {\n        return this.state.hovered ? (\n            <VertexLabel\n                stage={this.props.stage}\n                vertex={this.props.vertex}\n                divisor={this.props.divisor}\n                decimals={this.props.decimals}\n            />\n            ) : null;\n    }\n}\n\nexport default VertexComponent;","/**\n * Created by alexanderbol on 19/06/2017.\n */\nimport React from 'react';\nimport VertexComponent from './vertexComponent';\n\nconst VerticesComponent = (props) => {\n\n    return props.model.geom.vertices ?\n        props.model.geom.vertices.map((vertex, index) =>\n            <VertexComponent key={index}\n                             stage={props.stage}\n                             vertex={vertex}\n                             color={props.color}\n                             divisor={props.divisor}\n                             decimals={props.decimals}\n                             zoomFactor={props.zoomFactor}\n                             originX={props.originX}\n                             originY={props.originY}\n            />\n        ) : null;\n\n}\n\nexport default VerticesComponent;","import React from 'react'\nimport VerticesComponent from './graphics/verticesComponent';\nimport { connect } from \"react-redux\";\n\nconst verticesLayerComponent = (props) => {\n    return (props.layer.displayed && props.displayVertices) ? (\n        props.layer.shapes.map((shape, index) =>\n            <VerticesComponent\n                key={index}\n                stage={props.stage}\n                model={shape}\n                color={props.layer.color}\n                divisor={props.divisor}\n                decimals={props.decimals}\n                zoomFactor={props.zoomFactor}\n                originX={props.originX}\n                originY={props.originY}\n            />\n        )\n    ) : null;\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        stage: state.app.stage,\n        displayVertices: state.app.displayVertices,\n        zoomFactor: state.app.zoomFactor,\n        originX: state.app.originX,\n        originY: state.app.originY,\n        divisor: state.app.divisor,\n        decimals: state.app.decimals,\n    }\n};\n\nconst mapDispatchToProps = dispatch => {return {}};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(verticesLayerComponent);\n","import React, {Component} from 'react';\nimport LayerComponent from \"./layerComponent\";\nimport LabelsLayerComponent from \"./LabelsLayerComponent/labelsLayerComponent\";\nimport VerticesLayerComponent from './verticesLayerComponent';\n// import Layers from \"../../../models/layers\";\n\nclass LayersComponent extends Component {\n    componentDidMount() {\n        // if (this.props.layers.length > 0 && this.props.stage) {\n        //     let affectedLayer = Layers.getAffected(this.props.layers);\n        //     if (affectedLayer) {\n        //         this.props.setHomeView(this.props.stage, affectedLayer);\n        //     }\n        // }\n    }\n    render() {\n        return this.props.layers.map((layer) =>\n            <React.Fragment key={layer.name}>\n\n                <LayerComponent layer={layer} />\n\n                <LabelsLayerComponent layer={layer} />\n\n                <VerticesLayerComponent layer={layer} />\n            </React.Fragment>\n        )\n    }\n}\n\nexport default LayersComponent;\n","/**\n * Created by alexanderbol on 21/04/2017.\n */\n\nimport React, {Component} from 'react';\nimport {connect} from \"react-redux\";\nimport Stage from \"../models/stage\";\nimport * as actions from '../store/actions/stageActions';\n\nclass MeasurePointsTool extends Component {\n    measureCanvas = React.createRef();\n    measureStage = null;\n\n    state = {\n        startX: undefined,\n        startY: undefined,\n        endX: undefined,\n        endY: undefined,\n        measureStarted: false\n    };\n\n    handleMouseDown = (event) => {\n        event.preventDefault();\n\n        this.measureStage.clear();\n\n        if (this.state.measureStarted) {   // second click - clear measurement\n            this.setState({\n                startX: undefined,\n                startY: undefined,\n                endX: undefined,\n                endY: undefined,\n                measureStarted: false\n            });\n            this.measureStage.canvas.style.cursor = \"auto\";\n        }\n        else {                       // first click - start measurment\n            this.setState({\n                startX: this.measureStage.C2W_X(event.stageX),\n                startY: this.measureStage.C2W_Y(event.stageY),\n                measureStarted: true\n            });\n            this.measureStage.canvas.style.cursor = \"crosshair\";\n        }\n    };\n\n    handleMouseMove = (event) => {\n        if (this.state.measureStarted) {\n            this.setState({\n                endX: this.measureStage.C2W_X(event.stageX),\n                endY: this.measureStage.C2W_Y(event.stageY)\n            })\n        }\n    };\n\n    handleMouseUp = (event) => {\n    }\n\n    handleMouseWheel = (event) => {\n        event.preventDefault();\n\n        let delta = event.detail || event.wheelDelta;\n        if (delta !== 0) {\n            // this.props.onMouseWheelMove(event.offsetX, event.offsetY, delta);\n            this.props.handleMouseWheelMove(this.props.stage, event.offsetX, event.offsetY, delta);\n\n            this.draw();\n        }\n    };\n\n    handleMouseWheelFox = (event) => {\n        event.preventDefault();\n\n        if (event.detail !== 0) {\n            // this.props.onMousewheelMove(event.layerX, event.layerY, -event.detail);\n            this.props.handleMouseWheelMove(this.props.stage, event.layerX, event.layerY, -event.detail);\n\n            this.draw();\n        }\n    };\n\n    draw() {\n        // let canvas = this.measureCanvas.current;\n        let stage = this.measureStage; // this.props.stage;\n        let canvas = stage.canvas;\n        let context = canvas.getContext('2d');\n\n        this.measureStage.origin = this.props.stage.origin;\n        this.measureStage.resolution = this.props.stage.resolution;\n        this.measureStage.zoomFactor = this.props.stage.zoomFactor;\n\n        this.measureStage.clear();\n\n        // Draw rectangle\n        let pllX = Math.min(stage.W2C_X(this.state.startX), stage.W2C_X(this.state.endX));\n        let pllY = Math.min(stage.W2C_Y(this.state.startY), stage.W2C_Y(this.state.endY));\n        let width = Math.abs(stage.W2C_Scalar(this.state.startX - this.state.endX));\n        let height = Math.abs(stage.W2C_Scalar(this.state.startY - this.state.endY));\n\n        context.beginPath();\n        context.rect(pllX, pllY, width, height);\n\n        // Draw segment\n        context.moveTo(stage.W2C_X(this.state.startX), stage.W2C_Y(this.state.startY));\n        context.lineTo(stage.W2C_X(this.state.endX), stage.W2C_Y(this.state.endY));\n\n        context.lineWidth = 1;\n        context.strokeStyle = 'black';\n        context.stroke();\n\n        // Draw text\n        let textX, textY, textHeight, textWidth;\n        let backX, backY;                      // background rectangle\n        let text = this.measurement();\n\n        context.font = \"12pt Arial\";\n\n        textHeight = 12;\n        /* font size*/\n        textWidth = context.measureText(text).width;\n\n        // Rectangle to the right of current point, text aligned left\n        if (Math.abs(stage.W2C_X(this.state.endX) - pllX) <= 2) {\n            context.textAlign = \"left\";\n            textX = pllX + 3;\n            backX = pllX;\n        }\n        // Rectangle to the left of current point, text aligned right\n        else {\n            context.textAlign = \"right\";\n            textX = pllX + width - 3;\n            backX = textX - textWidth - 3;\n        }\n\n        if (Math.abs(stage.W2C_Y(this.state.endY) - pllY) <= 2) {\n            textY = pllY - 3;\n        }\n        else {\n            textY = pllY + height + textHeight + 3;\n        }\n        backY = textY - textHeight - 3;\n\n        context.fillStyle = 'white';\n        context.globalAlpha = 0.4;\n        context.fillRect(backX, backY, textWidth + 6, textHeight + 6);\n\n        context.fillStyle = \"black\";\n        context.globalAlpha = 1;\n        context.fillText(this.measurement(), textX, textY);\n    }\n\n    measurement() {\n        let dx = this.state.endX - this.state.startX;\n        let dy = this.state.endY - this.state.startY;\n        let dist = Math.sqrt(dx * dx + dy * dy);\n        let message = \"DX=\" + this.format(dx) + \",DY=\" + this.format(dy) + \",D=\" + this.format(dist);\n        return message;\n    }\n\n    format(num) {\n        return (num / this.props.divisor).toFixed(this.props.decimals);\n    }\n\n    componentDidMount() {\n        // let canvas = this.measureCanvas.current;\n        this.measureStage = new Stage(this.measureCanvas.current);\n        this.measureStage.origin = this.props.stage.origin;\n        this.measureStage.resolution = this.props.stage.resolution;\n        this.measureStage.zoomFactor = this.props.stage.zoomFactor;\n\n        this.measureStage.on(\"stagemousedown\", this.handleMouseDown);\n        this.measureStage.on(\"stagemousemove\", this.handleMouseMove);\n        this.measureStage.on(\"stagemouseup\", this.handleMouseUp);\n\n        this.measureStage.canvas.addEventListener(\"mousewheel\", this.handleMouseWheel);\n        this.measureStage.canvas.addEventListener(\"DOMMouseScroll\", this.handleMouseWheelFox);\n    }\n\n    componentDidUpdate() {\n        if (this.state.measureStarted) {\n            this.draw();\n        }\n    }\n\n    componentWillUnmount() {\n        this.measureStage.clear();\n        this.measureStage.removeAllChildren();\n        this.measureStage.removeAllEventListeners();\n    }\n\n    render() {\n        let mainCanvas = this.props.stage.canvas;\n        let width = mainCanvas.width;\n        let height = mainCanvas.height;\n        let top = mainCanvas.offsetTop;\n        let left = mainCanvas.offsetLeft;\n        return (\n            <canvas tabIndex=\"1\" ref={this.measureCanvas}\n                    width={width}\n                    height={height}\n                    style={{position: 'absolute', top: top, left: left}}\n            >\n            </canvas>\n        )\n    }\n}\n\nconst mapStateToProps = ({app}) => {\n    return {\n        stage: app.stage,\n        divisor: app.divisor,\n        decimals: app.decimals\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        handleMouseWheelMove: (stage, x, y, delta) => dispatch(actions.handleMouseWheelMove(stage, x, y, delta))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MeasurePointsTool);\n","/**\n * Created by alexanderbol on 21/04/2017.\n */\n\nimport {Component} from 'react';\nimport {Shape, Text} from '@createjs/easeljs';\nimport {graphics} from '../models/graphics';\n\nclass MeasureShapesTool extends Component {\n    constructor(params) {\n        super();\n        this.segment = new Shape();\n        params.stage.addChild(this.segment);\n\n        this.labelShape = new Text();\n        this.labelShape.x = 0;\n        this.labelShape.y = 0;\n        params.stage.addChild(this.labelShape);\n\n        // var html = document.createElement('div');\n        // html.innerText = \"\"; // params.model.label;\n        // html.style.position = \"absolute\";\n        // html.style.top = 0;\n        // html.style.left = 0;\n        //\n        // document.body.appendChild(html);\n        // this.labelShape = new createjs.DOMElement(html);\n        // params.stage.addChild(this.labelShape);\n    }\n\n    // redrawLabel() {\n    //     if (!this.labelShape) return;\n    //\n    //     let stage = this.props.stage;\n    //\n    //     this.labelShape.htmlElement.style.display = \"block\";\n    //\n    //     let box = this.props.shortestSegment.box;\n    //     let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\n    //     let dx = 6. / (stage.zoomFactor * stage.resolution);\n    //     let dy = 4. / (stage.zoomFactor * stage.resolution);\n    //\n    //     this.labelShape.htmlElement.style.font = \"16px Arial\";\n    //     this.labelShape.htmlElement.innerText = this.props.shortestSegment.length;\n    //\n    //     let unscale = 1. / (stage.zoomFactor * stage.resolution);\n    //     let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\n    //     let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\n    //     this.labelShape.setTransform(tx, ty, unscale, -unscale);\n    // }\n\n    format(num) {\n        return (num/this.props.divisor).toFixed(this.props.decimals);\n    }\n\n    redrawLabel() {\n        if (!this.labelShape) return;\n\n        let stage = this.props.stage;\n\n        let box = this.props.shortestSegment.box;\n        let point = {x: (box.xmin + box.xmax) / 2, y: (box.ymin + box.ymax) / 2};\n        let dx = 6. / (stage.zoomFactor * stage.resolution);\n        let dy = 4. / (stage.zoomFactor * stage.resolution);\n\n        if (box.ymin === box.ymax) {\n            dx = 0;\n            dy = -dy;\n        }\n\n        // this.labelShape.htmlElement.style.display = \"block\";\n        // this.labelShape.htmlElement.style.font = \"16px Arial\";\n        // this.labelShape.htmlElement.innerText = this.props.shortestSegment.length;\n\n        this.labelShape.text = this.format(this.props.shortestSegment.length);\n\n        let fontSize = 14.; // / (stage.zoomFactor * stage.resolution);\n        this.labelShape.font = `${fontSize}px Arial`;\n\n        let unscale = 1. / (stage.zoomFactor * stage.resolution);\n        // let tx = stage.canvas.offsetLeft / (stage.zoomFactor * stage.resolution) + point.x + dx;\n        // let ty = -stage.canvas.offsetTop / (stage.zoomFactor * stage.resolution) + point.y + dy;\n        let tx = point.x + dx;\n        let ty = point.y + dy;\n        this.labelShape.setTransform(tx, ty, unscale, -unscale);\n    }\n\n    draw() {\n        if (this.props.shortestSegment) {\n            this.segment.graphics = graphics(this.props.shortestSegment);\n            this.redrawLabel();\n        }\n    }\n    componentDidMount() {\n        this.draw();\n    }\n    componentDidUpdate() {\n        this.segment.graphics.clear();\n        if (this.props.firstMeasuredShape && this.props.secondMeasuredShape &&\n            this.props.firstMeasuredLayer.displayed &&\n            this.props.secondMeasuredLayer.displayed) {\n\n            this.draw();\n            this.redrawLabel();\n        }\n    }\n\n    componentWillUnmount() {\n        this.props.stage.removeChild(this.segment);\n        this.segment.graphics.clear();\n        this.props.stage.removeChild(this.labelShape);\n        this.labelShape.text = \"\";\n    }\n\n    render() {\n        return null;\n    }\n}\n\nexport default MeasureShapesTool;","/**\n * Created by alexanderbol on 21/04/2017.\n */\nimport React from 'react';\nimport {format} from '../models/utils';\n\nconst DisplayCoordsTool = ({stage, coordX, coordY, divisor, decimals}) => {\n    let mainCanvas = stage.canvas;\n    let top = mainCanvas.offsetTop + 10;\n    let left = mainCanvas.width - 200; //  mainCanvas.offsetLeft + 10;\n    let x = stage.C2W_X(coordX);\n    let y = stage.C2W_Y(coordY);\n    return (\n        <div style={{position: 'absolute', top: top, left: left,\n            backgroundColor: 'white', opacity:0.8}}>\n            <h5 style={{margin: 0, padding: 3}}>\n                X: {format(x,divisor,decimals)} Y: {format(y,divisor,decimals)}\n            </h5>\n        </div>\n    )\n};\n\nexport default DisplayCoordsTool;\n","import {Component} from 'react';\nimport ReactDOM from 'react-dom';\n\nconst modalRoot = document.getElementById('modal-root');\n\n// A Modal component that is an abstraction around the portal API.\nclass Modal extends Component {\n    constructor(props) {\n        super(props);\n        // Create a div that we'll render the modal into. Because each\n        // Modal component has its own element, we can render multiple\n        // modal components into the modal container.\n        this.el = document.createElement('div');\n    }\n\n    componentDidMount() {\n        // Append the element into the DOM on mount. We'll render\n        // into the modal container element (see the HTML tab).\n        modalRoot.appendChild(this.el);\n    }\n\n    componentWillUnmount() {\n        // Remove the element from the DOM when we unmount\n        modalRoot.removeChild(this.el);\n    }\n\n    render() {\n        // Use a portal to render the children into the element\n        return ReactDOM.createPortal(\n            // Any valid React child: JSX, strings, arrays, etc.\n            this.props.children,\n            // A DOM element\n            this.el,\n        );\n    }\n}\n\nexport default Modal;","import React, {Component} from 'react';\nimport Modal from '../Modal';\nimport classes from './ModalPopup.module.css';\n\nclass ModalPopup extends Component {\n    offsetX;\n    offsetY;\n    dragX;\n    dragY;\n\n    onBackDropClicked = (ev) => {\n        if (ev.target.id === \"backDrop\") {\n            this.props.closePopup();\n        }\n    };\n\n    handleKeyDown = (ev) => {\n        if (ev.code === \"Escape\") {\n            this.props.closePopup();\n        }\n    };\n\n    elementDrag = (ev) => {\n        ev = ev || window.event;\n        // calculate the new cursor position:\n        this.offsetX = this.dragX - ev.clientX;\n        this.offsetY = this.dragY - ev.clientY;\n        this.dragX = ev.clientX;\n        this.dragY = ev.clientY;\n        // set the element's new position:\n        let element = ev.target;\n        element.style.top = (element.offsetTop - this.offsetY) + \"px\";\n        element.style.left = (element.offsetLeft - this.offsetX) + \"px\";\n    };\n\n    closeDragElement = (ev) => {\n        /* stop moving when mouse button is released:*/\n        ev.target.onmouseup = null;\n        ev.target.onmousemove = null;\n    };\n\n    dragMouseDown = (ev) => {\n        ev = ev || window.event;\n        // get the mouse cursor position at startup:\n        this.dragX = ev.clientX;\n        this.dragY = ev.clientY;\n        ev.target.onmouseup = this.closeDragElement;\n        // call a function whenever the cursor moves:\n        ev.target.onmousemove = this.elementDrag;\n    };\n\n    componentDidMount() {\n        document.addEventListener('keydown', this.handleKeyDown);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.handleKeyDown);\n    }\n\n    render() {\n        return this.props.showPopup ? (\n            <Modal>\n                <div\n                    id=\"backDrop\"\n                    className={classes.BackDrop}\n                    onClick={this.onBackDropClicked}\n                >\n                    <div className={classes.ModalPopup}\n                         onMouseDown={this.dragMouseDown}\n                    >\n                        <header>{this.props.header}</header>\n                        {this.props.children}\n                    </div>\n                </div>\n            </Modal>\n        ) : null;\n    }\n}\n\nexport default ModalPopup;\n","/**\n * Created by alexanderbol on 13/04/2017.\n */\n\nimport React from 'react';\nimport classes from './AboutPopup.module.css';\nimport ModalPopup from \"../UI/ModalPopup/ModalPopup\";\n\nconst AboutPopup = (props) => {\n    return (\n        <ModalPopup\n            showPopup={props.showAboutPopup}\n            closePopup={props.toggleAboutPopup}\n            header=\"Info\"\n        >\n            <div className={classes.AboutPopup}>\n                <h2>{props.title} v{props.version}</h2>\n\n                <label>{`Build date: `}</label>\n                <span>April 2019</span>\n                <br/>\n\n                <label>{`Github depository: `}</label>\n                <a href=\"https://github.com/alexbol99/debug-viewer1\" >\n                    https://github.com/alexbol99/debug-viewer1\n                </a>\n                <br/>\n\n                <label>{`3d party graphics library: `}</label>\n                <a href=\"https://github.com/CreateJS/EaselJS/tree/2.0\" >\n                    https://github.com/CreateJS/EaselJS/tree/2.0\n                </a>\n                <br/>\n\n            </div>\n        </ModalPopup>\n\n    )\n};\n\nexport default AboutPopup;\n","import {Point, Segment, Arc, Circle, Box, Polygon} from \"@flatten-js/core\";\nimport {CW, ORIENTATION} from \"@flatten-js/core\";\n\nimport XMLWriter from \"xml-writer\";\n\nfunction pointToXMLString(xw, shape) {\n    xw.startElement('point');\n        xw.writeAttribute('x', shape.geom.x);\n        xw.writeAttribute('y', shape.geom.y);\n        xw.writeAttribute('label', shape.label);\n    xw.endElement();\n}\n\nfunction segmentToXMLString(xw, shape) {\n    xw.startElement('segment');\n        xw.writeAttribute('xs', shape.geom.ps.x);\n        xw.writeAttribute('ys', shape.geom.ps.y);\n        xw.writeAttribute('xe', shape.geom.pe.x);\n        xw.writeAttribute('ye', shape.geom.pe.y);\n        xw.writeAttribute('label', shape.label);\n    xw.endElement();\n}\n\nfunction arcToXMLString(xw, shape) {\n    xw.startElement('arc');\n        xw.writeAttribute('xs', Math.round(shape.geom.start.x));\n        xw.writeAttribute('ys', Math.round(shape.geom.start.y));\n        xw.writeAttribute('xe', Math.round(shape.geom.end.x));\n        xw.writeAttribute('ye', Math.round(shape.geom.end.y));\n        xw.writeAttribute('xc', shape.geom.center.x);\n        xw.writeAttribute('yc', shape.geom.center.y);\n        xw.writeAttribute('cw', shape.geom.counterClockwise === CW ? \"yes\" : \"no\");\n        xw.writeAttribute('label', shape.label);\n    xw.endElement();\n}\n\nfunction circleToXMLString(xw, shape) {\n    xw.startElement('circle');\n        xw.writeAttribute('xc', shape.geom.center.x);\n        xw.writeAttribute('yc', shape.geom.center.y);\n        xw.writeAttribute('label', shape.label);\n    xw.endElement();\n}\n\nfunction boxToXMLString(xw, shape) {\n\n}\n\nfunction polygonToXMlString(xw, polygon) {\n    xw.startElement('profile');\n\n    for (let face of polygon.faces) {\n        if (face.orientation() === ORIENTATION.CW) {\n            xw.startElement('island');\n        }\n        else {\n            xw.startElement('hole');\n        }\n\n        xw.writeAttribute('n_edges', `${face.size}`);\n\n        for (let edge of face) {\n            xw.startElement('edge');\n            let shape = edge.shape;\n            if (shape instanceof Segment) {\n                xw.writeAttribute('type', 'segment');\n                xw.writeAttribute('xs', shape.ps.x);\n                xw.writeAttribute('ys', shape.ps.y);\n                xw.writeAttribute('xe', shape.pe.x);\n                xw.writeAttribute('ye', shape.pe.y);\n            } else if (edge.shape instanceof Arc) {\n                xw.writeAttribute('type', 'curve');\n                xw.writeAttribute('xs', Math.round(shape.start.x));\n                xw.writeAttribute('ys', Math.round(shape.start.y));\n                xw.writeAttribute('xe', Math.round(shape.end.x));\n                xw.writeAttribute('ye', Math.round(shape.end.y));\n                xw.writeAttribute('xc', shape.center.x);\n                xw.writeAttribute('yc', shape.center.y);\n                xw.writeAttribute('cw', shape.counterClockwise === CW ? \"yes\" : \"no\");\n            } else {\n                xw.writeAttribute('type', 'unknown');\n            }\n            xw.endElement();\n        }\n\n        xw.endElement();  // island or hole\n    }\n\n    xw.endElement();     // profile\n}\n\nexport function createXMLString(shapes) {\n    let xw = new XMLWriter(true);\n    xw.startDocument('1.0', 'UTF-8');\n\n    xw.startElement('shapes');\n    xw.startElement('title').text('test polygon in xml format').endElement();\n\n    for (let shape of shapes) {\n        if (shape.geom instanceof Point) {\n            pointToXMLString(xw, shape);\n        }\n        else if (shape.geom instanceof Segment) {\n            segmentToXMLString(xw, shape);\n        }\n        else if (shape.geom instanceof Arc) {\n            arcToXMLString(xw, shape);\n        }\n        else if (shape.geom instanceof Circle) {\n            circleToXMLString(xw, shape);\n        }\n        else if (shape.geom instanceof Box) {\n            boxToXMLString(xw, shape)\n        }\n        else if (shape.geom instanceof Polygon) {\n            polygonToXMlString(xw, shape.geom);\n        }\n    }\n\n    xw.endDocument();\n    return xw.toString();\n}\n\n","import React, {Component} from 'react';\nimport ModalPopup from \"../UI/ModalPopup/ModalPopup\";\nimport {createXMLString} from \"../../dataParsers/createXML\";\n\nimport classes from \"./DownloadPopup.module.css\";\n\nclass DownloadPopup extends Component {\n    render() {\n        let downloadData = this.props.showPopup ?\n            this.props.layers.map( layer => {\n            return layer.displayed ? {\n                filename: `${layer.name}.xml`,\n                xmlString: createXMLString(layer.shapes)\n            } : null\n        }) : [];\n        return this.props.showPopup && this.props.layers.length > 0 ? (\n            <ModalPopup\n                showPopup={this.props.showPopup}\n                closePopup={this.props.closePopup}\n                header=\"Download files\"\n            >\n                <div className={classes.DownloadPopup}>\n                    <h5>Click to the following links to start download</h5>\n                    <ul>\n\n                        {downloadData.map(data =>\n                            data === null ? null :\n                            <li key={data.filename}>\n                                <a href={'data:text/json;charset=utf-8,' + encodeURIComponent(data.xmlString)}\n                                   download={data.filename}>\n                                    {data.filename}\n                                </a>\n                            </li>\n                        )}\n\n                    </ul>\n                </div>\n            </ModalPopup>\n        ) : null;\n    }\n}\n\nexport default DownloadPopup;\n","import {Component} from 'react';\nimport ReactDOM from 'react-dom';\n\nconst snackbarRoot = document.getElementById('snackbar-root');\n\nclass SnackbarRoot extends Component {\n    constructor(props) {\n        super(props);\n        this.el = document.createElement('div');\n    }\n\n    componentDidMount() {\n        snackbarRoot.appendChild(this.el);\n    }\n\n    componentWillUnmount() {\n        snackbarRoot.removeChild(this.el);\n    }\n\n    render() {\n        return ReactDOM.createPortal(\n            // Any valid React child: JSX, strings, arrays, etc.\n            this.props.children,\n            // A DOM element\n            this.el,\n        );\n    }\n}\n\nexport default SnackbarRoot;","import React,{Component} from 'react';\nimport SnackbarRoot from '../SnackbarRoot';\nimport classes from './Snackbar.module.css';\n\nclass Snackbar extends Component {\n    state = {\n        display: true\n    };\n\n    animationEndHandler() {\n        this.setState({\n            display: false\n        });\n        this.props.onAnimationEnd();\n    }\n\n    render() {\n        return ( this.state.display ?\n            <SnackbarRoot>\n                <div className={classes.Snackbar} onAnimationEnd={this.props.onAnimationEnd}>\n                    <h3>{this.props.message}</h3>\n                </div>\n            </SnackbarRoot> : null\n        )\n    }\n}\n\nexport default Snackbar;","import { Job } from '../models/job';\nimport {Point, Segment, Arc, Polygon, vector} from '@flatten-js/core';\nimport Flatten from '@flatten-js/core';\n\nFlatten.Image = class Image {\n    constructor() {\n        this.uri = \"\";\n        /**\n         * Center in world coordinates\n         * @type {Flatten.Point}\n         */\n        this.center = new Flatten.Point();\n        /**\n         * Width in world units (inch/mm)\n         */\n        this.width = 0;\n        /**\n         * Height in world units (inch/mm)\n         */\n        this.height = 0;\n    }\n    get box() {\n        return new Flatten.Box(\n            this.center.x - this.width/2,\n            this.center.y - this.height/2,\n            this.center.x + this.height/2,\n            this.center.y + this.height/2\n        );\n\n    }\n};\n\nfunction parseEdges(edgesXML) {\n    let edges = [];\n\n    for (let edge of Array.from(edgesXML)) {\n        let type = edge.getAttribute('type');\n\n        if (type === \"segment\") {\n            let ps = new Point(parseInt(edge.getAttribute('xs'),10), parseInt(edge.getAttribute('ys'),10));\n            let pe = new Point(parseInt(edge.getAttribute('xe'),10), parseInt(edge.getAttribute('ye'),10));\n\n            edges.push(new Segment(ps, pe));\n        }\n\n        if (type === \"curve\") {\n            let ps = new Point(parseInt(edge.getAttribute('xs'),10), parseInt(edge.getAttribute('ys'),10));\n            let pe = new Point(parseInt(edge.getAttribute('xe'),10), parseInt(edge.getAttribute('ye'),10));\n            let pc = new Point(parseInt(edge.getAttribute('xc'),10), parseInt(edge.getAttribute('yc'),10));\n\n            let counterClockwise = edge.getAttribute('cw') === 'no' ? true : false;\n\n            let startAngle = vector(pc,ps).slope;\n            let endAngle = vector(pc, pe).slope;\n\n            if (Flatten.Utils.EQ(startAngle, endAngle)) {\n                endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\n            }\n\n            let r = vector(pc, ps).length;\n\n            edges.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\n        }\n    }\n\n    return edges;\n}\n\nfunction parsePolygon(polygonsXML) {\n    let polygon = new Polygon();\n\n    // let nedges = parseInt(profile.getAttribute(\"n_edges\"), 10);\n\n    // Augment Flatten object with style\n    let color = polygonsXML.getAttribute(\"color\");\n    polygon.style = {\n        stroke: color || undefined,\n        fill: color || undefined,\n        alpha: 1.0\n    };\n\n    // Augment Flatten object with label\n    let label = polygonsXML.getAttribute(\"label\");\n    polygon.label = label;\n\n    // Add islands\n    let islands = polygonsXML.getElementsByTagName('island');\n    for (let island of Array.from(islands)) {\n        let edgesXML = island.getElementsByTagName('edge');\n        polygon.addFace(parseEdges(edgesXML));\n    }\n\n    // Add holes\n    let holes = polygonsXML.getElementsByTagName('hole');\n    for (let hole of Array.from(holes)) {\n        let edgesXML = hole.getElementsByTagName('edge');\n        polygon.addFace(parseEdges(edgesXML));\n    }\n\n    return polygon;\n}\n\nfunction parseSegment(segmentXML) {\n    let ps = new Point(parseInt(segmentXML.getAttribute('xs'),10), parseInt(segmentXML.getAttribute('ys'),10));\n    let pe = new Point(parseInt(segmentXML.getAttribute('xe'),10), parseInt(segmentXML.getAttribute('ye'),10));\n\n    let segment = new Segment(ps, pe);\n\n    // Augment Flatten object with label property\n    let label = segmentXML.getAttribute(\"label\");\n    segment.label = label;\n\n    return segment;\n}\n\nfunction parseCurve(curveXML) {\n    let ps = new Point(parseInt(curveXML.getAttribute('xs'),10), parseInt(curveXML.getAttribute('ys'),10));\n    let pe = new Point(parseInt(curveXML.getAttribute('xe'),10), parseInt(curveXML.getAttribute('ye'),10));\n    let pc = new Point(parseInt(curveXML.getAttribute('xc'),10), parseInt(curveXML.getAttribute('yc'),10));\n\n    let counterClockwise = curveXML.getAttribute('cw') === 'no' ? true : false;\n\n    let startAngle = vector(pc,ps).slope;\n    let endAngle = vector(pc, pe).slope;\n\n    if (Flatten.Utils.EQ(startAngle, endAngle)) {\n        endAngle = counterClockwise ? endAngle + 2*Math.PI : endAngle - 2*Math.PI;\n    }\n\n    let r = vector(pc, ps).length;\n\n    let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\n\n    // Augment Flatten object with label property\n    let label = curveXML.getAttribute(\"label\");\n    arc.label = label;\n\n    return arc;\n}\n\nfunction parsePoint(pointXML) {\n    let point = new Point(parseInt(pointXML.getAttribute('x'),10), parseInt(pointXML.getAttribute('y'),10));\n\n    // Augment Flatten object with label property\n    let label = pointXML.getAttribute(\"label\");\n    point.label = label;\n\n    return point;\n}\n\nfunction parseImage(imageXML) {\n    let img = new Flatten.Image();\n    img.center = new Point(parseInt(imageXML.getAttribute('xc'),10), parseInt(imageXML.getAttribute('yc'),10));\n    img.width = parseInt(imageXML.getAttribute('width'),10);\n    img.height = parseInt(imageXML.getAttribute('height'),10);\n    img.uri = imageXML.getAttribute('uri');\n    return img;\n}\n\nexport function parseXML(filename, str) {\n    let job = new Job();\n\n    job.filename = filename;\n\n    let parser = new DOMParser();\n    let xmlDoc = parser.parseFromString(str, \"text/xml\");\n\n    // Parse document title\n    let titles = xmlDoc.getElementsByTagName('title');\n    if (titles && titles.length > 0) {\n        job.title = titles[0].firstChild.nodeValue;          // take the first title if more than one\n    }\n\n    // Parse profiles and add polygons to the job\n    let profilesXML = xmlDoc.getElementsByTagName('profile');\n    for (let profileXML of Array.from(profilesXML)) {\n        let polygon = parsePolygon(profileXML);\n        job.profiles.push(polygon);\n    }\n\n    // Parse materials and add polygons to the job\n    let materialXML = xmlDoc.getElementsByTagName('material');\n    for (let shapeXML of Array.from(materialXML)) {\n        let polygon = parsePolygon(shapeXML);\n        job.materials.push(polygon);\n    }\n\n    // Parse segments\n    let segmentsXML = xmlDoc.getElementsByTagName('segment');\n    for (let segmentXML of Array.from(segmentsXML)) {\n        let segment = parseSegment(segmentXML);\n        job.shapes.push(segment);\n    }\n\n    // Parse segments\n    let curvesXML = xmlDoc.getElementsByTagName('curve');\n    for (let curveXML of Array.from(curvesXML)) {\n        let curve = parseCurve(curveXML);\n        job.shapes.push(curve);\n    }\n\n    // Parse points\n    let pointsXML = xmlDoc.getElementsByTagName('point');\n    for (let pointXML of Array.from(pointsXML)) {\n        let point = parsePoint(pointXML);\n        job.shapes.push(point);\n    }\n\n    // Parse images\n    let imagesXML = xmlDoc.getElementsByTagName('picture');\n    for (let imageXML of Array.from(imagesXML)) {\n        let image = parseImage(imageXML);\n        job.shapes.push(image);\n    }\n\n    return job;\n}\n","import { Job } from '../models/job';\nimport {Point, Segment, Arc, Polygon, Utils, vector} from '@flatten-js/core';\nimport Flatten from '@flatten-js/core';\n\nconst inch2pixels = 10160000;\nconst mils2pixels = 10160;\nfunction InchToPixels(str) {\n    return Math.round(Number(str)*inch2pixels,0);\n}\nfunction MilsToPixels(str) {\n    return Math.round(Number(str)*mils2pixels,0);\n}\n\nfunction parsePolygon(lines, start) {\n    let shapes = [];\n    let i = start;\n    let line = lines[i];\n    let terms = line.split(' ');\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\n    let pe;\n    let pc;\n    let end_of_face = false;\n    while(true) {\n        line = lines[i];\n        terms = line.split(' ');\n        switch (terms[0]) {\n            case 'OS':\n                pe = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\n                shapes.push( new Segment(ps, pe));\n\n                ps = pe.clone();\n                break;\n            case 'OC':\n                pe = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\n                pc = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\n\n                let cwStr = terms[5];\n                let counterClockwise = cwStr === 'Y' ? Flatten.CW : Flatten.CCW; /* sic ! */\n\n                let startAngle = vector(pc,ps).slope;\n                let endAngle = vector(pc, pe).slope;\n                if (Utils.EQ(startAngle, endAngle)) {\n                    endAngle += 2*Math.PI;\n                    counterClockwise = true;\n                }\n                let r = vector(pc, ps).length;\n\n                shapes.push(new Arc(pc, r, startAngle, endAngle, counterClockwise));\n\n                ps = pe.clone();\n                break;\n            case 'OE':\n                end_of_face = true;\n                break;\n            default:\n                break;\n        }\n        if (end_of_face) {\n            break;\n        }\n\n        i++;\n    }\n    return shapes;\n}\n\nfunction parseLine(str, apertures) {\n    let terms = str.split(' ');\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\n    let pe = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\n    let segment = new Segment(ps, pe);\n    let ap_key = Number(terms[5]);\n    let ap_value = apertures[ap_key];\n    segment.aperture = ap_value;     // augmentation\n    return segment;\n}\n\nfunction parseArc(str, apertures) {\n    let terms = str.split(' ');\n    let ps = new Point( InchToPixels(terms[1]), InchToPixels(terms[2]) );\n    let pe = new Point( InchToPixels(terms[3]), InchToPixels(terms[4]) );\n    let pc = new Point( InchToPixels(terms[5]), InchToPixels(terms[6]) );\n\n    let cwStr = terms[10];\n    let counterClockwise = cwStr === 'Y' ? Flatten.CW : Flatten.CCW; /* sic ! */\n\n    let startAngle = vector(pc,ps).slope;\n    let endAngle = vector(pc, pe).slope;\n    if (Flatten.Utils.EQ(startAngle, endAngle)) {\n        endAngle += 2*Math.PI;\n        counterClockwise = true;\n    }\n    let r = vector(pc, ps).length;\n\n    let arc = new Arc(pc, r, startAngle, endAngle, counterClockwise);\n\n    let ap_key = Number(terms[7]);\n    let ap_value = apertures[ap_key];\n    arc.aperture = ap_value;     // augmentation\n\n    return arc;\n}\n\nexport function parseODB(filename, str) {\n    let job = new Job();\n    job.filename = filename;\n\n    let arrayOfLines = str.match(/[^\\r\\n]+/g);\n    let polygon;\n\n    let apertures = [];\n\n    for (let i=0; i < arrayOfLines.length; i++) {\n        let line = arrayOfLines[i];\n        let terms = line.split(' ');\n\n        if (terms[0].substr(0,1) === '$') {\n            let ap_key = Number(terms[0].substr(1));\n            let ap_value = MilsToPixels(terms[1].substr(1));\n            apertures[ap_key] = ap_value;\n            continue;\n        }\n\n        switch (terms[0]) {\n            case 'S':                  // surface started\n                polygon = new Polygon();\n                let termArr = line.split(' ');\n                let polarity = termArr[1];      // consider later\n                polygon.polarity = polarity;\n                break;\n            case 'OB':                  // polygon started\n                let start = i;\n                let shapes = parsePolygon(arrayOfLines, start);\n                polygon.addFace(shapes);\n                i = start + shapes.length + 1;\n                break;\n            case 'SE':     // surface ended\n                job.shapes.push(polygon);\n                break;\n            case 'L':                  // line\n                let odbLine = parseLine(line, apertures);\n                job.shapes.push(odbLine);\n                break;\n            case 'A':                  // Arc\n                let odbArc = parseArc(line, apertures);\n                job.shapes.push(odbArc);\n                break;\n            default:\n                break;\n        }\n    }\n    return job;\n}","import {Point,Box} from '@flatten-js/core';\n\nconst pgmResolution = 25.500025;\nconst microns2pixels = 400;\n// const inch2pixels = 10160;\n// const offsetX = 12.322830;\n// const offsetY = 8.326776;\nconst sizeX = 3.0303;\n\nfunction toPixels(str) {\n    let num = Number(str);\n    return Math.round(num*pgmResolution*microns2pixels,0);\n}\n\nexport function parseImage(file) {\n    let image = {};          // TODO: to be Flatten.Image\n\n    let terms = file.name.split('_');\n    let yStr = terms[0].substr(1);\n    let xStr = terms[1] ? terms[1].substr(1) : undefined;\n\n    let x = isNaN(xStr) ? 0 : toPixels(xStr) + 90000;\n    let y = isNaN(yStr) ? 0 : toPixels(yStr) - 40000;\n\n    image.center = new Point(x,y);\n    image.width = sizeX*microns2pixels*1000;    // 2 mm\n    image.box = new Box(\n        image.center.x - image.width/2,\n        image.center.y - image.width/2,\n        image.center.x + image.width/2,\n        image.center.y + image.width/2,\n    );\n\n    return image;\n}","import { Job } from '../models/job';\nimport {point} from '@flatten-js/core';\n\nconst micron2pixels = 400;\nfunction micronToPixels(str) {\n    return Math.round(Number(str)*micron2pixels,0);\n}\n\nexport function parseCSV(filename, str) {\n    let job = new Job();\n    job.filename = filename;\n\n    let arrayOfLines = str.match(/[^\\r\\n]+/g);\n\n    for (let i = 0; i < arrayOfLines.length; i++) {\n        let line = arrayOfLines[i];\n        let terms = line.split(',');\n\n        let px = micronToPixels(terms[0]);\n        let py = micronToPixels(terms[1]);\n        let nx = Number(terms[2]);\n        let ny = Number(terms[3]);\n        let shape = point(px,py);\n        shape.nx = nx;\n        shape.ny = ny;\n        job.shapes.push(shape)\n    }\n\n    return job\n}","import { Job } from '../models/job';\nimport {Parser} from './parser';\n\nexport function parseTXT(filename, str) {\n    let job = new Job();\n    job.filename = filename;\n\n    let parser = new Parser();\n\n    let shapesArray = parser.parse(str);\n\n    if (shapesArray.length > 0) {\n        for (let shape of shapesArray) {\n            job.shapes.push(shape)\n        }\n    }\n\n    return job\n}","import * as ActionTypes from \"../actionTypes\";\nimport * as appActions from \"../actions/appActions\";\nimport Layers from '../../models/layers';\nimport Model from \"../../models/model\";\nimport { parseXML } from '../../dataParsers/parserXML';\nimport { parseODB } from \"../../dataParsers/parserODB\";\nimport { parseImage } from \"../../dataParsers/parsePGM\";\nimport { parseCSV } from \"../../dataParsers/parseCSV\";\nimport { parseTXT } from \"../../dataParsers/parseTXT\";\nimport { parseJSON} from \"../../dataParsers/parseJSON\";\n\n// Closure to capture file information and parameters\nconst readAsText = (reader, file, stage, layers, dispatch, files) => {\n\n    let promise = new Promise( (resolve, reject) => {\n        reader.onload = (function(theFile, stage, layers, dispatch, files, resolve, reject) {\n            return (event) => {\n                let string = event.target.result;\n\n                let namesplitted = theFile.name.split('.');\n                let extension = namesplitted[namesplitted.length-1];\n                let job;\n                if (extension === 'xml') {\n                    job = parseXML(theFile.name, string);\n                }\n                else if (extension === 'csv') {\n                    job = parseCSV(theFile.name, string);\n                }\n                else if (extension === 'txt') {\n                    job = parseTXT(theFile.name, string);\n                }\n                else if (extension === 'json') {\n                    job = parseJSON(theFile.name, string);\n                }\n                else {\n                    job = parseODB(theFile.name, string);\n                }\n                let layer = Layers.newLayer(stage, layers);\n                if (theFile.name !== \"\") {\n                    layer.name = theFile.name;\n                }\n                layer.title = job.title;\n\n                for (let polygon of job.profiles) {\n                    if (polygon.edges.size > 0 && polygon.faces.size > 0) {\n                        // let watch = undefined; //  parser.parseToWatchArray(string);\n                        // let shape = new Shape(polygon, stage, polygon.style, watch);\n                        let shape = new Model(polygon, undefined, polygon.label);\n\n                        layer.add(shape);\n                    }\n                }\n\n                for (let polygon of job.materials) {\n                    if (polygon.edges.size > 0 && polygon.faces.size > 0) {\n                        // let watch = undefined; //  parser.parseToWatchArray(string);\n                        // let shape = new Shape(polygon, stage, polygon.style, watch);\n                        let shape = new Model(polygon, undefined, polygon.label);\n\n                        layer.add(shape);\n                    }\n                }\n\n                for (let shape of job.shapes) {\n                    let model = new Model(shape, undefined, shape.label);\n                    layer.add(model);\n                }\n\n                // layers.push(layer);\n\n                if (theFile === files[0]) {\n                    Layers.setAffected(layers, layer);\n                    layer.color = Layers.getNextColor(layers);\n                    layer.displayed = true;\n                    dispatch({\n                        type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n                        stage: stage,\n                        shape: layer\n                    });\n                }\n                dispatch({\n                    type: ActionTypes.ADD_NEW_LAYER,\n                    layer: layer\n                });\n\n                dispatch({\n                    type: ActionTypes.ASYNC_OPERATION_ENDED\n                });\n\n                resolve(true);\n            }\n        })(file, stage, layers, dispatch, files, resolve, reject);\n\n        reader.readAsText(file);\n    });\n\n\n    dispatch({\n        type: ActionTypes.ASYNC_OPERATION_STARTED\n    });\n\n    return promise\n};\n\nconst readAsImage = (reader, file, stage, layers, dispatch, files) => {\n    let promise = new Promise( (resolve, reject) => {\n        reader.addEventListener(\"load\", function () {\n            // let image = {};          // TODO: to be Flatten.Image\n            // image.uri = this.result;\n            // image.center = new Flatten.Point(0,0);\n            // image.width = 2*400000;    // 2 micron\n            // image.box = new Flatten.Box(\n            //     image.center.x - image.width/2,\n            //     image.center.y - image.width/2,\n            //     image.center.x + image.width/2,\n            //     image.center.y + image.width/2,\n            // );\n\n            let image = parseImage(file);\n            image.uri = this.result;\n\n            let model = new Model(image);\n\n            let layer = Layers.newLayer(stage, layers);\n            if (file.name !== \"\") {\n                layer.name = file.name;\n            }\n\n            layer.add(model);\n\n            // layers.push(layer);\n\n            if (file === files[0]) {\n                Layers.setAffected(layers, layer);\n                layer.color = Layers.getNextColor(layers);\n                layer.displayed = true;\n                dispatch({\n                    type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n                    stage: stage,\n                    shape: layer\n                });\n            }\n\n            dispatch({\n                type: ActionTypes.ADD_NEW_LAYER,\n                layer: layer\n            });\n\n            dispatch({\n                type: ActionTypes.ASYNC_OPERATION_ENDED\n            });\n\n            resolve(true);\n        }, false);\n\n        reader.readAsDataURL(file);\n    });\n\n    return promise;\n};\n\nconst readFile = (file, stage, layers, dispatch, files) => {\n    if (file.type !== \"\" &&\n        !(file.type.match('text.*') || file.type.match('application.*') ||\n            file.type.match('image.*')) ) return;   // validate type is text\n\n    let reader = new FileReader();\n\n    if (file.type.match('text.*') || file.type.match('application.*') || file.name.match('features*')) {\n        return readAsText(reader, file, stage, layers, dispatch, files);\n    }\n\n    else if (file.type.match('image.*')) {\n        return readAsImage(reader, file, stage, layers, dispatch, files);\n    }\n\n    return Promise.reject(\"not supported file\");\n};\n\nexport const readFiles = (files, stage, layers) => {\n    return (dispatch) => {\n        dispatch(appActions.asyncOperationStarted());\n\n        // Load and parse files\n        // in MS Edge FilesList is not array. It is indexable but not iterable\n        // for (let i=0; i < action.files.length; i++) {\n        //     readFile(action.files[i], stage, layers, dispatch, action.files);\n        // }\n        let promises = [];\n        for (let file of Array.from(files)) {\n            let promise = readFile(file, stage, layers, dispatch, files);\n            promises.push(promise);\n        }\n\n        return Promise.all(promises)\n            .then( (values) => {\n                dispatch(filesUploadCompleted(values));\n            })\n\n            .catch(error => {\n                alert(error.message);\n                dispatch(appActions.asyncOperationEnded());\n            })\n    }\n};\n\nexport const filesUploadCompleted = (values) => {\n    return {\n        type: ActionTypes.FILES_UPLOAD_COMPLETED,\n        uploadedFiles: values\n    }\n};\n\nexport const initUploadState = () => {\n    return {\n        type: ActionTypes.INITIALIZE_UPLOAD_STATE\n    }\n};\n\nexport default readFiles;\n\n","import React, {Component} from 'react';\nimport ModalPopup from \"../UI/ModalPopup/ModalPopup\";\nimport Snackbar from \"../UI/Snackbar/Snackbar\";\nimport { connect } from 'react-redux';\nimport classes from \"./UploadPopup.module.css\";\nimport * as actions from '../../store/actions/upload';\n\nclass UploadPopup extends Component {\n    inputElement = React.createRef();\n    clipboardWindowRef = React.createRef();\n\n    clipboardWindowWidth = 0;\n    clipboardWindowHeight = 0;\n\n    state = {\n        dragOver:false,\n        clipboardData: \"\"\n    };\n\n    openFilesButtonClicked = () => this.inputElement.current.click();\n\n    pasteHandler = (ev) => {\n        ev.stopPropagation();\n        this.props.onPaste(ev.clipboardData);\n        let item = ev.clipboardData.items[0];\n        item.getAsString( string =>\n            this.setState({\n                clipboardData: string\n            })\n        );\n    };\n\n    dropHandler = (ev) => {\n        // Prevent default behavior (Prevent file from being opened)\n        ev.preventDefault();\n\n        let files = [];\n\n        if (ev.dataTransfer.items) {\n            // Use DataTransferItemList interface to access the file(s)\n            for (let i = 0; i < ev.dataTransfer.items.length; i++) {\n                // If dropped items aren't files, reject them\n                if (ev.dataTransfer.items[i].kind === 'file') {\n                    let file = ev.dataTransfer.items[i].getAsFile();\n                    files.push(file);\n                }\n            }\n        } else {\n            // Use DataTransfer interface to access the file(s)\n            files = ev.dataTransfer.files;\n        }\n\n        this.props.readFiles(files, this.props.stage, this.props.layers);\n        // this.fileDropHandler(files);\n        this.setState({dragOver:false});\n    };\n\n    dragOverHandler = (ev) => {\n        // Prevent default behavior (Prevent file from being opened)\n        ev.preventDefault();\n        this.setState({dragOver:true})\n    };\n\n    dragLeaveHandler = (ev) => {\n        ev.preventDefault();\n        this.setState({dragOver:false})\n    };\n\n    filesSelectedHandler = (event) => {\n        if (!(File && FileReader && FileList)) return;\n        let files = event.target.files; // FileList object\n        this.props.readFiles(files, this.props.stage, this.props.layers);\n    };\n\n    closePopup = () => {\n        this.props.initUploadState();\n        this.props.closePopup();\n    };\n\n    componentDidUpdate() {\n        if (this.props.uploadCompleted) {}\n    }\n\n    componentDidMount() {\n        this.clipboardWindowWidth = this.clipboardWindowRef.current.clientWidth;\n        this.clipboardWindowHeight = this.clipboardWindowRef.current.clientHeight;\n    }\n\n    render() {\n        let pX = this.state.clipboardData === \"\" ? 30 : 0;\n        let pY = this.state.clipboardData === \"\" ? 60 : 0;\n        let snackbarMessage = \"\";\n\n        if (this.state.clipboardData !== \"\") snackbarMessage = \"Added 1 layer\";\n\n        if (this.props.uploadCompleted && this.props.uploadedFiles.length > 0) {\n            let newFilesNum = this.props.uploadedFiles.length;\n            if (newFilesNum === 1) snackbarMessage = \"File uploaded. Added 1 layer\";\n            if (newFilesNum > 1) snackbarMessage = `Files uploaded. Added ${newFilesNum} layers`;\n        }\n\n        return this.props.showPopup ? (\n            <ModalPopup\n                showPopup={this.props.showPopup}\n                closePopup={this.closePopup}\n                header=\"Upload files\"\n            >\n                <div className={classes.UploadPopup}>\n                    <div className={this.state.dragOver ?\n                        `${classes.UploadTarget} ${classes.UploadTargetDragOver}` :\n                        `${classes.UploadTarget} ${classes.UploadTargetDragLeave}`}\n                         style={{paddingLeft: pX, paddingRight: pX, paddingTop: pY, paddingBottom: pY}}\n                         onPaste={this.pasteHandler}\n                         onDrop={this.dropHandler}\n                         onDragOverCapture={this.dragOverHandler}\n                         onDragLeaveCapture={this.dragLeaveHandler}\n                         ref={this.clipboardWindowRef}\n                    >\n                        {\n                            this.state.clipboardData === \"\" ?\n                                <span>Paste from buffer / Drop files</span> :\n                                <p style={{width:this.clipboardWindowWidth, height:this.clipboardWindowHeight}}>\n                                    {this.state.clipboardData}\n                                </p>\n                        }\n\n                    </div>\n\n                    <h2>or</h2>\n\n                    <button onClick={this.openFilesButtonClicked}>\n                        Open local files\n                    </button>\n\n                    <input style={{display: \"none\"}}\n                           type=\"file\" ref={this.inputElement} name=\"files[]\" multiple\n                           onChange={this.filesSelectedHandler}\n                    />\n\n                    { snackbarMessage !== \"\" ?\n                        <Snackbar\n                            onAnimationEnd = {this.props.initUploadState}\n                            message={snackbarMessage} /> : null\n                    }\n\n                </div>\n            </ModalPopup>\n        ) : null;\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        layers: state.layers,\n        stage: state.app.stage,\n        uploadCompleted: state.upload.uploadCompleted,\n        uploadedFiles: state.upload.uploadedFiles\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        readFiles: (files, stage, layers) => dispatch(actions.readFiles(files, stage, layers)),\n        initUploadState: () => dispatch(actions.initUploadState())\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UploadPopup);\n","import /*React,*/ {Component} from 'react';\nimport { connect } from 'react-redux';\nimport * as cloudActions from '../../store/actions/cloudStorageActions';\n\nclass CloudDocument extends Component {\n    state={\n        done:false\n    };\n\n    componentDidUpdate() {\n        if (this.props.stage && !this.state.done) {\n            this.props.fetchDocumentFromDatabase(this.props.stage, this.props.match.params.id);\n            this.setState({done:true});\n        }\n    }\n    render() {\n        return null;\n    }\n}\n\nconst mapStateToProps = ({app}) => {\n    return {\n        stage: app.stage,\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        fetchDocumentFromDatabase: (stage, id) => dispatch(cloudActions.fetchDocumentFromDatabase(stage, id)),\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CloudDocument);\n","/**\n * Created by alexanderbol on 17/04/2017.\n */\n\nimport React, {Component} from 'react';\nimport {Route} from 'react-router-dom';\nimport { connect } from \"react-redux\";\n\nimport ToolbarComponent from '../../components/MainComponent/ToolbarComponent/ToolbarComponent';\nimport CanvasComponent from '../../components/MainComponent/CanvasComponent/CanvasComponent';\nimport StatusComponent from '../../components/Layout/StatusComponent/StatusComponent';\n\nimport StageComponent from \"../../components/MainComponent/GraphicsComponent/stageComponent\";\nimport LayersComponent from '../../components/MainComponent/GraphicsComponent/layersComponent';\n\nimport * as actions from '../../store/actions/appActions';\nimport * as layerActions from \"../../store/actions/layersActions\";\nimport * as cloudActions from '../../store/actions/cloudStorageActions';\n\nimport Layers from '../../models/layers';\nimport MeasurePointsTool from '../../tools/measurePointsTool';\nimport MeasureShapesTool from \"../../tools/measureShapesTool\";\nimport DisplayCoordsTool from \"../../tools/displayCoordsTool\";\n\nimport AboutPopup from \"../../components/AboutPopup/AboutPopup\";\nimport DownloadPopup from \"../../components/DownloadPopup/DownloadPopup\";\nimport UploadPopup from '../../components/UploadPopup/UploadPopup';\nimport CloudDocument from '../../components/Constructions/CloudDocument';\n\nimport styles from './MainComponent.module.css';\n\nclass MainComponent extends Component {\n    setHomeView = () => {\n        let layer = Layers.getAffected(this.props.layers);\n        if (!layer) return;\n        this.props.setHomeView(this.props.stage, layer);\n        this.forceUpdate();       // ??? unclear why on Home button click not updated\n    };\n\n    onSaveDocumentButtonClicked = () => {\n        if (this.props.layers.length === 0) return;   // nothing to save\n        // this.props.stage.img.crossOrigin=\"anonymous\";\n        let dataURL = null;\n        try {\n            dataURL = this.props.stage.toDataURL();\n        }\n        catch(e) {\n            console.log(e)\n        }\n        let payload = {\n            name: this.props.document.name === \"\" ?\n                cloudActions.getNewName(this.props.documentsList) : this.props.document.name,\n            dataURL: dataURL,\n            lastUpdated: new Date().toLocaleDateString() + \" \" + new Date().toLocaleTimeString(),\n            // token: this.props.token,\n            userId: this.props.userId\n        };\n\n        if (this.props.document.id) {\n            this.props.updateDocumentInDatabase(this.props.document.id, payload, this.props.layers);\n        }\n        else {\n            this.props.addDocumentToDatabase(payload, this.props.layers, this.props.history);\n        }\n    };\n\n    clearCurrentDocument = () => {\n        this.props.clearCurrentDocument();\n        this.props.clearAllLayers();\n        this.props.history.push(\"/\");\n    };\n\n    handleKeyDown = (e) => {\n        // let ctrl = e.ctrlKey;\n        if (e.target.id !== \"mainCanvas\")\n            return;\n        switch (e.code) {\n            case \"KeyH\":\n                this.setHomeView();\n                break;\n\n            case \"KeyW\":\n                this.props.toggleWidthMode();     // toggle width On/Off in graphics model\n                break;\n\n            case \"KeyE\":\n                this.props.toggleDisplayVertices();  // toggle vertices On/Off\n                break;\n\n            case \"ArrowRight\":\n                break;\n\n            case \"ArrowLeft\":\n                break;\n            case \"ArrowUp\":\n                break;\n            case \"ArrowDown\":\n                break;\n            default:\n                break;\n        }\n    };\n\n    componentDidMount() {\n        window.onresize = this.props.resizeStage;\n        // Keyboard event\n        // var _keydown = _.throttle(this.keydown, 100);\n        document.addEventListener('keydown', this.handleKeyDown);\n        // var _keyup = _.throttle(this.keyup, 500);\n        document.addEventListener('keyup', this.handleKeyUp);\n\n        // if (this.props.document.id === undefined) {\n        //     this.props.history.push(\"/\");\n        // }\n        // if (this.props.document.id !== undefined) {\n        //     this.props.history.push(\"/documents/\" + this.props.document.id)\n        // }\n    }\n\n    render() {\n        let displayCoordsTool = this.props.stage ? (\n            <DisplayCoordsTool\n                key=\"displayCoordinatedTool\"\n                stage={this.props.stage}\n                units={this.props.units}\n                divisor={this.props.divisor}\n                decimals={this.props.decimals}\n                coordX={this.props.mouse.x}\n                coordY={this.props.mouse.y}\n            />\n        ) : null;\n\n        let measurePointsTool = this.props.measurePointsActive ? <MeasurePointsTool /> : null;\n\n        let measuredLayersDisplayed = this.props.measureShapesTool.firstMeasuredShape &&\n            this.props.measureShapesTool.secondMeasuredShape &&\n            this.props.measureShapesTool.firstMeasuredLayer.displayed &&\n            this.props.measureShapesTool.secondMeasuredLayer.displayed;\n\n        let measureShapesTool = this.props.measureShapesTool.distance &&\n        this.props.measureShapesTool.shortestSegment && measuredLayersDisplayed ? (\n            <MeasureShapesTool\n                key=\"MeasureShapesTool\"\n                stage={this.props.stage}\n                firstMeasuredShape={this.props.measureShapesTool.firstMeasuredShape}\n                secondMeasuredShape={this.props.measureShapesTool.secondMeasuredShape}\n                firstMeasuredLayer={this.props.measureShapesTool.firstMeasuredLayer}\n                secondMeasuredLayer={this.props.measureShapesTool.secondMeasuredLayer}\n                distance={this.props.measureShapesTool.distance}\n                shortestSegment={this.props.measureShapesTool.shortestSegment}\n                divisor={this.props.divisor}\n                decimals={this.props.decimals}\n            />\n        ) : null;\n\n        return (\n            <main className={styles[\"Main-content\"]}>\n                <ToolbarComponent\n                    measurePointsActive={this.props.measurePointsActive}\n                    units={this.props.units}\n                    showSkeletonRecognitionButton={this.props.showSkeletonRecognitionButton}\n                    // onFileSelected={this.handleFileSelect}\n                    onHomeButtonPressed={this.setHomeView}\n                    onPanByDragPressed={this.props.togglePanByDrag}\n                    onMeasurePointsButtonPressed={this.props.toggleMeasureBetweenPoints}\n                    onMeasureBetweenShapesButtonPressed={this.props.toggleMeasureBetweenShapes}\n                    onToggleWidthModePressed={this.props.toggleWidthMode}\n                    onToggleVerticesPressed={this.props.toggleDisplayVertices}\n                    onToggleLabelsPressed={this.props.toggleDisplayLabels}\n                    onShowAboutPopupPressed={this.props.toggleAboutPopup}\n                    onSkeletonRecognitionButtonPressed={this.props.applySkeletonRecognition}\n                    onUnitClicked={this.props.toggleUnits}\n                    onSaveDocumentButtonClicked={this.onSaveDocumentButtonClicked}\n                    onClearAllButtonClicked={this.clearCurrentDocument}\n                    onLayerListButtonClicked={this.props.toggleLayerList}\n                    onShowDownloadPopupPressed={this.props.toggleDownloadPopup}\n                    onShowUploadPopupPressed={this.props.toggleUploadPopup}\n                />\n\n                <CanvasComponent />\n\n                {this.props.stage ? (\n                    <StageComponent\n                        stage={this.props.stage}\n                        onStageUnmounted={this.props.destroyStage}\n                    >\n                        <LayersComponent layers={this.props.layers}/>\n\n                        {displayCoordsTool}\n                        {measurePointsTool}\n                        {measureShapesTool}\n                    </StageComponent>) : null }\n\n                <StatusComponent />\n\n                { this.props.showAboutPopup ?\n                    <AboutPopup\n                        showAboutPopup={this.props.showAboutPopup}\n                        toggleAboutPopup={this.props.toggleAboutPopup}\n                        title={this.props.title}\n                        version={this.props.version}\n                        build={this.props.build}\n                    /> : null}\n\n\n                { this.props.showDownloadPopup ?\n                    <DownloadPopup\n                        showPopup={this.props.showDownloadPopup}\n                        closePopup={this.props.toggleDownloadPopup}\n                        title=\"Download document\"\n                        layers={this.props.layers}\n                    /> : null }\n\n                {this.props.showUploadPopup ?\n                    <UploadPopup\n                        showPopup={this.props.showUploadPopup}\n                        closePopup={this.props.toggleUploadPopup}\n                        title=\"Upload files\"\n                        onPaste={this.props.pasteDataFromBuffer}\n                    /> : null}\n\n                <Route path=\"/documents/:id\" component={CloudDocument}/>\n\n            </main>\n        )\n    }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    return {\n        stage: state.app.stage,\n        title: state.app.title,\n        version: state.app.version,\n        build: state.app.build,\n        displayVertices: state.app.displayVertices,\n        displayLabels: state.app.displayLabels,\n        widthOn: state.app.widthOn,\n        zoomFactor: state.app.zoomFactor,\n        units: state.app.units,\n        showSkeletonRecognitionButton: state.app.showSkeletonRecognitionButton,\n        divisor: state.app.divisor,\n        decimals: state.app.decimals,\n        measurePointsActive: state.app.measurePointsActive,\n        showAboutPopup: state.app.showAboutPopup,\n        showDownloadPopup: state.app.showDownloadPopup,\n        showUploadPopup: state.app.showUploadPopup,\n        layers: state.layers,\n        mouse: state.mouse,\n        measureShapesTool: state.measureShapesTool,\n\n        document: state.cloudStorage.document,\n        documentsList: state.cloudStorage.documentsList,\n        // onManageCloudStorageButtonClicked: ownProps.onManageCloudStorageButtonClicked\n        token: state.auth.token,\n        userId: state.auth.userId\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        resizeStage: () => dispatch(actions.resizeStage()),\n        destroyStage: () => dispatch(actions.destroyStage()),\n        setHomeView: (stage, shape) => dispatch(actions.setHomeView(stage, shape)),\n        toggleUnits: () => dispatch(actions.toggleUnits()),\n        toggleWidthMode: () => dispatch(actions.toggleWidthMode()),\n        toggleDisplayVertices: () => dispatch(actions.toggleDisplayVertices()),\n        toggleDisplayLabels: () => dispatch(actions.toggleDisplayLabels()),\n        toggleAboutPopup: () => dispatch(actions.toggleAboutPopup()),\n        toggleMeasureBetweenPoints: () => dispatch(actions.toggleMeasureBetweenPoints()),\n        toggleMeasureBetweenShapes: () => dispatch(actions.toggleMeasureBetweenShapes()),\n        togglePanByDrag: () => dispatch(actions.togglePanByDrag()),\n        toggleLayerList: () => dispatch(actions.toggleLayerList()),\n        toggleDownloadPopup: () => dispatch(actions.toggleDownloadPopup()),\n        toggleUploadPopup: () => dispatch(actions.toggleUploadPopup()),\n        applySkeletonRecognition: () => dispatch(actions.applySkeletonRecognition()),\n        pasteDataFromBuffer: (clipboardData) => dispatch(actions.pasteDataFromBuffer(clipboardData)),\n\n        clearAllLayers: () => dispatch(layerActions.deleteAllLayers()),\n\n        addDocumentToDatabase: (payload, layers, history) => dispatch(cloudActions.addDocumentToDatabase(payload, layers, history)),\n        updateDocumentInDatabase: (id, payload, layers) => dispatch(cloudActions.updateDocumentInDatabase(id, payload, layers)),\n        clearCurrentDocument: () => dispatch(cloudActions.clearCurrentDocument())\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainComponent);\n","/**\n * Created by alexanderbol on 17/04/2017.\n */\nimport React from 'react';\nimport FontAwesome from 'react-fontawesome';\n\nimport styles from './LayerListToolbar.module.css';\nimport '@fortawesome/fontawesome-free/css/all.css';\n\nconst LayerListToolbar = (props) => {\n    return (\n        <div className={styles[\"Layer-list-toolbar\"]}>\n            <button title=\"Add layer\" onClick={props.onAddLayerButtonClicked}>\n                <FontAwesome\n                    name='plus'\n                    size='2x'\n                    style={{color: \"grey\"}}\n                />\n            </button>\n            <button title=\"Edit selected layer's name and info\" onClick={props.onEditLayerButtonClicked}>\n                <FontAwesome\n                    name='pencil-alt'\n                    size='2x'\n                    style={{color: \"grey\"}}\n                />\n            </button>\n            <button title=\"Delete selected layer\" onClick={props.onDeleteLayerButtonClicked}>\n                <FontAwesome\n                    name='trash-alt'\n                    size='2x'\n                    style={{color: \"grey\"}}\n                />\n            </button>\n            <button title=\"Sort layer list\" onClick={props.onSortLayersButtonClicked}>\n                <FontAwesome\n                    name='sort-alpha-down'\n                    size='2x'\n                    style={{color: \"grey\"}}\n                />\n            </button>\n        </div>\n    )\n};\n\nexport default LayerListToolbar;\n","/**\n * Created by alexanderbol on 13/04/2017.\n */\n\nimport React from 'react';\nimport styles from './LayerEditForm.module.css';\n\nconst LayerEditForm = (props) => {\n    let onSubmitLayerEditForm = (ev) => {\n        if (!ev)\n            return false;\n        ev.stopPropagation();\n        ev.preventDefault();\n        let name = ev.currentTarget[0].value;\n        let title = ev.currentTarget[1].value;\n        let newLayer = Object.assign({}, props.layer, {\n            name: name,\n            title: title\n        });\n        props.onSubmitLayerEditForm(newLayer);\n        return false;\n    };\n\n    let setFocus = (ev) => {\n        ev.stopPropagation();\n        ev.target.focus();\n    };\n\n    let onCancelLayerEditForm = (ev) => {\n        props.onEscapeLayerEditForm();\n    };\n\n    let onMouseMoveHandler = (ev) => {\n        ev.stopPropagation();\n    };\n\n    return (\n        <form className={styles[\"Layer-edit-form\"]}\n              id=\"layerEditForm\"\n              action=\"\"\n              onSubmit={onSubmitLayerEditForm}\n              onMouseMove={onMouseMoveHandler}\n        >\n            <article>\n            <label>Name:</label>\n            <input type=\"text\" id=\"layer-name\" name=\"layerName\" defaultValue={props.layer.name}\n                   onClick={setFocus}  />\n            </article>\n            <article>\n            <label>Description:</label>\n            <textarea id=\"layer-title\" name=\"layerTitle\" cols=\"70\" rows=\"3\" defaultValue={props.layer.title}\n                      onClick={setFocus}>\n            </textarea>\n            </article>\n            <input type=\"submit\" style={{display:\"none\"}}/>\n            <button onClick={onCancelLayerEditForm}>Cancel</button>\n            <button onClick={(ev) => onSubmitLayerEditForm(ev.target.parent)}>OK</button>\n        </form>\n    )\n};\n\nexport default LayerEditForm;\n","/**\n * Created by alexanderbol on 17/04/2017.\n */\n\nimport React, {Component} from 'react';\nimport ModalPopup from \"../../UI/ModalPopup/ModalPopup\";\nimport LayerEditForm from \"../LayerEditForm/LayerEditForm\";\nimport styles from './LayerListElement.module.css';\n\nclass LayerListElement extends Component {\n    componentDidUpdate() {\n        if (document.activeElement.nodeName === \"CANVAS\")\n            return;\n        let elem = this.refs.layerName;\n        if (this.props.layer.affected) {\n            elem.focus();\n        }\n    }\n\n    rgba(hex, opacity) {\n        let r, g, b, percent;\n        if (hex) {\n            hex = hex.replace('#', '');\n            r = parseInt(hex.substring(0, 2), 16);\n            g = parseInt(hex.substring(2, 4), 16);\n            b = parseInt(hex.substring(4, 6), 16);\n            percent = opacity;\n        }\n        else {\n            r = 147;\n            g = 128;\n            b = 108;\n            percent = 0;\n        }\n        let result = `rgba(${r},${g},${b},${percent / 100})`;\n\n        return result;\n    }\n\n    render() {\n        // let style = this.props.layer.displayed ?\n        //     styleSheet.displayed : styleSheet.undisplayed;\n\n        let displayed = this.props.layer.displayed ? \"Layer-displayed\" : \"Layer-undisplayed\";\n        let color = displayed ? this.rgba(this.props.layer.color, 100) : this.rgba();\n        let bgcolor = displayed ? this.rgba(this.props.layer.color, 30) : this.rgba();\n        let alpha = this.props.layer.affected ? 1 : 0;\n        let layerNameOpacity = this.props.layer.shapes.length === 0 ? 0.6 : 1.0;\n        return [\n            <li key={1}\n                className={styles.Layer}\n                onClick={this.props.onLayerClicked}\n                onDoubleClick={this.props.onLayerDoubleClicked}>\n\n                <div className={styles.LayerSelectionBox}\n                     onClick={this.props.onAffectedBoxClicked}\n                >\n                    <h4 className={styles.LayerSelectionMark}\n                        style={{opacity: alpha, color: color}}>\n                        \n                    </h4>\n                </div>\n\n                <div className={styles.LayerNameBox}\n                     style={{backgroundColor: bgcolor, opacity: layerNameOpacity}}>\n                    <h4 ref=\"layerName\"\n                        title={this.props.layer.title}\n                        tabIndex='1'\n                    >\n                        {this.props.layer.name}\n                    </h4>\n                </div>\n\n            </li>,\n\n            <ModalPopup\n                key={2}\n                showPopup={this.props.layer.edited}\n                closePopup={this.props.onEscapeLayerEditForm}\n                header=\"Layer properties\"\n            >\n                <LayerEditForm\n                    layer={this.props.layer}\n                    onSubmitLayerEditForm={this.props.onSubmitLayerEditForm}\n                    onEscapeLayerEditForm={this.props.onEscapeLayerEditForm}\n                />\n            </ModalPopup>\n        ]\n    }\n}\n\nexport default LayerListElement;\n","/**\n * Created by alexanderbol on 17/04/2017.\n */\n\nimport React, {Component} from 'react';\nimport LayerListToolbar from \"../../components/LayersList/LayerListToolbar/LayerListToolbar\";\nimport LayerListElement from '../../components/LayersList/LayerListElement/LayerListElement';\nimport * as actions from '../../store/actions/layersActions';\nimport { connect } from 'react-redux';\nimport styles from './LayersList.module.css';\n\nclass LayersList extends Component {\n    height = 0;\n\n    handleKeyDown = (e) => {\n        // e.stopPropagation();\n        // e.preventDefault();\n\n        if (e.target.parentElement.parentElement &&\n            e.target.parentElement.parentElement.parentElement &&\n            e.target.parentElement.parentElement.parentElement.id &&\n            e.target.parentElement.parentElement.parentElement.id === \"layersList\") {\n\n\n            switch (e.code) {\n                case \"ArrowRight\":\n                case \"ArrowDown\":\n                    this.props.setAffectedNextLayer();\n                    break;\n                case \"ArrowLeft\":\n                case \"ArrowUp\":\n                    this.props.setAffectedPrevLayer();\n                    break;\n                /* tab does not work properly\n            case \"Tab\":\n                if (e.shiftKey) {\n                    this.dispatch({\n                        type: ActionTypes.LAYERS_LIST_ARROW_UP_PRESSED\n                    });\n                }\n                else {\n                    this.dispatch({\n                        type: ActionTypes.LAYERS_LIST_ARROW_DOWN_PRESSED\n                    });\n                }\n                break;\n                */\n                default:\n                    break;\n            }\n        }\n\n    };\n\n    onLayerListClicked = () => {\n        this.forceUpdate();\n    };\n\n    componentDidMount() {\n        // Keyboard event\n        // var _keydown = _.throttle(this.keydown, 100);\n        document.addEventListener('keydown', this.handleKeyDown);\n        // var _keyup = _.throttle(this.keyup, 500);\n        // document.addEventListener('keyup', this.handleKeyUp);\n    }\n\n    componentDidUpdate() {\n        this.height = this.refs.layersComponent.clientHeight;\n    }\n\n    render() {\n        const style = this.props.showLayerList ? styles[\"App-layers-displayed\"] : styles[\"App-layers\"];\n        return (\n            <div className={style}\n                 ref=\"layersComponent\"\n                 onClick={this.onLayerListClicked}\n            >\n                {/*<h5>Layers</h5>*/}\n                <LayerListToolbar\n                    onAddLayerButtonClicked={() => this.props.onAddLayerButtonClicked(this.props.stage)}\n                    onEditLayerButtonClicked={this.props.onEditLayerButtonClicked}\n                    onDeleteLayerButtonClicked={this.props.onDeleteLayerButtonClicked}\n                    onSortLayersButtonClicked={this.props.onSortLayersButtonClicked}\n                />\n                <ul id=\"layersList\"\n                    style={{maxHeight:0.82*(this.height-40)}}>\n                { this.props.layers.map((layer) =>\n                    <LayerListElement\n                        key={layer.name}\n                        layer={layer}\n                        onLayerClicked={() => this.props.onLayerClicked(layer)}\n                        onAffectedBoxClicked={(event) => this.props.onAffectedBoxClicked(event, layer)}\n                        onSubmitLayerEditForm={this.props.onSubmitLayerEditForm}\n                        onEscapeLayerEditForm={this.props.onEscapeLayerEditForm}\n                    />)\n                }\n                </ul>\n                {/*{addLayer}*/}\n            </div>\n        )\n\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        layers: state.layers,\n        stage: state.app.stage,\n        showLayerList: state.app.showLayerList         // on mobile device\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onAddLayerButtonClicked: (stage) => dispatch(actions.addEmptyLayer(stage)),\n        onEditLayerButtonClicked: () => dispatch(actions.openAffectedLayerEditForm()),\n        onDeleteLayerButtonClicked: () => dispatch(actions.deleteAffectedLayer()),\n        onSortLayersButtonClicked: () => dispatch(actions.sortLayers()),\n        onLayerClicked: (layer) => dispatch(actions.toggleDisplayLayer(layer)),\n        onAffectedBoxClicked: (event, layer) => dispatch(actions.toggleAffectedLayer(event, layer)),\n        onSubmitLayerEditForm: (newLayer) => dispatch(actions.updateLayer(newLayer)),\n        onEscapeLayerEditForm: () => dispatch(actions.closeEditLayerForm()),\n        setAffectedNextLayer: () => dispatch(actions.setAffectedNextLayer()),\n        setAffectedPrevLayer: () => dispatch(actions.setAffectedPrevLayer())\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LayersList);\n\n// export default LayersList;","/**\n * Created by alexanderbol on 06/05/2017.\n */\n\nimport React from 'react';\nimport styles from './AsideComponent.module.css';\n\nconst AsideComponent = () => {\n    return (\n        <aside className={styles[\"App-aside\"]}>\n            <h5>&nbsp;</h5>\n        </aside>\n    )\n};\n\nexport default AsideComponent;\n","import React from 'react';\nimport { connect } from \"react-redux\";\nimport * as ActionTypes from \"./store/actionTypes\";\nimport * as cloudActions from \"./store/actions/cloudStorageActions\";\nimport MainComponent from \"./containers/MainComponent/MainComponent\";\nimport LayersList from \"./containers/LayerList/LayersList\";\nimport AsideComponent from \"./components/Layout/AsideComponent/AsideComponent\";\n// import DocumentName from \"./components/MainComponent/DocumentName/DocumentName\";\n\nconst appBody = (props) => {\n    return (\n        <React.Fragment>\n            {/*<DocumentName name={props.document.name}*/}\n                          {/*username={props.username}*/}\n                          {/*updateDocumentName={props.updateDocumentName} />*/}\n            <div className=\"App-body\" onPaste={props.pasteDataFromBuffer}>\n                <MainComponent history={props.history}\n                               onManageCloudStorageButtonClicked={props.onManageCloudStorageButtonClicked}\n                />\n                <LayersList/>\n                <AsideComponent/>\n            </div>\n        </React.Fragment>\n    );\n};\n\nconst mapStateToProps = ({cloudStorage, auth}) => {\n    return {\n        document: cloudStorage.document,\n        username: auth.username\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        pasteDataFromBuffer: (event) => dispatch({\n            type: ActionTypes.DATA_FROM_BUFFER_PASTED,\n            data: event.clipboardData\n        }),\n        updateDocumentName: (name) => dispatch(cloudActions.updateDocumentName(name))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(appBody);\n","/**\n * Created by alexanderbol on 13/04/2017.\n */\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport classes from './HeaderComponent.module.css';\n// import Logo from './Logo/Logo';\n// import Navigation from './Navigation/Navigation';\n\nconst HeaderComponent = (props) => {\n    const style = props.location.pathname === \"/documents\" ?\n        classes[\"App-header-documents-page\"] :\n        classes[\"App-header\"];\n    return (\n        <header className={style}>\n            <h2>Debug Viewer</h2>\n        </header>\n    )\n};\n\nexport default withRouter(HeaderComponent);\n\n/*\n<header className={style}>\n    <Logo />\n    <Navigation isAuthenticated={props.isAuthenticated} />\n    {props.isAuthenticated ? <span>Hello {props.username}</span> : null}\n    {props.location.pathname === \"/documents\" ? <hr/> : null}\n</header>\n*/","import /*React,*/ {Component} from 'react';\nimport axios from \"axios\";\n\nimport Layers from \"../../models/layers\";\n// import {parseODB} from \"../../dataParsers/parserODB\";\nimport {parseTXT} from \"../../dataParsers/parseTXT\";\nimport Model from \"../../models/model\";\nimport * as ActionTypes from \"../../store/actionTypes\";\nimport * as actions from '../../store/actions/appActions';\nimport { connect } from 'react-redux';\n\nclass Demo extends Component {\n    state={\n        done:false\n    };\n    componentDidUpdate() {\n        if (this.props.stage && !this.state.done) {\n            let stage = this.props.stage;\n            let layers = this.props.layers;\n\n            // let url1 = \"https://gist.githubusercontent.com/alexbol99/e8ff96c445fc58da5d0f66ccf58d9282/raw/be4273f3b68b104e02f918495592d8308a066344/poly1.txt\";\n            // let url2 = \"https://gist.githubusercontent.com/alexbol99/b445045a8bbb41b4bde7724b5e474ddf/raw/705314f25757633c6a3d9199d5be101028ea0316/poly2.txt\";\n            // let url3 = \"https://gist.githubusercontent.com/alexbol99/715dc06c8295f90ef18385a0d8040d5c/raw/c95c46c0eae9069d004480ccd0ac80ca89e818f2/poly3.txt\";\n            // let url4 = \"https://gist.githubusercontent.com/alexbol99/1226284eb0c0ac3aa9c645d9f7849eb5/raw/a35baaadb8d9e5e0580d33cf4546bf0d05ad37dc/poly4.txt\";\n            let url234 = \"https://gist.githubusercontent.com/alexbol99/e570fe783be88b556f4ca4b332da73f7/raw/741c87a7ceccdeadd9fbbac05bdfda22ebe94927/poly234.txt\";\n\n            // axios(\"https://gist.githubusercontent.com/alexbol99/825fdf2dd508467cc852eb22aa36183d/raw/d10e853338afd8294eeb3ffdebe3bc380477a978/features\")\n\n            Promise.all([axios(url234)])\n                .then( (responses) => {\n                    for (let i=0; i < 1; i++) {\n                        let resp = responses[i];\n                        let layer = Layers.newLayer(stage, layers);\n                        layer.color = Layers.getNextColor(layers);\n                        layer.name = \"poly\";\n                        layer.title = \"\";\n                        layer.affected = false;\n                        layer.displayed = true;\n\n                        let job = parseTXT(layer.name, resp.data);\n\n                        for (let shape of job.shapes) {\n                            let model = new Model(shape, undefined, shape.label);\n                            layer.add(model);\n                        }\n\n                        this.props.panAndZoomToShape(stage, layer);\n                        this.props.addNewLayer(layer);\n                        this.props.asyncOperationEnded();\n                    }\n                })\n                .catch( error => {\n                    console.log(error);\n                    this.props.asyncOperationEnded();\n                });\n\n            this.setState({done:true});\n            this.props.asyncOperationStarted();\n        }\n    }\n    componentDidMount() {\n\n    }\n    render() {\n        return null;\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        layers: state.layers,\n        stage: state.app.stage\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        panAndZoomToShape: (stage, layer) => dispatch({\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n            stage: stage,\n            shape: layer\n        }),\n        addNewLayer: (layer) => dispatch({\n            type: ActionTypes.ADD_NEW_LAYER,\n            layer: layer\n        }),\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded())\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Demo);\n","import /*React,*/ {Component} from 'react';\nimport * as ActionTypes from \"../../store/actionTypes\";\nimport { connect } from 'react-redux';\n\nclass SkeletonRecognition extends Component {\n    componentDidMount() {\n        this.props.applySkeletonRecognition();\n    }\n    render() {\n        return null;\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        layers: state.layers,\n        stage: state.app.stage\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        applySkeletonRecognition: () => dispatch({type: ActionTypes.SKELETON_RECOGNITION_URI})\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SkeletonRecognition);\n","import Flatten from \"@flatten-js/core\";\nimport {Vector, Segment, Arc, Line, Box, Polygon} from \"@flatten-js/core\";\n// let Flatten = require('flatten-js');\n\n// let {Vector, Segment, Arc, Line, Box, Polygon} = Flatten;\n\nclass CollisionDistance {\n    static apply(polygon1, polygon2) {\n        let collision_distance = Number.POSITIVE_INFINITY;\n        for (let edge of [...polygon2.edges]) {\n            let distance = CollisionDistance.edge2polygon(edge, polygon1);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        return collision_distance;\n    }\n\n    static edge2polygon(edge2, polygon1) {\n        let shapeBox = edge2.shape.box;\n        let box = new Box(\n            Number.NEGATIVE_INFINITY,\n            shapeBox.ymin,\n            Number.POSITIVE_INFINITY,\n            shapeBox.ymax\n        );\n        let collision_distance = Number.POSITIVE_INFINITY;\n        let resp_edges =  polygon1.edges.search(box);\n        for (let edge1 of resp_edges) {\n            let distance;\n            if (edge1.shape instanceof Segment && edge2.shape instanceof Segment) {\n                distance = CollisionDistance.segment2segment(edge1.shape, edge2.shape);\n            }\n            else if (edge1.shape instanceof Arc && edge2.shape instanceof Segment) {\n                distance = CollisionDistance.segment2arc(edge2.shape, edge1.shape);\n            }\n            else if (edge1.shape instanceof Segment && edge2.shape instanceof Arc) {\n                distance = CollisionDistance.segment2arc(edge1.shape, edge2.shape);\n            }\n            else if (edge1.shape instanceof Arc && edge2.shape instanceof Arc) {\n                distance = CollisionDistance.arc2arc(edge1.shape, edge2.shape);\n            }\n\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        return collision_distance;\n    }\n\n    static point2shape(point, shape) {\n        let line = new Line(point, new Vector(0,1));\n        let intersections = line.intersect(shape);          // segment or arc\n        let collision_distance = Number.POSITIVE_INFINITY;\n        for (let ip of intersections) {\n            // eslint-disable-next-line\n            let [distance, shortest_segment] = point.distanceTo(ip);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        return collision_distance;\n    }\n\n    static segment2segment(segment1, segment2) {\n        let collision_distance = Number.POSITIVE_INFINITY;\n        for (let point of segment1.vertices) {\n            let distance = CollisionDistance.point2shape(point, segment2);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        for (let point of segment2.vertices) {\n            let distance = CollisionDistance.point2shape(point, segment1);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        return collision_distance;\n    }\n\n    static segment2arc(segment, arc) {\n        let collision_distance = Number.POSITIVE_INFINITY;\n        let v_s = new Vector(segment.start, segment.end);\n        v_s = v_s.normalize();\n\n        let v_n = [v_s.rotate90CCW().multiply(arc.r), v_s.rotate90CW().multiply(arc.r)];\n        let distance;\n\n        // Distance between tangent point and segment\n        for (let v of v_n) {\n            let tangent_point = arc.center.translate(v);  // tangent point in direction of the normal vector\n            if (tangent_point.on(arc)) {\n                distance = CollisionDistance.point2shape(tangent_point, segment);\n                if (distance < collision_distance) {\n                    collision_distance = distance;\n                }\n            }\n        }\n\n        for (let point of arc.vertices) {\n            let distance = CollisionDistance.point2shape(point, segment);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        for (let point of segment.vertices) {\n            let distance = CollisionDistance.point2shape(point, arc);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        return collision_distance;\n    }\n\n    static arc2arc(arc1, arc2) {\n        let collision_distance = Number.POSITIVE_INFINITY;\n        let distance;\n\n        // test translation of arc2.center to arc1 enlarged by r2\n        let arc_enlarged = arc1.clone();\n        arc_enlarged.r += arc2.r;\n        distance = CollisionDistance.point2shape(arc2.center, arc_enlarged);\n        if (distance < collision_distance) {\n            // additional check that transformed arc actually touching\n            // eslint-disable-next-line\n            let [dist_tmp, shortest_segment_tmp] =\n                arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\n            if (Flatten.Utils.EQ_0(dist_tmp)) {\n                collision_distance = distance;\n            }\n        }\n\n        // test translation of arc2.center to arc1 reduced by r2\n        if (Flatten.Utils.GE(arc1.r, arc2.r)) {\n            let arc_reduced = arc1.clone();\n            arc_reduced.r -= arc2.r;\n            distance = CollisionDistance.point2shape(arc2.center, arc_reduced);\n            if (distance < collision_distance) {\n                // additional check that transformed arc actually touching\n                // eslint-disable-next-line\n                let [dist_tmp, shortest_segment_tmp] =\n                    arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\n                if (Flatten.Utils.EQ_0(dist_tmp)) {\n                    collision_distance = distance;\n                }\n            }\n        }\n\n        // test translation of arc1.center to arc2 reduced by r1\n        if (Flatten.Utils.LT(arc1.r, arc2.r)) {\n            let arc_reduced = arc2.clone();\n            arc_reduced.r -= arc1.r;\n            distance = CollisionDistance.point2shape(arc1.center, arc_reduced);\n            if (distance < collision_distance) {\n                // additional check that transformed arc actually touching\n                // eslint-disable-next-line\n                let [dist_tmp, shortest_segment_tmp] =\n                    arc1.distanceTo( CollisionDistance.translateArc(arc2, new Vector(-distance,0)));\n                if (Flatten.Utils.EQ_0(dist_tmp)) {\n                    collision_distance = distance;\n                }\n            }\n        }\n\n        for (let point of arc1.vertices) {\n            let distance = CollisionDistance.point2shape(point, arc2);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        for (let point of arc2.vertices) {\n            let distance = CollisionDistance.point2shape(point, arc1);\n            if (distance < collision_distance) {\n                collision_distance = distance;\n            }\n        }\n        return collision_distance;\n    }\n\n    static translateArc(arc, vec) {\n        let arc_tmp = arc.clone();\n        arc_tmp.pc = arc_tmp.pc.translate(vec);\n        return arc_tmp;\n    }\n\n    static translate(polygon, vec) {\n        let newPolygon = new Polygon();\n        for (let face of polygon.faces) {\n            let shapes = [];\n            for (let edge of face) {\n                if (edge.shape instanceof Segment) {\n                    shapes.push(\n                        new Segment(edge.shape.ps.translate(vec), edge.shape.pe.translate(vec))\n                    )\n                }\n                else if (edge.shape instanceof  Arc) {\n                    let arc_trans = edge.shape.clone();\n                    arc_trans.pc = edge.shape.pc.translate(vec);\n                    shapes.push(arc_trans);\n                }\n            }\n            newPolygon.addFace(shapes);\n        }\n        return newPolygon;\n    }\n\n};\n\nCollisionDistance.Flatten = Flatten;\n\nexport default CollisionDistance;\n","import /*React,*/ {Component} from 'react';\nimport Flatten from '@flatten-js/core';\nimport CollisionDistance from \"../../models/collisionDistance\";\nimport axios from \"axios\";\nimport Layers from \"../../models/layers\";\n// import {Model} from \"../../models/model\";\nimport * as ActionTypes from \"../../store/actionTypes\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../../store/actions/appActions\";\n\nlet {vector} = Flatten;\n\nclass CollisionDemo extends Component {\n    state={\n        done:false,\n        data:[]\n    };\n    componentDidUpdate() {\n        if (this.props.stage && !this.state.done) {\n            let stage = this.props.stage;\n            let layers = this.props.layers;\n\n            let layer = Layers.newLayer(stage, layers);\n            layer.color = Layers.getNextColor(layers);\n            layer.name = \"collision_demo\";\n            layer.title = \"collision_demo\";\n            layer.affected = true;\n            layer.displayed = true;\n\n            axios(\"https://gist.githubusercontent.com/alexbol99/81893d40ec5eaa00d0336c35e069dd73/raw/b9328a4c6d7d6a44f375c68b4ec207690f40fd19/Block_53388_2parts_Cont.txt\")\n                .then( (resp) => {\n                    let parser = this.props.parser;\n                    let polygon1 = parser.parseToPolygon(resp.data);\n                    layer.add(polygon1);\n\n                    let vec = vector( 2*(polygon1.box.xmax - polygon1.box.xmin), 0 );\n                    let polygon2 = polygon1.translate(vec);\n                    layer.add(polygon2);\n\n                    let collision = CollisionDistance.apply(polygon2, polygon1);\n                    let polygon3 = polygon2.translate(vector(-collision, 0));\n                    layer.add(polygon3);\n\n                    // layers.push(layer);\n\n                    this.props.panAndZoomToShape(stage, layer);\n                    this.props.addNewLayer(layer);\n                    this.props.applyCollisionDemo();\n                    this.props.asyncOperationEnded();\n                });\n            this.setState({done:true});\n            this.props.asyncOperationStarted();\n        }\n    }\n    render() {\n        return null;\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        layers: state.layers,\n        stage: state.app.stage,\n        parser: state.app.parser\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        panAndZoomToShape: (stage, layer) => dispatch({\n            type: ActionTypes.PAN_AND_ZOOM_TO_SHAPE,\n            stage: stage,\n            shape: layer\n        }),\n        addNewLayer: (layer) => dispatch({\n            type: ActionTypes.ADD_NEW_LAYER,\n            layer: layer\n        }),\n        applyCollisionDemo: () => dispatch({\n            type: ActionTypes.COLLISION_DEMO_URI\n        }),\n        asyncOperationStarted: () => dispatch(actions.asyncOperationStarted()),\n        asyncOperationEnded: () => dispatch(actions.asyncOperationEnded())\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CollisionDemo);\n","import React from 'react';\nimport Modal from '../Modal';\nimport classes from './Spinner.module.css';\n\nconst spinner = () => {\n    return (\n        <Modal>\n            <div className={classes.BackDrop} >\n                <div className={classes.Loader}>Loading ...</div>\n            </div>\n        </Modal>\n    );\n};\n\nexport default spinner;","import * as actionTypes from '../actionTypes';\nimport axios from 'axios';\n\nconst apiKey = \"AIzaSyDMUAcjgolAlapdpFmPEz8SaId1DZw7MpQ\";\n\nexport const authStart = () => {\n    return {\n        type: actionTypes.AUTHENTICATION_STARTED\n    }\n};\n\nexport const authSucceed = (token, userId, username=null) => {\n    return {\n        type: actionTypes.AUTHENTICATION_SUCCEED,\n        token,\n        userId,\n        username\n    }\n};\n\nexport const authFailed = (error) => {\n    return {\n        type: actionTypes.AUTHENTICATION_FAILED,\n        error\n    }\n};\n\nexport const authSetUsername = (username) => {\n    return {\n        type: actionTypes.AUTHENTICATION_SET_USERNAME,\n        username\n    }\n};\n\nexport const logout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('expirationDate');\n    localStorage.removeItem('userId');\n    return {\n        type: actionTypes.AUTHENTICATION_LOGOUT\n    }\n};\n\nexport const checkAuthTimeout = (expirationTime) => {\n    return dispatch => {\n        setTimeout(() => {\n            const email = localStorage.getItem('email');\n            const password = localStorage.getItem('password');\n            if (email && password) {\n                dispatch(logIn(email, password))\n            }\n            else {\n                dispatch(logout())\n            }\n        }, expirationTime * 1000)\n    }\n};\n\nexport const logIn = (email, password) => {\n    return dispatch => {\n        dispatch(authStart());\n        const authData = {\n            email,\n            password,\n            returnSecureToken: true\n        };\n        localStorage.setItem('email', email);\n        localStorage.setItem('password', password);\n        const url = \"https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=\" + apiKey;\n        axios.post(url, authData)\n            .then(response => {\n                const expirationDate = new Date(new Date().getTime() + response.data.expiresIn * 1000);\n                localStorage.setItem('token', response.data.idToken);\n                localStorage.setItem('expirationDate', expirationDate);\n                localStorage.setItem('userId', response.data.localId);\n\n                dispatch(authSucceed(response.data.idToken, response.data.localId));\n                dispatch(checkAuthTimeout(response.data.expiresIn));\n                const queryParams = '?auth=' + response.data.idToken + '&orderBy=\"userId\"&equalTo=\"' + response.data.localId + '\"';\n                return axios.get(\"https://debug-viewer.firebaseio.com/users.json\" + queryParams);\n            })\n            .then(response => {\n                if (Object.values(response.data.length > 0)) {\n                    const username = Object.values(response.data)[0].username;\n                    localStorage.setItem('username', username);\n                    dispatch(authSetUsername(Object.values(response.data)[0].username))\n                }\n            })\n            .catch(error => {\n                dispatch(authFailed(error.response.data.error))\n            })\n    }\n};\n\nexport const signUp = (username, email, password) => {\n    return dispatch => {\n        dispatch(authStart());\n        const authData = {\n            email,\n            password,\n            returnSecureToken: true\n        };\n        const url = \"https://www.googleapis.com/identitytoolkit/v3/relyingparty/signupNewUser?key=\" + apiKey;\n        axios.post(url, authData)\n            .then(response => {\n                const expirationDate = new Date(new Date().getTime() + response.data.expiresIn * 1000);\n                localStorage.setItem('token', response.data.idToken);\n                localStorage.setItem('expirationDate', expirationDate);\n                localStorage.setItem('userId', response.data.localId);\n                localStorage.setItem('username', username);\n\n                dispatch(authSucceed(response.data.idToken, response.data.localId, username));\n                dispatch(checkAuthTimeout(response.data.expiresIn));\n\n                const user = {\n                    userId: response.data.localId,\n                    username: username\n                };\n                return axios.post(\"https://debug-viewer.firebaseio.com/users.json\", user);\n            })\n            .then(response => {\n                // do nothing\n            })\n            .catch(error => {\n                console.log(error.response.data.error);\n                dispatch(authFailed(error.response.data.error))\n            })\n    }\n};\n\nexport const authCheckState = () => {\n    return dispatch => {\n        const token = localStorage.getItem('token');\n        if (!token) {\n            dispatch(logout());\n        }\n        else {\n            const userId = localStorage.getItem('userId');\n            const username = localStorage.getItem('username');\n            const expirationDate = new Date(localStorage.getItem('expirationDate'));\n            if (expirationDate > new Date()) {\n                const timeLeft = expirationDate.getTime() - new Date().getTime()\n                dispatch(authSucceed(token, userId, username));\n                dispatch(checkAuthTimeout(timeLeft / 1000));\n            }\n            else {\n                dispatch(logout());\n            }\n        }\n    }\n};\n\n","import React, {Component} from 'react';\nimport {Route, Switch, withRouter} from 'react-router-dom';\n\nimport AppBody from './AppBody';\nimport HeaderComponent from './components/Layout/HeaderComponent/HeaderComponent';\n// import Signup from './containers/Auth/SignUp/Signup';\n// import Login from './containers/Auth/Login/Login';\n// import Logout from './containers/Auth/Logout';\nimport {connect} from 'react-redux';\n\nimport './App.css';\n\n// import CloudDocument from './components/Constructions/CloudDocument';\nimport Demo from './components/Constructions/Demo';\n// import BooleanTest from './components/Constructions/BooleanTest';\nimport SkeletonRecognition from './components/Constructions/SkeletonRecognition';\nimport CollisionDemo from \"./components/Constructions/CollisionDemo\";\nimport Spinner from \"./components/UI/Spinner/Spinner\";\n// import DocumentsComponent from \"./containers/DocumentsComponent/DocumentsComponent\";\nimport * as authActions from \"./store/actions/auth\";\n\nclass App extends Component {\n    componentDidMount() {\n        this.props.authCheckState();\n    }\n    componentDidUpdate() {\n        if (this.props.location.pathname === '/' && this.props.document.id !== undefined) {\n            this.props.history.push(\"/documents/\" + this.props.document.id)\n        }\n\n        // if (this.props.location.pathname.split('/').length > 2 &&\n        //     this.props.location.pathname.split('/')[2].length > 0 &&\n        //     this.props.document.id === undefined) {\n        //     this.props.history.push(\"/\");\n        // }\n    }\n\n    render() {\n        return (\n            <div className=\"App\">\n                <HeaderComponent\n                    title={this.props.title}\n                    version={this.props.version}\n                    isAuthenticated={this.props.isAuthenticated}\n                    username={this.props.username}\n                />\n\n                <AppBody/>\n\n                <Switch>\n                    {/*<Route path=\"/documents\" exact component={DocumentsComponent}/>*/}\n                    {/*<Route path=\"/signup\" component={Signup} />*/}\n                    {/*<Route path=\"/login\" component={Login} />*/}\n                    {/*<Route path=\"/logout\" component={Logout} />*/}\n\n                    <Route path=\"/demo\" exact component={Demo}/>\n                    {/*<Route path=\"/\" component={AppBody}/>*/}\n\n                    {/*<Route path=\"/documents/:id\" component={CloudDocument}/>*/}\n\n\n                    <Route path=\"/skeleton\" component={SkeletonRecognition}/>\n                    <Route path=\"/collision-distance\" component={CollisionDemo}/>\n\n                </Switch>\n\n                {this.props.showSpinner ? <Spinner/> : null}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = ({auth, app, cloudStorage}) => {\n    return {\n        title: app.title,\n        version: app.version,\n        showSpinner: app.showSpinner,\n        document: cloudStorage.document,\n        isAuthenticated: auth.token !== null,\n        username: auth.username\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        authCheckState: () => dispatch(authActions.authCheckState())\n    }\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(App));\n\n/*\n                    <Route path=\"/boolean-test\" component={BooleanTest}/>\n */","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {createStore, applyMiddleware, compose} from 'redux';\nimport {Provider} from 'react-redux';\nimport thunk from 'redux-thunk';\nimport {BrowserRouter} from 'react-router-dom';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport reducer from './store/reducer';\nimport log from './middleware/log';\n// import readFiles from './middleware/readFiles';\nimport pasteData from './middleware/pasteData';\nimport stageController from './middleware/stageController';\nimport skeleton_recognition from './middleware/skeleton_recognition';\nimport App from \"./App\";\n\nimport './index.css';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(reducer,\n    composeEnhancers(\n        applyMiddleware(log, pasteData, skeleton_recognition, stageController, thunk)\n    )\n);\n\nReactDOM.render(\n    <Provider store={store}>\n        <BrowserRouter basename={process.env.PUBLIC_URL}>\n            <App/>\n        </BrowserRouter>\n    </Provider>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__ZRIQC\",\"IconTrigger\":\"Button_IconTrigger__3UsvH\",\"IconModeActive\":\"Button_IconModeActive__33wYT\",\"IconModeNotActive\":\"Button_IconModeNotActive__2mK3K\",\"DrawerButton\":\"Button_DrawerButton__29vkr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"UploadPopup\":\"UploadPopup_UploadPopup__30N0W\",\"fadeIn\":\"UploadPopup_fadeIn__1hmSa\",\"UploadTarget\":\"UploadPopup_UploadTarget__1gw3w\",\"UploadTargetDragLeave\":\"UploadPopup_UploadTargetDragLeave__1MlZ6\",\"UploadTargetDragOver\":\"UploadPopup_UploadTargetDragOver__322O6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer\":\"LayerListElement_Layer__1WgQk\",\"LayerSelectionBox\":\"LayerListElement_LayerSelectionBox__2DXrV\",\"LayerSelectionMark\":\"LayerListElement_LayerSelectionMark__2zYS5\",\"LayerNameBox\":\"LayerListElement_LayerNameBox__1m2fQ\",\"Layer-displayed\":\"LayerListElement_Layer-displayed__223Ba\",\"Layer-undisplayed\":\"LayerListElement_Layer-undisplayed__3_DcN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ButtonSeparator\":\"ButtonSeparator_ButtonSeparator__2hXOe\",\"IconSeparator\":\"ButtonSeparator_IconSeparator__1LZbY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-toolbar\":\"ToolbarComponent_App-toolbar__3E3eP\",\"App-toolbar-units\":\"ToolbarComponent_App-toolbar-units__3ug9X\",\"DrawerButton\":\"ToolbarComponent_DrawerButton__3u3jP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BackDrop\":\"ModalPopup_BackDrop__3HTI8\",\"ModalPopup\":\"ModalPopup_ModalPopup__yAVS4\",\"fadeIn\":\"ModalPopup_fadeIn__3ymPT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-layers\":\"LayersList_App-layers__dDR80\",\"App-layers-displayed\":\"LayersList_App-layers-displayed__1Bq_a\",\"fadeIn\":\"LayersList_fadeIn__jzmIN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-header\":\"HeaderComponent_App-header__19h2h\",\"App-header-documents-page\":\"HeaderComponent_App-header-documents-page__2TPYD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BackDrop\":\"Spinner_BackDrop__19thA\",\"Loader\":\"Spinner_Loader__2rJlS\",\"load2\":\"Spinner_load2__2_wJ9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-canvas\":\"CanvasComponent_App-canvas__3v_so\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-status-bar\":\"StatusComponent_App-status-bar__21gqW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LabelsLayer\":\"labelsLayer_LabelsLayer__2RodY\",\"LabelComponent\":\"labelsLayer_LabelComponent__nMUCB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"VertexLabel\":\"VertexLabel_VertexLabel__33mho\",\"fadeIn\":\"VertexLabel_fadeIn__1X9i3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AboutPopup\":\"AboutPopup_AboutPopup__2Ghnq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DownloadPopup\":\"DownloadPopup_DownloadPopup__cTKTB\",\"fadeIn\":\"DownloadPopup_fadeIn__3zx4f\",\"Open\":\"DownloadPopup_Open__1XqIT\",\"Close\":\"DownloadPopup_Close__r-CbX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Snackbar\":\"Snackbar_Snackbar__1PFDn\",\"fadeInOut\":\"Snackbar_fadeInOut__3embo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Main-content\":\"MainComponent_Main-content__1ZoSP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer-list-toolbar\":\"LayerListToolbar_Layer-list-toolbar__GYX1Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Layer-edit-form\":\"LayerEditForm_Layer-edit-form__ihOJE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App-aside\":\"AsideComponent_App-aside__1yhWy\"};"],"sourceRoot":""}